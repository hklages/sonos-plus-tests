[{"id":"55805384.a4695c","type":"tab","label":"Sandbox","disabled":false,"info":""},{"id":"775d7a2a.44f234","type":"tab","label":"Manage Queue ","disabled":false,"info":""},{"id":"405b0e15.987b5","type":"tab","label":"Universal","disabled":false,"info":""},{"id":"fcb24b59.997048","type":"tab","label":"Commands","disabled":false,"info":""},{"id":"25081f9e.f5f34","type":"tab","label":"Complex","disabled":false,"info":""},{"id":"99e6906e.c69df","type":"tab","label":"Old Commands","disabled":false,"info":""},{"id":"4318847d.0693cc","type":"tab","label":"Old Complex","disabled":false,"info":""},{"id":"a0a649cc.ca04e8","type":"tab","label":"Validate messages","disabled":true,"info":""},{"id":"91448cef.2efc9","type":"tab","label":"Miele","disabled":true,"info":""},{"id":"d65eded3.250b9","type":"subflow","name":"HandleErrors","info":"","category":"","in":[{"x":61,"y":79,"wires":[{"id":"6b0e515b.e62cd"}]}],"out":[],"env":[{"name":"Tabname","type":"str","value":"unknown","ui":{"type":"input","opts":{"types":["str"]},"label":{}}},{"name":"DebugToMobile","type":"bool","value":"false","ui":{"type":"input","opts":{"types":["bool"]},"label":{}}},{"name":"KeyVariable","type":"str","value":"system_keyTasker","ui":{"type":"input","opts":{"types":["str"]},"label":{}}}],"color":"#E9967A","icon":"node-red/alert.svg"},{"id":"24092027.ab82","type":"subflow","name":"get bearer","info":"Get a new bearer and refresh token and stores it in global variables. \n\nThe global variables system_bearerMiele and system_refreshMiele are being used.","category":"Miele","in":[{"x":30,"y":63,"wires":[{"id":"85119bed.21b168"}]}],"out":[{"x":1221,"y":43,"wires":[{"id":"430fd0da.a6602","port":0}]}],"env":[{"name":"vg","type":"str","value":"de-DE","ui":{"label":{"en-US":"Country"},"type":"select","opts":{"opts":[{"l":{"en-US":"Germany"},"v":"de-DE"}]}}},{"name":"doRefresh","type":"bool","value":"false","ui":{"label":{"en-US":"Use refresh token"},"type":"checkbox","opts":{}}}],"color":"#A70625","inputLabels":["client and user credentials"],"outputLabels":["Miele reponse object"],"icon":"font-awesome/fa-key","status":{"x":1221,"y":254,"wires":[{"id":"ccdd1aa3.d7afe8","port":0},{"id":"afceb2f2.d18f3","port":0},{"id":"4400b51a.44eacc","port":0}]}},{"id":"ea970db4.5106b","type":"subflow","name":"get all appliances","info":"Get a list of all appliances with indentification and state.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":80,"wires":[{"id":"eaf22f71.d9969"}]}],"out":[{"x":1119,"y":74,"wires":[{"id":"a35f8dee.9f18f","port":0}]}],"env":[{"name":"language","type":"str","value":"en","ui":{"label":{"en-US":"Language"},"type":"select","opts":{"opts":[{"l":{"en-US":"English"},"v":"en"},{"l":{"en-US":"Deutsch"},"v":"de"}]}}}],"color":"#A70625","inputLabels":["just trigger"],"outputLabels":["appliance list in household"],"icon":"font-awesome/fa-list-ul","status":{"x":1120,"y":220,"wires":[{"id":"fe83c7a3.1ef478","port":0},{"id":"84b66c9d.f62ef","port":0},{"id":"681dd18d.1baa4","port":0}]}},{"id":"aeba9414.6f40a8","type":"subflow","name":"get appliance","info":"Get an object with identification and state data for the given appliance id.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":97,"wires":[{"id":"a260e272.ea783"}]}],"out":[{"x":1143,"y":33,"wires":[{"id":"3da93881.b6e868","port":0}]}],"env":[{"name":"language","type":"str","value":"en","ui":{"label":{"en-US":"Language"},"type":"select","opts":{"opts":[{"l":{"en-US":"English"},"v":"en"},{"l":{"en-US":"Deutsch"},"v":"de"}]}}}],"color":"#A70625","inputLabels":["appliance id as payload"],"outputLabels":["appliance identification and state"],"icon":"font-awesome/fa-info","status":{"x":1140,"y":164,"wires":[{"id":"dd906f4c.1361a","port":0},{"id":"fd32a717.878c28","port":0},{"id":"96a3026.b505b","port":0}]}},{"id":"4ae29caa.8056e4","type":"subflow","name":"get actions","info":"Get an object with all valid actions for the given appliance id at the current appliance state.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":88,"wires":[{"id":"d3015191.5633d"}]}],"out":[{"x":1099,"y":38,"wires":[{"id":"c8655abf.93b328","port":0}]}],"env":[],"color":"#A70625","inputLabels":["appliance id"],"outputLabels":["all actions"],"icon":"node-red/debug.svg","status":{"x":1099,"y":158,"wires":[{"id":"2c02bcd4.dc63d4","port":0},{"id":"1455fb1d.b32055","port":0},{"id":"d9bc2537.715df8","port":0}]}},{"id":"ad607e01.511ea","type":"subflow","name":"set action","info":"Set (execute) an action for the given appliance. Valid action depend on kind of appliance and state!","category":"Miele","in":[{"x":40,"y":75,"wires":[{"id":"2542e5f6.b0fd8a"}]}],"out":[{"x":1011,"y":74,"wires":[{"id":"21b0eeb.798de12","port":0}]}],"env":[],"color":"#A70625","inputLabels":["appliance id in payload and an action "],"outputLabels":["result"],"icon":"font-awesome/fa-angle-double-right","status":{"x":1010,"y":240,"wires":[{"id":"e4fefa21.402038","port":0},{"id":"9ebcdded.4fad9","port":0},{"id":"ebacb8a0.327d58","port":0}]}},{"id":"69e44f53.5d62f","type":"subflow","name":"Subflow 1","info":"","category":"","in":[{"x":60,"y":80,"wires":[{"id":"4cc2813d.75068"}]}],"out":[{"x":580,"y":80,"wires":[{"id":"ccdfdd96.2d83e","port":0}]}],"env":[{"name":"subflowProperty","type":"str","value":"Hi Sub"}],"color":"#DDAA99"},{"id":"88e9fa70.4a53e8","type":"sonos-config","z":"","name":"coordinator","serialnum":"5C-AA-FD-00-22-36:1","ipaddress":"192.168.178.37"},{"id":"c747354a.95e5e8","type":"sonos-config","z":0,"name":"no ip but correct serial number","serialnum":"94-9F-3E-C1-3B-99:8","ipaddress":""},{"id":"9037fbab.1d8408","type":"sonos-config","z":0,"name":"fritzbox ip address","serialnum":"","ipaddress":"192.168.178.1"},{"id":"64704482.34d37c","type":"sonos-config","z":0,"name":"ip address with wrong syntax","serialnum":"","ipaddress":"191168.178.41"},{"id":"ff297616.de3c88","type":"sonos-config","z":0,"name":"no ip address & invalid serial","serialnum":"5C-AA-FD22-36:1","ipaddress":""},{"id":"8d44022c.adb65","type":"sonos-config","z":"","name":"living","serialnum":"94-9F-3E-C1-3B-99:8","ipaddress":"192.168.178.36"},{"id":"32a98882.56e1c8","type":"sonos-config","z":"","name":"bath","serialnum":"00-0E-58-FE-3A-EA:5","ipaddress":"192.168.178.35"},{"id":"2113e9bb.c52236","type":"sonos-config","z":"","name":"variable","serialnum":"B8-E9-37-58-31-C0:A","ipaddress":"192.168.178.38"},{"id":"8945d5a5.31aef8","type":"polly-config","z":"","name":"pollyaws"},{"id":"efdd332a.0b675","type":"inject","z":"99e6906e.c69df","name":"","topic":"2","payload":"play.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":880,"wires":[["ec1960b5.00b3f"]]},{"id":"d3c4b5a7.528288","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"clear.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":329,"wires":[["fc8ec1ee.dada8"]]},{"id":"6280f87a.0562c8","type":"change","z":"4318847d.0693cc","name":"queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"queue","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Best of Prime","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":301,"y":331,"wires":[["5fe3a2ed.eb907c"]]},{"id":"744d729c.ee78dc","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":552,"y":371,"wires":[]},{"id":"8dd4792.76eb088","type":"comment","z":"4318847d.0693cc","name":"Example 3: Replace SONOS queue without playing","info":"","x":195,"y":296,"wires":[]},{"id":"e2d2580b.4557e8","type":"inject","z":"4318847d.0693cc","name":"","topic":"Arabella","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":56,"wires":[["aa2e6460.b540a8"]]},{"id":"5d8ef2c9.43ff1c","type":"change","z":"4318847d.0693cc","name":"get.trackplus","rules":[{"t":"set","p":"payload","pt":"msg","to":"get.trackplus","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":718,"y":71,"wires":[["fa5800f0.d6f4c"]]},{"id":"6bbf67aa.5b6638","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1023,"y":71,"wires":[]},{"id":"faf9af99.954a4","type":"inject","z":"4318847d.0693cc","name":"","topic":"Best Of Lovesongs","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":95,"wires":[["aa2e6460.b540a8"]]},{"id":"e4646c63.7ee1f","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":567,"y":71,"wires":[["5d8ef2c9.43ff1c"]]},{"id":"f7c7fcf2.8c6ed","type":"comment","z":"4318847d.0693cc","name":"Example 1:  Play (TuneIn, Amazon) radio station using My Sonos and retrieve title, ...","info":"","x":295,"y":20,"wires":[]},{"id":"33494d25.d17ca2","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":252,"wires":[["4ed9c170.a95e9"]]},{"id":"6a1d28c8.fea828","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":993,"y":484,"wires":[["4ed9c170.a95e9"]]},{"id":"2a44a257.0f6ffe","type":"inject","z":"99e6906e.c69df","name":"","topic":"2","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1045,"wires":[["ec1960b5.00b3f"]]},{"id":"1fc5c102.abee9f","type":"comment","z":"4318847d.0693cc","name":"Example 4: Line in Play:5 / TV Beam or Playbar","info":"","x":185,"y":437,"wires":[]},{"id":"8978d019.4e76e","type":"switch","z":"4318847d.0693cc","name":"","property":"payload.modelName","propertyType":"msg","rules":[{"t":"eq","v":"Sonos Play:5","vt":"str"},{"t":"eq","v":"Sonos Beam","vt":"str"},{"t":"eq","v":"Sonos Playbar","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":455,"y":471,"wires":[["de574d05.b6a53"],["e7542013.832ae"],["e7542013.832ae"]]},{"id":"de574d05.b6a53","type":"change","z":"4318847d.0693cc","name":"line in","rules":[{"t":"set","p":"topic","pt":"msg","to":"'x-rincon-stream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":589,"y":442,"wires":[["41f8648f.bd838c"]]},{"id":"77db7f57.751e9","type":"comment","z":"4318847d.0693cc","name":"Example 5: Play Playlist from Music Library","info":"","x":165,"y":556,"wires":[]},{"id":"2172120a.6207ae","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"clear.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":590,"wires":[["fad22422.5dcc88"]]},{"id":"b1f4e729.e2d8f8","type":"change","z":"4318847d.0693cc","name":"activate queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":792,"y":590,"wires":[["ab1e13ab.c7d74"]]},{"id":"ff1ec5fc.0cff68","type":"inject","z":"4318847d.0693cc","name":"","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Playlists/MLAdele.wpl","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":477,"y":666,"wires":[["9e0d7aee.907268"]]},{"id":"225eea23.4db686","type":"comment","z":"4318847d.0693cc","name":"or direct","info":"","x":477,"y":634,"wires":[]},{"id":"d890d3f3.68cd6","type":"inject","z":"4318847d.0693cc","name":"mute","topic":"On","payload":"set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":771,"wires":[["f9e99c11.a8edc","24a0a7e6.ae3b08"]]},{"id":"f9e99c11.a8edc","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":223,"y":793,"wires":[["a65048e1.879f98"]]},{"id":"98119167.abb2e","type":"change","z":"4318847d.0693cc","name":"stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":733,"y":793,"wires":[["24a0a7e6.ae3b08"]]},{"id":"418f0e18.4cf29","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":569,"y":843,"wires":[["61b7db70.f099d4"]]},{"id":"61b7db70.f099d4","type":"change","z":"4318847d.0693cc","name":"unmute","rules":[{"t":"set","p":"payload","pt":"msg","to":"set.mutestate","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":743,"y":843,"wires":[["24a0a7e6.ae3b08"]]},{"id":"a65048e1.879f98","type":"change","z":"4318847d.0693cc","name":"play tuneIn station","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":392,"y":793,"wires":[["418f0e18.4cf29","9cfa79ba.d93968"]]},{"id":"e7542013.832ae","type":"change","z":"4318847d.0693cc","name":"tv (line in)","rules":[{"t":"set","p":"topic","pt":"msg","to":"'x-sonos-htastream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400:spdif'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":599,"y":502,"wires":[["41f8648f.bd838c","243370d4.f112d"]]},{"id":"41f8648f.bd838c","type":"change","z":"4318847d.0693cc","name":"activate line","rules":[{"t":"set","p":"payload","pt":"msg","to":"player.play.avtransport","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":751,"y":471,"wires":[["a6111a85.251f68"]]},{"id":"610c7f81.c561","type":"inject","z":"99e6906e.c69df","name":"","topic":"normal","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":945,"wires":[["ec1960b5.00b3f"]]},{"id":"8638cd91.2bd02","type":"inject","z":"99e6906e.c69df","name":"","topic":"shuffle","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":913,"wires":[["ec1960b5.00b3f"]]},{"id":"625148f2.018378","type":"change","z":"4318847d.0693cc","name":"insert playlist","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"MLAdele","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":434,"y":590,"wires":[["9e0d7aee.907268"]]},{"id":"497dc083.e5d35","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":100,"wires":[["9124b25e.5e7bb"]]},{"id":"9124b25e.5e7bb","type":"function","z":"a0a649cc.ca04e8","name":"xyz does not exist","func":"msg.payload = 'hallo';\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":100,"wires":[["bcf459fe.1b0ad8"]]},{"id":"e180e70c.33b628","type":"function","z":"a0a649cc.ca04e8","name":"xyz is null","func":"msg.payload.xyz = null;\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":196,"wires":[["bcf459fe.1b0ad8"]]},{"id":"351eb48c.4094ac","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":196,"wires":[["e180e70c.33b628"]]},{"id":"c54adc23.e480e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":468,"wires":[["305adb80.ed3b84","63a7db00.cc8604"]]},{"id":"305adb80.ed3b84","type":"function","z":"a0a649cc.ca04e8","name":"xyz string is OK ","func":"msg.payload = { 'xyz':'richtiger String'};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":468,"wires":[["bcf459fe.1b0ad8"]]},{"id":"47d40166.41248","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":356,"wires":[["22871aaa.f17016"]]},{"id":"22871aaa.f17016","type":"function","z":"a0a649cc.ca04e8","name":"xyz empty string","func":"msg.payload = {\"xyz\":''};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":356,"wires":[["bcf459fe.1b0ad8"]]},{"id":"a4f89f5b.58eb4","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":98,"wires":[["c7fabc9b.407e1"]]},{"id":"c7fabc9b.407e1","type":"change","z":"a0a649cc.ca04e8","name":"payload does not exist","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":98,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"7cd29440.2439fc","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":194,"wires":[["892f9664.8696f8"]]},{"id":"892f9664.8696f8","type":"function","z":"a0a649cc.ca04e8","name":"payload null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":194,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"b9b94e98.ceb2e","type":"comment","z":"a0a649cc.ca04e8","name":"Objective of this tab - Documentation","info":"# Introduction\nOften errors occures because objects or part of objects are not initialized or hold invalid values. This causes errors in following flows. \n\n# Solution\nThe path of every property is being intensively checked: **undefined, null, empty string** and not value \"**NaN**\".\n\nNaN is a strange one. It can be exclued by testing \"msg.payload !== msg.payload\" or by testing \"(typeof msg.payload === 'number' && isNaN(msg.payload))\"\n\nThe second one is longer but more obsious. \n\nIn case of msg.propLevel1.propLevel2 I do test all elements except msg. Msg is given and can not be null or undefined. ","x":145,"y":20,"wires":[]},{"id":"ed0da7d.7d64e58","type":"function","z":"a0a649cc.ca04e8","name":"payload empty string","func":"msg.payload = '';\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":354,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"ae986c34.34ae5","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":354,"wires":[["ed0da7d.7d64e58"]]},{"id":"96ba426e.4e8e1","type":"function","z":"a0a649cc.ca04e8","name":"payload string","func":"msg.payload = 'payload text there';\nreturn msg;","outputs":1,"noerr":0,"x":281,"y":477,"wires":[["e3f119eb.d44758"]]},{"id":"db6427c6.b0c728","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":477,"wires":[["96ba426e.4e8e1"]]},{"id":"83ec348e.2b3848","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":500,"wires":[["7a9b4e0.b2f0ab4"]]},{"id":"7a9b4e0.b2f0ab4","type":"function","z":"a0a649cc.ca04e8","name":"xyz number is ok","func":"msg.payload = {\"xyz\": 5};\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":500,"wires":[["bcf459fe.1b0ad8"]]},{"id":"2a76f526.64ae8a","type":"comment","z":"a0a649cc.ca04e8","name":"validation of msg.payload","info":"","x":115,"y":63,"wires":[]},{"id":"3a375663.e13d9a","type":"function","z":"a0a649cc.ca04e8","name":"payload does not exist","func":"msg  = {'o': 'oooo'};\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":130,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"63d72607.f34638","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":130,"wires":[["3a375663.e13d9a"]]},{"id":"117da209.5252de","type":"function","z":"a0a649cc.ca04e8","name":"payload undefined","func":"msg.payload = undefined;\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":162,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"2dbcdfea.bf264","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":162,"wires":[["117da209.5252de"]]},{"id":"2ec859a5.f8eb66","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":226,"wires":[["de752d4c.21001"]]},{"id":"de752d4c.21001","type":"function","z":"a0a649cc.ca04e8","name":"payload NaN","func":"msg.payload = parseInt('Hallo');  // provides NaN\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":226,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"b3403a6f.c88838","type":"function","z":"a0a649cc.ca04e8","name":"payload number ","func":"msg.payload = 10;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":509,"wires":[["e3f119eb.d44758"]]},{"id":"1150c24c.b1ae2e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":509,"wires":[["b3403a6f.c88838"]]},{"id":"957f1041.a180b","type":"function","z":"a0a649cc.ca04e8","name":"payload array","func":"msg.payload = [];\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":541,"wires":[["e3f119eb.d44758"]]},{"id":"d8d75b12.f06148","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":541,"wires":[["957f1041.a180b"]]},{"id":"d7b0c62c.795398","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":573,"wires":[["d0fed59c.990ac8"]]},{"id":"d0fed59c.990ac8","type":"function","z":"a0a649cc.ca04e8","name":"payload object ","func":"msg.payload = {'something':'Hallo'};\nreturn msg;","outputs":1,"noerr":0,"x":281,"y":573,"wires":[["e3f119eb.d44758"]]},{"id":"ec88ae1e.ff4b6","type":"function","z":"a0a649cc.ca04e8","name":"payload object ","func":"msg.payload = {'something': undefined};\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":605,"wires":[["e3f119eb.d44758"]]},{"id":"d80d6e9c.59f3e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":605,"wires":[["ec88ae1e.ff4b6"]]},{"id":"e3d3b952.dd6838","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":637,"wires":[["6e895944.0c26f8"]]},{"id":"6e895944.0c26f8","type":"function","z":"a0a649cc.ca04e8","name":"payload parseInt('5') ","func":"msg.payload = parseInt('5');\nreturn msg;","outputs":1,"noerr":0,"x":301,"y":637,"wires":[["e3f119eb.d44758"]]},{"id":"f507b549.24e008","type":"function","z":"a0a649cc.ca04e8","name":"payload parseInt(5) ","func":"msg.payload = parseInt(5);\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":670,"wires":[["e3f119eb.d44758"]]},{"id":"a201018b.af083","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":670,"wires":[["f507b549.24e008"]]},{"id":"1d4a5f09.801521","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":164,"wires":[["65a613f5.8794dc"]]},{"id":"65a613f5.8794dc","type":"function","z":"a0a649cc.ca04e8","name":"xyz undefined","func":"msg.payload.xyz = undefined;\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":164,"wires":[["bcf459fe.1b0ad8"]]},{"id":"fe262f00.41ee9","type":"function","z":"a0a649cc.ca04e8","name":"xyz does not exist","func":"msg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":132,"wires":[["bcf459fe.1b0ad8"]]},{"id":"3c32d77.e212a28","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":132,"wires":[["fe262f00.41ee9"]]},{"id":"2e25b173.d1dd2e","type":"function","z":"a0a649cc.ca04e8","name":"xyz NaN","func":"msg.payload.xyz = parseInt('Hallo'); // NaN\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":228,"wires":[["bcf459fe.1b0ad8"]]},{"id":"e6f0a81b.1a9dc8","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":228,"wires":[["2e25b173.d1dd2e"]]},{"id":"74bc604d.fd188","type":"comment","z":"a0a649cc.ca04e8","name":"validation of msg.payload.xyz","info":"","x":665,"y":67,"wires":[]},{"id":"6c500479.64f93c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":532,"wires":[["7a8f82dd.bf758c"]]},{"id":"7a8f82dd.bf758c","type":"function","z":"a0a649cc.ca04e8","name":"xyz object  is ok","func":"msg.payload = {'xyz': {}};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":532,"wires":[["bcf459fe.1b0ad8"]]},{"id":"c2fe0b5f.2c5c38","type":"function","z":"a0a649cc.ca04e8","name":"xyz array  is ok","func":"msg.payload = { 'xyz': []};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":564,"wires":[["bcf459fe.1b0ad8"]]},{"id":"75ca332f.81145c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":564,"wires":[["c2fe0b5f.2c5c38"]]},{"id":"e3f119eb.d44758","type":"function","z":"a0a649cc.ca04e8","d":true,"name":"validate msg.payload","func":"/** Validate msg.payload\n * \n*/\n\n// old version: \n// if (typeof msg.payload === 'undefined' || msg.payload === null || (typeof msg.payload === 'number' && isNaN(msg.payload)) || msg.payload === '') {\n\nif (typeof msg.payload === 'undefined' || msg.payload === null || (typeof msg.payload === 'number' && !Number.isFinite(msg.payload)) || msg.payload ==='') {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok', msg);\n}\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":700,"wires":[[]]},{"id":"71e12096.9b21c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":258,"wires":[["892e2d7e.c143"]]},{"id":"892e2d7e.c143","type":"function","z":"a0a649cc.ca04e8","name":"payload NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":271,"y":258,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"bcf459fe.1b0ad8","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload","func":"/** Validate msg.payload.xyz\n * \n*/\nif (!isValidProperty(msg, ['payload', 'xyz'])) {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok', msg);\n}\nreturn msg;\n\nfunction isValidProperty(nestedObj, pathArray){\n    const property = pathArray.reduce(\n      (obj, key) => (obj && obj[key] !== 'undefined' ? obj[key] : undefined),\n      nestedObj\n    )\n    return typeof property !== 'undefined'\n  }","outputs":1,"noerr":0,"x":1040,"y":670,"wires":[[]]},{"id":"21af558b.13c2ba","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":260,"wires":[["65d7d2d2.d82a5c"]]},{"id":"65d7d2d2.d82a5c","type":"function","z":"a0a649cc.ca04e8","name":"xyz NaN","func":"msg.payload.xyz = NaN; // NaN\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":260,"wires":[["bcf459fe.1b0ad8"]]},{"id":"b12a4877.40ad38","type":"comment","z":"a0a649cc.ca04e8","name":"Following are all OK","info":"","x":110,"y":443,"wires":[]},{"id":"cf30cfb3.f7a6","type":"comment","z":"a0a649cc.ca04e8","name":"Following are all OK","info":"","x":635,"y":436,"wires":[]},{"id":"dd1ad5ab.e8b008","type":"http request","z":"d65eded3.250b9","name":"","method":"POST","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","authType":"basic","x":720,"y":60,"wires":[[]]},{"id":"1bbc7a30.e4cbe6","type":"template","z":"d65eded3.250b9","name":"define url","field":"url","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"https://autoremotejoaomgcd.appspot.com/sendnotification?key={{key}}&title=\"HomeService Error Message\"&text={{payload}};\n","output":"str","x":570,"y":60,"wires":[["dd1ad5ab.e8b008"]]},{"id":"6b0e515b.e62cd","type":"function","z":"d65eded3.250b9","name":"define/send error message","func":"/** Send error message to TASKER if debugToMobile is true\n* GITHUB subflow handle errors\n* @since 2019-10-13T1931\n* PREREQ: uses TASKER autoremote and needs key, stored in global variable\n*/\n\n  const unknown = 'unbekannt';\n\n  let errorTab = env.get('Tabname');\n  if (typeof errorTab === 'undefined' || errorTab === null || errorTab === '') {\n    errorTab = unknown;\n    node.warn('Tabname not defined');\n  }\n\n  let errorNodeName = unknown;\n  let errorNodeType = unknown;\n  let errorNodeId = unknown;\n  let errorMessage = unknown;\n  if (typeof msg.error === 'undefined' || msg.error === null || msg.error === '') {\n    // no infos - use default text above\n  } else {\n    if (typeof msg.error.source === 'undefined' || msg.error.source === null || msg.error.source === '') {\n      // no source infos - use default text above\n    } else {\n      if (typeof msg.error.source.name === 'undefined' || msg.error.source.name === null || msg.error.source.name === '') {\n        // use default text above\n      } else {\n        errorNodeName = msg.error.source.name;\n      }\n      if (typeof msg.error.source.type === 'undefined' || msg.error.source.type === null || msg.error.source.type === '') {\n        // use default text above\n      } else {\n        errorNodeType = msg.error.source.type;\n      }\n      if (typeof msg.error.source.id === 'undefined' || msg.error.source.id === null || msg.error.source.id === '') {\n        // use default text\n      } else {\n        errorNodeId = msg.error.source.id;\n      }\n    }\n    if (typeof msg.error.message === 'undefined' || msg.error.message === null || msg.error.message === '') {\n      // no infos - use default text\n    } else {\n      errorMessage = msg.error.message;\n    }\n  }\n  const fullMessage = `Fehler in TAB: ${errorTab} NODENAME: ${errorNodeName} NODETYPE: ${errorNodeType} NODEID: ${errorNodeId} DETAIL: ${errorMessage}`;\n\n  let msgUIandLog = { payload: fullMessage };\n\n  let msgMobile;\n  if (env.get('DebugToMobile')) {\n    const keyVariableName = env.get('KeyVariable'); // first get name of global variable\n    if (typeof keyVariableName === 'undefined' || keyVariableName === null || keyVariableName === '') {\n      node.error('Error in subflow: handle error: Invalid key variable name');\n      msgMobile = null; // no message\n      msgUIandLog = null; // no message\n    } else {\n      const key = global.get(keyVariableName);\n      if (typeof key === 'undefined' || key === null || key === '') {\n        node.error('Error in subflow: handle error: Key variable not defined or key invalid');\n        msgMobile = null; // no message\n        msgUIandLog = null; // no message\n      } else {\n        msgMobile = { payload: fullMessage, key: key };\n      }\n    }\n  } else {\n    msgMobile = null; // not message\n  }\n  return [msgMobile, msgUIandLog];\n\n","outputs":2,"noerr":0,"x":280,"y":80,"wires":[["1bbc7a30.e4cbe6"],["337e0a88.64b546"]],"outputLabels":["email data",""]},{"id":"337e0a88.64b546","type":"debug","z":"d65eded3.250b9","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"payload","targetType":"msg","x":590,"y":120,"wires":[]},{"id":"1cbfc88a.82bef7","type":"subflow:d65eded3.250b9","z":"55805384.a4695c","name":"","env":[{"name":"Tabname","value":"Sandbox","type":"str"},{"name":"DebugToMobile","value":"true","type":"bool"}],"x":610,"y":20,"wires":[]},{"id":"ca8b047.c6229f8","type":"catch","z":"55805384.a4695c","d":true,"name":"","scope":null,"uncaught":false,"x":440,"y":20,"wires":[["1cbfc88a.82bef7"]]},{"id":"9af19cc4.5706a","type":"comment","z":"775d7a2a.44f234","name":"msg.size ","info":"","x":121,"y":163,"wires":[]},{"id":"e4134f34.a564d","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":362,"y":203,"wires":[["d32d3c03.61ef1"]]},{"id":"a081172f.de7e58","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":113,"y":203,"wires":[["e4134f34.a564d"]]},{"id":"8208c58d.b37718","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":291,"wires":[]},{"id":"249fa767.71bb08","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":236,"wires":[["6d2ea1a0.4a7ab"]]},{"id":"6d2ea1a0.4a7ab","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":361,"y":236,"wires":[["d32d3c03.61ef1"]]},{"id":"f39f2932.5f5318","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":362,"y":269,"wires":[["d32d3c03.61ef1"]]},{"id":"6e2ca31a.2e100c","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":113,"y":269,"wires":[["f39f2932.5f5318"]]},{"id":"f06dff57.c0a35","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":341,"y":313,"wires":[["d32d3c03.61ef1"]]},{"id":"d974bf84.9321f","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":313,"wires":[["f06dff57.c0a35"]]},{"id":"38cf5a24.734d36","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":346,"wires":[["69c14ed9.cef51"]]},{"id":"69c14ed9.cef51","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":346,"wires":[["d32d3c03.61ef1"]]},{"id":"29767623.36181a","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":341,"y":379,"wires":[["d32d3c03.61ef1"]]},{"id":"1e1b60be.3ad4bf","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":379,"wires":[["29767623.36181a"]]},{"id":"2143919d.6b952e","type":"comment","z":"775d7a2a.44f234","name":"Results","info":"There are 3 playlists. \nSo with size 2,3 there should be a Warning","x":652,"y":203,"wires":[]},{"id":"bc08b969.5611a8","type":"inject","z":"775d7a2a.44f234","name":"insert_uri  song from ML","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":159,"y":66,"wires":[["22888d78.e458b2"]]},{"id":"ed16ee64.4d4eb","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"player.set.led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":518,"y":591,"wires":[["7213ff0a.27d93"]]},{"id":"62c8c05b.eba5e","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"player.set.led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":518,"y":623,"wires":[["7213ff0a.27d93"]]},{"id":"bb0f52c0.7945a","type":"comment","z":"775d7a2a.44f234","name":"MANAGE QUEUE","info":"","x":95,"y":21,"wires":[],"icon":"node-red/alert.svg"},{"id":"59d5d6c2.7337a8","type":"inject","z":"775d7a2a.44f234","name":"insert_uri  album from ML","topic":"x-rincon-playlist:RINCON_000E58FE3AEA01400#A:ALBUM/Diamond%20Life","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":169,"y":99,"wires":[["22888d78.e458b2"]]},{"id":"e5c4eab4.b04df8","type":"comment","z":"4318847d.0693cc","name":"Example 7: Group players","info":"","x":115,"y":915,"wires":[]},{"id":"62a1b89.7509d48","type":"change","z":"4318847d.0693cc","name":"play swr3 on coordinator","rules":[{"t":"set","p":"payload","pt":"msg","to":"stream","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SWR3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":271,"y":949,"wires":[["435d406c.05c4e"]]},{"id":"ad8671c9.08f85","type":"inject","z":"4318847d.0693cc","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":949,"wires":[["62a1b89.7509d48"]]},{"id":"8af22d58.53aff","type":"change","z":"4318847d.0693cc","name":"join group","rules":[{"t":"set","p":"topic","pt":"msg","to":"Küche","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"player.join.group","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":951,"wires":[["d36c728b.5c65a"]]},{"id":"5fa4dbc.f66a224","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":590,"y":86,"wires":[]},{"id":"35be5578.80893a","type":"comment","z":"4318847d.0693cc","name":"Example 6: Set a morning station but dont play right now","info":"","x":215,"y":736,"wires":[]},{"id":"d82ccb20.029108","type":"inject","z":"99e6906e.c69df","name":"","topic":"2","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1077,"wires":[["a113a1ca.0a6d9"]]},{"id":"a113a1ca.0a6d9","type":"change","z":"99e6906e.c69df","name":"5 tracks","rules":[{"t":"set","p":"numberOfTracks","pt":"msg","to":"5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":1077,"wires":[["ec1960b5.00b3f"]]},{"id":"852d4b9d.122f98","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"set.crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":471,"wires":[["16182df1.06e562"]]},{"id":"5e8b717a.0e50f","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"player.set.loudness","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":216,"wires":[["16182df1.06e562"]]},{"id":"cfcde6d.e832118","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":284,"wires":[["4ed9c170.a95e9"]]},{"id":"c17ca575.002578","type":"inject","z":"99e6906e.c69df","name":"","topic":"00:05:00","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":535,"wires":[["16182df1.06e562"]]},{"id":"bf94a6dc.ab87b8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":316,"wires":[["4ed9c170.a95e9"]]},{"id":"7a547ae8.434b74","type":"inject","z":"99e6906e.c69df","name":"","topic":"00:01:00","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":151,"wires":[["16182df1.06e562"]]},{"id":"f9b5e2f1.62f17","type":"inject","z":"99e6906e.c69df","name":"","topic":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payload":"play.streamhttp","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":561,"y":935,"wires":[["ec1960b5.00b3f"]]},{"id":"b5c6d343.f8399","type":"inject","z":"99e6906e.c69df","name":"","topic":"http://www.fritz.de/live.m3u","payload":"play.streamhttp","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":561,"y":968,"wires":[["ec1960b5.00b3f"]]},{"id":"7b8c8849.3858f8","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"set.crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":503,"wires":[["16182df1.06e562"]]},{"id":"9e0d7aee.907268","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":609,"y":590,"wires":[["b1f4e729.e2d8f8"]]},{"id":"d32d3c03.61ef1","type":"sonos-manage-queue","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":702,"y":291,"wires":[["8208c58d.b37718"]]},{"id":"22888d78.e458b2","type":"sonos-manage-queue","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":440,"y":86,"wires":[["5fa4dbc.f66a224"]]},{"id":"3fdfbd94.502552","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":290,"wires":[["6d877017.25006"]]},{"id":"6d877017.25006","type":"function","z":"a0a649cc.ca04e8","name":"payload + infinite","func":"msg.payload = 1.0 / 0;\nnode.log(JSON.stringify(msg))\nreturn msg;","outputs":1,"noerr":0,"x":291,"y":290,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"2a300999.190196","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":322,"wires":[["acca6930.c13528"]]},{"id":"acca6930.c13528","type":"function","z":"a0a649cc.ca04e8","name":"payload - infinite","func":"msg.payload = -1.0/0;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":322,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"d14c2c12.1b404","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":292,"wires":[["ac808215.11ba7"]]},{"id":"d52b5af5.c6c438","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":324,"wires":[["73f496ef.b3cf78"]]},{"id":"73f496ef.b3cf78","type":"function","z":"a0a649cc.ca04e8","name":"xyz - infinite","func":"msg.payload.xyz = -1.0/0;\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":324,"wires":[["bcf459fe.1b0ad8"]]},{"id":"ac808215.11ba7","type":"function","z":"a0a649cc.ca04e8","name":"xyz + infinite","func":"//msg.payload.xyz = 1.0 / 0;\nmsg.payload.xyz = Number.POSITIVE_INFINITY;\nnode.log('>>>' + JSON.stringify(msg))\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":292,"wires":[["bcf459fe.1b0ad8"]]},{"id":"1bfcaa65.a2c6f6","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload - old","func":"/** Validate msg.payload.xyz\n * \n*/\n\nif (typeof msg.payload === 'undefined' || msg.payload === null || \n    (typeof msg.payload === 'number' && isNaN(msg.payload))) {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok');\n    if (typeof msg.payload.xyz === 'undefined' || msg.payload.xyz === null || \n        (typeof msg.payload.xyz === 'number' && isNaN(msg.payload.xyz))|| msg.payload.xyz ==='' ) {\n        node.error('invalid msg.payload.xyz', msg);\n        return;\n    } else {\n        node.warn('found ' + JSON.stringify(msg.payload.xyz)  + '... we can start processing');\n    }\n}\nreturn msg;","outputs":1,"noerr":0,"x":1030,"y":780,"wires":[[]]},{"id":"6e9d66f0.bc30b8","type":"function","z":"a0a649cc.ca04e8","name":"validate msg.payload.xyz -- throws error in case of undefined msg.payload","func":"/** Validate msg.payload.xyz\n * \n*/\n\nif (msg.payload.hasOwnProperty('xyz')) {\n    node.warn('found ' + JSON.stringify(msg.payload.xyz)  + '... we can start processing');\n} else {\n    node.error('invalid msg.payload.xyz', msg);\n}\n\nreturn msg;\n","outputs":1,"noerr":0,"x":880,"y":740,"wires":[[]]},{"id":"63a7db00.cc8604","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload","func":"/** Validate msg.payload.xyz\n * \n*/\nkey = ['payload', 'xzy']\nnode.debug(msg[key])\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":820,"wires":[[]]},{"id":"1cb172b5.14d9cd","type":"http request","z":"ea970db4.5106b","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":480,"y":160,"wires":[["a35f8dee.9f18f"]]},{"id":"93008453.2d0988","type":"change","z":"ea970db4.5106b","name":"define url delete payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/?language=\" & $env('language')","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":120,"wires":[["1cb172b5.14d9cd"]]},{"id":"d7fd649a.9ff818","type":"template","z":"ea970db4.5106b","name":"header with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":429,"y":80,"wires":[["93008453.2d0988"]]},{"id":"dea3f134.ddc37","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":150,"wires":[["6ac23f94.dc3d"]]},{"id":"feb96bef.d13c48","type":"comment","z":"91448cef.2efc9","name":"B. get information about all devices","info":"","x":147,"y":117,"wires":[]},{"id":"df69bc9f.4c2d5","type":"debug","z":"91448cef.2efc9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":748,"y":400,"wires":[]},{"id":"754625fb.8865fc","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":323,"wires":[["33b22f76.f4038"]]},{"id":"2ecedcf0.da0db4","type":"comment","z":"91448cef.2efc9","name":"C. get all information about one specifc device","info":"","x":175,"y":289,"wires":[]},{"id":"7a654d71.f942e4","type":"comment","z":"91448cef.2efc9","name":"D. get all actions of one specific device - depend on the current state of the device","info":"","x":285,"y":615,"wires":[]},{"id":"45bd620f.4b086c","type":"comment","z":"91448cef.2efc9","name":"A. get new bearer  - also do refresh token","info":"","x":165,"y":20,"wires":[]},{"id":"fed8fd9e.68c2d","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":87,"y":53,"wires":[["f5ecdf57.03ab1"]]},{"id":"a048c655.ec1f78","type":"subflow:24092027.ab82","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"},{"name":"clientId","value":"xx","type":"str"},{"name":"clientSecret","value":"xxx","type":"str"},{"name":"username","value":"xxxxx","type":"str"},{"name":"password","value":"xxxxxx","type":"str"}],"x":391,"y":53,"wires":[["df69bc9f.4c2d5"]]},{"id":"f5ecdf57.03ab1","type":"credentials","z":"91448cef.2efc9","name":"","props":[{"value":"username","type":"msg"},{"value":"password","type":"msg"},{"value":"clientId","type":"msg"},{"value":"clientSecret","type":"msg"}],"x":230,"y":53,"wires":[["a048c655.ec1f78"]]},{"id":"7742f9f5.4a43e8","type":"change","z":"24092027.ab82","name":"get env","rules":[{"t":"set","p":"vg","pt":"msg","to":"vg","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":63,"wires":[["cbba5ff0.57a32"]]},{"id":"6ac23f94.dc3d","type":"subflow:ea970db4.5106b","z":"91448cef.2efc9","name":"","env":[],"x":254,"y":150,"wires":[["df69bc9f.4c2d5"]]},{"id":"eaf22f71.d9969","type":"function","z":"ea970db4.5106b","name":"verify input","func":"// verify token\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":218,"y":80,"wires":[["d7fd649a.9ff818"],["681dd18d.1baa4"]]},{"id":"33b22f76.f4038","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":323,"wires":[["df69bc9f.4c2d5"]]},{"id":"88aafd6a.c0982","type":"http request","z":"aeba9414.6f40a8","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":460,"y":120,"wires":[["3da93881.b6e868"]]},{"id":"3f0996d.8ed756a","type":"change","z":"aeba9414.6f40a8","name":"msg.url, no payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/?language=\" & $env('language')","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":80,"wires":[["88aafd6a.c0982"]]},{"id":"98d65a27.8020b8","type":"template","z":"aeba9414.6f40a8","name":"msg.headers with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":410,"y":40,"wires":[["3f0996d.8ed756a"]]},{"id":"a260e272.ea783","type":"function","z":"aeba9414.6f40a8","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":192,"y":97,"wires":[["98d65a27.8020b8"],["fd32a717.878c28"]]},{"id":"bc574599.2b5938","type":"comment","z":"91448cef.2efc9","name":"C. get current status of a specifc device","info":"","x":155,"y":443,"wires":[]},{"id":"8912f7bb.095be8","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":476,"wires":[["9100eaf.d08d818"]]},{"id":"9100eaf.d08d818","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":476,"wires":[["ffb4b516.d45be8"]]},{"id":"d4f62349.a5a59","type":"comment","z":"91448cef.2efc9","name":"C. get current device type of a specifc device","info":"","x":175,"y":367,"wires":[]},{"id":"3eee5c2a.855a04","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":400,"wires":[["2640e37d.d5b69c"]]},{"id":"2640e37d.d5b69c","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":400,"wires":[["35daca5.d3adb36"]]},{"id":"1e76a8e5.b32bc7","type":"comment","z":"91448cef.2efc9","name":"B. get device id of first device","info":"","x":125,"y":191,"wires":[]},{"id":"4590828c.8b3f2c","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":224,"wires":[["472d288e.030668"]]},{"id":"472d288e.030668","type":"subflow:ea970db4.5106b","z":"91448cef.2efc9","name":"","env":[],"x":251,"y":224,"wires":[["d960c503.4130c8"]]},{"id":"d960c503.4130c8","type":"function","z":"91448cef.2efc9","name":"id first object","func":"msg.payload = msg.payload[Object.keys(msg.payload)[0]].ident.deviceIdentLabel.fabNumber\nreturn msg;","outputs":1,"noerr":0,"x":433,"y":224,"wires":[["df69bc9f.4c2d5"]]},{"id":"80c862b8.062ff","type":"comment","z":"91448cef.2efc9","name":"C. get remaining time of specific device","info":"","x":155,"y":520,"wires":[]},{"id":"c47bb64d.541918","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":553,"wires":[["77c1288.984c0d8"]]},{"id":"77c1288.984c0d8","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":553,"wires":[["5dfa60dc.87fc8"]]},{"id":"5dfa60dc.87fc8","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.state.remainingTime[0]*60 + payload.state.remainingTime[1] &  \" min\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":553,"wires":[["df69bc9f.4c2d5"]]},{"id":"35daca5.d3adb36","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.ident.type.value_localized","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":400,"wires":[["df69bc9f.4c2d5"]]},{"id":"ffb4b516.d45be8","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.state.status.value_localized","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":476,"wires":[["df69bc9f.4c2d5"]]},{"id":"f278936b.e797","type":"subflow:4ae29caa.8056e4","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":295,"y":648,"wires":[["df69bc9f.4c2d5"]]},{"id":"a2806ac3.d3a2d8","type":"http request","z":"4ae29caa.8056e4","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":460,"y":118,"wires":[["c8655abf.93b328"]]},{"id":"e9e5b981.24d568","type":"change","z":"4ae29caa.8056e4","name":"msg.url, no payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/actions/\"","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":78,"wires":[["a2806ac3.d3a2d8"]]},{"id":"f2707f72.38a2f","type":"template","z":"4ae29caa.8056e4","name":"msg.headers with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":429,"y":38,"wires":[["e9e5b981.24d568"]]},{"id":"d3015191.5633d","type":"function","z":"4ae29caa.8056e4","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":198,"y":88,"wires":[["f2707f72.38a2f"],["d9bc2537.715df8"]]},{"id":"9c8e0be2.1c8a58","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":648,"wires":[["f278936b.e797"]]},{"id":"c0e959c7.d684f8","type":"comment","z":"91448cef.2efc9","name":"E. execute command set name {\"deviceName\":\"My_Devicename\"}","info":"","x":245,"y":708,"wires":[]},{"id":"b7906361.bd13b","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":94,"y":740,"wires":[["21e8e59.be3271a"]]},{"id":"dafbb889.fb7f58","type":"http request","z":"ad607e01.511ea","name":"PUT to Miele","method":"PUT","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":499,"y":188,"wires":[["21b0eeb.798de12"]]},{"id":"8bbd1614.6e5288","type":"change","z":"ad607e01.511ea","name":"url, body","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/actions/\"","tot":"jsonata"},{"t":"move","p":"action","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":389,"y":68,"wires":[["47b32910.93a498"]]},{"id":"2542e5f6.b0fd8a","type":"function","z":"ad607e01.511ea","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nif (!msg.action){\n    node.error('invalid msg.action - action', msg)\n    return [null, {payload:\"invalid msg.action - action\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":193,"y":75,"wires":[["8bbd1614.6e5288"],["ebacb8a0.327d58"]]},{"id":"bba95584.0ba288","type":"subflow:ad607e01.511ea","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":423,"y":740,"wires":[["df69bc9f.4c2d5"]]},{"id":"f7de50c4.54625","type":"template","z":"ad607e01.511ea","name":"header with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":459,"y":146,"wires":[["dafbb889.fb7f58"]]},{"id":"6f3d8c02.c4ff64","type":"subflow:ad607e01.511ea","z":"91448cef.2efc9","name":"","env":[],"x":423,"y":821,"wires":[["df69bc9f.4c2d5"]]},{"id":"488026b0.68fa38","type":"comment","z":"91448cef.2efc9","name":"E. execute command stop {\"processAction\":2}","info":"","x":175,"y":788,"wires":[]},{"id":"3da93881.b6e868","type":"switch","z":"aeba9414.6f40a8","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":670,"y":40,"wires":[["96a3026.b505b"],["6a599077.f8081"]]},{"id":"6a599077.f8081","type":"function","z":"aeba9414.6f40a8","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":830,"y":120,"wires":[["dd906f4c.1361a"]]},{"id":"dd906f4c.1361a","type":"template","z":"aeba9414.6f40a8","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":980,"y":120,"wires":[[]]},{"id":"fd32a717.878c28","type":"template","z":"aeba9414.6f40a8","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":350,"y":164,"wires":[[]]},{"id":"a35f8dee.9f18f","type":"switch","z":"ea970db4.5106b","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":650,"y":80,"wires":[["84b66c9d.f62ef"],["8c52e1d0.35a7c"]]},{"id":"8c52e1d0.35a7c","type":"function","z":"ea970db4.5106b","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":810,"y":160,"wires":[["fe83c7a3.1ef478"]]},{"id":"fe83c7a3.1ef478","type":"template","z":"ea970db4.5106b","name":"error http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":963,"y":160,"wires":[[]]},{"id":"84b66c9d.f62ef","type":"template","z":"ea970db4.5106b","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":954,"y":120,"wires":[[]]},{"id":"96a3026.b505b","type":"template","z":"aeba9414.6f40a8","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":990,"y":80,"wires":[[]]},{"id":"681dd18d.1baa4","type":"template","z":"ea970db4.5106b","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":390,"y":218,"wires":[[]]},{"id":"ccdfdd96.2d83e","type":"template","z":"69e44f53.5d62f","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"env >>{{${subflowProperty}}}\npayload >>{{envSubflowProperty}}\n","output":"str","x":460,"y":80,"wires":[[]]},{"id":"4cc2813d.75068","type":"change","z":"69e44f53.5d62f","name":"","rules":[{"t":"set","p":"envSubflowProperty","pt":"msg","to":"subflowProperty","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":80,"wires":[["ccdfdd96.2d83e"]]},{"id":"c8655abf.93b328","type":"switch","z":"4ae29caa.8056e4","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":703,"y":38,"wires":[["2c02bcd4.dc63d4"],["52535782.315028"]]},{"id":"52535782.315028","type":"function","z":"4ae29caa.8056e4","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":815,"y":118,"wires":[["1455fb1d.b32055"]]},{"id":"1455fb1d.b32055","type":"template","z":"4ae29caa.8056e4","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":962,"y":118,"wires":[[]]},{"id":"2c02bcd4.dc63d4","type":"template","z":"4ae29caa.8056e4","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":972,"y":78,"wires":[[]]},{"id":"d9bc2537.715df8","type":"template","z":"4ae29caa.8056e4","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":310,"y":158,"wires":[[]]},{"id":"21b0eeb.798de12","type":"switch","z":"ad607e01.511ea","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":693,"y":80,"wires":[["e4fefa21.402038"],["6ad0d242.05cb5c"]]},{"id":"6ad0d242.05cb5c","type":"function","z":"ad607e01.511ea","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":716,"y":160,"wires":[["9ebcdded.4fad9"]]},{"id":"9ebcdded.4fad9","type":"template","z":"ad607e01.511ea","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":863,"y":160,"wires":[[]]},{"id":"e4fefa21.402038","type":"template","z":"ad607e01.511ea","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":873,"y":120,"wires":[[]]},{"id":"ebacb8a0.327d58","type":"template","z":"ad607e01.511ea","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":330,"y":240,"wires":[[]]},{"id":"21e8e59.be3271a","type":"change","z":"91448cef.2efc9","name":"machine id, action","rules":[{"t":"set","p":"payload","pt":"msg","to":"000149287451","tot":"str"},{"t":"set","p":"action","pt":"msg","to":"{\"deviceName\":\"hkMiele\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":249,"y":740,"wires":[["bba95584.0ba288"]]},{"id":"47b32910.93a498","type":"json","z":"ad607e01.511ea","name":"","property":"payload","action":"obj","pretty":false,"x":399,"y":108,"wires":[["f7de50c4.54625"]]},{"id":"7ab1b56e.a9c78c","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":94,"y":821,"wires":[["c54123db.3130e"]]},{"id":"c54123db.3130e","type":"change","z":"91448cef.2efc9","name":"machine id, action","rules":[{"t":"set","p":"payload","pt":"msg","to":"000149287451","tot":"str"},{"t":"set","p":"action","pt":"msg","to":"{\"processAction\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":249,"y":821,"wires":[["6f3d8c02.c4ff64"]]},{"id":"7f9fee0b.c9bac","type":"comment","z":"91448cef.2efc9","name":"both commands throw error 204 without error message although action was performed succesfully","info":"","x":910,"y":706,"wires":[]},{"id":"e44fd735.4b89a8","type":"switch","z":"24092027.ab82","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":774,"y":143,"wires":[["ccdd1aa3.d7afe8","430fd0da.a6602"],["32c1a07f.b3aaa"]]},{"id":"32c1a07f.b3aaa","type":"function","z":"24092027.ab82","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":934,"y":223,"wires":[["afceb2f2.d18f3"]]},{"id":"afceb2f2.d18f3","type":"template","z":"24092027.ab82","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":1081,"y":223,"wires":[[]]},{"id":"ccdd1aa3.d7afe8","type":"template","z":"24092027.ab82","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":1091,"y":183,"wires":[[]]},{"id":"4400b51a.44eacc","type":"template","z":"24092027.ab82","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":360,"y":258,"wires":[[]]},{"id":"85119bed.21b168","type":"function","z":"24092027.ab82","name":"verify input","func":"// verify bearer & msg properties\nif (!msg.username) {\n    node.error('msg.username not defined', msg)\n    return [null, {payload:'msg.username not defined'}]\n}\nif (!msg.password){\n    node.error('msg.password not defined', msg)\n    return [null, {payload:\"msg.password not definedd\"}]\n}\nif (!msg.clientId){\n    node.error('msg.clientId not defined', msg)\n    return [null, {payload:\"msg.clientId not defined\"}]\n}\nif (!msg.clientSecret){\n    node.error('msg.clientSecret not defined', msg)\n    return [null, {payload:\"msg.clientSecret not defined\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":160,"y":63,"wires":[["7742f9f5.4a43e8"],["4400b51a.44eacc"]]},{"id":"994c115f.0117b","type":"template","z":"24092027.ab82","name":"create body new","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"grant_type=password&username={{username}}&password={{password}}&client_id={{clientId}}&client_secret={{clientSecret}}&vg={{vg}}","output":"str","x":527,"y":103,"wires":[["a1d20301.4f124"]]},{"id":"a1d20301.4f124","type":"change","z":"24092027.ab82","name":"define url, headers","rules":[{"t":"set","p":"url","pt":"msg","to":"https://api.mcs3.miele.com/thirdparty/token/","tot":"str"},{"t":"set","p":"headers","pt":"msg","to":"{\"Content-Type\":\"application/x-www-form-urlencoded\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":754,"y":63,"wires":[["d782c3de.6219"]]},{"id":"d782c3de.6219","type":"http request","z":"24092027.ab82","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":774,"y":103,"wires":[["e44fd735.4b89a8"]]},{"id":"98c0b90e.acfad8","type":"comment","z":"24092027.ab82","name":"Miele only supports form encoded","info":"","x":530,"y":23,"wires":[]},{"id":"430fd0da.a6602","type":"change","z":"24092027.ab82","name":"","rules":[{"t":"set","p":"system_bearerMiele","pt":"global","to":"payload.access_token","tot":"msg"},{"t":"set","p":"system_refreshMiele","pt":"global","to":"payload.refresh_token","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1001,"y":136,"wires":[[]]},{"id":"6fe89867.753478","type":"template","z":"24092027.ab82","name":"create body refresh","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"grant_type=refresh_token&refresh_token={{global.system_refreshMiele}}&client_id={{clientId}}&client_secret={{clientSecret}}&vg={{vg}}","output":"str","x":537,"y":63,"wires":[["a1d20301.4f124"]]},{"id":"cbba5ff0.57a32","type":"switch","z":"24092027.ab82","name":"","property":"doRefresh","propertyType":"env","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":360,"y":103,"wires":[["6fe89867.753478"],["994c115f.0117b"]]},{"id":"8722cd32.1fa46","type":"comment","z":"405b0e15.987b5","name":"Basics: playerName, volume, sameVolume - all optional","info":"","x":205,"y":423,"wires":[]},{"id":"5913b0e7.4e005","type":"change","z":"405b0e15.987b5","name":"wrong volume - string -  negative","rules":[{"t":"set","p":"volume","pt":"msg","to":"-20","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":832,"wires":[["ec89cc15.4290d"]]},{"id":"ec89cc15.4290d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","command":"group.play.tunein","compatibilityMode":false,"name":"","x":1110,"y":460,"wires":[["d82bbbf0.10b338"]]},{"id":"d82bbbf0.10b338","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1080,"y":423,"wires":[]},{"id":"1ffd9830.ec71b8","type":"change","z":"405b0e15.987b5","name":"wrong volume - string -  0","rules":[{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":276,"y":864,"wires":[["ec89cc15.4290d"]]},{"id":"35faf3a3.de329c","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - 100","rules":[{"t":"set","p":"volume","pt":"msg","to":"100","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":286,"y":896,"wires":[["ec89cc15.4290d"]]},{"id":"a833b530.6713b8","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - empty","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":928,"wires":[["ec89cc15.4290d"]]},{"id":"55ef2881.06c478","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - digital and letter","rules":[{"t":"set","p":"volume","pt":"msg","to":"3x","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":326,"y":960,"wires":[["ec89cc15.4290d"]]},{"id":"8954dadd.55f548","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - text","rules":[{"t":"set","p":"volume","pt":"msg","to":"hello","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":286,"y":992,"wires":[["ec89cc15.4290d"]]},{"id":"c72353ac.cc08d","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - .","rules":[{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":".","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":276,"y":1024,"wires":[["ec89cc15.4290d"]]},{"id":"5240bf47.043fc","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":492,"wires":[["525370cd.abe1"]]},{"id":"525370cd.abe1","type":"change","z":"405b0e15.987b5","name":"wrong volume -boolean","rules":[{"t":"set","p":"volume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":492,"wires":[["ec89cc15.4290d"]]},{"id":"bcccdf9.be39c2","type":"change","z":"405b0e15.987b5","name":"wrong volume - JSON","rules":[{"t":"set","p":"volume","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":524,"wires":[["ec89cc15.4290d"]]},{"id":"b4b269f0.1aa7f8","type":"change","z":"405b0e15.987b5","name":"wrong volume - timestamp","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":556,"wires":[["ec89cc15.4290d"]]},{"id":"9fadd5a8.3857c8","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - 0","rules":[{"t":"set","p":"volume","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":286,"y":598,"wires":[["ec89cc15.4290d"]]},{"id":"fc66c449.e0eb78","type":"change","z":"405b0e15.987b5","name":"wrong volume - number -5","rules":[{"t":"set","p":"volume","pt":"msg","to":"-5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":286,"y":630,"wires":[["ec89cc15.4290d"]]},{"id":"da13c3fc.1c5bc","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - 100","rules":[{"t":"set","p":"volume","pt":"msg","to":"100","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":286,"y":662,"wires":[["ec89cc15.4290d"]]},{"id":"cbdbaf6.23a935","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - 1.1","rules":[{"t":"set","p":"volume","pt":"msg","to":"1.1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":286,"y":694,"wires":[["ec89cc15.4290d"]]},{"id":"2df6203e.1bff4","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - 10.20","rules":[{"t":"set","p":"volume","pt":"msg","to":"10.20","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":726,"wires":[["ec89cc15.4290d"]]},{"id":"83eeb43b.415378","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":307,"y":758,"wires":[["ec89cc15.4290d"]]},{"id":"ff664a1e.3e6338","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":800,"wires":[["ec89cc15.4290d"]]},{"id":"1af40005.9bd39","type":"comment","z":"405b0e15.987b5","name":"volume","info":"","x":90,"y":458,"wires":[]},{"id":"1b8c8042.f4546","type":"change","z":"405b0e15.987b5","name":"wrong playerName - boolean","rules":[{"t":"set","p":"playerName","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":915,"y":633,"wires":[["ec89cc15.4290d"]]},{"id":"79b0c290.63eaec","type":"change","z":"405b0e15.987b5","name":"wrong playerName - JSON","rules":[{"t":"set","p":"playerName","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":915,"y":665,"wires":[["ec89cc15.4290d"]]},{"id":"9872b6f8.387178","type":"change","z":"405b0e15.987b5","name":"wrong playerName - timestamp","rules":[{"t":"set","p":"playerName","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":925,"y":697,"wires":[["ec89cc15.4290d"]]},{"id":"ef0d807.b9ff58","type":"change","z":"405b0e15.987b5","name":"wrong playerName - number","rules":[{"t":"set","p":"playerName","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":914,"y":729,"wires":[["ec89cc15.4290d"]]},{"id":"834cab61.d72528","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string empty","rules":[{"t":"set","p":"playerName","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":935,"y":761,"wires":[["ec89cc15.4290d"]]},{"id":"6a81463f.ae85b8","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string xxx","rules":[{"t":"set","p":"playerName","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":925,"y":793,"wires":[["ec89cc15.4290d"]]},{"id":"cf992380.a74fa","type":"comment","z":"405b0e15.987b5","name":"playerName","info":"","x":746,"y":601,"wires":[]},{"id":"fe42c076.54c0f","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":915,"y":873,"wires":[["ec89cc15.4290d"]]},{"id":"93c379c8.a09d78","type":"change","z":"405b0e15.987b5","name":"wrong playerName -JSON","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":915,"y":905,"wires":[["ec89cc15.4290d"]]},{"id":"c812b0e7.50966","type":"change","z":"405b0e15.987b5","name":"wrong playerName - timestamp","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":925,"y":937,"wires":[["ec89cc15.4290d"]]},{"id":"a43b74d.bb1d988","type":"change","z":"405b0e15.987b5","name":"wrong playerName - number","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":915,"y":969,"wires":[["ec89cc15.4290d"]]},{"id":"e1a43d1.a122bc","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string empty","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":935,"y":1001,"wires":[["ec89cc15.4290d"]]},{"id":"d5a3125b.e29c3","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string xxx","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":925,"y":1033,"wires":[["ec89cc15.4290d"]]},{"id":"5bcffcf0.b7caa4","type":"comment","z":"405b0e15.987b5","name":"sameVolume","info":"","x":746,"y":840,"wires":[]},{"id":"94e0a41f.c38288","type":"comment","z":"405b0e15.987b5","name":"SUCCESS SUCCESS SUCCESS","info":"","x":145,"y":3413,"wires":[]},{"id":"1c957790.d44598","type":"change","z":"405b0e15.987b5","name":"volume string 30, sameVolume missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":311,"y":3488,"wires":[["405d1b34.ef7614"]]},{"id":"b0c9da96.fec0b8","type":"change","z":"405b0e15.987b5","name":"volume number 12, sameVolume missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"12","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":322,"y":3520,"wires":[["405d1b34.ef7614"]]},{"id":"e394c644.9a6a78","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"num"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":312,"y":3552,"wires":[["405d1b34.ef7614"]]},{"id":"77ac95f8.95f24c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume false","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":312,"y":3584,"wires":[["405d1b34.ef7614"]]},{"id":"62df47f3.957b58","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Bad","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":352,"y":3622,"wires":[["405d1b34.ef7614"]]},{"id":"335dc449.e3916c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Wohnzimmer","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":382,"y":3654,"wires":[["405d1b34.ef7614"]]},{"id":"d806c9f8.804ab8","type":"comment","z":"99e6906e.c69df","name":"UNIVERSAL: Group based & SONOS player name ","info":"","x":195,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"92452937.a71ce8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":119,"wires":[["16182df1.06e562"]]},{"id":"88f1aa5a.e99258","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"toggle.playback","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":183,"wires":[["16182df1.06e562"]]},{"id":"975d8d1c.3aa88","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"stop","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":247,"wires":[["16182df1.06e562"]]},{"id":"5e28b483.ab0fac","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"next.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":279,"wires":[["16182df1.06e562"]]},{"id":"3b8f19e6.b8fa86","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"previous.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":311,"wires":[["16182df1.06e562"]]},{"id":"95eac179.184b6","type":"inject","z":"99e6906e.c69df","name":"play.notification","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1160,"wires":[["f39fd4c6.c693d8"]]},{"id":"f39fd4c6.c693d8","type":"change","z":"99e6906e.c69df","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":294,"y":1160,"wires":[["ec1960b5.00b3f"]]},{"id":"1d89f0f8.dc229f","type":"inject","z":"99e6906e.c69df","name":"","topic":"10","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":120,"wires":[["16182df1.06e562"]]},{"id":"16182df1.06e562","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":720,"y":540,"wires":[["253e6e0f.936ce2"]]},{"id":"b5ad35e.9695fc8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.playbackstate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":983,"y":156,"wires":[["4ed9c170.a95e9"]]},{"id":"9b60bae5.777068","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":983,"y":420,"wires":[["4ed9c170.a95e9"]]},{"id":"7c1ccbb4.1d5e84","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.role","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":676,"wires":[["4ed9c170.a95e9"]]},{"id":"9bbcc937.1cb818","type":"comment","z":"99e6906e.c69df","name":"TuneIn","info":"","x":531,"y":817,"wires":[],"icon":"node-red/alert.svg"},{"id":"fdb85b79.0837d8","type":"inject","z":"99e6906e.c69df","name":"joiner.play.notification","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":1192,"wires":[["936341a0.c643"]]},{"id":"936341a0.c643","type":"change","z":"99e6906e.c69df","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":331,"y":1192,"wires":[["173eec81.585413"]]},{"id":"2fcf04cb.93592c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":87,"wires":[["ffeb7ac3.578f98"]]},{"id":"ffeb7ac3.578f98","type":"change","z":"99e6906e.c69df","name":"volume","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":221,"y":87,"wires":[["16182df1.06e562"]]},{"id":"41fde303.97545c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":848,"wires":[["d39a9106.99993"]]},{"id":"d39a9106.99993","type":"change","z":"99e6906e.c69df","name":"vol. 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":848,"wires":[["ec1960b5.00b3f"]]},{"id":"7789ab79.2f0354","type":"comment","z":"99e6906e.c69df","name":"queue","info":"","x":90,"y":815,"wires":[],"icon":"node-red/alert.svg"},{"id":"15624fbc.1cdbe","type":"comment","z":"405b0e15.987b5","name":"No Ip && invalid serial","info":"","x":291,"y":257,"wires":[]},{"id":"6ea8dfec.5079e","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":259,"wires":[["2c2cd61e.343cba","2d69512a.43bb6e","47b4da16.908d54","23162a8.e7dc6d6"]]},{"id":"a3eb53b0.a010e","type":"comment","z":"405b0e15.987b5","name":"Invalid ip: from fritzbox","info":"","x":291,"y":100,"wires":[]},{"id":"6dbddecf.92143","type":"comment","z":"405b0e15.987b5","name":"Invalid ip address - wrong syntax","info":"","x":321,"y":177,"wires":[]},{"id":"8699983a.eb0458","type":"comment","z":"405b0e15.987b5","name":"No ip && valid serial - WILL WORK!","info":"","x":331,"y":338,"wires":[]},{"id":"d8a671fa.965e9","type":"function","z":"405b0e15.987b5","name":"NaN","func":"msg.payload = 'ok'\nmsg.cmd = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":890,"y":220,"wires":[["40a60a57.8c31e4"]]},{"id":"a4087202.20aec","type":"function","z":"405b0e15.987b5","name":"null","func":"msg.payload = 'ok'\nmsg.cmd = null;\nreturn msg;","outputs":1,"noerr":0,"x":890,"y":252,"wires":[["40a60a57.8c31e4"]]},{"id":"4d33ff2b.a2a25","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":740,"y":124,"wires":[["cf75f94c.642528","4d248c22.4d5e84","d8a671fa.965e9","a4087202.20aec","40a60a57.8c31e4"]]},{"id":"22f69f98.77d5c","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1071,"y":84,"wires":[]},{"id":"d7adcafd.de0038","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":502,"y":210,"wires":[]},{"id":"b091e82.57ec718","type":"comment","z":"405b0e15.987b5","name":"Network and commands","info":"","x":115,"y":57,"wires":[]},{"id":"2c2cd61e.343cba","type":"sonos-universal","z":"405b0e15.987b5","confignode":"9037fbab.1d8408","command":"group.play","compatibilityMode":false,"name":"fritzbox","x":251,"y":131,"wires":[["d7adcafd.de0038"]]},{"id":"2d69512a.43bb6e","type":"sonos-universal","z":"405b0e15.987b5","confignode":"64704482.34d37c","command":"group.play","compatibilityMode":false,"name":"ip with wrong syntax","x":291,"y":210,"wires":[["d7adcafd.de0038"]]},{"id":"40a60a57.8c31e4","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":false,"name":"","x":1051,"y":124,"wires":[["22f69f98.77d5c"]]},{"id":"47b4da16.908d54","type":"sonos-universal","z":"405b0e15.987b5","confignode":"ff297616.de3c88","command":"group.play","compatibilityMode":false,"name":"no ip && wrong serial","x":291,"y":290,"wires":[["d7adcafd.de0038"]]},{"id":"23162a8.e7dc6d6","type":"sonos-universal","z":"405b0e15.987b5","confignode":"c747354a.95e5e8","command":"group.play","compatibilityMode":false,"name":"no ip but correct serial number","x":321,"y":370,"wires":[["d7adcafd.de0038"]]},{"id":"fbbe37f9.ec80e8","type":"comment","z":"405b0e15.987b5","name":"FAILURE FAILURE FAILURE FAILURE","info":"","x":155,"y":20,"wires":[]},{"id":"405d1b34.ef7614","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"group.play.tunein","compatibilityMode":false,"name":"","x":965,"y":3720,"wires":[["3aaebcd9.9ca424"]]},{"id":"3aaebcd9.9ca424","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":949,"y":3682,"wires":[]},{"id":"aba4d4d7.178b68","type":"comment","z":"405b0e15.987b5","name":"play.notifcation","info":"","x":85,"y":1080,"wires":[]},{"id":"714d9e9e.10685","type":"comment","z":"99e6906e.c69df","name":"Notification","info":"","x":100,"y":1128,"wires":[],"icon":"node-red/alert.svg"},{"id":"173eec81.585413","type":"sonos-universal","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","command":"message","compatibilityMode":true,"name":"joiner","x":470,"y":1192,"wires":[["17d641b5.8acd1e"]]},{"id":"253e6e0f.936ce2","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":750,"y":500,"wires":[]},{"id":"17d641b5.8acd1e","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":590,"y":1192,"wires":[]},{"id":"d9bd2fe.3f22dd","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":1371,"wires":[["e31ec83a.558e58"]]},{"id":"8d7daf16.7137c","type":"comment","z":"405b0e15.987b5","name":"play.queue with empty queue","info":"","x":160,"y":1337,"wires":[]},{"id":"bd69f167.291ad","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","command":"group.play.queue","compatibilityMode":false,"name":"","x":471,"y":1371,"wires":[["939badd3.96142"]]},{"id":"939badd3.96142","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":632,"y":1371,"wires":[]},{"id":"310bf27f.6ac1ae","type":"comment","z":"405b0e15.987b5","name":"play.tunein","info":"","x":100,"y":1436,"wires":[]},{"id":"d8e94884.e6a4d8","type":"inject","z":"405b0e15.987b5","name":"TuneIn wrong syntax","topic":"","payload":"x1324","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1472,"wires":[["ae162836.4cf128"]]},{"id":"4701316e.f4fcb","type":"inject","z":"405b0e15.987b5","name":"TuneIn wrong syntax","topic":"","payload":"1234","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1504,"wires":[["ae162836.4cf128"]]},{"id":"95f36a14.a0c4c8","type":"inject","z":"405b0e15.987b5","name":"TuneIn wrong syntax","topic":"","payload":"s234b","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1536,"wires":[["ae162836.4cf128"]]},{"id":"ae162836.4cf128","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","command":"group.play.tunein","compatibilityMode":false,"name":"","x":361,"y":1520,"wires":[["9d03522b.25c0d"]]},{"id":"9d03522b.25c0d","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":530,"y":1520,"wires":[]},{"id":"cf6e211f.ed38","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://192.168.178.25/xxxxx.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":850,"y":1515,"wires":[["fac63c2e.2a50d"]]},{"id":"fac63c2e.2a50d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","command":"group.play.notification","compatibilityMode":false,"name":"","x":1220,"y":1500,"wires":[["f84c053b.92d1d8"]]},{"id":"ac47b548.bb4608","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":545,"y":1160,"wires":[]},{"id":"8008d1e7.5e594","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":850,"y":1483,"wires":[["fac63c2e.2a50d"]]},{"id":"51b3182a.7150a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://192.168.178.25/xxxxx.mp","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":850,"y":1451,"wires":[["fac63c2e.2a50d"]]},{"id":"589aeb79.ba1484","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","command":"group.play.notification","compatibilityMode":false,"name":"","x":520,"y":1200,"wires":[["ac47b548.bb4608"]]},{"id":"d8002769.a7c318","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"00:00:0x","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":278,"y":1184,"wires":[["589aeb79.ba1484"]]},{"id":"42698402.2e609c","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0y:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":278,"y":1217,"wires":[["589aeb79.ba1484"]]},{"id":"98c6f099.1f4ba","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":278,"y":1249,"wires":[["589aeb79.ba1484"]]},{"id":"f5e5d8ed.0f81a8","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0:0:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":278,"y":1281,"wires":[["589aeb79.ba1484"]]},{"id":"838e2878.592fd8","type":"change","z":"405b0e15.987b5","name":"duration - boolean","rules":[{"t":"set","p":"duration","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":268,"y":1120,"wires":[["589aeb79.ba1484"]]},{"id":"884e560.861eba8","type":"change","z":"405b0e15.987b5","name":"duration - number","rules":[{"t":"set","p":"duration","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":269,"y":1152,"wires":[["589aeb79.ba1484"]]},{"id":"7d4d2d0c.592394","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1201,"wires":[["d8002769.a7c318","42698402.2e609c","98c6f099.1f4ba","f5e5d8ed.0f81a8","838e2878.592fd8","884e560.861eba8"]]},{"id":"6b4b84a6.2ae86c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://192.168.178.25/xxxxx.mp4","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":850,"y":1547,"wires":[["fac63c2e.2a50d"]]},{"id":"af8776db.d19ad8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://192.168.178.25/xxxxx.aac","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1030,"y":1413,"wires":[["fac63c2e.2a50d"]]},{"id":"11214f83.e8d74","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://192.168.178.25/xxxxx.flac","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1030,"y":1445,"wires":[["fac63c2e.2a50d"]]},{"id":"33ace11a.e1613e","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://192.168.178.25/xxxxx.m4a","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1030,"y":1477,"wires":[["fac63c2e.2a50d"]]},{"id":"2dff2c1f.b72864","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://192.168.178.25/xxxxx.ogg","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1030,"y":1509,"wires":[["fac63c2e.2a50d"]]},{"id":"6d413ae6.b8b044","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://192.168.178.25/xxxxx.asf","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1029,"y":1541,"wires":[["fac63c2e.2a50d"]]},{"id":"deee1f01.2999e","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://192.168.178.25/xxxxx.wma","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1030,"y":1573,"wires":[["fac63c2e.2a50d"]]},{"id":"cc39110a.1e83b","type":"comment","z":"405b0e15.987b5","name":"will work but not play - accepted formats","info":"","x":951,"y":1383,"wires":[]},{"id":"db945235.1367a","type":"comment","z":"405b0e15.987b5","name":"next previous - switch to stream to test","info":"","x":190,"y":1600,"wires":[]},{"id":"e031e20c.374b8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":1632,"wires":[["9de8cf4.a2dcb3","3b5f40e0.59262"]]},{"id":"486fc26d.27d13c","type":"inject","z":"405b0e15.987b5","name":"empty","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":637,"y":1633,"wires":[["9e5e352e.fd5368"]]},{"id":"9e5e352e.fd5368","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","command":"player.set.volume","compatibilityMode":false,"name":"","x":1023,"y":1677,"wires":[["ca35c50f.6a6a58"]]},{"id":"c19121d3.96db1","type":"inject","z":"405b0e15.987b5","name":"-1","topic":"","payload":"-1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":637,"y":1666,"wires":[["9e5e352e.fd5368"]]},{"id":"3345d807.883348","type":"inject","z":"405b0e15.987b5","name":"0","topic":"","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":637,"y":1699,"wires":[["9e5e352e.fd5368"]]},{"id":"2420e27.3add31e","type":"inject","z":"405b0e15.987b5","name":"100","topic":"","payload":"100","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":817,"y":1733,"wires":[["9e5e352e.fd5368"]]},{"id":"4c3d7d99.589f14","type":"inject","z":"405b0e15.987b5","name":"3x","topic":"","payload":"3x","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":817,"y":1633,"wires":[["9e5e352e.fd5368"]]},{"id":"b9a97285.6cebe","type":"inject","z":"405b0e15.987b5","name":"hallo","topic":"","payload":"hallo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":817,"y":1666,"wires":[["9e5e352e.fd5368"]]},{"id":"7f1e93ff.4c2fbc","type":"inject","z":"405b0e15.987b5","name":".","topic":"","payload":".","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":817,"y":1698,"wires":[["9e5e352e.fd5368"]]},{"id":"b86e7e34.d0e0f","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":3488,"wires":[["1c957790.d44598"]]},{"id":"a3965646.35b118","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":630,"y":460,"wires":[["3f8f86d5.fca95a"]]},{"id":"3f8f86d5.fca95a","type":"change","z":"405b0e15.987b5","name":"volume missingb but sameVolume true","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":460,"wires":[["ec89cc15.4290d"]]},{"id":"181a89ad.6460c6","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Bad","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":351,"y":3686,"wires":[["405d1b34.ef7614"]]},{"id":"67b2a46d.59410c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player wohnzimmer","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":371,"y":3719,"wires":[["405d1b34.ef7614"]]},{"id":"6ad1cfa4.f46fa","type":"inject","z":"405b0e15.987b5","name":"ZAPSPLAT","topic":"","payload":"https://www.zapsplat.com/wp-content/uploads/2015/sound-effects-the-sound-pack-tree/tspt_pull_bell_02_065.mp3?_=1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":3823,"wires":[["af708f2c.eb039"]]},{"id":"a75b8773.803058","type":"inject","z":"405b0e15.987b5","name":"soundbible dog","topic":"","payload":"http://soundbible.com/mp3/labrador-barking-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121,"y":3855,"wires":[["af708f2c.eb039"]]},{"id":"748eb572.94a7dc","type":"inject","z":"405b0e15.987b5","name":"Bell","topic":"","payload":"http://soundbible.com/mp3/bells-tibetan-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":3887,"wires":[["af708f2c.eb039"]]},{"id":"f6442e4b.2ca74","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":3951,"wires":[["af708f2c.eb039"]]},{"id":"1676e92a.61efa7","type":"inject","z":"405b0e15.987b5","name":"alarm","topic":"","payload":"http://soundbible.com/mp3/Fire%20Truck%20Siren-SoundBible.com-642727443.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":3919,"wires":[["af708f2c.eb039"]]},{"id":"64ecb30a.571c2c","type":"comment","z":"405b0e15.987b5","name":"play.notification","info":"","x":121,"y":3788,"wires":[]},{"id":"fe7e5f19.c9fa7","type":"comment","z":"405b0e15.987b5","name":"Volume/sameVolume/playerName","info":"","x":180,"y":3450,"wires":[]},{"id":"af708f2c.eb039","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"group.play.notification","compatibilityMode":false,"name":"","x":341,"y":3890,"wires":[[]]},{"id":"95a74f68.2ef37","type":"comment","z":"405b0e15.987b5","name":"joiner.play.notification","info":"","x":600,"y":3790,"wires":[]},{"id":"3fbf466d.b527ea","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"joiner.play.notification","compatibilityMode":false,"name":"","x":870,"y":3885,"wires":[[]]},{"id":"565335ac.1ab00c","type":"change","z":"405b0e15.987b5","name":"volume string 70","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":741,"y":3985,"wires":[["3fbf466d.b527ea"]]},{"id":"c4a5756d.d6c5b8","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":102,"y":3983,"wires":[["8113d12b.637c7"]]},{"id":"8113d12b.637c7","type":"change","z":"405b0e15.987b5","name":"volume string 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":3983,"wires":[["af708f2c.eb039"]]},{"id":"6839dba2.9ce034","type":"comment","z":"405b0e15.987b5","name":"Test case: player an / aus und notification spielen","info":"","x":480,"y":4017,"wires":[]},{"id":"aa2e6460.b540a8","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":398,"y":71,"wires":[["e4646c63.7ee1f"]]},{"id":"2a470d1d.b5bc02","type":"comment","z":"4318847d.0693cc","name":"Example 2: Play a (MusicLibrary, Amazon) playlist using My Sonos ","info":"","x":245,"y":160,"wires":[]},{"id":"6bda4392.15afbc","type":"inject","z":"4318847d.0693cc","name":"","topic":"ML10CC","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":200,"wires":[["a12c4300.4a2fa"]]},{"id":"a12c4300.4a2fa","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":371,"y":214,"wires":[["cc0d78f0.3cebb8"]]},{"id":"20f34bd4.e96c84","type":"inject","z":"4318847d.0693cc","name":"","topic":"Best of Prime","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":235,"wires":[["a12c4300.4a2fa"]]},{"id":"17d0af16.8a31a1","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":700,"y":214,"wires":[]},{"id":"cc0d78f0.3cebb8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"32a98882.56e1c8","command":"message","compatibilityMode":true,"name":"","x":562,"y":214,"wires":[["17d0af16.8a31a1"]]},{"id":"5fe3a2ed.eb907c","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":390,"y":371,"wires":[["744d729c.ee78dc"]]},{"id":"435d406c.05c4e","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":290,"y":988,"wires":[["8af22d58.53aff"]]},{"id":"48bb69e.93b5998","type":"polly","z":"4318847d.0693cc","name":"","voice":"0","ssml":false,"dir":"overwritten","config":"8945d5a5.31aef8","x":352,"y":1595,"wires":[["751fc24c.5f892c"],[]]},{"id":"47273022.7b687","type":"inject","z":"4318847d.0693cc","name":"weather","topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1550,"wires":[["60d50c04.dc4f34"]]},{"id":"384278f8.a57c98","type":"change","z":"4318847d.0693cc","name":"prepare play notification","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.notification","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"$globalContext('system_baseUrl') & '/notifications/' & topic","tot":"jsonata"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":652,"y":1633,"wires":[["a94b74c4.c18738"]]},{"id":"6dc684d2.01c19c","type":"fs-ops-copy","z":"4318847d.0693cc","name":"","sourcePath":"","sourcePathType":"str","sourceFilename":"file","sourceFilenameType":"msg","destPath":"notification_cache","destPathType":"global","destFilename":"topic","destFilenameType":"msg","link":false,"overwrite":true,"x":596,"y":1591,"wires":[["384278f8.a57c98"]]},{"id":"751fc24c.5f892c","type":"switch","z":"4318847d.0693cc","name":"","property":"_polly.cached","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":468,"y":1597,"wires":[["6dc684d2.01c19c"],["384278f8.a57c98"]]},{"id":"17d3d81e.fd5208","type":"inject","z":"4318847d.0693cc","name":"Caution","topic":"notification_caution.mp3","payload":"Caution Caution Caution","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1582,"wires":[["60d50c04.dc4f34"]]},{"id":"f951db37.428e28","type":"inject","z":"4318847d.0693cc","name":"inform","topic":"notification_inform.mp3","payload":"Please mind your steps","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1615,"wires":[["60d50c04.dc4f34"]]},{"id":"c4e97855.112e88","type":"comment","z":"4318847d.0693cc","name":"Trigger Examples","info":"","x":119,"y":1511,"wires":[]},{"id":"af5b8d26.1705c","type":"comment","z":"4318847d.0693cc","name":"Create/Update mp3 file, create uri and parameter","info":"","x":481,"y":1511,"wires":[]},{"id":"d80a6d67.99515","type":"comment","z":"4318847d.0693cc","name":"Serialize msgs and play notification","info":"","x":1030,"y":1510,"wires":[]},{"id":"63cf7c29.d98064","type":"inject","z":"4318847d.0693cc","name":"Clear storage / cache","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":747,"y":1366,"wires":[["c4a71b8c.25a638","15147b67.cd39d5"]]},{"id":"a8b10427.3fe018","type":"link in","z":"4318847d.0693cc","name":"execute play_notification","links":["a94b74c4.c18738"],"x":904,"y":1550,"wires":[["c6772716.60af68"]]},{"id":"a94b74c4.c18738","type":"link out","z":"4318847d.0693cc","name":"Trigger play_notification","links":["a8b10427.3fe018"],"x":752,"y":1550,"wires":[]},{"id":"c6e721c.1b95de","type":"inject","z":"4318847d.0693cc","name":"set","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1400,"wires":[["6f073a90.08bd84","1e24ff39.4630d1","78ebe214.17527c"]]},{"id":"c5ad62c1.4abfb","type":"comment","z":"4318847d.0693cc","name":"TTS, notification","info":"","x":85,"y":1331,"wires":[]},{"id":"ed11ae49.b8a2d","type":"comment","z":"4318847d.0693cc","name":"Set Up","info":"","x":91,"y":1366,"wires":[]},{"id":"6f073a90.08bd84","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"system_baseUrl","pt":"global","to":"http://192.168.178.49:1880","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1367,"wires":[[]]},{"id":"1e24ff39.4630d1","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"notification_directory","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":306,"y":1399,"wires":[[]]},{"id":"78ebe214.17527c","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"notification_cache","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1431,"wires":[[]]},{"id":"cb99335a.e0a0e","type":"change","z":"4318847d.0693cc","name":"add cache","rules":[{"t":"set","p":"options.dir","pt":"msg","to":"notification_cache","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":605,"y":1549,"wires":[["48bb69e.93b5998"]]},{"id":"a9529c34.96d74","type":"link in","z":"4318847d.0693cc","name":"TTS Execute","links":["18152db0.dc8512","60d50c04.dc4f34","26ac2b2.49d16d4"],"x":315,"y":1549,"wires":[["e9d1d7a9.402848"]]},{"id":"60d50c04.dc4f34","type":"link out","z":"4318847d.0693cc","name":"TTS Trigger","links":["a9529c34.96d74"],"x":207,"y":1549,"wires":[]},{"id":"63902954.cc2b48","type":"comment","z":"4318847d.0693cc","name":"Maintain","info":"","x":554,"y":1367,"wires":[]},{"id":"62c214c3.ab9e3c","type":"fs-ops-delete","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1405,"wires":[[]]},{"id":"c4a71b8c.25a638","type":"fs-ops-dir","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filter":"notification_*.*","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1405,"wires":[["62c214c3.ab9e3c"]]},{"id":"15147b67.cd39d5","type":"fs-ops-dir","z":"4318847d.0693cc","name":"","path":"notification_cache","pathType":"global","filter":"*_*.mp3","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1438,"wires":[["866b0ab0.299a28"]]},{"id":"866b0ab0.299a28","type":"fs-ops-delete","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1438,"wires":[[]]},{"id":"21466965.515bf6","type":"status","z":"4318847d.0693cc","name":"","scope":["7435b64e.0a2fb8"],"x":949,"y":1599,"wires":[["6c22fb96.b37484"]]},{"id":"6c22fb96.b37484","type":"change","z":"4318847d.0693cc","name":"initiate next","rules":[{"t":"set","p":"releaseNext","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1101,"y":1599,"wires":[["c6772716.60af68"]]},{"id":"c6772716.60af68","type":"function","z":"4318847d.0693cc","name":"queue","func":"// modified version - originally from https://gist.github.com/dceejay/cea8afa28b7a93ebdc0f \n\n// restartQueue = create new\nif (msg.hasOwnProperty(\"restartQueue\")) {\n    context.queue = []\n    \n// if queue doesn't exist, create it    \n} else {\n    context.queue = context.queue || []\n    context.busy = context.busy || false\n\n    // if the msg is a trigger one release next message\n    if (msg.hasOwnProperty(\"releaseNext\")) {\n        if (context.queue.length > 0) {\n            var m = context.queue.shift()\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return m \n        }\n        else {\n            context.busy = false;\n        }\n    }\n    else {\n        if (context.busy) {\n            // if busy add to queue\n            context.queue.push(msg);\n        }\n        else {\n        // otherwise we are empty so just pass through and set busy flag\n            context.busy = true;\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return msg;\n        }\n    }\n}\nnode.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n\nreturn null;","outputs":1,"noerr":0,"x":1012,"y":1550,"wires":[["7435b64e.0a2fb8"]]},{"id":"b9e60025.3c367","type":"http in","z":"4318847d.0693cc","name":"","url":"/notifications/:mp3file","method":"get","upload":false,"swaggerDoc":"","x":150,"y":1746,"wires":[["86792da2.4cb06"]]},{"id":"ef769238.e5b02","type":"comment","z":"4318847d.0693cc","name":"serve mp3 file for SONOS player","info":"","x":170,"y":1709,"wires":[]},{"id":"86792da2.4cb06","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('notification_directory') & '/' & msg.req.params.mp3file","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":374,"y":1746,"wires":[["c2fa6cb.342c39"]]},{"id":"c2fa6cb.342c39","type":"file in","z":"4318847d.0693cc","name":"","filename":"","format":"","chunk":false,"sendError":false,"encoding":"base64","x":534,"y":1746,"wires":[["a7138852.445228"]]},{"id":"605e5893.1b9518","type":"catch","z":"4318847d.0693cc","name":"","scope":["86792da2.4cb06","c2fa6cb.342c39","a7138852.445228"],"uncaught":false,"x":549,"y":1794,"wires":[["beb5575e.889f28","11576894.2c6de7"]]},{"id":"5f4a3564.9a4dbc","type":"http response","z":"4318847d.0693cc","name":"","statusCode":"","headers":{},"x":829,"y":1745,"wires":[]},{"id":"fa8b69a4.f26918","type":"comment","z":"4318847d.0693cc","name":"Test","info":"http://192.168.178.49:1880/notifications/notification_weather.mp3","x":386,"y":1710,"wires":[]},{"id":"392665f5.7dc97a","type":"inject","z":"4318847d.0693cc","name":"Flush command queue","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1095,"y":1366,"wires":[["eb9430a5.b1ba6"]]},{"id":"eb9430a5.b1ba6","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"restartQueue","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1107,"y":1403,"wires":[["c6772716.60af68"]]},{"id":"e9d1d7a9.402848","type":"function","z":"4318847d.0693cc","name":"check globals","func":"// checks existens of requried global variables\n//\nlet value = global.get('system_baseUrl')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - system_baseUrl not defined')\n    return null\n}\nvalue = global.get('notification_cache')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_cache not defined')\n    return null\n}\nvalue = global.get('notification_directory')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_directory not defined')\n    return null\n}\nreturn msg\n\nfunction isTruthyAndNotEmptyString (input) {\n    return !(typeof input === 'undefined' || input === null ||\n      (typeof input === 'number' && !Number.isFinite(input)) || input === '')\n}","outputs":1,"noerr":0,"x":432,"y":1549,"wires":[["cb99335a.e0a0e"]]},{"id":"d3477aba.549be8","type":"comment","z":"4318847d.0693cc","name":"Recommendation: Define globals as permanent","info":"This is done in the settings.js file. \nUncomment the contextStorage paragraph.\nThis will store all context variable on disk.","x":440,"y":1331,"wires":[]},{"id":"993b5c0.98e92a8","type":"inject","z":"4318847d.0693cc","name":"weather","topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":450,"y":1655,"wires":[["384278f8.a57c98"]]},{"id":"a7138852.445228","type":"change","z":"4318847d.0693cc","name":"set 200","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"200","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":1746,"wires":[["5f4a3564.9a4dbc"]]},{"id":"beb5575e.889f28","type":"change","z":"4318847d.0693cc","name":"set 404","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"404","tot":"num"},{"t":"set","p":"payload","pt":"msg","to":"error","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":675,"y":1794,"wires":[["5f4a3564.9a4dbc"]]},{"id":"11576894.2c6de7","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"true","targetType":"full","x":670,"y":1829,"wires":[]},{"id":"7435b64e.0a2fb8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":1161,"y":1550,"wires":[["54925fa5.2dc5e"]]},{"id":"54925fa5.2dc5e","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1270,"y":1595,"wires":[]},{"id":"d4793d8e.eecd5","type":"inject","z":"4318847d.0693cc","name":"habit","topic":"notification_habit.mp3","payload":"Don't do unto others what you would not have done unto you. Don't do unto others what you would not have done unto you.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1648,"wires":[["60d50c04.dc4f34"]]},{"id":"65f29149.8538a","type":"comment","z":"405b0e15.987b5","name":"get queue","info":"","x":65,"y":4103,"wires":[]},{"id":"5a355136.2bacb","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":4135,"wires":[["6a464d05.31f294"]]},{"id":"fdd05f91.4bf99","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","command":"group.get.queue","compatibilityMode":false,"name":"joiner","x":233,"y":4167,"wires":[["4922e20b.21448c"]]},{"id":"bcf34126.fd0e","type":"sonos-universal","z":"405b0e15.987b5","confignode":"2113e9bb.c52236","command":"group.get.queue","compatibilityMode":false,"name":"independent","x":251,"y":4199,"wires":[["4922e20b.21448c"]]},{"id":"6a464d05.31f294","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","command":"group.get.queue","compatibilityMode":false,"name":"coordinator","x":436,"y":4136,"wires":[["4922e20b.21448c"]]},{"id":"9fa47f84.5e029","type":"change","z":"405b0e15.987b5","name":"Küche","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Küche","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":4254,"wires":[["6a464d05.31f294"]]},{"id":"32d4987b.115d28","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":4254,"wires":[["9fa47f84.5e029"]]},{"id":"f0ef755f.a916b8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":4294,"wires":[["892104c9.73e2a8"]]},{"id":"892104c9.73e2a8","type":"change","z":"405b0e15.987b5","name":"Bad","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":272,"y":4294,"wires":[["6a464d05.31f294"]]},{"id":"4922e20b.21448c","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":573,"y":4168,"wires":[]},{"id":"fdb520de.f832b","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":102,"y":4167,"wires":[["fdd05f91.4bf99"]]},{"id":"48fa30d4.5b4ca","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":4199,"wires":[["bcf34126.fd0e"]]},{"id":"1a55af66.08dd31","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://soundbible.com/grab.php?id=1466&type=mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":850,"y":1417,"wires":[["fac63c2e.2a50d"]]},{"id":"66bf987d.759ea8","type":"comment","z":"405b0e15.987b5","name":"play vli Sauna initiated by Spotify","info":"","x":150,"y":5035,"wires":[]},{"id":"9de88740.8eb6e8","type":"inject","z":"405b0e15.987b5","name":"","topic":"Bgm","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":5095,"wires":[["ce88fa6a.6cc128"]]},{"id":"ce88fa6a.6cc128","type":"sonos-manage-mysonos","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":370,"y":5095,"wires":[["c4914b30.1dadb8"]]},{"id":"c4914b30.1dadb8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"any","x":550,"y":5095,"wires":[["fe13eac8.8440b8"]]},{"id":"fe13eac8.8440b8","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":5095,"wires":[]},{"id":"f0d2d5b3.f9c188","type":"comment","z":"405b0e15.987b5","name":"testing command","info":"","x":760,"y":92,"wires":[]},{"id":"467d1308.f277ac","type":"comment","z":"99e6906e.c69df","name":"Http Radio stream","info":"","x":571,"y":902,"wires":[],"icon":"node-red/alert.svg"},{"id":"a7851739.e68d28","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.trackplus","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":348,"wires":[["4ed9c170.a95e9"]]},{"id":"722f176.7dd63e8","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":407,"wires":[["16182df1.06e562"]]},{"id":"89bc8068.9d35","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":439,"wires":[["16182df1.06e562"]]},{"id":"84fd7e15.41934","type":"inject","z":"99e6906e.c69df","name":"","topic":"-3","payload":"adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":375,"wires":[["16182df1.06e562"]]},{"id":"9df26d0d.3f513","type":"inject","z":"99e6906e.c69df","name":"","topic":"3","payload":"adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":343,"wires":[["16182df1.06e562"]]},{"id":"7c2300b1.4a3f4","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"player.set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":152,"wires":[["16182df1.06e562"]]},{"id":"b40c1169.e88b5","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"player.set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":184,"wires":[["16182df1.06e562"]]},{"id":"1b3b540d.ff4ddc","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":963,"y":380,"wires":[["4ed9c170.a95e9"]]},{"id":"3f2e24b6.375c2c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":963,"y":220,"wires":[["4ed9c170.a95e9"]]},{"id":"cededcf4.b20a3","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":993,"y":452,"wires":[["4ed9c170.a95e9"]]},{"id":"2a9b7b71.c0ed44","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":983,"y":708,"wires":[["4ed9c170.a95e9"]]},{"id":"8f12e8b.9749d18","type":"inject","z":"99e6906e.c69df","name":"","topic":"-3","payload":"player.adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":88,"wires":[["16182df1.06e562"]]},{"id":"6a301fdb.d4e3b","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"clear.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1013,"wires":[["ec1960b5.00b3f"]]},{"id":"a4d89d41.11067","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"pause","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":215,"wires":[["16182df1.06e562"]]},{"id":"9edf5ab4.56aad8","type":"comment","z":"405b0e15.987b5","name":"Sonos Playlist","info":"","x":75,"y":5155,"wires":[]},{"id":"8ce1a3c2.3bd94","type":"inject","z":"405b0e15.987b5","name":"","topic":"SonosMix","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":5191,"wires":[["dfdbe6f5.e2d8a8"]]},{"id":"dfdbe6f5.e2d8a8","type":"sonos-manage-mysonos","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":370,"y":5191,"wires":[["c4914b30.1dadb8"]]},{"id":"63f9f7cf.816ea8","type":"inject","z":"405b0e15.987b5","name":"","topic":"SonosDido","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":5226,"wires":[["dfdbe6f5.e2d8a8"]]},{"id":"a5a906a0.042c68","type":"inject","z":"405b0e15.987b5","name":"","topic":"Tolle","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":5261,"wires":[["dfdbe6f5.e2d8a8"]]},{"id":"854acfe9.a0bb8","type":"inject","z":"405b0e15.987b5","name":"","topic":"SonosMix","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":5304,"wires":[["e0ea97d2.491948"]]},{"id":"384c0123.9ce4fe","type":"inject","z":"405b0e15.987b5","name":"","topic":"SonosDido","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":5339,"wires":[["e0ea97d2.491948"]]},{"id":"8e131a66.9d0128","type":"inject","z":"405b0e15.987b5","name":"","topic":"Tolle","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":5374,"wires":[["e0ea97d2.491948"]]},{"id":"e0ea97d2.491948","type":"sonos-manage-mysonos","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":370,"y":5327,"wires":[["fe13eac8.8440b8"]]},{"id":"47971f2d.36db9","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.state","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":964,"y":188,"wires":[["4ed9c170.a95e9"]]},{"id":"12df8aee.d738b5","type":"inject","z":"99e6906e.c69df","name":"","topic":"queuebackupSave","payload":"save.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":979,"wires":[["ec1960b5.00b3f"]]},{"id":"6d7fd15b.259e1","type":"comment","z":"99e6906e.c69df","name":"Group related - without prefix group.","info":"","x":180,"y":55,"wires":[],"icon":"node-red/alert.svg"},{"id":"1f6ad9a8.93ca66","type":"comment","z":"99e6906e.c69df","name":"Get / Test","info":"","x":963,"y":55,"wires":[],"icon":"node-red/alert.svg"},{"id":"491bd16d.1212e","type":"comment","z":"4318847d.0693cc","name":"Example 8: Group snapshot","info":"","x":125,"y":1060,"wires":[]},{"id":"52d1f7c1.e35848","type":"inject","z":"4318847d.0693cc","name":"","topic":"queueBackup","payload":"household.remove.sonosplaylist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1095,"wires":[["d9311d99.f498c"]]},{"id":"95cb2b68.7214d8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":670,"y":1134,"wires":[["ba48ff29.15c59"]]},{"id":"43d03f0a.512fd","type":"change","z":"4318847d.0693cc","name":"create snapshot","rules":[{"t":"set","p":"payload","pt":"msg","to":"create.snap","tot":"str"},{"t":"set","p":"snapVolumes","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"snapMutestates","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1094,"wires":[["95cb2b68.7214d8"]]},{"id":"e095c253.fc1b1","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":571,"y":1235,"wires":[["572964f2.c187cc"]]},{"id":"572964f2.c187cc","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":713,"y":1235,"wires":[]},{"id":"ba48ff29.15c59","type":"change","z":"4318847d.0693cc","name":"store in flow, stop","rules":[{"t":"set","p":"recentsnapshot","pt":"flow","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":1094,"wires":[["da231a54.c69008"]]},{"id":"7163589.a72b2a8","type":"change","z":"4318847d.0693cc","name":"play snapshot","rules":[{"t":"set","p":"payload","pt":"msg","to":"group.play.snap","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"recentsnapshot","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":561,"y":1195,"wires":[["e095c253.fc1b1"]]},{"id":"41c7ac74.a2c854","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":450,"y":1134,"wires":[["43d03f0a.512fd"]]},{"id":"4c5efb45.196ff4","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"clear.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1195,"wires":[["5cfc7f18.6f27"]]},{"id":"7f910b16.96cf24","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":353,"y":1235,"wires":[["7163589.a72b2a8"]]},{"id":"5cfc7f18.6f27","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":140,"y":1235,"wires":[["1eb0b341.f8addd"]]},{"id":"1eb0b341.f8addd","type":"change","z":"4318847d.0693cc","name":"restore queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"queue","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"queueBackup","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":1195,"wires":[["7f910b16.96cf24"]]},{"id":"da231a54.c69008","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":890,"y":1134,"wires":[["6324aa0b.dc1234"]]},{"id":"fb8d1e4b.9362e","type":"inject","z":"99e6906e.c69df","name":"","topic":"queueBackup","payload":"household.remove.sonosplaylist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":870,"y":1020,"wires":[["ec1960b5.00b3f"]]},{"id":"330983f0.916e6c","type":"change","z":"4318847d.0693cc","name":"backup queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"save.queue","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"queueBackup","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":1095,"wires":[["41c7ac74.a2c854"]]},{"id":"d9311d99.f498c","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":232,"y":1095,"wires":[["330983f0.916e6c"]]},{"id":"6324aa0b.dc1234","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1060,"y":1134,"wires":[]},{"id":"c7d9a77a.a42e18","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"household.get.groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1003,"y":88,"wires":[["4ed9c170.a95e9"]]},{"id":"fc8ec1ee.dada8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":160,"y":369,"wires":[["6280f87a.0562c8"]]},{"id":"fa5800f0.d6f4c","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":886,"y":71,"wires":[["6bbf67aa.5b6638"]]},{"id":"fad22422.5dcc88","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":273,"y":590,"wires":[["625148f2.018378"]]},{"id":"ab1e13ab.c7d74","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":973,"y":590,"wires":[[]]},{"id":"9cfa79ba.d93968","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":590,"y":793,"wires":[["98119167.abb2e"]]},{"id":"24a0a7e6.ae3b08","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":905,"y":768,"wires":[[]]},{"id":"d36c728b.5c65a","type":"sonos-universal","z":"4318847d.0693cc","confignode":"32a98882.56e1c8","command":"message","compatibilityMode":true,"name":"","x":543,"y":990,"wires":[[]]},{"id":"a2d8563b.db4848","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"00:00:50","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":800,"y":3480,"wires":[["8db596e.4f47e68"]]},{"id":"67ca785c.116658","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"00:05:00","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":800,"y":3513,"wires":[["8db596e.4f47e68"]]},{"id":"dbd5551d.afd418","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"00:55:00","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":800,"y":3546,"wires":[["8db596e.4f47e68"]]},{"id":"91c9fddd.f0154","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"00:55:00","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":800,"y":3579,"wires":[["8db596e.4f47e68"]]},{"id":"9d2d6c02.05054","type":"comment","z":"405b0e15.987b5","name":"set sleeptimer","info":"","x":810,"y":3447,"wires":[]},{"id":"8db596e.4f47e68","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","command":"group.set.sleeptimer","compatibilityMode":false,"name":"","x":1020,"y":3520,"wires":[[]]},{"id":"fc3f0b59.260d48","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":715,"y":1848,"wires":[]},{"id":"11698c95.cdbbb3","type":"comment","z":"405b0e15.987b5","name":"set sleep timer","info":"","x":85,"y":1775,"wires":[]},{"id":"e2fc4954.053ac8","type":"change","z":"405b0e15.987b5","name":"missing payload","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":263,"y":1813,"wires":[["9a21fd50.7c9d7"]]},{"id":"9a21fd50.7c9d7","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"group.set.sleeptimer","compatibilityMode":false,"name":"","x":685,"y":1888,"wires":[["fc3f0b59.260d48"]]},{"id":"54c61a18.ea7a64","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":1813,"wires":[["e2fc4954.053ac8"]]},{"id":"dbffce64.f49ff","type":"comment","z":"405b0e15.987b5","name":"set crossfade","info":"","x":1008,"y":1777,"wires":[]},{"id":"4b34beae.bdd38","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":998,"y":1810,"wires":[["4034cfc8.f537"]]},{"id":"7474cbca.0b7214","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":988,"y":1907,"wires":[["6e9161d.68854a"]]},{"id":"9ed3b7fe.0d8bb8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":988,"y":1941,"wires":[["6e9161d.68854a"]]},{"id":"71b8767f.e528b8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":988,"y":1974,"wires":[["6e9161d.68854a"]]},{"id":"dc3e581b.230698","type":"comment","z":"405b0e15.987b5","name":"remove track with new track overriding topic and new functions string2validInteger","info":"","x":285,"y":2348,"wires":[]},{"id":"aac3b484.bd1cc8","type":"inject","z":"405b0e15.987b5","name":"","topic":"0","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1500,"y":2546,"wires":[[]]},{"id":"9cac81d5.05ffb","type":"inject","z":"405b0e15.987b5","name":"","topic":"-1","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1500,"y":2579,"wires":[[]]},{"id":"2bc6883c.278668","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1490,"y":2413,"wires":[[]]},{"id":"2b432739.27a7a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"hallo","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1510,"y":2447,"wires":[[]]},{"id":"3ff24a7f.afd816","type":"inject","z":"405b0e15.987b5","name":"","topic":".,c","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1500,"y":2480,"wires":[[]]},{"id":"2b28ba80.089216","type":"inject","z":"405b0e15.987b5","name":"","topic":"..10.2","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1510,"y":2513,"wires":[[]]},{"id":"60e58ce9.1e0784","type":"comment","z":"405b0e15.987b5","name":"remove several songs: only check limits","info":"","x":1110,"y":2380,"wires":[]},{"id":"fe6e136b.4791f","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1018,"y":2415,"wires":[["bbaf9a4a.8ce5c8"]]},{"id":"bbaf9a4a.8ce5c8","type":"change","z":"405b0e15.987b5","name":"number of tracks 0","rules":[{"t":"set","p":"payload","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfTracks","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1189,"y":2415,"wires":[["ee2544e.c5886b8"]]},{"id":"64af12ee.fe221c","type":"change","z":"405b0e15.987b5","name":"number of tracks 999","rules":[{"t":"set","p":"payload","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfTracks","pt":"msg","to":"999","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1199,"y":2447,"wires":[["ee2544e.c5886b8"]]},{"id":"9b7c0d16.c9dc2","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1018,"y":2447,"wires":[["64af12ee.fe221c"]]},{"id":"d9469fb8.d3008","type":"inject","z":"405b0e15.987b5","name":"","topic":"xxxxxx","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":700,"y":2693,"wires":[["46293123.3744d"]]},{"id":"3bded037.ef28","type":"comment","z":"405b0e15.987b5","name":"set.queuemode","info":"","x":646.990234375,"y":2658.37109375,"wires":[]},{"id":"46293123.3744d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"coordinator","x":913.990234375,"y":2723.37109375,"wires":[[]]},{"id":"47bbee11.ca9d4","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"normal","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":850,"y":4141,"wires":[["58b8d3d5.2611ac"]]},{"id":"1532e017.e3e09","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"shuffle","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":850,"y":4174,"wires":[["58b8d3d5.2611ac"]]},{"id":"a7b50fea.d09c4","type":"comment","z":"405b0e15.987b5","name":"set.queuemode","info":"","x":879.990234375,"y":4106.37109375,"wires":[]},{"id":"58b8d3d5.2611ac","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"group.set.queuemode","compatibilityMode":false,"name":"coordinator","x":1070,"y":4200,"wires":[[]]},{"id":"3d5b1f85.701d3","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"repeat_one","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":871.990234375,"y":4206.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"b19eafa9.49035","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"repeat_all","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":861.990234375,"y":4238.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"882d960a.489338","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"shuffle_norepeat","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":881.990234375,"y":4270.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"14cf305b.e35ad","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"shuffle_repeat_one","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":891.990234375,"y":4302.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"e9670ef5.d9777","type":"change","z":"405b0e15.987b5","name":"boolean","rules":[{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":701.990234375,"y":2764.37109375,"wires":[["46293123.3744d"]]},{"id":"8c0e9c18.a41c5","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":679.990234375,"y":2726.37109375,"wires":[["e9670ef5.d9777"]]},{"id":"7f66a2e1.63e96c","type":"comment","z":"405b0e15.987b5","name":"seek","info":"","x":55,"y":2060,"wires":[]},{"id":"ae03050b.ff9b28","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"group.seek","compatibilityMode":false,"name":"","x":680,"y":2180,"wires":[["474648b6.275cd8"]]},{"id":"8f8f8422.4099c8","type":"comment","z":"405b0e15.987b5","name":"play track","info":"","x":937,"y":2060,"wires":[]},{"id":"cdf57cf1.e2334","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":962,"y":2230,"wires":[["4d653bdd.18f494"]]},{"id":"cac9c111.9b67d","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"-1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":962,"y":2263,"wires":[["4d653bdd.18f494"]]},{"id":"e1d719cd.f577e8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":962,"y":2097,"wires":[["4d653bdd.18f494"]]},{"id":"d12ecbf4.8ede68","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"hallo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":962,"y":2131,"wires":[["4d653bdd.18f494"]]},{"id":"1b1d2e58.aeab12","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":".,c","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":962,"y":2164,"wires":[["4d653bdd.18f494"]]},{"id":"b84b68e5.398548","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"..10.2","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":962,"y":2197,"wires":[["4d653bdd.18f494"]]},{"id":"4d653bdd.18f494","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"group.play.track","compatibilityMode":false,"name":"","x":1227,"y":2200,"wires":[[]]},{"id":"6ea15226.ec5d6c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"5","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":962,"y":2296,"wires":[["4d653bdd.18f494"]]},{"id":"4554b39e.eb0dcc","type":"comment","z":"405b0e15.987b5","name":"player.join/leave group","info":"","x":105,"y":2669,"wires":[]},{"id":"9692be41.a2e6","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.leave.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":2700,"wires":[["7f602fb7.b8c64"]]},{"id":"d109f6d1.343218","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"coordinator","x":390,"y":2780,"wires":[[]]},{"id":"7f602fb7.b8c64","type":"change","z":"405b0e15.987b5","name":"invalid name","rules":[{"t":"set","p":"playerName","pt":"msg","to":"xxxxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":312,"y":2700,"wires":[["d109f6d1.343218"]]},{"id":"e0575bc9.5ad608","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.leave.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":2734,"wires":[["704a153b.410bbc"]]},{"id":"704a153b.410bbc","type":"change","z":"405b0e15.987b5","name":"invalid player name - boolean","rules":[{"t":"set","p":"playerName","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":362,"y":2734,"wires":[["d109f6d1.343218"]]},{"id":"b58bbcf4.3fc7a","type":"inject","z":"405b0e15.987b5","name":"","topic":"xxxxx","payload":"player.join.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":2780,"wires":[["d109f6d1.343218"]]},{"id":"4de90373.3b552c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.join.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":2820,"wires":[["152d3af0.925b95"]]},{"id":"152d3af0.925b95","type":"change","z":"405b0e15.987b5","name":"invalid player name - boolean","rules":[{"t":"set","p":"playerName","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2820,"wires":[["d109f6d1.343218"]]},{"id":"2b3f55fd.da46aa","type":"comment","z":"55805384.a4695c","name":"Event Listener","info":"","x":75,"y":153,"wires":[]},{"id":"7a9dc1bc.44452","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":450,"y":152,"wires":[]},{"id":"1cdd149b.e2730b","type":"inject","z":"55805384.a4695c","name":"trigger","topic":"","payload":"lab_subscribe","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":910,"y":192,"wires":[["5e09dc71.346b04"]]},{"id":"5e09dc71.346b04","type":"sonos-control-player","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":1060,"y":192,"wires":[["8ff6659a.b521a8"]]},{"id":"8ff6659a.b521a8","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1210,"y":192,"wires":[]},{"id":"f6d3e64e.619b08","type":"http in","z":"55805384.a4695c","d":true,"name":"","url":"/notify","method":"post","upload":false,"swaggerDoc":"","x":110,"y":187,"wires":[["7a9dc1bc.44452","741f261b.011398"]]},{"id":"741f261b.011398","type":"http response","z":"55805384.a4695c","name":"","statusCode":"200","headers":{"content-type":"text/html"},"x":664,"y":187,"wires":[]},{"id":"5eb22380.a0396c","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get.trackplus","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":313,"wires":[["8f3e030e.36f45"]]},{"id":"2ab1dbc3.788904","type":"change","z":"55805384.a4695c","name":"payload.uri","rules":[{"t":"delete","p":"payload","pt":"msg"},{"t":"set","p":"payload.title","pt":"msg","to":"trackData.title","tot":"msg"},{"t":"set","p":"payload.uri","pt":"msg","to":"trackData.uri","tot":"msg"},{"t":"set","p":"payload.currentUri","pt":"msg","to":"mediaData.CurrentURI","tot":"msg"},{"t":"set","p":"payload.trackUri","pt":"msg","to":"positionData.TrackURI","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":314,"wires":[["a7230706.58c2a8"]]},{"id":"a7230706.58c2a8","type":"file","z":"55805384.a4695c","name":"","filename":"\\Users\\hekla\\AppData\\Local\\Temp\\MySonosList.txt","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"utf8","x":518,"y":352,"wires":[[]]},{"id":"8f3e030e.36f45","type":"sonos-universal","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","command":"group.get.trackplus","compatibilityMode":false,"name":"","x":180,"y":353,"wires":[["2ab1dbc3.788904"]]},{"id":"6e2062ee.936d2c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":516,"wires":[["8fe992bb.65ec4"]]},{"id":"20eda006.f2d6d","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.loudness","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":993,"y":548,"wires":[["4ed9c170.a95e9"]]},{"id":"689609d7.f76198","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":993,"y":644,"wires":[["4ed9c170.a95e9"]]},{"id":"6508f56b.c81bbc","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.dialoglevel","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1003,"y":612,"wires":[["4ed9c170.a95e9"]]},{"id":"3115d56b.28377a","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.nightmode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":993,"y":580,"wires":[["4ed9c170.a95e9"]]},{"id":"5ebedebf.cd245","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":2940,"wires":[["ce31adf2.9a607"]]},{"id":"e7dce3a7.661fa","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":2973,"wires":[["ce31adf2.9a607"]]},{"id":"b052d612.b11c28","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":3007,"wires":[["ce31adf2.9a607"]]},{"id":"3ce81ad7.8f20f6","type":"inject","z":"405b0e15.987b5","name":"number 10","topic":"","payload":"10","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":3040,"wires":[["ce31adf2.9a607"]]},{"id":"ce31adf2.9a607","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"group.set.mutestate","compatibilityMode":false,"name":"","x":1020,"y":2980,"wires":[["237719e0.266da6"]]},{"id":"237719e0.266da6","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":990,"y":2940,"wires":[]},{"id":"5aa2fb70.6dd0d4","type":"comment","z":"405b0e15.987b5","name":"set.mutestate","info":"","x":810,"y":2900,"wires":[]},{"id":"3d07eb80.6afcd4","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"player.set.loudness","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":248,"wires":[["16182df1.06e562"]]},{"id":"7064534d.f8128c","type":"inject","z":"405b0e15.987b5","name":"string x","topic":"","payload":"x","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":92,"y":2996,"wires":[["972d052d.563518"]]},{"id":"1d81b018.45a04","type":"change","z":"405b0e15.987b5","name":"payload missing","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":262,"y":2929,"wires":[["972d052d.563518"]]},{"id":"972d052d.563518","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"player.set.subgain","compatibilityMode":false,"name":"living with tv","x":350,"y":3160,"wires":[[]]},{"id":"c568b55a.120c78","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":2929,"wires":[["1d81b018.45a04"]]},{"id":"8640b89d.ca4bc8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":92,"y":3028,"wires":[["972d052d.563518"]]},{"id":"bdd71bfe.4097f8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":92,"y":2964,"wires":[["972d052d.563518"]]},{"id":"a153cd35.e7939","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"{\"x\":2}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":92,"y":3060,"wires":[["972d052d.563518"]]},{"id":"c9878daa.3d228","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"xxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":92,"y":3092,"wires":[["972d052d.563518"]]},{"id":"77c5523e.aa889c","type":"inject","z":"405b0e15.987b5","name":"string 1000","topic":"","payload":"1000","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":102,"y":3124,"wires":[["972d052d.563518"]]},{"id":"2389333c.73ddec","type":"inject","z":"405b0e15.987b5","name":"string 16","topic":"","payload":"16","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":102,"y":3156,"wires":[["972d052d.563518"]]},{"id":"2968b2fb.208aee","type":"inject","z":"405b0e15.987b5","name":"string -16","topic":"","payload":"-16","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":102,"y":3188,"wires":[["972d052d.563518"]]},{"id":"31263678.5e3f5a","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":92,"y":3320,"wires":[["972d052d.563518"]]},{"id":"5fc994b.1f8e76c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":92,"y":3356,"wires":[["3c1a9267.a6f22e"]]},{"id":"3c1a9267.a6f22e","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","command":"player.set.subgain","compatibilityMode":false,"name":"bath without tv","x":250,"y":3356,"wires":[[]]},{"id":"65cc5ac4.07b834","type":"comment","z":"405b0e15.987b5","name":"player.set.subgain TEST of string2ValidInteger requried","info":"","x":205,"y":2896,"wires":[]},{"id":"46d32491.301dcc","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"16","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":3221,"wires":[["972d052d.563518"]]},{"id":"6b205928.9c9248","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"-16","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":3254,"wires":[["972d052d.563518"]]},{"id":"8fccc4f7.b8b038","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"10.2","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":3287,"wires":[["972d052d.563518"]]},{"id":"a07221a8.dda85","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"hallo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":2444,"wires":[["ee2544e.c5886b8"]]},{"id":"cbd8a3c9.b6716","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"..,","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":2476,"wires":[["ee2544e.c5886b8"]]},{"id":"43a1aa50.d299f4","type":"inject","z":"405b0e15.987b5","name":"string 10.2","topic":"","payload":"10.2","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":2508,"wires":[["ee2544e.c5886b8"]]},{"id":"26c6ed5e.587ae2","type":"inject","z":"405b0e15.987b5","name":"string 0","topic":"","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":2540,"wires":[["ee2544e.c5886b8"]]},{"id":"1833f8fb.90e697","type":"inject","z":"405b0e15.987b5","name":"string -1","topic":"","payload":"-1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":2572,"wires":[["ee2544e.c5886b8"]]},{"id":"4cd4631d.290d9c","type":"inject","z":"405b0e15.987b5","name":"string 1000","topic":"","payload":"1000","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":2604,"wires":[["ee2544e.c5886b8"]]},{"id":"5b1af713.dd0468","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":2412,"wires":[["ee2544e.c5886b8"]]},{"id":"78c5ba0.bb9c348","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":535,"y":2513,"wires":[["ee2544e.c5886b8"]]},{"id":"e9da5364.3443c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"-1","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":535,"y":2545,"wires":[["ee2544e.c5886b8"]]},{"id":"4c608163.7de7b","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"1000","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":535,"y":2577,"wires":[["ee2544e.c5886b8"]]},{"id":"e4f0c050.0784f","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":545,"y":2383,"wires":[["da284abb.c06da8"]]},{"id":"dfaf89b8.03e078","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":545,"y":2415,"wires":[["53555556.fc4efc"]]},{"id":"da284abb.c06da8","type":"function","z":"405b0e15.987b5","name":"track null","func":"msg.payload = null\nreturn msg","outputs":1,"noerr":0,"x":704,"y":2383,"wires":[["ee2544e.c5886b8"]]},{"id":"53555556.fc4efc","type":"function","z":"405b0e15.987b5","name":"track undefined","func":"msg.payload = undefined\nreturn msg","outputs":1,"noerr":0,"x":725,"y":2415,"wires":[["ee2544e.c5886b8"]]},{"id":"b786be90.48f1d","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":545,"y":2447,"wires":[["f4bbba23.f9f778"]]},{"id":"f4bbba23.f9f778","type":"function","z":"405b0e15.987b5","name":"track topic NaN","func":"msg.payload = NaN\nreturn msg","outputs":1,"noerr":0,"x":725,"y":2447,"wires":[["ee2544e.c5886b8"]]},{"id":"9b9aa42f.4ec978","type":"comment","z":"405b0e15.987b5","name":"depreciated topic","info":"","x":1500,"y":2380,"wires":[]},{"id":"ec1960b5.00b3f","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":1112,"y":1161,"wires":[["7a79e2be.027cbc"]]},{"id":"4fbab087.44023","type":"comment","z":"99e6906e.c69df","name":"Spotify","info":"","x":86,"y":1310,"wires":[]},{"id":"c173fc9d.38f2f","type":"inject","z":"99e6906e.c69df","name":"","topic":"Best of Prime Music","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":418,"y":1657,"wires":[["2b89b7f7.c62a08"]]},{"id":"b0ad8a7d.1854d8","type":"inject","z":"99e6906e.c69df","name":"","topic":"Arabella","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":116,"y":1628,"wires":[["2b89b7f7.c62a08"]]},{"id":"86ca85ee.a2cd08","type":"inject","z":"99e6906e.c69df","name":"","topic":"Bayern 3","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":116,"y":1660,"wires":[["4c50aef5.23243"]]},{"id":"4c50aef5.23243","type":"change","z":"99e6906e.c69df","name":"volume 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":133,"y":1696,"wires":[["2b89b7f7.c62a08"]]},{"id":"558bfb3e.cddef4","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":361,"y":1882,"wires":[]},{"id":"e447a5fb.55b1e8","type":"comment","z":"99e6906e.c69df","name":"TuneIn","info":"","x":86,"y":1594,"wires":[]},{"id":"7b83fd95.247314","type":"inject","z":"99e6906e.c69df","name":"","topic":"20 Jahre Napster","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":136,"y":1515,"wires":[["2b89b7f7.c62a08"]]},{"id":"451a4bb6.779df4","type":"comment","z":"99e6906e.c69df","name":"Napster","info":"","x":86,"y":1417,"wires":[]},{"id":"7985988e.bede48","type":"comment","z":"99e6906e.c69df","name":"Amazon","info":"","x":367,"y":1592,"wires":[]},{"id":"ab20892f.d367f8","type":"comment","z":"99e6906e.c69df","name":"Radioplayer","info":"","x":107,"y":1737,"wires":[]},{"id":"d1652a07.af4088","type":"inject","z":"99e6906e.c69df","name":"","topic":"1A Fitness Hits","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":137,"y":1769,"wires":[["2b89b7f7.c62a08"]]},{"id":"45e16280.04171c","type":"inject","z":"99e6906e.c69df","name":"","topic":"Daily Mix","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":116,"y":1343,"wires":[["2b89b7f7.c62a08"]]},{"id":"9f634a18.2f2d28","type":"inject","z":"99e6906e.c69df","name":"","topic":"Best Of Love","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":398,"y":1689,"wires":[["2b89b7f7.c62a08"]]},{"id":"dc81baf.86f5248","type":"inject","z":"99e6906e.c69df","name":"","topic":"GloomySunday","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":136,"y":1375,"wires":[["2b89b7f7.c62a08"]]},{"id":"e55076f0.118b88","type":"inject","z":"99e6906e.c69df","name":"","topic":"The Best Songs of the ","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":156,"y":1547,"wires":[["2b89b7f7.c62a08"]]},{"id":"cb7b6a47.fb6b78","type":"inject","z":"99e6906e.c69df","name":"","topic":"Dust in the Wind","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":136,"y":1451,"wires":[["2b89b7f7.c62a08"]]},{"id":"1951586f.db5668","type":"inject","z":"99e6906e.c69df","name":"","topic":"The Best Of Sade","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":146,"y":1483,"wires":[["2b89b7f7.c62a08"]]},{"id":"c9a05e37.4a69b","type":"inject","z":"99e6906e.c69df","name":"","topic":"Blowin' in the Wind","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":418,"y":1625,"wires":[["2b89b7f7.c62a08"]]},{"id":"2b89b7f7.c62a08","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":443,"y":1501,"wires":[["7f9cc53b.eb1efc"]]},{"id":"7f9cc53b.eb1efc","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"any","x":603,"y":1501,"wires":[["48a90d41.bdb824"]]},{"id":"7176f24b.55de2c","type":"comment","z":"99e6906e.c69df","name":"MY SONOS ","info":"","x":75,"y":1272,"wires":[],"icon":"node-red/alert.svg"},{"id":"80629f1d.90fb6","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.items","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":391,"y":1344,"wires":[["7ed6e4a7.8bb5ec"]]},{"id":"8d5a7cf9.0f778","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":346,"y":1922,"wires":[["558bfb3e.cddef4"]]},{"id":"3a82fa70.39bb66","type":"inject","z":"99e6906e.c69df","name":"","topic":"Angi","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":383,"y":1792,"wires":[["2b89b7f7.c62a08"]]},{"id":"17236942.e044f7","type":"comment","z":"99e6906e.c69df","name":"Music Library","info":"","x":383,"y":1759,"wires":[],"icon":"node-red/alert.svg"},{"id":"b5d27d31.321f1","type":"inject","z":"99e6906e.c69df","name":"","topic":"ML10CC","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":393,"y":1824,"wires":[["2b89b7f7.c62a08"]]},{"id":"4914f4d.bb8380c","type":"comment","z":"99e6906e.c69df","name":"Sonos Playlists","info":"","x":605,"y":1762,"wires":[],"icon":"node-red/alert.svg"},{"id":"ecbb06bc.041db8","type":"inject","z":"99e6906e.c69df","name":"","topic":"SonosMix","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":605,"y":1795,"wires":[["2b89b7f7.c62a08"]]},{"id":"48a90d41.bdb824","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":603,"y":1463,"wires":[]},{"id":"c15b1cca.d12f3","type":"comment","z":"99e6906e.c69df","name":"Simple","info":"","x":87,"y":1826,"wires":[],"icon":"node-red/alert.svg"},{"id":"c0e8f4c2.bd6d58","type":"inject","z":"99e6906e.c69df","name":"","topic":"Best Of Love","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":127,"y":1864,"wires":[["8d5a7cf9.0f778"]]},{"id":"edbb409b.d133d","type":"inject","z":"99e6906e.c69df","name":"","topic":"Arabella","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":117,"y":1896,"wires":[["8d5a7cf9.0f778"]]},{"id":"7ed6e4a7.8bb5ec","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":491,"y":1386,"wires":[["5fb0659a.5b5fac"]]},{"id":"5fb0659a.5b5fac","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":566,"y":1345,"wires":[]},{"id":"c74275cc.828628","type":"inject","z":"99e6906e.c69df","name":"","topic":"SonosMix","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":117,"y":1928,"wires":[["8d5a7cf9.0f778"]]},{"id":"4631f9be.411948","type":"comment","z":"99e6906e.c69df","name":"Get","info":"","x":382,"y":1311,"wires":[],"icon":"node-red/alert.svg"},{"id":"4ed9c170.a95e9","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":1262,"y":389,"wires":[["1f223625.3cf2ca"]]},{"id":"e09a244e.1c4898","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"player.set.nightmode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":282,"wires":[["16182df1.06e562"]]},{"id":"c67f8360.ec79a","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"player.set.nightmode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":314,"wires":[["16182df1.06e562"]]},{"id":"5eb4a9c8.e1ff18","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"player.set.dialoglevel","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":346,"wires":[["16182df1.06e562"]]},{"id":"9f73c7d9.ea8038","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"player.set.dialoglevel","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":378,"wires":[["16182df1.06e562"]]},{"id":"a42849b0.2475e8","type":"inject","z":"99e6906e.c69df","name":"","topic":"11","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":410,"wires":[["16182df1.06e562"]]},{"id":"5b4b228a.bb5cec","type":"comment","z":"99e6906e.c69df","name":"Player related","info":"","x":510,"y":56,"wires":[],"icon":"node-red/alert.svg"},{"id":"1f223625.3cf2ca","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1270,"y":440,"wires":[]},{"id":"ecbe75d2.356928","type":"inject","z":"99e6906e.c69df","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":571,"y":850,"wires":[["ec1960b5.00b3f"]]},{"id":"e574d58c.c284e8","type":"comment","z":"99e6906e.c69df","name":"sonos playlist","info":"","x":870,"y":987,"wires":[],"icon":"node-red/alert.svg"},{"id":"794d0a4e.319be4","type":"inject","z":"99e6906e.c69df","name":"","topic":"Bad","payload":"household.create.stereopair","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":169,"y":620,"wires":[["165c6f3d.293fc1"]]},{"id":"165c6f3d.293fc1","type":"change","z":"99e6906e.c69df","name":"right player","rules":[{"t":"set","p":"playerNameRight","pt":"msg","to":"variable","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":229,"y":656,"wires":[["16182df1.06e562"]]},{"id":"d85b8e7b.5413","type":"inject","z":"99e6906e.c69df","name":"","topic":"Bad","payload":"household.separate.stereopair","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":588,"wires":[["16182df1.06e562"]]},{"id":"79584957.72fe58","type":"inject","z":"99e6906e.c69df","name":"","topic":"x-sonos-htastream:RINCON_949F3EC13B9901400:spdif","payload":"player.play.avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":917,"y":848,"wires":[["5d9fc2ce.ef06ec"]]},{"id":"5d9fc2ce.ef06ec","type":"change","z":"99e6906e.c69df","name":"volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":917,"y":886,"wires":[["ec1960b5.00b3f"]]},{"id":"7a79e2be.027cbc","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1138,"y":1114,"wires":[]},{"id":"ce56c8a.5ed8838","type":"inject","z":"99e6906e.c69df","name":"","topic":"x-sonos-htastream:RINCON_949F3EC13B9901400:spdif","payload":"player.play.avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":917,"y":923,"wires":[["ec1960b5.00b3f"]]},{"id":"49fd8f03.349c6","type":"comment","z":"99e6906e.c69df","name":"Line In","info":"","x":849,"y":815,"wires":[],"icon":"node-red/alert.svg"},{"id":"243370d4.f112d","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":744,"y":521,"wires":[]},{"id":"4e76c8e5.ec14e8","type":"inject","z":"99e6906e.c69df","name":"insert_uri http","topic":"https://archive.org/download/testmp3testfile/mpthreetest.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":2280,"wires":[["860fa87.396a458"]]},{"id":"9ef2cc39.4e4b9","type":"comment","z":"99e6906e.c69df","name":"MANAGE QUEUE","info":"","x":95,"y":2048,"wires":[],"icon":"node-red/alert.svg"},{"id":"320981c5.e9d16e","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":720,"y":2280,"wires":[]},{"id":"ce2c7ac5.e09618","type":"comment","z":"99e6906e.c69df","name":"Insert Spotify URI","info":"","x":594,"y":2090,"wires":[],"icon":"font-awesome/fa-arrow-circle-right"},{"id":"e51b4e32.987ad","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Track","topic":"spotify:track:5AdoS3gS47x40nBNlNmPQ8","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":615,"y":2123,"wires":[["860fa87.396a458"]]},{"id":"ef5cb788.e7d0f8","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Album","topic":"spotify:album:1TSZDcvlPtAnekTaItI3qO","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":615,"y":2187,"wires":[["860fa87.396a458"]]},{"id":"94da1f3d.a6ed1","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri TopTrack","topic":"spotify:artistTopTracks:1dfeR4HaWDbWqFHLkxsg1d","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":625,"y":2155,"wires":[["860fa87.396a458"]]},{"id":"f2b0f712.7a1388","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Playlist","topic":"spotify:user:spotify:playlist:37i9dQZEVXbMDoHDwVN2tF","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":625,"y":2219,"wires":[["860fa87.396a458"]]},{"id":"b9f0cdbf.7a3c6","type":"inject","z":"99e6906e.c69df","name":"insert_uri Music Library - song","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":159,"y":2193,"wires":[["860fa87.396a458"]]},{"id":"860fa87.396a458","type":"sonos-manage-queue","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":569,"y":2280,"wires":[["320981c5.e9d16e"]]},{"id":"15797f4a.bca7f1","type":"inject","z":"99e6906e.c69df","name":"get_musiclibrary_playlists","topic":"","payload":"get_musiclibrary_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":2161,"wires":[["860fa87.396a458"]]},{"id":"4730033.d0a3dfc","type":"comment","z":"99e6906e.c69df","name":"Music Library","info":"","x":111,"y":2090,"wires":[]},{"id":"ee9cb3ff.3eeb5","type":"inject","z":"99e6906e.c69df","name":"insert_musiclibrary ...","topic":"ML10CC","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":2129,"wires":[["18357fe6.9d3d4"]]},{"id":"18357fe6.9d3d4","type":"change","z":"99e6906e.c69df","name":"msg.size","rules":[{"t":"set","p":"size","pt":"msg","to":"500","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2129,"wires":[["860fa87.396a458"]]},{"id":"1717f7c4.656918","type":"comment","z":"99e6906e.c69df","name":"http","info":"","x":90,"y":2245,"wires":[]},{"id":"bea132ef.9aba7","type":"inject","z":"99e6906e.c69df","name":"","topic":"variable","payload":"household.test.player","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1023,"y":120,"wires":[["4ed9c170.a95e9"]]},{"id":"d20f2e16.594f1","type":"inject","z":"99e6906e.c69df","name":"","topic":"Küche","payload":"player.join.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":665,"wires":[["7213ff0a.27d93"]]},{"id":"8857c0ce.976d","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.leave.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":697,"wires":[["7213ff0a.27d93"]]},{"id":"7213ff0a.27d93","type":"sonos-universal","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","command":"message","compatibilityMode":true,"name":"Bad not in group","x":761,"y":630,"wires":[[]]},{"id":"bf114e8e.106ed","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"create.snap","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":757,"wires":[["5bf5f03.1b58c1"]]},{"id":"5bf5f03.1b58c1","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":300,"y":757,"wires":[["35acdde5.1e14f2"]]},{"id":"35acdde5.1e14f2","type":"change","z":"99e6906e.c69df","name":"tuneIn","rules":[{"t":"set","p":"snap","pt":"msg","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"play.tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":757,"wires":[["2a6942e0.07517e"]]},{"id":"2a6942e0.07517e","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":644,"y":757,"wires":[["56b986e2.a746b8"]]},{"id":"56b986e2.a746b8","type":"delay","z":"99e6906e.c69df","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":824,"y":757,"wires":[["907efe0.432f5"]]},{"id":"907efe0.432f5","type":"change","z":"99e6906e.c69df","name":"back","rules":[{"t":"set","p":"topic","pt":"msg","to":"snap","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"play.snap","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":954,"y":757,"wires":[["f4366a6.082f098"]]},{"id":"f4366a6.082f098","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":1125,"y":757,"wires":[[]]},{"id":"8fbcb11a.9f452","type":"sonos-universal","z":"4318847d.0693cc","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"","x":313,"y":471,"wires":[["8978d019.4e76e"]]},{"id":"cd23534c.4dffd","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"player.get.properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":471,"wires":[["8fbcb11a.9f452"]]},{"id":"a6111a85.251f68","type":"sonos-universal","z":"4318847d.0693cc","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"","x":914,"y":471,"wires":[[]]},{"id":"5f89d0e1.e0f5a","type":"inject","z":"25081f9e.f5f34","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":329,"wires":[["a3d58123.59236"]]},{"id":"48d6e386.9b00fc","type":"change","z":"25081f9e.f5f34","name":"queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"queue","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Best of Prime","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":301,"y":331,"wires":[["a85e280f.b66018"]]},{"id":"446e86a7.1f0e68","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":630,"y":366,"wires":[]},{"id":"c249bd9e.21742","type":"comment","z":"25081f9e.f5f34","name":"Example 3: Replace SONOS queue without playing","info":"","x":195,"y":296,"wires":[]},{"id":"6a690d.99b7b6f4","type":"inject","z":"25081f9e.f5f34","name":"","topic":"Arabella","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":56,"wires":[["d6823277.d1b88"]]},{"id":"def97151.686e9","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":984,"y":71,"wires":[]},{"id":"bed3502c.76f13","type":"inject","z":"25081f9e.f5f34","name":"","topic":"Best Of Lovesongs","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":95,"wires":[["d6823277.d1b88"]]},{"id":"19467cf3.bf94e3","type":"delay","z":"25081f9e.f5f34","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":567,"y":71,"wires":[["e98515bc.1987a8"]]},{"id":"584abc00.673f14","type":"comment","z":"25081f9e.f5f34","name":"Example 1:  Play (TuneIn, Amazon) radio station using My Sonos and retrieve title, ...","info":"","x":295,"y":20,"wires":[]},{"id":"3ce73efc.9acb82","type":"comment","z":"25081f9e.f5f34","name":"Example 4: Line in Play:5 / TV Beam or Playbar","info":"","x":185,"y":437,"wires":[]},{"id":"51281a6b.ba3244","type":"switch","z":"25081f9e.f5f34","name":"","property":"payload.modelName","propertyType":"msg","rules":[{"t":"eq","v":"Sonos Play:5","vt":"str"},{"t":"eq","v":"Sonos Beam","vt":"str"},{"t":"eq","v":"Sonos Playbar","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":455,"y":471,"wires":[["b123fdba.28bbb"],["66623590.23783c"],["66623590.23783c"]]},{"id":"b123fdba.28bbb","type":"change","z":"25081f9e.f5f34","name":"line in","rules":[{"t":"set","p":"payload","pt":"msg","to":"'x-rincon-stream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":589,"y":442,"wires":[["c3c2037.bf1ca"]]},{"id":"da2d9474.71d978","type":"comment","z":"25081f9e.f5f34","name":"Example 5: Play Playlist from Music Library","info":"","x":165,"y":556,"wires":[]},{"id":"beaf5dab.83544","type":"inject","z":"25081f9e.f5f34","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":590,"wires":[["45978a20.48df94"]]},{"id":"993508ad.52e418","type":"inject","z":"25081f9e.f5f34","name":"","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Playlists/MLAdele.wpl","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":477,"y":666,"wires":[["2a932ea6.52a932"]]},{"id":"1a0819e6.88ae36","type":"comment","z":"25081f9e.f5f34","name":"or direct","info":"","x":477,"y":634,"wires":[]},{"id":"85b7f00d.8f89c","type":"inject","z":"25081f9e.f5f34","name":"mute on","topic":"","payload":"on","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":771,"wires":[["afcd2661.3533b8","d85e139d.6ee3c"]]},{"id":"afcd2661.3533b8","type":"delay","z":"25081f9e.f5f34","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":223,"y":820,"wires":[["b9d2957d.565e58"]]},{"id":"6b92a219.98c95c","type":"delay","z":"25081f9e.f5f34","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":580,"y":870,"wires":[["cd45d2dc.482ba"]]},{"id":"cd45d2dc.482ba","type":"change","z":"25081f9e.f5f34","name":"unmute","rules":[{"t":"set","p":"payload","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":719,"y":870,"wires":[["e3fb4a2f.088628"]]},{"id":"b9d2957d.565e58","type":"change","z":"25081f9e.f5f34","name":"play tuneIn station","rules":[{"t":"set","p":"payload","pt":"msg","to":"s24896","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":392,"y":820,"wires":[["6b92a219.98c95c","a6a04d77.01a48"]]},{"id":"66623590.23783c","type":"change","z":"25081f9e.f5f34","name":"tv (line in)","rules":[{"t":"set","p":"payload","pt":"msg","to":"'x-sonos-htastream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400:spdif'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":599,"y":502,"wires":[["54c37fb8.f6b96","c3c2037.bf1ca"]]},{"id":"8e44a077.a839d","type":"change","z":"25081f9e.f5f34","name":"insert playlist","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"MLAdele","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":590,"wires":[["2a932ea6.52a932"]]},{"id":"ab9c6af.76b6698","type":"comment","z":"25081f9e.f5f34","name":"Example 7: Group players","info":"","x":115,"y":915,"wires":[]},{"id":"9f363237.f6f6f","type":"change","z":"25081f9e.f5f34","name":"play swr3 on coordinator","rules":[{"t":"set","p":"payload","pt":"msg","to":"stream","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SWR3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":271,"y":949,"wires":[["1974bdba.a5de32"]]},{"id":"ec8688f2.25e688","type":"inject","z":"25081f9e.f5f34","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":949,"wires":[["9f363237.f6f6f"]]},{"id":"bfe8fb98.f10878","type":"change","z":"25081f9e.f5f34","name":"join group","rules":[{"t":"set","p":"topic","pt":"msg","to":"Küche","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"player.join.group","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":951,"wires":[["94d5205c.f8562"]]},{"id":"c7c57729.8e9638","type":"comment","z":"25081f9e.f5f34","name":"Example 6: Set a morning station but dont play right now","info":"","x":215,"y":736,"wires":[]},{"id":"2a932ea6.52a932","type":"sonos-manage-queue","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","name":"","x":655,"y":590,"wires":[["5863ebe9.89e0b4"]]},{"id":"d6823277.d1b88","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","name":"","x":398,"y":71,"wires":[["19467cf3.bf94e3"]]},{"id":"e0d75c39.aba64","type":"comment","z":"25081f9e.f5f34","name":"Example 2: Play a (MusicLibrary, Amazon) playlist using My Sonos ","info":"","x":245,"y":160,"wires":[]},{"id":"8c3aa7e.24fa958","type":"inject","z":"25081f9e.f5f34","name":"","topic":"ML10CC","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":200,"wires":[["84885c1.afc68a"]]},{"id":"84885c1.afc68a","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","name":"","x":371,"y":214,"wires":[["6df55e35.988ef"]]},{"id":"b572596c.3d7ac8","type":"inject","z":"25081f9e.f5f34","name":"","topic":"Best of Prime","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":235,"wires":[["84885c1.afc68a"]]},{"id":"c2047efe.bbf54","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":700,"y":214,"wires":[]},{"id":"6df55e35.988ef","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"32a98882.56e1c8","command":"message","compatibilityMode":true,"name":"","x":562,"y":214,"wires":[["c2047efe.bbf54"]]},{"id":"a85e280f.b66018","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","name":"","x":450,"y":366,"wires":[["446e86a7.1f0e68"]]},{"id":"1974bdba.a5de32","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","name":"","x":290,"y":988,"wires":[["bfe8fb98.f10878"]]},{"id":"6edae5c0.71764c","type":"polly","z":"25081f9e.f5f34","name":"","voice":"0","ssml":false,"dir":"overwritten","config":"8945d5a5.31aef8","x":352,"y":1595,"wires":[["eb21ac8e.1acb8"],[]]},{"id":"6117cc2e.1247f4","type":"inject","z":"25081f9e.f5f34","name":"weather","topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1550,"wires":[["45df8523.17f7bc"]]},{"id":"cdcb0b84.3e80c8","type":"change","z":"25081f9e.f5f34","name":"prepare play notification","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.notification","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"$globalContext('system_baseUrl') & '/notifications/' & topic","tot":"jsonata"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":652,"y":1633,"wires":[["eea26486.5a84b8"]]},{"id":"61e8079b.0744c8","type":"fs-ops-copy","z":"25081f9e.f5f34","name":"","sourcePath":"","sourcePathType":"str","sourceFilename":"file","sourceFilenameType":"msg","destPath":"notification_cache","destPathType":"global","destFilename":"topic","destFilenameType":"msg","link":false,"overwrite":true,"x":596,"y":1591,"wires":[["cdcb0b84.3e80c8"]]},{"id":"eb21ac8e.1acb8","type":"switch","z":"25081f9e.f5f34","name":"","property":"_polly.cached","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":468,"y":1597,"wires":[["61e8079b.0744c8"],["cdcb0b84.3e80c8"]]},{"id":"56bc69b9.945378","type":"inject","z":"25081f9e.f5f34","name":"Caution","topic":"notification_caution.mp3","payload":"Caution Caution Caution","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1582,"wires":[["45df8523.17f7bc"]]},{"id":"d4d35cd2.c8bb1","type":"inject","z":"25081f9e.f5f34","name":"inform","topic":"notification_inform.mp3","payload":"Please mind your steps","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1615,"wires":[["45df8523.17f7bc"]]},{"id":"2e24502.17808b","type":"comment","z":"25081f9e.f5f34","name":"Trigger Examples","info":"","x":119,"y":1511,"wires":[]},{"id":"b8593edd.183ee","type":"comment","z":"25081f9e.f5f34","name":"Create/Update mp3 file, create uri and parameter","info":"","x":481,"y":1511,"wires":[]},{"id":"76f7d799.22ea88","type":"comment","z":"25081f9e.f5f34","name":"Serialize msgs and play notification","info":"","x":1030,"y":1510,"wires":[]},{"id":"f6cf8a70.cb3968","type":"inject","z":"25081f9e.f5f34","name":"Clear storage / cache","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":747,"y":1366,"wires":[["2822240b.ac4f1c","5b658e0c.99519"]]},{"id":"5b492bb7.8723c4","type":"link in","z":"25081f9e.f5f34","name":"execute play_notification","links":["eea26486.5a84b8"],"x":904,"y":1550,"wires":[["f6bd0928.fc79a8"]]},{"id":"eea26486.5a84b8","type":"link out","z":"25081f9e.f5f34","name":"Trigger play_notification","links":["5b492bb7.8723c4"],"x":752,"y":1550,"wires":[]},{"id":"268c8327.a8a12c","type":"inject","z":"25081f9e.f5f34","name":"set","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1400,"wires":[["27034749.03ae18","c9be9d0.3a5cc6","67e03099.89377"]]},{"id":"4f2df90e.b7c768","type":"comment","z":"25081f9e.f5f34","name":"TTS, notification","info":"","x":85,"y":1331,"wires":[]},{"id":"cc3ba74b.699798","type":"comment","z":"25081f9e.f5f34","name":"Set Up","info":"","x":91,"y":1366,"wires":[]},{"id":"27034749.03ae18","type":"change","z":"25081f9e.f5f34","name":"","rules":[{"t":"set","p":"system_baseUrl","pt":"global","to":"http://192.168.178.49:1880","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1367,"wires":[[]]},{"id":"c9be9d0.3a5cc6","type":"change","z":"25081f9e.f5f34","name":"","rules":[{"t":"set","p":"notification_directory","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":306,"y":1399,"wires":[[]]},{"id":"67e03099.89377","type":"change","z":"25081f9e.f5f34","name":"","rules":[{"t":"set","p":"notification_cache","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1431,"wires":[[]]},{"id":"a881a188.4c194","type":"change","z":"25081f9e.f5f34","name":"add cache","rules":[{"t":"set","p":"options.dir","pt":"msg","to":"notification_cache","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":605,"y":1549,"wires":[["6edae5c0.71764c"]]},{"id":"7c70a566.a6371c","type":"link in","z":"25081f9e.f5f34","name":"TTS Execute","links":["18152db0.dc8512","45df8523.17f7bc","26ac2b2.49d16d4"],"x":315,"y":1549,"wires":[["f8c778ee.a48958"]]},{"id":"45df8523.17f7bc","type":"link out","z":"25081f9e.f5f34","name":"TTS Trigger","links":["7c70a566.a6371c"],"x":207,"y":1549,"wires":[]},{"id":"5bf5d4c5.59daac","type":"comment","z":"25081f9e.f5f34","name":"Maintain","info":"","x":554,"y":1367,"wires":[]},{"id":"76bdded1.b8428","type":"fs-ops-delete","z":"25081f9e.f5f34","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1405,"wires":[[]]},{"id":"2822240b.ac4f1c","type":"fs-ops-dir","z":"25081f9e.f5f34","name":"","path":"notification_directory","pathType":"global","filter":"notification_*.*","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1405,"wires":[["76bdded1.b8428"]]},{"id":"5b658e0c.99519","type":"fs-ops-dir","z":"25081f9e.f5f34","name":"","path":"notification_cache","pathType":"global","filter":"*_*.mp3","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1438,"wires":[["566e2c4a.fd11c4"]]},{"id":"566e2c4a.fd11c4","type":"fs-ops-delete","z":"25081f9e.f5f34","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1438,"wires":[[]]},{"id":"a95bb148.f6cf8","type":"status","z":"25081f9e.f5f34","name":"","scope":["94a3f8d9.622f08"],"x":949,"y":1599,"wires":[["cb9f1269.8a42a"]]},{"id":"cb9f1269.8a42a","type":"change","z":"25081f9e.f5f34","name":"initiate next","rules":[{"t":"set","p":"releaseNext","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1101,"y":1599,"wires":[["f6bd0928.fc79a8"]]},{"id":"f6bd0928.fc79a8","type":"function","z":"25081f9e.f5f34","name":"queue","func":"// modified version - originally from https://gist.github.com/dceejay/cea8afa28b7a93ebdc0f \n\n// restartQueue = create new\nif (msg.hasOwnProperty(\"restartQueue\")) {\n    context.queue = []\n    \n// if queue doesn't exist, create it    \n} else {\n    context.queue = context.queue || []\n    context.busy = context.busy || false\n\n    // if the msg is a trigger one release next message\n    if (msg.hasOwnProperty(\"releaseNext\")) {\n        if (context.queue.length > 0) {\n            var m = context.queue.shift()\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return m \n        }\n        else {\n            context.busy = false;\n        }\n    }\n    else {\n        if (context.busy) {\n            // if busy add to queue\n            context.queue.push(msg);\n        }\n        else {\n        // otherwise we are empty so just pass through and set busy flag\n            context.busy = true;\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return msg;\n        }\n    }\n}\nnode.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n\nreturn null;","outputs":1,"noerr":0,"x":1012,"y":1550,"wires":[["94a3f8d9.622f08"]]},{"id":"39107409.2bd34c","type":"http in","z":"25081f9e.f5f34","name":"","url":"/notifications/:mp3file","method":"get","upload":false,"swaggerDoc":"","x":150,"y":1746,"wires":[["8d123025.d983d"]]},{"id":"a6b140d2.92031","type":"comment","z":"25081f9e.f5f34","name":"serve mp3 file for SONOS player","info":"","x":170,"y":1709,"wires":[]},{"id":"8d123025.d983d","type":"change","z":"25081f9e.f5f34","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('notification_directory') & '/' & msg.req.params.mp3file","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":374,"y":1746,"wires":[["88023347.baaa5"]]},{"id":"88023347.baaa5","type":"file in","z":"25081f9e.f5f34","name":"","filename":"","format":"","chunk":false,"sendError":false,"encoding":"base64","x":534,"y":1746,"wires":[["90c7cb1e.f8b988"]]},{"id":"739ca8ed.a5b598","type":"catch","z":"25081f9e.f5f34","name":"","scope":["8d123025.d983d","88023347.baaa5","90c7cb1e.f8b988"],"uncaught":false,"x":549,"y":1794,"wires":[["a92f54ca.9b9918","e2120fb8.13076"]]},{"id":"c3be5270.7da9c","type":"http response","z":"25081f9e.f5f34","name":"","statusCode":"","headers":{},"x":829,"y":1745,"wires":[]},{"id":"c3d21ae8.1d9e98","type":"comment","z":"25081f9e.f5f34","name":"Test","info":"http://192.168.178.49:1880/notifications/notification_weather.mp3","x":386,"y":1710,"wires":[]},{"id":"e1f463c3.4e624","type":"inject","z":"25081f9e.f5f34","name":"Flush command queue","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1095,"y":1366,"wires":[["6e7df499.48bb2c"]]},{"id":"6e7df499.48bb2c","type":"change","z":"25081f9e.f5f34","name":"","rules":[{"t":"set","p":"restartQueue","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1107,"y":1403,"wires":[["f6bd0928.fc79a8"]]},{"id":"f8c778ee.a48958","type":"function","z":"25081f9e.f5f34","name":"check globals","func":"// checks existens of requried global variables\n//\nlet value = global.get('system_baseUrl')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - system_baseUrl not defined')\n    return null\n}\nvalue = global.get('notification_cache')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_cache not defined')\n    return null\n}\nvalue = global.get('notification_directory')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_directory not defined')\n    return null\n}\nreturn msg\n\nfunction isTruthyAndNotEmptyString (input) {\n    return !(typeof input === 'undefined' || input === null ||\n      (typeof input === 'number' && !Number.isFinite(input)) || input === '')\n}","outputs":1,"noerr":0,"x":432,"y":1549,"wires":[["a881a188.4c194"]]},{"id":"434999ac.a373d8","type":"comment","z":"25081f9e.f5f34","name":"Recommendation: Define globals as permanent","info":"This is done in the settings.js file. \nUncomment the contextStorage paragraph.\nThis will store all context variable on disk.","x":440,"y":1331,"wires":[]},{"id":"5cca9dcf.2b7814","type":"inject","z":"25081f9e.f5f34","name":"weather","topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":450,"y":1655,"wires":[["cdcb0b84.3e80c8"]]},{"id":"90c7cb1e.f8b988","type":"change","z":"25081f9e.f5f34","name":"set 200","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"200","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":1746,"wires":[["c3be5270.7da9c"]]},{"id":"a92f54ca.9b9918","type":"change","z":"25081f9e.f5f34","name":"set 404","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"404","tot":"num"},{"t":"set","p":"payload","pt":"msg","to":"error","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":675,"y":1794,"wires":[["c3be5270.7da9c"]]},{"id":"e2120fb8.13076","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"true","targetType":"full","x":670,"y":1829,"wires":[]},{"id":"94a3f8d9.622f08","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":1161,"y":1550,"wires":[["a29a63d7.3e64c"]]},{"id":"a29a63d7.3e64c","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1270,"y":1595,"wires":[]},{"id":"536e14cb.5bbbcc","type":"inject","z":"25081f9e.f5f34","name":"habit","topic":"notification_habit.mp3","payload":"Don't do unto others what you would not have done unto you. Don't do unto others what you would not have done unto you.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1648,"wires":[["45df8523.17f7bc"]]},{"id":"a72c5aae.097e58","type":"comment","z":"25081f9e.f5f34","name":"Example 8: Group snapshot","info":"","x":125,"y":1060,"wires":[]},{"id":"47546566.e54dac","type":"inject","z":"25081f9e.f5f34","name":"","topic":"","payload":"queueBackup","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1095,"wires":[["a6faed33.59f02"]]},{"id":"a3913e88.2f518","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.create.snap","compatibilityMode":false,"name":"","x":718,"y":1134,"wires":[["214d9ba2.b171d4"]]},{"id":"214d9ba2.b171d4","type":"change","z":"25081f9e.f5f34","name":"store in flow, stop","rules":[{"t":"set","p":"recentsnapshot","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":955,"y":1094,"wires":[["8793912b.c33de"]]},{"id":"864433c7.ce87b","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.save.queue","compatibilityMode":false,"name":"","x":470,"y":1134,"wires":[["9c8b04f0.ffcfa8"]]},{"id":"7f4c7f7b.d858b","type":"inject","z":"25081f9e.f5f34","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":1195,"wires":[["2e987a06.948b86"]]},{"id":"2e987a06.948b86","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.clear.queue","compatibilityMode":false,"name":"","x":160,"y":1235,"wires":[["3cae8a82.c9ef86"]]},{"id":"8793912b.c33de","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.stop","compatibilityMode":false,"name":"","x":945,"y":1134,"wires":[["94510914.f1a8f8"]]},{"id":"b8e91607.efb708","type":"change","z":"25081f9e.f5f34","name":"backup queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"queueBackup","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":1095,"wires":[["864433c7.ce87b"]]},{"id":"a6faed33.59f02","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"household.remove.sonosplaylist","compatibilityMode":false,"name":"","x":190,"y":1134,"wires":[["b8e91607.efb708"]]},{"id":"94510914.f1a8f8","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1080,"y":1134,"wires":[]},{"id":"a3d58123.59236","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.clear.queue","compatibilityMode":false,"name":"","x":180,"y":369,"wires":[["48d6e386.9b00fc"]]},{"id":"e98515bc.1987a8","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.get.trackplus","compatibilityMode":false,"name":"","x":784,"y":71,"wires":[["def97151.686e9"]]},{"id":"45978a20.48df94","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.clear.queue","compatibilityMode":false,"name":"","x":293,"y":590,"wires":[["8e44a077.a839d"]]},{"id":"5863ebe9.89e0b4","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.play.queue","compatibilityMode":false,"name":"","x":850,"y":590,"wires":[[]]},{"id":"a6a04d77.01a48","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.play.tunein","compatibilityMode":false,"name":"","x":610,"y":820,"wires":[["1c33a5c6.c4c47a"]]},{"id":"1c33a5c6.c4c47a","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.stop","compatibilityMode":false,"name":"","x":794,"y":820,"wires":[[]]},{"id":"94d5205c.f8562","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"32a98882.56e1c8","command":"message","compatibilityMode":true,"name":"","x":543,"y":990,"wires":[[]]},{"id":"54c37fb8.f6b96","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":744,"y":521,"wires":[]},{"id":"70f8c562.6cfc6c","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"8d44022c.adb65","command":"player.get.properties","compatibilityMode":false,"name":"","x":278,"y":471,"wires":[["51281a6b.ba3244"]]},{"id":"67a14287.ce336c","type":"inject","z":"25081f9e.f5f34","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":471,"wires":[["70f8c562.6cfc6c"]]},{"id":"c3c2037.bf1ca","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"8d44022c.adb65","command":"player.play.avtransport","compatibilityMode":false,"name":"","x":783,"y":466,"wires":[[]]},{"id":"d85e139d.6ee3c","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.set.mutestate","compatibilityMode":false,"name":"","x":320,"y":771,"wires":[[]]},{"id":"e3fb4a2f.088628","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"group.set.mutestate","compatibilityMode":false,"name":"","x":899,"y":870,"wires":[[]]},{"id":"9c8b04f0.ffcfa8","type":"change","z":"25081f9e.f5f34","name":"store volumes, mute sate","rules":[{"t":"set","p":"snapVolumes","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"snapMutestates","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":695,"y":1094,"wires":[["a3913e88.2f518"]]},{"id":"3cae8a82.c9ef86","type":"change","z":"25081f9e.f5f34","name":"restore queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"queueBackup","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":363,"y":1195,"wires":[["53358155.282d6"]]},{"id":"44a3ff71.826cc","type":"change","z":"25081f9e.f5f34","name":"play snapshot","rules":[{"t":"set","p":"payload","pt":"msg","to":"group.play.snap","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"recentsnapshot","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":604,"y":1195,"wires":[["2c292e27.39eec2"]]},{"id":"2c292e27.39eec2","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","command":"message","compatibilityMode":true,"name":"","x":614,"y":1235,"wires":[["dd8d92da.82331"]]},{"id":"dd8d92da.82331","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":756,"y":1235,"wires":[]},{"id":"53358155.282d6","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","name":"","x":396,"y":1235,"wires":[["44a3ff71.826cc"]]},{"id":"7cd24cdf.253774","type":"inject","z":"25081f9e.f5f34","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1040,"y":740,"wires":[[]]},{"id":"8fe992bb.65ec4","type":"sonos-universal","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","command":"message","compatibilityMode":true,"name":"Bad","x":1226,"y":516,"wires":[["1f223625.3cf2ca"]]},{"id":"70279836.3eb8e8","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"on","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":567,"wires":[["666dfda6.c1f144"]]},{"id":"923a2bc5.e495c8","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"00:05:00","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":631,"wires":[["7e6b8e4d.c843"]]},{"id":"b80b26b4.75bda8","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"00:01:00","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":173,"wires":[["3ea508db.576908"]]},{"id":"50a16ef5.d04bf","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"off","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":599,"wires":[["666dfda6.c1f144"]]},{"id":"6ebdc30c.c1404c","type":"comment","z":"fcb24b59.997048","name":"UNIVERSAL: Group based & SONOS player name ","info":"","x":195,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"18c1f89e.008f67","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":218,"wires":[["e7d53079.e19e"]]},{"id":"a335ebab.d262c8","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"on","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":503,"wires":[["8baacb27.cdbed8"]]},{"id":"314e559a.0ce07a","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"off","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":535,"wires":[["8baacb27.cdbed8"]]},{"id":"ad43267e.c45fc8","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"-3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":471,"wires":[["509b2f4b.63869"]]},{"id":"477c2db7.9aa4c4","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":439,"wires":[["509b2f4b.63869"]]},{"id":"89672385.e2d9","type":"comment","z":"fcb24b59.997048","name":"Group related - without prefix group.","info":"","x":180,"y":55,"wires":[],"icon":"node-red/alert.svg"},{"id":"91e1b828.c5c388","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"Bad","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":727,"wires":[["1a42c12.153eb3f"]]},{"id":"6733e100.03ba8","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"Bad","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":678,"wires":[["7b6a2369.645f6c"]]},{"id":"1fd013d2.e490cc","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"2","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1031,"wires":[["f8f5397c.9fc5c8"]]},{"id":"d4a540c7.a1c3c","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"2","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":1262,"wires":[["1c01ab2d.2b9625"]]},{"id":"bdd441f4.2d4c4","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"normal","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1096,"wires":[["55f515e0.9b980c"]]},{"id":"a8467182.c641d","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"shuffle","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1064,"wires":[["55f515e0.9b980c"]]},{"id":"25318462.224c5c","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"on","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":590,"y":520,"wires":[["27eb4b72.fdc4a4"]]},{"id":"3d536d61.0c68f2","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"off","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":590,"y":552,"wires":[["27eb4b72.fdc4a4"]]},{"id":"d5ff679b.6505d8","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"2","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1229,"wires":[["91b068f2.a67c68"]]},{"id":"91b068f2.a67c68","type":"change","z":"fcb24b59.997048","name":"5 tracks","rules":[{"t":"set","p":"numberOfTracks","pt":"msg","to":"5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":221,"y":1243,"wires":[["1c01ab2d.2b9625"]]},{"id":"462c6e05.805a6","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"on","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":515,"y":229,"wires":[["693a30c2.de8ec"]]},{"id":"e5b27df7.06fcb","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":951,"y":1197,"wires":[["3d9d9f6e.32d34"]]},{"id":"dc9b3a5d.e8acf8","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"http://www.fritz.de/live.m3u","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":951,"y":1230,"wires":[["3d9d9f6e.32d34"]]},{"id":"cda28de9.4a0b3","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1373,"wires":[["51d49a82.887694"]]},{"id":"51d49a82.887694","type":"change","z":"fcb24b59.997048","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":1373,"wires":[["efdd2e17.e1fbd"]]},{"id":"d8a8e889.e4baa8","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":515,"y":133,"wires":[["abda8f3.860287"]]},{"id":"614ddfd1.0284c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"household.create.stereopair","compatibilityMode":false,"name":"","x":314,"y":725,"wires":[["ca7a828f.03a9a"]]},{"id":"9ed33604.0215c8","type":"comment","z":"fcb24b59.997048","name":"TuneIn","info":"","x":531,"y":955,"wires":[],"icon":"node-red/alert.svg"},{"id":"ca286753.49c978","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1419,"wires":[["659dbc63.67f134"]]},{"id":"659dbc63.67f134","type":"change","z":"fcb24b59.997048","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":1419,"wires":[["45bb3557.49866c"]]},{"id":"987af870.066e38","type":"change","z":"fcb24b59.997048","name":"volume","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":237,"y":90,"wires":[["95c16934.817688"]]},{"id":"fd346001.a9815","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":986,"wires":[["603bf096.7b10b"]]},{"id":"7db7aaf1.98c324","type":"comment","z":"fcb24b59.997048","name":"queue","info":"","x":90,"y":953,"wires":[],"icon":"node-red/alert.svg"},{"id":"934b482e.555ef8","type":"comment","z":"fcb24b59.997048","name":"Notification","info":"","x":100,"y":1341,"wires":[],"icon":"node-red/alert.svg"},{"id":"45bb3557.49866c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"32a98882.56e1c8","command":"joiner.play.notification","compatibilityMode":false,"name":"","x":419,"y":1419,"wires":[["9c70dfd0.bab1f"]]},{"id":"31e041ce.eecf6e","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":232,"wires":[]},{"id":"9c70dfd0.bab1f","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":670,"y":1240,"wires":[]},{"id":"5368a9fe.9d5968","type":"comment","z":"fcb24b59.997048","name":"Http Radio stream","info":"","x":991,"y":1164,"wires":[],"icon":"node-red/alert.svg"},{"id":"d80b793a.c84c38","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"on","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":515,"y":165,"wires":[["77033f40.8c1bb"]]},{"id":"3300a3fb.3dc80c","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"off","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":515,"y":197,"wires":[["77033f40.8c1bb"]]},{"id":"823ded25.31aeb","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"-3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":515,"y":88,"wires":[["9c2f29d0.60a0d8"]]},{"id":"75e67db3.22e244","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":1197,"wires":[["4ea01c39.6d2854"]]},{"id":"681fa2a0.83a75c","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"queuebackupSave","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1152,"wires":[["2f53d9b2.e67ad6"]]},{"id":"623ade64.f5611","type":"comment","z":"fcb24b59.997048","name":"Get / Test","info":"","x":1055,"y":27,"wires":[],"icon":"node-red/alert.svg"},{"id":"9b41bb49.d3ed28","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"queuebackupSave","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":990,"y":1117,"wires":[["9e401d19.db846"]]},{"id":"fee971ca.32135","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"off","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":515,"y":261,"wires":[["693a30c2.de8ec"]]},{"id":"1264115f.3dcf0f","type":"comment","z":"fcb24b59.997048","name":"Spotify","info":"","x":86,"y":1539,"wires":[]},{"id":"db8db714.bdc478","type":"inject","z":"fcb24b59.997048","name":"","topic":"Best of Prime Music","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":418,"y":1886,"wires":[["998b76db.1f0868"]]},{"id":"a385a6d5.354308","type":"inject","z":"fcb24b59.997048","name":"","topic":"Arabella","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":116,"y":1857,"wires":[["998b76db.1f0868"]]},{"id":"d4976f59.69edf","type":"inject","z":"fcb24b59.997048","name":"","topic":"Bayern 3","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":116,"y":1889,"wires":[["d9c0355d.cbce98"]]},{"id":"d9c0355d.cbce98","type":"change","z":"fcb24b59.997048","name":"volume 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":133,"y":1925,"wires":[["998b76db.1f0868"]]},{"id":"d04d39ba.647d08","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":361,"y":2111,"wires":[]},{"id":"1fda082d.8e2668","type":"comment","z":"fcb24b59.997048","name":"TuneIn","info":"","x":86,"y":1823,"wires":[]},{"id":"b5be64f4.9ca6e8","type":"inject","z":"fcb24b59.997048","name":"","topic":"20 Jahre Napster","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":136,"y":1744,"wires":[["998b76db.1f0868"]]},{"id":"bc9bf62e.4303d8","type":"comment","z":"fcb24b59.997048","name":"Napster","info":"","x":86,"y":1646,"wires":[]},{"id":"73ae0cf5.a38714","type":"comment","z":"fcb24b59.997048","name":"Amazon","info":"","x":367,"y":1821,"wires":[]},{"id":"cb211e08.5de58","type":"comment","z":"fcb24b59.997048","name":"Radioplayer","info":"","x":107,"y":1966,"wires":[]},{"id":"f5da969a.b5d588","type":"inject","z":"fcb24b59.997048","name":"","topic":"1A Fitness Hits","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":137,"y":1998,"wires":[["998b76db.1f0868"]]},{"id":"5bbeaacb.2ebb84","type":"inject","z":"fcb24b59.997048","name":"","topic":"Daily Mix","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":116,"y":1572,"wires":[["998b76db.1f0868"]]},{"id":"a2edc619.706d08","type":"inject","z":"fcb24b59.997048","name":"","topic":"Best Of Love","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":398,"y":1918,"wires":[["998b76db.1f0868"]]},{"id":"de76ac4e.6d018","type":"inject","z":"fcb24b59.997048","name":"","topic":"GloomySunday","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":136,"y":1604,"wires":[["998b76db.1f0868"]]},{"id":"bbbf1b8e.8ce028","type":"inject","z":"fcb24b59.997048","name":"","topic":"The Best Songs of the ","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":156,"y":1776,"wires":[["998b76db.1f0868"]]},{"id":"c20dd74f.c696a8","type":"inject","z":"fcb24b59.997048","name":"","topic":"Dust in the Wind","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":136,"y":1680,"wires":[["998b76db.1f0868"]]},{"id":"ed7c1d29.b05de","type":"inject","z":"fcb24b59.997048","name":"","topic":"The Best Of Sade","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":146,"y":1712,"wires":[["998b76db.1f0868"]]},{"id":"19ab586e.9b5fb8","type":"inject","z":"fcb24b59.997048","name":"","topic":"Blowin' in the Wind","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":418,"y":1854,"wires":[["998b76db.1f0868"]]},{"id":"998b76db.1f0868","type":"sonos-manage-mysonos","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","name":"","x":443,"y":1730,"wires":[["bb9d2c77.bee8b"]]},{"id":"bb9d2c77.bee8b","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.play.export","compatibilityMode":false,"name":"any","x":603,"y":1730,"wires":[["e5c6146d.d6ed08"]]},{"id":"a3d14703.ea47c8","type":"comment","z":"fcb24b59.997048","name":"MY SONOS ","info":"","x":75,"y":1501,"wires":[],"icon":"node-red/alert.svg"},{"id":"add51f6b.851b","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"get.items","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":391,"y":1573,"wires":[["e516ebff.2adba8"]]},{"id":"29c21850.62cbf8","type":"sonos-manage-mysonos","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","name":"","x":346,"y":2151,"wires":[["d04d39ba.647d08"]]},{"id":"b0617069.3c092","type":"inject","z":"fcb24b59.997048","name":"","topic":"Angi","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":383,"y":2021,"wires":[["998b76db.1f0868"]]},{"id":"8ef74e2f.19de9","type":"comment","z":"fcb24b59.997048","name":"Music Library","info":"","x":383,"y":1988,"wires":[],"icon":"node-red/alert.svg"},{"id":"4ad61ce9.35a564","type":"inject","z":"fcb24b59.997048","name":"","topic":"ML10CC","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":393,"y":2053,"wires":[["998b76db.1f0868"]]},{"id":"7117156a.fb343c","type":"comment","z":"fcb24b59.997048","name":"Sonos Playlists","info":"","x":605,"y":1991,"wires":[],"icon":"node-red/alert.svg"},{"id":"a20f3133.fa3b6","type":"inject","z":"fcb24b59.997048","name":"","topic":"SonosMix","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":605,"y":2024,"wires":[["998b76db.1f0868"]]},{"id":"e5c6146d.d6ed08","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":725,"y":1730,"wires":[]},{"id":"54175828.68a5e8","type":"comment","z":"fcb24b59.997048","name":"Simple","info":"","x":87,"y":2055,"wires":[],"icon":"node-red/alert.svg"},{"id":"3ded565.1ba4caa","type":"inject","z":"fcb24b59.997048","name":"","topic":"Best Of Love","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":127,"y":2093,"wires":[["29c21850.62cbf8"]]},{"id":"194fca9d.f388a5","type":"inject","z":"fcb24b59.997048","name":"","topic":"Arabella","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":117,"y":2125,"wires":[["29c21850.62cbf8"]]},{"id":"e516ebff.2adba8","type":"sonos-manage-mysonos","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","name":"","x":491,"y":1615,"wires":[["bc5eca80.52cd18"]]},{"id":"bc5eca80.52cd18","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":566,"y":1574,"wires":[]},{"id":"d6e2051f.7d2fc8","type":"inject","z":"fcb24b59.997048","name":"","topic":"SonosMix","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":117,"y":2157,"wires":[["29c21850.62cbf8"]]},{"id":"5c8f1a6d.0b3214","type":"comment","z":"fcb24b59.997048","name":"Get","info":"","x":382,"y":1540,"wires":[],"icon":"node-red/alert.svg"},{"id":"6d12f6b4.b6d208","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"on","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":515,"y":295,"wires":[["266fc7a4.7e1978"]]},{"id":"8f40cb14.2d3598","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"off","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":515,"y":327,"wires":[["266fc7a4.7e1978"]]},{"id":"70a0b726.755658","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"on","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":515,"y":359,"wires":[["4b92105.09d26f"]]},{"id":"72f8a31a.be48dc","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"off","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":515,"y":391,"wires":[["4b92105.09d26f"]]},{"id":"fc2e99fc.f0eb48","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"11","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":515,"y":423,"wires":[["97862156.f61cc"]]},{"id":"8caeee05.64787","type":"comment","z":"fcb24b59.997048","name":"Player related","info":"","x":535,"y":56,"wires":[],"icon":"node-red/alert.svg"},{"id":"72b9bcc7.b4a994","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":531,"y":988,"wires":[["f033e838.6a1a98"]]},{"id":"7b96e529.dbf47c","type":"comment","z":"fcb24b59.997048","name":"sonos playlist","info":"","x":970,"y":1084,"wires":[],"icon":"node-red/alert.svg"},{"id":"1a42c12.153eb3f","type":"change","z":"fcb24b59.997048","name":"right player","rules":[{"t":"set","p":"playerNameRight","pt":"msg","to":"variable","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":122,"y":765,"wires":[["614ddfd1.0284c"]]},{"id":"e1f18d37.a5009","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"x-sonos-htastream:RINCON_949F3EC13B9901400:spdif","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":954,"y":1034,"wires":[["19ce25f4.1e1b5a"]]},{"id":"19ce25f4.1e1b5a","type":"change","z":"fcb24b59.997048","name":"volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1087,"y":1034,"wires":[["11575ece.7d3eb1"]]},{"id":"4303e3be.2f40ac","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"x-sonos-htastream:RINCON_949F3EC13B9901400:spdif","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":951,"y":989,"wires":[["11575ece.7d3eb1"]]},{"id":"6a56315a.d7e13","type":"comment","z":"fcb24b59.997048","name":"Line In","info":"","x":951,"y":956,"wires":[],"icon":"node-red/alert.svg"},{"id":"a6ec54.e5ad13b","type":"inject","z":"fcb24b59.997048","name":"insert_uri http","topic":"https://archive.org/download/testmp3testfile/mpthreetest.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":2470,"wires":[["73fd90ba.2e6c9"]]},{"id":"99cf29ba.718b58","type":"comment","z":"fcb24b59.997048","name":"MANAGE QUEUE","info":"","x":95,"y":2238,"wires":[],"icon":"node-red/alert.svg"},{"id":"49ad4315.b65b1c","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":720,"y":2470,"wires":[]},{"id":"92ec6085.89d7b","type":"comment","z":"fcb24b59.997048","name":"Insert Spotify URI","info":"","x":594,"y":2280,"wires":[],"icon":"font-awesome/fa-arrow-circle-right"},{"id":"44f02140.1dee3","type":"inject","z":"fcb24b59.997048","name":"insert_spotify_uri Track","topic":"spotify:track:5AdoS3gS47x40nBNlNmPQ8","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":615,"y":2313,"wires":[["73fd90ba.2e6c9"]]},{"id":"aca64af5.c81a58","type":"inject","z":"fcb24b59.997048","name":"insert_spotify_uri Album","topic":"spotify:album:1TSZDcvlPtAnekTaItI3qO","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":615,"y":2377,"wires":[["73fd90ba.2e6c9"]]},{"id":"59b4ab64.6bb4a4","type":"inject","z":"fcb24b59.997048","name":"insert_spotify_uri TopTrack","topic":"spotify:artistTopTracks:1dfeR4HaWDbWqFHLkxsg1d","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":625,"y":2345,"wires":[["73fd90ba.2e6c9"]]},{"id":"892dd8f8.f55a08","type":"inject","z":"fcb24b59.997048","name":"insert_spotify_uri Playlist","topic":"spotify:user:spotify:playlist:37i9dQZEVXbMDoHDwVN2tF","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":625,"y":2409,"wires":[["73fd90ba.2e6c9"]]},{"id":"a6016aed.8ae0c8","type":"inject","z":"fcb24b59.997048","name":"insert_uri Music Library - song","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":159,"y":2383,"wires":[["73fd90ba.2e6c9"]]},{"id":"73fd90ba.2e6c9","type":"sonos-manage-queue","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","name":"","x":569,"y":2470,"wires":[["49ad4315.b65b1c"]]},{"id":"447b0b23.cabc14","type":"inject","z":"fcb24b59.997048","name":"get_musiclibrary_playlists","topic":"","payload":"get_musiclibrary_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":2351,"wires":[["73fd90ba.2e6c9"]]},{"id":"fcb2dd96.6c08d","type":"comment","z":"fcb24b59.997048","name":"Music Library","info":"","x":111,"y":2280,"wires":[]},{"id":"e2f96cb4.7ed34","type":"inject","z":"fcb24b59.997048","name":"insert_musiclibrary ...","topic":"ML10CC","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":2319,"wires":[["e585a7f7.b6ade8"]]},{"id":"e585a7f7.b6ade8","type":"change","z":"fcb24b59.997048","name":"msg.size","rules":[{"t":"set","p":"size","pt":"msg","to":"500","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2319,"wires":[["73fd90ba.2e6c9"]]},{"id":"4c6a3296.e18a6c","type":"comment","z":"fcb24b59.997048","name":"http","info":"","x":90,"y":2435,"wires":[]},{"id":"3d6b30af.53794","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"Küche","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":592,"y":594,"wires":[["1f400216.b288ee"]]},{"id":"a392e371.bda3d","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":592,"y":641,"wires":[["c8ee133d.8ca85"]]},{"id":"27eb4b72.fdc4a4","type":"sonos-universal","z":"fcb24b59.997048","confignode":"32a98882.56e1c8","command":"player.set.led","compatibilityMode":false,"name":"","x":757,"y":536,"wires":[[]]},{"id":"b286426e.4cca7","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":816,"wires":[["1b2f151d.697e1b"]]},{"id":"1b2f151d.697e1b","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.create.snap","compatibilityMode":false,"name":"","x":160,"y":860,"wires":[["2eb1b70f.02b798"]]},{"id":"2eb1b70f.02b798","type":"change","z":"fcb24b59.997048","name":"tuneIn","rules":[{"t":"set","p":"snap","pt":"msg","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"s24896","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":815,"wires":[["fcc85992.b0fa28"]]},{"id":"fcc85992.b0fa28","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.play.tunein","compatibilityMode":false,"name":"","x":410,"y":860,"wires":[["9dbffe9f.ef32"]]},{"id":"9dbffe9f.ef32","type":"delay","z":"fcb24b59.997048","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":580,"y":860,"wires":[["52e9d467.e99e0c"]]},{"id":"52e9d467.e99e0c","type":"change","z":"fcb24b59.997048","name":"back","rules":[{"t":"set","p":"payload","pt":"msg","to":"snap","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":691,"y":815,"wires":[["b40b9cf7.0797c"]]},{"id":"b40b9cf7.0797c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.play.snap","compatibilityMode":false,"name":"","x":787,"y":860,"wires":[[]]},{"id":"4426373d.a44838","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"household.get.groups","compatibilityMode":false,"name":"","x":1104,"y":103,"wires":[["3297fb94.ce7334"]]},{"id":"db603a5e.d99898","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"household.test.player","compatibilityMode":false,"name":"","x":1093,"y":59,"wires":[["3297fb94.ce7334"]]},{"id":"d416816a.6f37","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":905,"y":102,"wires":[["4426373d.a44838","9b2d5e17.80ad3","ffca6c4c.bdfd2","10e906e9.0b24e9","a273d49a.ff1f78","3620fb0a.3ebf34","42b9bd7b.ced104","d8136e98.a802e","2b1ddc1.3c74a24"]]},{"id":"9b2d5e17.80ad3","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.get.state","compatibilityMode":false,"name":"","x":1074,"y":191,"wires":[["3297fb94.ce7334"]]},{"id":"ffca6c4c.bdfd2","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.get.volume","compatibilityMode":false,"name":"","x":1084,"y":236,"wires":[["3297fb94.ce7334"]]},{"id":"10e906e9.0b24e9","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.get.mutestate","compatibilityMode":false,"name":"","x":1093,"y":280,"wires":[["3297fb94.ce7334"]]},{"id":"a273d49a.ff1f78","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.get.crossfade","compatibilityMode":false,"name":"","x":1113,"y":324,"wires":[["3297fb94.ce7334"]]},{"id":"3620fb0a.3ebf34","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.get.sleeptimer","compatibilityMode":false,"name":"","x":1093,"y":368,"wires":[["3297fb94.ce7334"]]},{"id":"d8136e98.a802e","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.get.trackplus","compatibilityMode":false,"name":"","x":1124,"y":412,"wires":[[]]},{"id":"3297fb94.ce7334","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1322,"y":267,"wires":[]},{"id":"c80e6ceb.8e10b","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"Küche","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":928,"y":59,"wires":[["db603a5e.d99898"]]},{"id":"42b9bd7b.ced104","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.get.playbackstate","compatibilityMode":false,"name":"","x":1104,"y":147,"wires":[["3297fb94.ce7334"]]},{"id":"2b1ddc1.3c74a24","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.get.queue","compatibilityMode":false,"name":"","x":1084,"y":456,"wires":[["3297fb94.ce7334"]]},{"id":"ba41c940.360cf8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.get.mutestate","compatibilityMode":false,"name":"","x":1094,"y":544,"wires":[["d0c8fe54.43fc6"]]},{"id":"d0d46ea0.bbf6f","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.get.properties","compatibilityMode":false,"name":"","x":1094,"y":588,"wires":[["d0c8fe54.43fc6"]]},{"id":"a993e586.635ad8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.get.led","compatibilityMode":false,"name":"","x":1085,"y":632,"wires":[["d0c8fe54.43fc6"]]},{"id":"79203201.55eb1c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.get.loudness","compatibilityMode":false,"name":"","x":1105,"y":676,"wires":[["d0c8fe54.43fc6"]]},{"id":"5eaa7b1c.d4df34","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.get.dialoglevel","compatibilityMode":false,"name":"","x":1125,"y":720,"wires":[["d0c8fe54.43fc6"]]},{"id":"87506742.2d2aa8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.get.volume","compatibilityMode":false,"name":"","x":1084,"y":500,"wires":[["d0c8fe54.43fc6"]]},{"id":"c94460d6.02c3b","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":883,"y":420,"wires":[["87506742.2d2aa8","ba41c940.360cf8","d0d46ea0.bbf6f","a993e586.635ad8","79203201.55eb1c","5eaa7b1c.d4df34","4cd20618.a65588","427c3521.73391c","9ef480af.e3003","60d2cb79.534e74"]]},{"id":"d0c8fe54.43fc6","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1322,"y":467,"wires":[]},{"id":"4cd20618.a65588","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.get.nightmode","compatibilityMode":false,"name":"","x":1094,"y":764,"wires":[["d0c8fe54.43fc6"]]},{"id":"9ef480af.e3003","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.get.role","compatibilityMode":false,"name":"","x":1074,"y":854,"wires":[["d0c8fe54.43fc6"]]},{"id":"427c3521.73391c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.get.subgain","compatibilityMode":false,"name":"","x":1084,"y":809,"wires":[["d0c8fe54.43fc6"]]},{"id":"60d2cb79.534e74","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.get.queue","compatibilityMode":false,"name":"","x":1084,"y":900,"wires":[["d0c8fe54.43fc6"]]},{"id":"693a30c2.de8ec","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.set.loudness","compatibilityMode":false,"name":"","x":686,"y":245,"wires":[["31e041ce.eecf6e"]]},{"id":"266fc7a4.7e1978","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.set.nightmode","compatibilityMode":false,"name":"","x":686,"y":309,"wires":[["31e041ce.eecf6e"]]},{"id":"4b92105.09d26f","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.set.dialoglevel","compatibilityMode":false,"name":"","x":705,"y":373,"wires":[["31e041ce.eecf6e"]]},{"id":"97862156.f61cc","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.set.subgain","compatibilityMode":false,"name":"","x":676,"y":423,"wires":[["31e041ce.eecf6e"]]},{"id":"77033f40.8c1bb","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.set.mutestate","compatibilityMode":false,"name":"","x":686,"y":183,"wires":[["31e041ce.eecf6e"]]},{"id":"9c2f29d0.60a0d8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.adjust.volume","compatibilityMode":false,"name":"","x":683,"y":88,"wires":[["31e041ce.eecf6e"]]},{"id":"abda8f3.860287","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.set.volume","compatibilityMode":false,"name":"","x":674,"y":133,"wires":[["31e041ce.eecf6e"]]},{"id":"8bdc8068.a5371","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.previous.track","compatibilityMode":false,"name":"","x":280,"y":407,"wires":[["ca7a828f.03a9a"]]},{"id":"3ea508db.576908","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.seek","compatibilityMode":false,"name":"","x":299,"y":173,"wires":[["ca7a828f.03a9a"]]},{"id":"666dfda6.c1f144","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.set.crossfade","compatibilityMode":false,"name":"","x":280,"y":579,"wires":[["ca7a828f.03a9a"]]},{"id":"7e6b8e4d.c843","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.set.sleeptimer","compatibilityMode":false,"name":"","x":283,"y":631,"wires":[["ca7a828f.03a9a"]]},{"id":"8baacb27.cdbed8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.set.mutestate","compatibilityMode":false,"name":"","x":260,"y":513,"wires":[["ca7a828f.03a9a"]]},{"id":"509b2f4b.63869","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.adjust.volume","compatibilityMode":false,"name":"","x":261,"y":453,"wires":[["ca7a828f.03a9a"]]},{"id":"e7d53079.e19e","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.toggle.playback","compatibilityMode":false,"name":"","x":280,"y":218,"wires":[["ca7a828f.03a9a"]]},{"id":"ca7a828f.03a9a","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":510,"y":480,"wires":[]},{"id":"96cb4dcf.974e7","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.pause","compatibilityMode":false,"name":"","x":250,"y":264,"wires":[["ca7a828f.03a9a"]]},{"id":"9cf34a60.a8b8d8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.stop","compatibilityMode":false,"name":"","x":250,"y":312,"wires":[["ca7a828f.03a9a"]]},{"id":"8350bd8b.7746","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":264,"wires":[["96cb4dcf.974e7"]]},{"id":"ba8dad2f.b3a4d","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":312,"wires":[["9cf34a60.a8b8d8"]]},{"id":"599f2db5.ba5834","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":407,"wires":[["8bdc8068.a5371"]]},{"id":"1d22ec4d.13eeb4","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.next.track","compatibilityMode":false,"name":"","x":271,"y":361,"wires":[["ca7a828f.03a9a"]]},{"id":"7c0bf831.2ca458","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":361,"wires":[["1d22ec4d.13eeb4"]]},{"id":"95c16934.817688","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.play","compatibilityMode":false,"name":"","x":280,"y":127,"wires":[["ca7a828f.03a9a"]]},{"id":"3b863ed1.345942","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":127,"wires":[["95c16934.817688"]]},{"id":"ca5fe2dd.6d6d","type":"inject","z":"fcb24b59.997048","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":90,"wires":[["987af870.066e38"]]},{"id":"7b6a2369.645f6c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"household.separate.stereopair","compatibilityMode":false,"name":"","x":294,"y":678,"wires":[["ca7a828f.03a9a"]]},{"id":"c8ee133d.8ca85","type":"sonos-universal","z":"fcb24b59.997048","confignode":"32a98882.56e1c8","command":"player.leave.group","compatibilityMode":false,"name":"","x":751,"y":641,"wires":[[]]},{"id":"1f400216.b288ee","type":"sonos-universal","z":"fcb24b59.997048","confignode":"32a98882.56e1c8","command":"player.join.group","compatibilityMode":false,"name":"","x":751,"y":594,"wires":[[]]},{"id":"11575ece.7d3eb1","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"player.play.avtransport","compatibilityMode":false,"name":"","x":1158,"y":990,"wires":[[]]},{"id":"f033e838.6a1a98","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.play.tunein","compatibilityMode":false,"name":"","x":690,"y":988,"wires":[["ac27fd2b.cb6cf"]]},{"id":"3d9d9f6e.32d34","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.play.streamhttp","compatibilityMode":false,"name":"","x":1151,"y":1214,"wires":[[]]},{"id":"9e401d19.db846","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"household.remove.sonosplaylist","compatibilityMode":false,"name":"","x":1239,"y":1117,"wires":[[]]},{"id":"1c01ab2d.2b9625","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.remove.tracks","compatibilityMode":false,"name":"","x":393,"y":1263,"wires":[["9c70dfd0.bab1f"]]},{"id":"4ea01c39.6d2854","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.clear.queue","compatibilityMode":false,"name":"","x":273,"y":1197,"wires":[["9c70dfd0.bab1f"]]},{"id":"2f53d9b2.e67ad6","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.save.queue","compatibilityMode":false,"name":"","x":392,"y":1152,"wires":[["ac27fd2b.cb6cf"]]},{"id":"55f515e0.9b980c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.set.queuemode","compatibilityMode":false,"name":"","x":282,"y":1079,"wires":[["ac27fd2b.cb6cf"]]},{"id":"f8f5397c.9fc5c8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.play.track","compatibilityMode":false,"name":"","x":271,"y":1031,"wires":[["ac27fd2b.cb6cf"]]},{"id":"603bf096.7b10b","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.play.queue","compatibilityMode":false,"name":"","x":270,"y":986,"wires":[["ac27fd2b.cb6cf"]]},{"id":"ac27fd2b.cb6cf","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":570,"y":1080,"wires":[]},{"id":"efdd2e17.e1fbd","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","command":"group.play.notification","compatibilityMode":false,"name":"","x":420,"y":1373,"wires":[["9c70dfd0.bab1f"]]},{"id":"cf75f94c.642528","type":"change","z":"405b0e15.987b5","name":"empty","rules":[{"t":"set","p":"cmd","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":156,"wires":[["40a60a57.8c31e4"]]},{"id":"4d248c22.4d5e84","type":"change","z":"405b0e15.987b5","name":"xxxxx","rules":[{"t":"set","p":"cmd","pt":"msg","to":"xxxxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":188,"wires":[["40a60a57.8c31e4"]]},{"id":"8a76284f.fe9448","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":523.5,"wires":[["bcccdf9.be39c2"]]},{"id":"1a320def.b0dc42","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":556.5,"wires":[["b4b269f0.1aa7f8"]]},{"id":"3a390f55.c08c9","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":597.5,"wires":[["9fadd5a8.3857c8"]]},{"id":"55d6faec.65f9b4","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":630,"wires":[["fc66c449.e0eb78"]]},{"id":"10c9c0ff.3b3b7f","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":662,"wires":[["da13c3fc.1c5bc"]]},{"id":"b0682deb.3e02b","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":694.5,"wires":[["cbdbaf6.23a935"]]},{"id":"2d79151c.83d7ca","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":726.5,"wires":[["2df6203e.1bff4"]]},{"id":"21079579.0cbe7a","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":758.5,"wires":[["83eeb43b.415378"]]},{"id":"5ed86aa5.ef0174","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":800,"wires":[["ff664a1e.3e6338"]]},{"id":"9c70cbc7.c1a6f8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":832,"wires":[["5913b0e7.4e005"]]},{"id":"d249ba21.f0aaa8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":864.5,"wires":[["1ffd9830.ec71b8"]]},{"id":"b6a863f1.6bc21","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":896.5,"wires":[["35faf3a3.de329c"]]},{"id":"ad510b93.b46f28","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":928.5,"wires":[["a833b530.6713b8"]]},{"id":"5c173c90.809b34","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":960,"wires":[["55ef2881.06c478"]]},{"id":"964bbec4.55d7d","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":992,"wires":[["8954dadd.55f548"]]},{"id":"e05dde2e.a9d92","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":1023.5,"wires":[["c72353ac.cc08d"]]},{"id":"fcafcd21.3e455","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":726,"y":873,"wires":[["fe42c076.54c0f"]]},{"id":"69d43ac.593ebc4","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":726,"y":905,"wires":[["93c379c8.a09d78"]]},{"id":"1767abdb.9348e4","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":726,"y":937,"wires":[["c812b0e7.50966"]]},{"id":"e7df01ec.63e3c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":726,"y":968.5,"wires":[["a43b74d.bb1d988"]]},{"id":"3eb3df9c.d767b","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":726,"y":1000.5,"wires":[["e1a43d1.a122bc"]]},{"id":"244fd7fb.227a88","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":726,"y":1032,"wires":[["d5a3125b.e29c3"]]},{"id":"73b622b0.143f8c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":727,"y":633,"wires":[["1b8c8042.f4546"]]},{"id":"7d4f6790.0ca078","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":727,"y":665,"wires":[["79b0c290.63eaec"]]},{"id":"bf07f364.3e5a5","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":727,"y":697,"wires":[["9872b6f8.387178"]]},{"id":"9447f4ac.89ba98","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":727,"y":728.5,"wires":[["ef0d807.b9ff58"]]},{"id":"2e630e0b.17d572","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":727,"y":760.5,"wires":[["834cab61.d72528"]]},{"id":"f29bb491.8b8a98","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":727,"y":792,"wires":[["6a81463f.ae85b8"]]},{"id":"f84c053b.92d1d8","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1230,"y":1460,"wires":[]},{"id":"a0ea9f59.02f2e","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1238,"y":1148,"wires":[]},{"id":"1c632e08.9b3f22","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","command":"joiner.play.notification","compatibilityMode":false,"name":"","x":1213,"y":1188,"wires":[["a0ea9f59.02f2e"]]},{"id":"b84d7209.d0ecb","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"00:00:0x","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":981,"y":1175,"wires":[["1c632e08.9b3f22"]]},{"id":"67d62188.88894","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0y:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":981,"y":1208,"wires":[["1c632e08.9b3f22"]]},{"id":"fa611c4b.f9df","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":981,"y":1240,"wires":[["1c632e08.9b3f22"]]},{"id":"39bd5548.da8f6a","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0:0:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":981,"y":1272,"wires":[["1c632e08.9b3f22"]]},{"id":"ad9e7cdc.d709f","type":"change","z":"405b0e15.987b5","name":"duration - boolean","rules":[{"t":"set","p":"duration","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":971,"y":1111,"wires":[["1c632e08.9b3f22"]]},{"id":"690af5fa.ea21ac","type":"change","z":"405b0e15.987b5","name":"duration - number","rules":[{"t":"set","p":"duration","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":972,"y":1143,"wires":[["1c632e08.9b3f22"]]},{"id":"c9d4ea1a.b62de8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":785,"y":1192,"wires":[["b84d7209.d0ecb","67d62188.88894","fa611c4b.f9df","39bd5548.da8f6a","ad9e7cdc.d709f","690af5fa.ea21ac"]]},{"id":"e31ec83a.558e58","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","command":"group.clear.queue","compatibilityMode":false,"name":"","x":270,"y":1371,"wires":[["bd69f167.291ad"]]},{"id":"9de8cf4.a2dcb3","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","command":"group.next.track","compatibilityMode":false,"name":"","x":271,"y":1633,"wires":[["9d03522b.25c0d"]]},{"id":"3b5f40e0.59262","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","command":"group.previous.track","compatibilityMode":false,"name":"","x":280,"y":1666,"wires":[["9d03522b.25c0d"]]},{"id":"23d81fd7.cf067","type":"comment","z":"405b0e15.987b5","name":"player set volume - has to be tested as different","info":"","x":769,"y":1600,"wires":[]},{"id":"ca35c50f.6a6a58","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1030,"y":1640,"wires":[]},{"id":"e089f945.4b5558","type":"inject","z":"405b0e15.987b5","name":"empty string","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1846,"wires":[["9a21fd50.7c9d7"]]},{"id":"7ee64fb9.fcfc2","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1880,"wires":[["9a21fd50.7c9d7"]]},{"id":"a3b73eea.bf2d4","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"5","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1912,"wires":[["9a21fd50.7c9d7"]]},{"id":"194770e5.17535f","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"55","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1944,"wires":[["9a21fd50.7c9d7"]]},{"id":"c38f65d3.943078","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"70","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1976,"wires":[["9a21fd50.7c9d7"]]},{"id":"2df03ac1.448fc6","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"0:01","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":454,"y":1813,"wires":[["9a21fd50.7c9d7"]]},{"id":"6ee438f2.ade7e8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"00:70","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":453,"y":1846,"wires":[["9a21fd50.7c9d7"]]},{"id":"6f9aea59.adf904","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"70:00","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":453,"y":1880,"wires":[["9a21fd50.7c9d7"]]},{"id":"a5c16349.d9a12","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"70:10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":453,"y":1912,"wires":[["9a21fd50.7c9d7"]]},{"id":"363f7df9.92e452","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"1:00:10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":453,"y":1944,"wires":[["9a21fd50.7c9d7"]]},{"id":"dad20892.7ded98","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"25:00:10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":463,"y":1976,"wires":[["9a21fd50.7c9d7"]]},{"id":"6e9161d.68854a","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"group.set.crossfade","compatibilityMode":false,"name":"","x":1200,"y":1911,"wires":[[]]},{"id":"4034cfc8.f537","type":"change","z":"405b0e15.987b5","name":"missing payload","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1018,"y":1850,"wires":[["6e9161d.68854a"]]},{"id":"bf1d34d9.f0b9e8","type":"change","z":"405b0e15.987b5","name":"missing payload","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":262,"y":2100,"wires":[["ae03050b.ff9b28"]]},{"id":"6752031a.1a0dac","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":2100,"wires":[["bf1d34d9.f0b9e8"]]},{"id":"fb1b6046.ad5c1","type":"inject","z":"405b0e15.987b5","name":"empty string","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":2133,"wires":[["ae03050b.ff9b28"]]},{"id":"a75b4476.7d7718","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":2167,"wires":[["ae03050b.ff9b28"]]},{"id":"69b1fe6c.7a36a","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"5","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":2199,"wires":[["ae03050b.ff9b28"]]},{"id":"7979236f.ae830c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"55","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":2231,"wires":[["ae03050b.ff9b28"]]},{"id":"60f1e4e1.11714c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"70","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":2263,"wires":[["ae03050b.ff9b28"]]},{"id":"5e306c90.131f44","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"0:01","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":453,"y":2100,"wires":[["ae03050b.ff9b28"]]},{"id":"53fc4adb.27bf34","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"00:70","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":452,"y":2133,"wires":[["ae03050b.ff9b28"]]},{"id":"efa1c.85a675e48","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"70:00","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":452,"y":2167,"wires":[["ae03050b.ff9b28"]]},{"id":"c7184f2a.0e93d","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"70:10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":452,"y":2199,"wires":[["ae03050b.ff9b28"]]},{"id":"38deb200.57f02e","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"1:00:10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":452,"y":2231,"wires":[["ae03050b.ff9b28"]]},{"id":"a8e868ae.b4eab8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"25:00:10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":462,"y":2263,"wires":[["ae03050b.ff9b28"]]},{"id":"474648b6.275cd8","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":730,"y":2140,"wires":[]},{"id":"1561ae3b.df7a72","type":"comment","z":"405b0e15.987b5","name":"only 4 tracks in queue","info":"","x":1180,"y":2280,"wires":[]},{"id":"ee2544e.c5886b8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"group.remove.tracks","compatibilityMode":false,"name":"","x":1061,"y":2609,"wires":[[]]},{"id":"faec28c7.441bf8","type":"change","z":"405b0e15.987b5","name":"missing payload","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":261,"y":2380,"wires":[["ee2544e.c5886b8"]]},{"id":"e037a9e9.4f0098","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":2380,"wires":[["faec28c7.441bf8"]]},{"id":"b0382286.859c1","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"10.2","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":535,"y":2480,"wires":[["ee2544e.c5886b8"]]},{"id":"aee750ac.a4f01","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":3520,"wires":[["b0c9da96.fec0b8"]]},{"id":"b51f417e.a5935","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":3552,"wires":[["e394c644.9a6a78"]]},{"id":"1a9dc603.b1163a","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":3584,"wires":[["77ac95f8.95f24c"]]},{"id":"5fd485e1.4cd62c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":3623,"wires":[["62df47f3.957b58"]]},{"id":"3abceb00.b05a66","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":3655,"wires":[["335dc449.e3916c"]]},{"id":"da22f77e.bb32b8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":3687,"wires":[["181a89ad.6460c6"]]},{"id":"c9da2c52.bea92","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":3719,"wires":[["67b2a46d.59410c"]]},{"id":"a3d04378.9d5b2","type":"inject","z":"405b0e15.987b5","name":"ZAPSPLAT","topic":"","payload":"https://www.zapsplat.com/wp-content/uploads/2015/sound-effects-the-sound-pack-tree/tspt_pull_bell_02_065.mp3?_=1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":570,"y":3825,"wires":[["3fbf466d.b527ea"]]},{"id":"89d0ae31.655fb","type":"inject","z":"405b0e15.987b5","name":"soundbible dog","topic":"","payload":"http://soundbible.com/mp3/labrador-barking-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":580,"y":3857,"wires":[["3fbf466d.b527ea"]]},{"id":"690b7a86.adfa54","type":"inject","z":"405b0e15.987b5","name":"Bell","topic":"","payload":"http://soundbible.com/mp3/bells-tibetan-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":3889,"wires":[["3fbf466d.b527ea"]]},{"id":"6ac16114.caca4","type":"inject","z":"405b0e15.987b5","name":"alarm","topic":"","payload":"http://soundbible.com/mp3/Fire%20Truck%20Siren-SoundBible.com-642727443.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":3921,"wires":[["3fbf466d.b527ea"]]},{"id":"b4caa12.021446","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":560,"y":3953,"wires":[["3fbf466d.b527ea"]]},{"id":"d635eb6f.99eb68","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":561,"y":3985,"wires":[["565335ac.1ab00c"]]},{"id":"6f8573a1.7573cc","type":"change","z":"405b0e15.987b5","name":"no payload","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":3100,"wires":[["32f536f6.2d7e9a"]]},{"id":"ade8324a.50b73","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":3100,"wires":[["6f8573a1.7573cc"]]},{"id":"f39559f1.b50648","type":"inject","z":"405b0e15.987b5","name":"empty","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":3165,"wires":[["32f536f6.2d7e9a"]]},{"id":"186b2bfd.b0e814","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":3231,"wires":[["32f536f6.2d7e9a"]]},{"id":"26a5f785.be36d8","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":810,"y":3160,"wires":[]},{"id":"2f4d5feb.78bcf","type":"comment","z":"405b0e15.987b5","name":"set nightmode","info":"","x":515,"y":3065,"wires":[]},{"id":"255c885a.42ed08","type":"inject","z":"405b0e15.987b5","name":"string 20","topic":"","payload":"20","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":538,"y":3265,"wires":[["32f536f6.2d7e9a"]]},{"id":"13a4b0bd.37fd3f","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"20","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":3300,"wires":[["32f536f6.2d7e9a"]]},{"id":"28011425.1ba9bc","type":"inject","z":"775d7a2a.44f234","name":"","topic":"xxxx","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":540,"wires":[["eb4bce0e.b8965"]]},{"id":"fda33bb0.6b4318","type":"comment","z":"775d7a2a.44f234","name":"insert_uri ","info":"","x":80,"y":503,"wires":[]},{"id":"bdcf1ad1.1cf038","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":80,"y":584,"wires":[["ec8b4f9c.7e706"]]},{"id":"294b50d3.2558","type":"inject","z":"775d7a2a.44f234","name":"","topic":"xxxx","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":617,"wires":[["ec8b4f9c.7e706"]]},{"id":"e48436e0.1be918","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":450,"y":577,"wires":[]},{"id":"c8eada0a.82cae8","type":"inject","z":"775d7a2a.44f234","name":"","topic":"12xdgt","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":650,"wires":[["ec8b4f9c.7e706"]]},{"id":"3cfe3621.e49b5a","type":"comment","z":"775d7a2a.44f234","name":"insert_spotify_uri","info":"","x":100,"y":720,"wires":[]},{"id":"569bcd45.c81b04","type":"inject","z":"775d7a2a.44f234","name":"spotify wrong syntax","topic":"spotify:xxxxxx","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":823,"wires":[["8a37351c.653768"]]},{"id":"22c23092.2d3b7","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99.9913330078125,"y":756.9982604980469,"wires":[["8a37351c.653768"]]},{"id":"5993585c.3babf8","type":"inject","z":"775d7a2a.44f234","name":"","topic":"xxxxxx","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":129,"y":790,"wires":[["8a37351c.653768"]]},{"id":"7aa48204.710a5c","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":569.9913330078125,"y":822.9982604980469,"wires":[]},{"id":"25efa40e.8aeffc","type":"inject","z":"775d7a2a.44f234","name":"spotify wrong syntax","topic":"spotify:album:1TSZ","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109.9913330078125,"y":855.9982604980469,"wires":[["8a37351c.653768"]]},{"id":"c9f5ed2d.b3d32","type":"inject","z":"775d7a2a.44f234","name":"spotify wrong syntax","topic":"spotify:user:spotify:playlist:","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109.9913330078125,"y":889.9982604980469,"wires":[["8a37351c.653768"]]},{"id":"eb4bce0e.b8965","type":"sonos-manage-queue","z":"775d7a2a.44f234","confignode":"9037fbab.1d8408","name":"invalid player","x":272,"y":540,"wires":[["e48436e0.1be918"]]},{"id":"ec8b4f9c.7e706","type":"sonos-manage-queue","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":280,"y":617,"wires":[["e48436e0.1be918"]]},{"id":"8a37351c.653768","type":"sonos-manage-queue","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":399.9913330078125,"y":822.9982604980469,"wires":[["7aa48204.710a5c"]]},{"id":"eb1d1b1b.5788a8","type":"comment","z":"775d7a2a.44f234","name":"FAILURE","info":"","x":60,"y":440,"wires":[],"icon":"node-red/alert.svg"},{"id":"32f536f6.2d7e9a","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"player.set.nightmode","compatibilityMode":false,"name":"","x":760,"y":3200,"wires":[["26a5f785.be36d8"]]},{"id":"228e5141.c3078e","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"xxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":3132,"wires":[["32f536f6.2d7e9a"]]},{"id":"847ba018.0846d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","command":"message","compatibilityMode":false,"name":"living using msg","x":420,"y":4440,"wires":[["9cf2e64a.0c37a8"]]},{"id":"9cf2e64a.0c37a8","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":449,"y":4402,"wires":[]},{"id":"ee7d2ded.fa527","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":4400,"wires":[["726b7830.31fe18"]]},{"id":"8bc453f3.0b7e","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":4432,"wires":[["c205e877.9378d8"]]},{"id":"726b7830.31fe18","type":"change","z":"405b0e15.987b5","name":"play","rules":[{"t":"set","p":"cmd","pt":"msg","to":"play","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":4400,"wires":[["847ba018.0846d"]]},{"id":"c205e877.9378d8","type":"change","z":"405b0e15.987b5","name":"play.track","rules":[{"t":"set","p":"cmd","pt":"msg","to":"play.track","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":220,"y":4432,"wires":[["847ba018.0846d"]]},{"id":"2df4293c.07ce96","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":4464,"wires":[["d9c7c26c.9321e"]]},{"id":"d9c7c26c.9321e","type":"change","z":"405b0e15.987b5","name":"play tunein","rules":[{"t":"set","p":"cmd","pt":"msg","to":"play.tunein","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":231,"y":4464,"wires":[["847ba018.0846d"]]},{"id":"a94c62bb.569b2","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"-10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":4496,"wires":[["aef1fdbd.45d8"]]},{"id":"aef1fdbd.45d8","type":"change","z":"405b0e15.987b5","name":"adjust volume","rules":[{"t":"set","p":"cmd","pt":"msg","to":"adjust.volume","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":4496,"wires":[["847ba018.0846d"]]},{"id":"a918895d.a112c8","type":"comment","z":"405b0e15.987b5","name":"using message","info":"","x":85,"y":4360,"wires":[]}]