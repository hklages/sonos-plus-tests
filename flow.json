[{"id":"55805384.a4695c","type":"tab","label":"Sandbox","disabled":false,"info":""},{"id":"9ea06256.355a2","type":"tab","label":"Failure","disabled":false,"info":""},{"id":"2e2bde07.2bda42","type":"tab","label":"Failure Queue","disabled":false,"info":""},{"id":"775d7a2a.44f234","type":"tab","label":"Succes all","disabled":false,"info":""},{"id":"95a81269.b7f3c","type":"tab","label":"play_notif","disabled":false,"info":""},{"id":"99e6906e.c69df","type":"tab","label":"Nodes and Commands","disabled":false,"info":""},{"id":"4318847d.0693cc","type":"tab","label":"Examples-Complex","disabled":false,"info":""},{"id":"a0a649cc.ca04e8","type":"tab","label":"Validate messages","disabled":false,"info":""},{"id":"d65eded3.250b9","type":"subflow","name":"HandleErrors","info":"","category":"","in":[{"x":61,"y":79,"wires":[{"id":"6b0e515b.e62cd"}]}],"out":[],"env":[{"name":"Tabname","type":"str","value":"unknown","ui":{"type":"input","opts":{"types":["str"]},"label":{}}},{"name":"DebugToMobile","type":"bool","value":"false","ui":{"type":"input","opts":{"types":["bool"]},"label":{}}},{"name":"KeyVariable","type":"str","value":"system_keyTasker","ui":{"type":"input","opts":{"types":["str"]},"label":{}}}],"color":"#E9967A","icon":"node-red/alert.svg"},{"id":"88e9fa70.4a53e8","type":"sonos-config","z":"","name":"coordinator","serialnum":"5C-AA-FD-00-22-36:1","ipaddress":"192.168.178.37"},{"id":"c747354a.95e5e8","type":"sonos-config","z":0,"name":"no ip but correct serial number","serialnum":"94-9F-3E-C1-3B-99:8","ipaddress":""},{"id":"9037fbab.1d8408","type":"sonos-config","z":0,"name":"fritzbox ip address","serialnum":"","ipaddress":"192.168.178.1"},{"id":"64704482.34d37c","type":"sonos-config","z":0,"name":"ip address with wrong syntax","serialnum":"","ipaddress":"191168.178.41"},{"id":"ff297616.de3c88","type":"sonos-config","z":0,"name":"no ip address & invalid serial","serialnum":"5C-AA-FD22-36:1","ipaddress":""},{"id":"8d44022c.adb65","type":"sonos-config","z":"","name":"living","serialnum":"94-9F-3E-C1-3B-99:8","ipaddress":"192.168.178.36"},{"id":"32a98882.56e1c8","type":"sonos-config","z":"","name":"bath","serialnum":"00-0E-58-FE-3A-EA:5","ipaddress":"192.168.178.35"},{"id":"bc822e98.2348e","type":"sonos-config","z":0,"name":"not exist","serialnum":"00-0E-58-FE-3A-EA:5","ipaddress":"192.168.178.91"},{"id":"2113e9bb.c52236","type":"sonos-config","z":"","name":"variable","serialnum":"B8-E9-37-58-31-C0:A","ipaddress":""},{"id":"dd1b16a.4333de8","type":"polly-config","z":0,"name":"pollyaws"},{"id":"8945d5a5.31aef8","type":"polly-config","z":"","name":"pollyaws"},{"id":"f0ced157.0eab1","type":"sonos-config","z":"","name":"leader","serialnum":"","ipaddress":"192.168.178.37"},{"id":"b5b83677.5ae3d8","type":"sonos-config","z":"","name":"client","serialnum":"","ipaddress":"192.168.178.36"},{"id":"e4c73d3.eac99c","type":"comment","z":"9ea06256.355a2","name":"MANAGE RADIO","info":"","x":85,"y":2480,"wires":[],"icon":"node-red/alert.svg"},{"id":"647651d0.ec7cf","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1195,"y":2800,"wires":[]},{"id":"d2675555.e48ab8","type":"inject","z":"9ea06256.355a2","name":"TuneIn wrong syntax","topic":"x1324","payload":"play_TuneIn","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":775,"y":2704,"wires":[["2f900d43.a3c562"]]},{"id":"1fe4ad1e.2476b3","type":"inject","z":"9ea06256.355a2","name":"TuneIn wrong syntax","topic":"1234","payload":"play_TuneIn","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":775,"y":2738,"wires":[["2f900d43.a3c562"]]},{"id":"a5bcaa81.9df868","type":"inject","z":"9ea06256.355a2","name":"TuneIn wrong syntax","topic":"s234b","payload":"play_TuneIn","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":775,"y":2772,"wires":[["2f900d43.a3c562"]]},{"id":"72cee728.e0ea78","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":60,"wires":[["f2979581.a19d08"]]},{"id":"c6791a45.0bb278","type":"comment","z":"99e6906e.c69df","name":"CONTROL PLAYER","info":"","x":95,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"f4248c81.32327","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"+5","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":301,"y":190,"wires":[["f2979581.a19d08"]]},{"id":"a7596942.c49048","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"stop","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":159,"wires":[["f2979581.a19d08"]]},{"id":"cb3c0416.980978","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"12","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":301,"y":124,"wires":[["f2979581.a19d08"]]},{"id":"2cf59.d462b0a72","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":301,"y":58,"wires":[["f2979581.a19d08"]]},{"id":"6bd8d342.61224c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"unmute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":301,"y":91,"wires":[["f2979581.a19d08"]]},{"id":"ddb5876d.01a778","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":793,"y":56,"wires":[["9225381f.320718"]]},{"id":"40f2e7ed.fede98","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_state","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":801,"y":88,"wires":[["9225381f.320718"]]},{"id":"eef64078.54f74","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1272,"y":254,"wires":[]},{"id":"860023f6.20cb6","type":"comment","z":"99e6906e.c69df","name":"GET STATUS","info":"","x":769,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"d739357f.c78c18","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":813,"y":226,"wires":[["9225381f.320718"]]},{"id":"cea9d73f.532858","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"activate_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":726,"y":711,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"81d87131.0f66a","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"flush_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1218,"y":679,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"efdd332a.0b675","type":"inject","z":"99e6906e.c69df","name":"","topic":"2","payload":"play_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":716,"y":778,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"1eff2c9b.4bc873","type":"inject","z":"99e6906e.c69df","name":"insert_uri http","topic":"https://archive.org/download/testmp3testfile/mpthreetest.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":715,"y":917,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"c00d8a62.9fccf8","type":"comment","z":"99e6906e.c69df","name":"MANAGE QUEUE","info":"","x":737,"y":636,"wires":[],"icon":"node-red/alert.svg"},{"id":"69a99ad3.b4ebb4","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1259,"y":1042,"wires":[]},{"id":"8f176bf.4f77c98","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":997,"y":680,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"8ab0eed6.5e689","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"leave_group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":470,"wires":[["218e05d2.48724a"]]},{"id":"42de01d4.7ea0d","type":"inject","z":"99e6906e.c69df","name":"","topic":"sonos","payload":"join_group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":502,"wires":[["218e05d2.48724a"]]},{"id":"ab8eb0c8.14e91","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"toggleplayback","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":93,"wires":[["f2979581.a19d08"]]},{"id":"b834b2a3.10b9b","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"-5","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":301,"y":157,"wires":[["f2979581.a19d08"]]},{"id":"5bb03490.b8cdcc","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"pause","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":126,"wires":[["f2979581.a19d08"]]},{"id":"89e380d5.450ae","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"next_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":192,"wires":[["f2979581.a19d08"]]},{"id":"8b6b76b2.e5ec78","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"previous_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":225,"wires":[["f2979581.a19d08"]]},{"id":"8df79316.ebd06","type":"comment","z":"4318847d.0693cc","name":"::: C ::: Activate SONOS queue","info":"","x":135,"y":286,"wires":[]},{"id":"d3c4b5a7.528288","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"flush_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":420,"wires":[["b42fb10f.ed5db"]]},{"id":"6280f87a.0562c8","type":"change","z":"4318847d.0693cc","name":"get sonos playlists","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":341,"y":422,"wires":[["a13967f6.62ada8"]]},{"id":"bc96e24a.7279a","type":"switch","z":"4318847d.0693cc","name":"","property":"payload","propertyType":"msg","rules":[{"t":"jsonata_exp","v":"$count(payload) >= 1\t","vt":"jsonata"}],"checkall":"true","repair":false,"outputs":1,"x":512,"y":462,"wires":[["e61d7df7.7fcfe"]]},{"id":"e61d7df7.7fcfe","type":"change","z":"4318847d.0693cc","name":"insert first playlist in queue","rules":[{"t":"set","p":"topic","pt":"msg","to":"payload[0].uri","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"insert_uri","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":714,"y":421,"wires":[["38b84114.bff09e"]]},{"id":"bdacd3ce.91154","type":"change","z":"4318847d.0693cc","name":"activate queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":969,"y":424,"wires":[["8e53bdac.3629"]]},{"id":"744d729c.ee78dc","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1145,"y":464,"wires":[]},{"id":"8dd4792.76eb088","type":"comment","z":"4318847d.0693cc","name":"::: D ::: Replace SONOS queue","info":"","x":135,"y":387,"wires":[]},{"id":"c112b57b.4469b8","type":"comment","z":"9ea06256.355a2","name":"CONTROL PLAYER","info":"","x":95,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"374fd5fd.c937aa","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":432,"wires":[["2e34f5b1.a5a72a"]]},{"id":"7f22d5ca.20658c","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":257,"wires":[["37c2fd6c.7c0e22"]]},{"id":"c8e5e056.bf35a","type":"comment","z":"9ea06256.355a2","name":"No Ip && invalid serial","info":"","x":139,"y":223,"wires":[]},{"id":"779df94c.04d328","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":96,"wires":[["1ac6489e.26d077"]]},{"id":"2c99ce50.e3b512","type":"comment","z":"9ea06256.355a2","name":"Invalid ip: from fritzbox","info":"","x":140,"y":62,"wires":[]},{"id":"b754c09e.e9ef1","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":175,"wires":[["d49dd316.3ba3a"]]},{"id":"9f29b7ed.2c2778","type":"comment","z":"9ea06256.355a2","name":"Invalid ip address - wrong syntax","info":"","x":169,"y":140,"wires":[]},{"id":"765ac420.c3687c","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":349,"wires":[["f96fa170.c44b1"]]},{"id":"6d6b6663.551298","type":"comment","z":"9ea06256.355a2","name":"No ip && valid serial - WILL WORK!","info":"","x":181,"y":314,"wires":[]},{"id":"e2d2580b.4557e8","type":"inject","z":"4318847d.0693cc","name":"","topic":"Arabella","payload":"play_mysonos","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":56,"wires":[["db0c711b.2b452"]]},{"id":"5d8ef2c9.43ff1c","type":"change","z":"4318847d.0693cc","name":"get_songmedia","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_songmedia","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":722,"y":70,"wires":[["6ae1cc83.6144b4"]]},{"id":"6bbf67aa.5b6638","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1033,"y":70,"wires":[]},{"id":"faf9af99.954a4","type":"inject","z":"4318847d.0693cc","name":"","topic":"Best Of Love","payload":"play_mysonos","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":95,"wires":[["db0c711b.2b452"]]},{"id":"e4646c63.7ee1f","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":561,"y":70,"wires":[["5d8ef2c9.43ff1c"]]},{"id":"f7c7fcf2.8c6ed","type":"comment","z":"4318847d.0693cc","name":"::: A ::: Play radio station by name","info":"","x":135,"y":20,"wires":[]},{"id":"f72241c9.0c8f2","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"2","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":205,"wires":[["e3f9999d.da50e8"]]},{"id":"e3f9999d.da50e8","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"stationIndex","pt":"msg","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"get_mysonos","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":242,"y":205,"wires":[["da04ebb5.e8a898"]]},{"id":"d37b15d5.397b58","type":"switch","z":"4318847d.0693cc","name":"index in range?","property":"payload","propertyType":"msg","rules":[{"t":"jsonata_exp","v":"$count(msg.payload) > $number(msg.stationIndex)","vt":"jsonata"}],"checkall":"true","repair":false,"outputs":1,"x":600,"y":205,"wires":[["e84127b1.9f25e8"]]},{"id":"e84127b1.9f25e8","type":"function","z":"4318847d.0693cc","name":"topic station name","func":"msg.topic = msg.payload[parseInt(msg.stationIndex) -1].title;\nmsg.payload = \"play_mysonos\";\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":205,"wires":[["8baf7361.9f09d"]]},{"id":"eed5651a.872ac8","type":"comment","z":"4318847d.0693cc","name":"::: B ::: Play radio station by index ","info":"Caution: arrays start with 0 so second station is 1","x":135,"y":171,"wires":[]},{"id":"782d3661.e6e158","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_songinfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":811,"y":259,"wires":[["9225381f.320718"]]},{"id":"16e2e597.f999ba","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_mediainfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":811,"y":291,"wires":[["9225381f.320718"]]},{"id":"72c32438.a6be2c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_positioninfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":821,"y":323,"wires":[["9225381f.320718"]]},{"id":"20795c26.517414","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":811,"y":120,"wires":[["9225381f.320718"]]},{"id":"33494d25.d17ca2","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_muted","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":801,"y":152,"wires":[["9225381f.320718"]]},{"id":"3d60005d.62d19","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_name","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":801,"y":184,"wires":[["9225381f.320718"]]},{"id":"6a1d28c8.fea828","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1019,"y":56,"wires":[["9225381f.320718"]]},{"id":"6b455079.05614","type":"inject","z":"99e6906e.c69df","name":"","topic":"last","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1240,"y":778,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"2a44a257.0f6ffe","type":"inject","z":"99e6906e.c69df","name":"","topic":"2","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1229,"y":712,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"3c6ee6fb.a1f9ca","type":"inject","z":"99e6906e.c69df","name":"","topic":"first","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1239,"y":745,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"1fc5c102.abee9f","type":"comment","z":"4318847d.0693cc","name":"::: E ::: Line in Play:5 / TV Beam or Playbar","info":"","x":165,"y":534,"wires":[]},{"id":"8978d019.4e76e","type":"switch","z":"4318847d.0693cc","name":"","property":"payload.modelName","propertyType":"msg","rules":[{"t":"eq","v":"Sonos Play:5","vt":"str"},{"t":"eq","v":"Sonos Beam","vt":"str"},{"t":"eq","v":"Sonos Playbar","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":431,"y":567,"wires":[["de574d05.b6a53"],["e7542013.832ae"],["e7542013.832ae"]]},{"id":"de574d05.b6a53","type":"change","z":"4318847d.0693cc","name":"line in","rules":[{"t":"set","p":"topic","pt":"msg","to":"'x-rincon-stream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":565,"y":538,"wires":[["41f8648f.bd838c"]]},{"id":"22d840cd.c8b46","type":"inject","z":"99e6906e.c69df","name":"","topic":"x-rincon-stream:RINCON_5CAAFD00223601400","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":263,"wires":[["f2979581.a19d08"]]},{"id":"451b4f2c.20d9c","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"activate_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":319,"wires":[["8da0051e.c44428"]]},{"id":"8fac247a.f91548","type":"comment","z":"55805384.a4695c","name":"polly and more","info":"","x":85,"y":20,"wires":[]},{"id":"d07c1d15.6af63","type":"inject","z":"99e6906e.c69df","name":"","topic":"SonosMix","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":771,"y":1023,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"77db7f57.751e9","type":"comment","z":"4318847d.0693cc","name":"::: F ::: Play Playlist from Music Library","info":"","x":155,"y":642,"wires":[]},{"id":"2172120a.6207ae","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"flush_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":676,"wires":[["d02602c0.d8e8b"]]},{"id":"b1f4e729.e2d8f8","type":"change","z":"4318847d.0693cc","name":"activate queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":806,"y":676,"wires":[["9d9e559d.4c6cd8"]]},{"id":"ff1ec5fc.0cff68","type":"inject","z":"4318847d.0693cc","name":"","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Playlists/MLAdele.wpl","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":480,"y":752,"wires":[["9e0d7aee.907268"]]},{"id":"225eea23.4db686","type":"comment","z":"4318847d.0693cc","name":"or direct","info":"","x":480,"y":720,"wires":[]},{"id":"31965eaf.bdd172","type":"comment","z":"4318847d.0693cc","name":"::: G ::: Set a morning playlist but dont play right now","info":"","x":195,"y":810,"wires":[]},{"id":"c41203b7.c834e","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"flush_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":844,"wires":[["9cb4182a.c21788"]]},{"id":"f3a32fe6.edbb2","type":"change","z":"4318847d.0693cc","name":"insert playlist","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_sonos_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SonosDido","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":451,"y":844,"wires":[["ed5d16e4.4fc1a8"]]},{"id":"5e3888d0.c68968","type":"change","z":"4318847d.0693cc","name":"mute","rules":[{"t":"set","p":"payload","pt":"msg","to":"mute","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":781,"y":843,"wires":[["7699a304.21796c"]]},{"id":"210e7c9.71bb484","type":"change","z":"4318847d.0693cc","name":"activate queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":821,"y":807,"wires":[["e89430c.1b878d","73aff3c1.3d4b6c"]]},{"id":"49a80ca6.a45b84","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":789,"y":767,"wires":[["210e7c9.71bb484"]]},{"id":"9f30753d.caadd8","type":"change","z":"4318847d.0693cc","name":"stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1166,"y":807,"wires":[["7699a304.21796c"]]},{"id":"73aff3c1.3d4b6c","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":994,"y":768,"wires":[["7e50826a.cc41cc"]]},{"id":"7e50826a.cc41cc","type":"change","z":"4318847d.0693cc","name":"unmute","rules":[{"t":"set","p":"payload","pt":"msg","to":"unmute","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1136,"y":768,"wires":[["7699a304.21796c"]]},{"id":"d890d3f3.68cd6","type":"inject","z":"4318847d.0693cc","name":"mute","topic":"","payload":"mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":952,"wires":[["80c178d.0218a88","f9e99c11.a8edc"]]},{"id":"f9e99c11.a8edc","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":223,"y":992,"wires":[["a65048e1.879f98"]]},{"id":"98119167.abb2e","type":"change","z":"4318847d.0693cc","name":"stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":741,"y":992,"wires":[["80c178d.0218a88"]]},{"id":"418f0e18.4cf29","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":569,"y":1029,"wires":[["61b7db70.f099d4"]]},{"id":"61b7db70.f099d4","type":"change","z":"4318847d.0693cc","name":"unmute","rules":[{"t":"set","p":"payload","pt":"msg","to":"unmute","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":751,"y":1029,"wires":[["80c178d.0218a88"]]},{"id":"a65048e1.879f98","type":"change","z":"4318847d.0693cc","name":"play tuneIn station","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":392,"y":992,"wires":[["418f0e18.4cf29","7bd694c7.71d67c"]]},{"id":"bac1bf03.f728","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":567,"wires":[["165a0add.39d6b5"]]},{"id":"e7542013.832ae","type":"change","z":"4318847d.0693cc","name":"tv (line in)","rules":[{"t":"set","p":"topic","pt":"msg","to":"'x-sonos-htastream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400:spdif'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":598,"wires":[["41f8648f.bd838c"]]},{"id":"41f8648f.bd838c","type":"change","z":"4318847d.0693cc","name":"activate line","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":727,"y":567,"wires":[["55b6f9ce.2ef858"]]},{"id":"610c7f81.c561","type":"inject","z":"99e6906e.c69df","name":"","topic":"SHUFFLE","payload":"set_queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":755,"y":878,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"8638cd91.2bd02","type":"inject","z":"99e6906e.c69df","name":"","topic":"NORMAL","payload":"set_queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":756,"y":845,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"c90daf5a.fe606","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1017,"y":713,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"625148f2.018378","type":"change","z":"4318847d.0693cc","name":"insert playlist","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"MLAdele","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":451,"y":676,"wires":[["9e0d7aee.907268"]]},{"id":"87d4977c.1ec578","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"get_state","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":1122,"wires":[["7a2ccae6.da3ab4"]]},{"id":"87dc146e.24e978","type":"switch","z":"4318847d.0693cc","name":"stopped?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"stopped","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":402,"y":1122,"wires":[["945fcc13.1250b"]]},{"id":"945fcc13.1250b","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_mediainfo","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":561,"y":1122,"wires":[["21ee4228.06026e"]]},{"id":"d6e0519a.3a67a","type":"switch","z":"4318847d.0693cc","name":"queue active?","property":"queueActivated","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":943,"y":1122,"wires":[["a0363532.e8afe8"]]},{"id":"a0363532.e8afe8","type":"change","z":"4318847d.0693cc","name":"activate queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1122,"y":1122,"wires":[["cc766b34.a82ec8"]]},{"id":"6573def9.e783e","type":"comment","z":"4318847d.0693cc","name":"::: I ::: If ....","info":"","x":65,"y":1088,"wires":[]},{"id":"497dc083.e5d35","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":100,"wires":[["9124b25e.5e7bb"]]},{"id":"9124b25e.5e7bb","type":"function","z":"a0a649cc.ca04e8","name":"xyz does not exist","func":"msg.payload = 'hallo';\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":100,"wires":[["bcf459fe.1b0ad8"]]},{"id":"e180e70c.33b628","type":"function","z":"a0a649cc.ca04e8","name":"xyz is null","func":"msg.payload.xyz = null;\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":196,"wires":[["bcf459fe.1b0ad8"]]},{"id":"351eb48c.4094ac","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":196,"wires":[["e180e70c.33b628"]]},{"id":"c54adc23.e480e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":468,"wires":[["305adb80.ed3b84","63a7db00.cc8604"]]},{"id":"305adb80.ed3b84","type":"function","z":"a0a649cc.ca04e8","name":"xyz string is OK ","func":"msg.payload = { 'xyz':'richtiger String'};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":468,"wires":[["bcf459fe.1b0ad8"]]},{"id":"47d40166.41248","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":356,"wires":[["22871aaa.f17016"]]},{"id":"22871aaa.f17016","type":"function","z":"a0a649cc.ca04e8","name":"xyz empty string","func":"msg.payload = {\"xyz\":''};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":356,"wires":[["bcf459fe.1b0ad8"]]},{"id":"a4f89f5b.58eb4","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":98,"wires":[["c7fabc9b.407e1"]]},{"id":"c7fabc9b.407e1","type":"change","z":"a0a649cc.ca04e8","name":"payload does not exist","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":98,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"7cd29440.2439fc","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":194,"wires":[["892f9664.8696f8"]]},{"id":"892f9664.8696f8","type":"function","z":"a0a649cc.ca04e8","name":"payload null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":194,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"b9b94e98.ceb2e","type":"comment","z":"a0a649cc.ca04e8","name":"Objective of this tab - Documentation","info":"# Introduction\nOften errors occures because objects or part of objects are not initialized or hold invalid values. This causes errors in following flows. \n\n# Solution\nThe path of every property is being intensively checked: **undefined, null, empty string** and not value \"**NaN**\".\n\nNaN is a strange one. It can be exclued by testing \"msg.payload !== msg.payload\" or by testing \"(typeof msg.payload === 'number' && isNaN(msg.payload))\"\n\nThe second one is longer but more obsious. \n\nIn case of msg.propLevel1.propLevel2 I do test all elements except msg. Msg is given and can not be null or undefined. ","x":145,"y":20,"wires":[]},{"id":"ed0da7d.7d64e58","type":"function","z":"a0a649cc.ca04e8","name":"payload empty string","func":"msg.payload = '';\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":354,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"ae986c34.34ae5","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":354,"wires":[["ed0da7d.7d64e58"]]},{"id":"96ba426e.4e8e1","type":"function","z":"a0a649cc.ca04e8","name":"payload string","func":"msg.payload = 'payload text there';\nreturn msg;","outputs":1,"noerr":0,"x":281,"y":477,"wires":[["e3f119eb.d44758"]]},{"id":"db6427c6.b0c728","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":477,"wires":[["96ba426e.4e8e1"]]},{"id":"9eab2607.51e8b8","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":311,"wires":[["3998a040.997f8"]]},{"id":"3998a040.997f8","type":"change","z":"9ea06256.355a2","name":"wrong volume - negative","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"-20","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":967,"y":311,"wires":[["39a502ae.bdf62e"]]},{"id":"bf3ec25b.68b4e","type":"change","z":"9ea06256.355a2","name":"wrong volume string x","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"x","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":957,"y":344,"wires":[["39a502ae.bdf62e"]]},{"id":"b98d7a3a.f7e1a8","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":344,"wires":[["bf3ec25b.68b4e"]]},{"id":"7b90d2b5.5e7d2c","type":"change","z":"9ea06256.355a2","name":"empty topic","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":927,"y":237,"wires":[["39a502ae.bdf62e"]]},{"id":"6137cd73.bc9d24","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":237,"wires":[["7b90d2b5.5e7d2c"]]},{"id":"5b7a8514.ca7c5c","type":"change","z":"9ea06256.355a2","name":"wrong volume string true","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"true","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":967,"y":377,"wires":[["39a502ae.bdf62e"]]},{"id":"186077f8.993038","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":377,"wires":[["5b7a8514.ca7c5c"]]},{"id":"1a39a333.08667d","type":"change","z":"9ea06256.355a2","name":"no volume data","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":937,"y":410,"wires":[["39a502ae.bdf62e"]]},{"id":"962f5d9c.9a2f4","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":410,"wires":[["1a39a333.08667d"]]},{"id":"f499ab8f.2c78c8","type":"change","z":"9ea06256.355a2","name":"no volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":927,"y":270,"wires":[["39a502ae.bdf62e"]]},{"id":"23869a98.110636","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":270,"wires":[["f499ab8f.2c78c8"]]},{"id":"63a1eef5.4e185","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"-5","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":101,"wires":[["d82099f6.76ef28"]]},{"id":"fd855720.eaca78","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"20","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":136,"wires":[["d82099f6.76ef28"]]},{"id":"de825881.6eda98","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"+5","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":208,"wires":[["d82099f6.76ef28"]]},{"id":"eee89416.02f1f8","type":"comment","z":"775d7a2a.44f234","name":"not working: plus is absorbed","info":"","x":180,"y":174,"wires":[]},{"id":"a372137d.cde08","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"-35","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":586,"wires":[["75eb41eb.d74ff"]]},{"id":"68c4dcb1.ec2ba4","type":"comment","z":"9ea06256.355a2","name":"volume changes","info":"","x":119,"y":552,"wires":[]},{"id":"7cb2d12d.8de4f","type":"inject","z":"9ea06256.355a2","name":"string -35","topic":"","payload":"-35","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":619,"wires":[["75eb41eb.d74ff"]]},{"id":"26dbfbe5.1a2c44","type":"inject","z":"9ea06256.355a2","name":"string -35","topic":"","payload":"+35","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":653,"wires":[["75eb41eb.d74ff"]]},{"id":"4c926005.22eab","type":"inject","z":"9ea06256.355a2","name":"string +35","topic":"","payload":"+35","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":686,"wires":[["75eb41eb.d74ff"]]},{"id":"c41a08e2.9d8a88","type":"inject","z":"99e6906e.c69df","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":365,"wires":[["b6d00311.60368"]]},{"id":"b6d00311.60368","type":"change","z":"99e6906e.c69df","name":"play_notification with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":281,"y":365,"wires":[["f2979581.a19d08"]]},{"id":"7b80d524.af98dc","type":"change","z":"9ea06256.355a2","name":"wrong volume boolean true","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":978,"y":443,"wires":[["39a502ae.bdf62e"]]},{"id":"5d0438c7.ed9d38","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":443,"wires":[["7b80d524.af98dc"]]},{"id":"bfa6fa56.92bab8","type":"comment","z":"9ea06256.355a2","name":"play_notification","info":"","x":816,"y":204,"wires":[]},{"id":"ba0f41e4.bda47","type":"inject","z":"775d7a2a.44f234","name":"ZAPSPLAT","topic":"https://www.zapsplat.com/wp-content/uploads/2015/sound-effects-the-sound-pack-tree/tspt_pull_bell_02_065.mp3?_=1","payload":"play_notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":809,"y":80,"wires":[["fb524ea5.d8eaa"]]},{"id":"aeccd5df.752738","type":"inject","z":"775d7a2a.44f234","name":"soundbible dog","topic":"http://soundbible.com/mp3/labrador-barking-daniel_simon.mp3","payload":"play_notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":819,"y":113,"wires":[["fb524ea5.d8eaa"]]},{"id":"3ff5a8d5.963ce8","type":"inject","z":"775d7a2a.44f234","name":"Bell","topic":"http://soundbible.com/mp3/bells-tibetan-daniel_simon.mp3","payload":"play_notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":792,"y":146,"wires":[["fb524ea5.d8eaa"]]},{"id":"6075c5e3.396b2c","type":"inject","z":"775d7a2a.44f234","name":"fog horn","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"play_notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":802,"y":179,"wires":[["fb524ea5.d8eaa"]]},{"id":"208a68fe.f3c9b8","type":"inject","z":"775d7a2a.44f234","name":"alarm","topic":"http://soundbible.com/mp3/Fire%20Truck%20Siren-SoundBible.com-642727443.mp3","payload":"play_notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":792,"y":212,"wires":[["fb524ea5.d8eaa"]]},{"id":"d531e4dd.740ed8","type":"comment","z":"775d7a2a.44f234","name":"play notification","info":"","x":819,"y":40,"wires":[]},{"id":"67a23bc0.a14964","type":"comment","z":"775d7a2a.44f234","name":"Volume control","info":"","x":140,"y":61,"wires":[]},{"id":"83ec348e.2b3848","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":500,"wires":[["7a9b4e0.b2f0ab4"]]},{"id":"7a9b4e0.b2f0ab4","type":"function","z":"a0a649cc.ca04e8","name":"xyz number is ok","func":"msg.payload = {\"xyz\": 5};\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":500,"wires":[["bcf459fe.1b0ad8"]]},{"id":"2a76f526.64ae8a","type":"comment","z":"a0a649cc.ca04e8","name":"validation of msg.payload","info":"","x":115,"y":63,"wires":[]},{"id":"3a375663.e13d9a","type":"function","z":"a0a649cc.ca04e8","name":"payload does not exist","func":"msg  = {'o': 'oooo'};\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":130,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"63d72607.f34638","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":130,"wires":[["3a375663.e13d9a"]]},{"id":"117da209.5252de","type":"function","z":"a0a649cc.ca04e8","name":"payload undefined","func":"msg.payload = undefined;\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":162,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"2dbcdfea.bf264","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":162,"wires":[["117da209.5252de"]]},{"id":"2ec859a5.f8eb66","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":226,"wires":[["de752d4c.21001"]]},{"id":"de752d4c.21001","type":"function","z":"a0a649cc.ca04e8","name":"payload NaN","func":"msg.payload = parseInt('Hallo');  // provides NaN\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":226,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"b3403a6f.c88838","type":"function","z":"a0a649cc.ca04e8","name":"payload number ","func":"msg.payload = 10;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":509,"wires":[["e3f119eb.d44758"]]},{"id":"1150c24c.b1ae2e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":509,"wires":[["b3403a6f.c88838"]]},{"id":"957f1041.a180b","type":"function","z":"a0a649cc.ca04e8","name":"payload array","func":"msg.payload = [];\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":541,"wires":[["e3f119eb.d44758"]]},{"id":"d8d75b12.f06148","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":541,"wires":[["957f1041.a180b"]]},{"id":"d7b0c62c.795398","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":573,"wires":[["d0fed59c.990ac8"]]},{"id":"d0fed59c.990ac8","type":"function","z":"a0a649cc.ca04e8","name":"payload object ","func":"msg.payload = {'something':'Hallo'};\nreturn msg;","outputs":1,"noerr":0,"x":281,"y":573,"wires":[["e3f119eb.d44758"]]},{"id":"ec88ae1e.ff4b6","type":"function","z":"a0a649cc.ca04e8","name":"payload object ","func":"msg.payload = {'something': undefined};\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":605,"wires":[["e3f119eb.d44758"]]},{"id":"d80d6e9c.59f3e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":605,"wires":[["ec88ae1e.ff4b6"]]},{"id":"e3d3b952.dd6838","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":637,"wires":[["6e895944.0c26f8"]]},{"id":"6e895944.0c26f8","type":"function","z":"a0a649cc.ca04e8","name":"payload parseInt('5') ","func":"msg.payload = parseInt('5');\nreturn msg;","outputs":1,"noerr":0,"x":301,"y":637,"wires":[["e3f119eb.d44758"]]},{"id":"f507b549.24e008","type":"function","z":"a0a649cc.ca04e8","name":"payload parseInt(5) ","func":"msg.payload = parseInt(5);\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":670,"wires":[["e3f119eb.d44758"]]},{"id":"a201018b.af083","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":670,"wires":[["f507b549.24e008"]]},{"id":"1d4a5f09.801521","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":164,"wires":[["65a613f5.8794dc"]]},{"id":"65a613f5.8794dc","type":"function","z":"a0a649cc.ca04e8","name":"xyz undefined","func":"msg.payload.xyz = undefined;\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":164,"wires":[["bcf459fe.1b0ad8"]]},{"id":"fe262f00.41ee9","type":"function","z":"a0a649cc.ca04e8","name":"xyz does not exist","func":"msg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":132,"wires":[["bcf459fe.1b0ad8"]]},{"id":"3c32d77.e212a28","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":132,"wires":[["fe262f00.41ee9"]]},{"id":"2e25b173.d1dd2e","type":"function","z":"a0a649cc.ca04e8","name":"xyz NaN","func":"msg.payload.xyz = parseInt('Hallo'); // NaN\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":228,"wires":[["bcf459fe.1b0ad8"]]},{"id":"e6f0a81b.1a9dc8","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":228,"wires":[["2e25b173.d1dd2e"]]},{"id":"74bc604d.fd188","type":"comment","z":"a0a649cc.ca04e8","name":"validation of msg.payload.xyz","info":"","x":665,"y":67,"wires":[]},{"id":"6c500479.64f93c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":532,"wires":[["7a8f82dd.bf758c"]]},{"id":"7a8f82dd.bf758c","type":"function","z":"a0a649cc.ca04e8","name":"xyz object  is ok","func":"msg.payload = {'xyz': {}};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":532,"wires":[["bcf459fe.1b0ad8"]]},{"id":"c2fe0b5f.2c5c38","type":"function","z":"a0a649cc.ca04e8","name":"xyz array  is ok","func":"msg.payload = { 'xyz': []};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":564,"wires":[["bcf459fe.1b0ad8"]]},{"id":"75ca332f.81145c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":564,"wires":[["c2fe0b5f.2c5c38"]]},{"id":"e3f119eb.d44758","type":"function","z":"a0a649cc.ca04e8","d":true,"name":"validate msg.payload","func":"/** Validate msg.payload\n * \n*/\n\n// old version: \n// if (typeof msg.payload === 'undefined' || msg.payload === null || (typeof msg.payload === 'number' && isNaN(msg.payload)) || msg.payload === '') {\n\nif (typeof msg.payload === 'undefined' || msg.payload === null || (typeof msg.payload === 'number' && !Number.isFinite(msg.payload)) || msg.payload ==='') {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok', msg);\n}\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":700,"wires":[[]]},{"id":"71e12096.9b21c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":258,"wires":[["892e2d7e.c143"]]},{"id":"892e2d7e.c143","type":"function","z":"a0a649cc.ca04e8","name":"payload NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":271,"y":258,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"bcf459fe.1b0ad8","type":"function","z":"a0a649cc.ca04e8","d":true,"name":"validate msg payload","func":"/** Validate msg.payload.xyz\n * \n*/\nif (!isValidProperty(msg, ['payload', 'xyz'])) {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok', msg);\n}\nreturn msg;\n\nfunction isValidProperty(nestedObj, pathArray){\n    const property = pathArray.reduce(\n      (obj, key) => (obj && obj[key] !== 'undefined' ? obj[key] : undefined),\n      nestedObj\n    )\n    return typeof property !== 'undefined'\n  }","outputs":1,"noerr":0,"x":1040,"y":670,"wires":[[]]},{"id":"21af558b.13c2ba","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":260,"wires":[["65d7d2d2.d82a5c"]]},{"id":"65d7d2d2.d82a5c","type":"function","z":"a0a649cc.ca04e8","name":"xyz NaN","func":"msg.payload.xyz = NaN; // NaN\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":260,"wires":[["bcf459fe.1b0ad8"]]},{"id":"4ce535d2.b366ac","type":"inject","z":"99e6906e.c69df","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":300,"wires":[["3028a931.c32436"]]},{"id":"3028a931.c32436","type":"change","z":"99e6906e.c69df","name":"play with volume 30","rules":[{"t":"set","p":"payload","pt":"msg","to":"play","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":300,"wires":[["f2979581.a19d08"]]},{"id":"231a41a0.2ffd6e","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":516,"wires":[["bada722f.418d3"]]},{"id":"bada722f.418d3","type":"change","z":"9ea06256.355a2","name":"play with volume - not number","rules":[{"t":"set","p":"payload","pt":"msg","to":"play","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":987,"y":516,"wires":[["39a502ae.bdf62e"]]},{"id":"e494d6fa.c4be28","type":"comment","z":"9ea06256.355a2","name":"play with volume","info":"","x":816,"y":483,"wires":[]},{"id":"209aa15a.cc979e","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":549,"wires":[["1723f5cd.5a950a"]]},{"id":"1723f5cd.5a950a","type":"change","z":"9ea06256.355a2","name":"play with volume - invalid number ","rules":[{"t":"set","p":"payload","pt":"msg","to":"play","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":997,"y":549,"wires":[["39a502ae.bdf62e"]]},{"id":"5c5d1c68.22bf54","type":"inject","z":"99e6906e.c69df","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":333,"wires":[["372185d5.1d1a4a"]]},{"id":"372185d5.1d1a4a","type":"change","z":"99e6906e.c69df","name":"activate_avtransport with volume 30","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":333,"wires":[["f2979581.a19d08"]]},{"id":"7fdc8a90.778d44","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":662,"wires":[["a662246b.c9a948"]]},{"id":"a662246b.c9a948","type":"change","z":"9ea06256.355a2","name":"avtransport with volume - not number","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1007,"y":662,"wires":[["39a502ae.bdf62e"]]},{"id":"72def357.4d838c","type":"comment","z":"9ea06256.355a2","name":"activate avtransport with volume","info":"","x":868,"y":629,"wires":[]},{"id":"3b78414f.38dede","type":"change","z":"9ea06256.355a2","name":"avtransport with volume - invalid number","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1018,"y":695,"wires":[["39a502ae.bdf62e"]]},{"id":"a425b1eb.3038","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":788,"y":695,"wires":[["3b78414f.38dede"]]},{"id":"d919048c.b05e48","type":"change","z":"9ea06256.355a2","name":"avtransport with volume - ok","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":977,"y":729,"wires":[["39a502ae.bdf62e"]]},{"id":"a2234dbe.9d699","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":729,"wires":[["d919048c.b05e48"]]},{"id":"7fad3a81.879174","type":"inject","z":"99e6906e.c69df","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":696,"y":744,"wires":[["26dc5c37.1decf4"]]},{"id":"26dc5c37.1decf4","type":"change","z":"99e6906e.c69df","name":"activate_queue, vol. 30","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_queue","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":753,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"c3fcf19f.62a37","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":735,"y":2833,"wires":[["3e20b9ea.a3d6e6"]]},{"id":"3e20b9ea.a3d6e6","type":"change","z":"9ea06256.355a2","name":"play mysonos arabella with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Arabella","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":945,"y":2833,"wires":[["2f900d43.a3c562"]]},{"id":"30daef9a.dcd72","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":735,"y":2935,"wires":[["462eae92.63d07"]]},{"id":"462eae92.63d07","type":"change","z":"9ea06256.355a2","name":"play tunein with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":965,"y":2935,"wires":[["2f900d43.a3c562"]]},{"id":"8624bfb1.18ffa","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":735,"y":2873,"wires":[["a0ad39e5.b760d8"]]},{"id":"a0ad39e5.b760d8","type":"change","z":"9ea06256.355a2","name":"play mysonos Love with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Love","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":935,"y":2873,"wires":[["2f900d43.a3c562"]]},{"id":"fa17e07.604b32","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":735,"y":2973,"wires":[["fe23d0f4.85c73"]]},{"id":"fe23d0f4.85c73","type":"change","z":"9ea06256.355a2","name":"play tunein with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":965,"y":2973,"wires":[["2f900d43.a3c562"]]},{"id":"6b5cc4aa.c99b7c","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":466,"wires":[["aa36d09.b24b43"]]},{"id":"aa36d09.b24b43","type":"function","z":"9ea06256.355a2","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":212,"y":466,"wires":[["2e34f5b1.a5a72a"]]},{"id":"1009be46.8c0fb2","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":502,"wires":[["68e73b2a.782454"]]},{"id":"68e73b2a.782454","type":"function","z":"9ea06256.355a2","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":211,"y":502,"wires":[["2e34f5b1.a5a72a"]]},{"id":"b12a4877.40ad38","type":"comment","z":"a0a649cc.ca04e8","name":"Following are all OK","info":"","x":110,"y":443,"wires":[]},{"id":"cf30cfb3.f7a6","type":"comment","z":"a0a649cc.ca04e8","name":"Following are all OK","info":"","x":635,"y":436,"wires":[]},{"id":"dd1ad5ab.e8b008","type":"http request","z":"d65eded3.250b9","name":"","method":"POST","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","authType":"basic","x":720,"y":60,"wires":[[]]},{"id":"1bbc7a30.e4cbe6","type":"template","z":"d65eded3.250b9","name":"define url","field":"url","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"https://autoremotejoaomgcd.appspot.com/sendnotification?key={{key}}&title=\"HomeService Error Message\"&text={{payload}};\n","output":"str","x":570,"y":60,"wires":[["dd1ad5ab.e8b008"]]},{"id":"6b0e515b.e62cd","type":"function","z":"d65eded3.250b9","name":"define/send error message","func":"/** Send error message to TASKER if debugToMobile is true\n* GITHUB subflow handle errors\n* @since 2019-10-13T1931\n* PREREQ: uses TASKER autoremote and needs key, stored in global variable\n*/\n\n  const unknown = 'unbekannt';\n\n  let errorTab = env.get('Tabname');\n  if (typeof errorTab === 'undefined' || errorTab === null || errorTab === '') {\n    errorTab = unknown;\n    node.warn('Tabname not defined');\n  }\n\n  let errorNodeName = unknown;\n  let errorNodeType = unknown;\n  let errorNodeId = unknown;\n  let errorMessage = unknown;\n  if (typeof msg.error === 'undefined' || msg.error === null || msg.error === '') {\n    // no infos - use default text above\n  } else {\n    if (typeof msg.error.source === 'undefined' || msg.error.source === null || msg.error.source === '') {\n      // no source infos - use default text above\n    } else {\n      if (typeof msg.error.source.name === 'undefined' || msg.error.source.name === null || msg.error.source.name === '') {\n        // use default text above\n      } else {\n        errorNodeName = msg.error.source.name;\n      }\n      if (typeof msg.error.source.type === 'undefined' || msg.error.source.type === null || msg.error.source.type === '') {\n        // use default text above\n      } else {\n        errorNodeType = msg.error.source.type;\n      }\n      if (typeof msg.error.source.id === 'undefined' || msg.error.source.id === null || msg.error.source.id === '') {\n        // use default text\n      } else {\n        errorNodeId = msg.error.source.id;\n      }\n    }\n    if (typeof msg.error.message === 'undefined' || msg.error.message === null || msg.error.message === '') {\n      // no infos - use default text\n    } else {\n      errorMessage = msg.error.message;\n    }\n  }\n  const fullMessage = `Fehler in TAB: ${errorTab} NODENAME: ${errorNodeName} NODETYPE: ${errorNodeType} NODEID: ${errorNodeId} DETAIL: ${errorMessage}`;\n\n  let msgUIandLog = { payload: fullMessage };\n\n  let msgMobile;\n  if (env.get('DebugToMobile')) {\n    const keyVariableName = env.get('KeyVariable'); // first get name of global variable\n    if (typeof keyVariableName === 'undefined' || keyVariableName === null || keyVariableName === '') {\n      node.error('Error in subflow: handle error: Invalid key variable name');\n      msgMobile = null; // no message\n      msgUIandLog = null; // no message\n    } else {\n      const key = global.get(keyVariableName);\n      if (typeof key === 'undefined' || key === null || key === '') {\n        node.error('Error in subflow: handle error: Key variable not defined or key invalid');\n        msgMobile = null; // no message\n        msgUIandLog = null; // no message\n      } else {\n        msgMobile = { payload: fullMessage, key: key };\n      }\n    }\n  } else {\n    msgMobile = null; // not message\n  }\n  return [msgMobile, msgUIandLog];\n\n","outputs":2,"noerr":0,"x":280,"y":80,"wires":[["1bbc7a30.e4cbe6"],["337e0a88.64b546"]],"outputLabels":["email data",""]},{"id":"337e0a88.64b546","type":"debug","z":"d65eded3.250b9","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"payload","targetType":"msg","x":590,"y":120,"wires":[]},{"id":"1cbfc88a.82bef7","type":"subflow:d65eded3.250b9","z":"55805384.a4695c","name":"","env":[{"name":"Tabname","value":"Sandbox","type":"str"},{"name":"DebugToMobile","value":"true","type":"bool"}],"x":610,"y":20,"wires":[]},{"id":"ca8b047.c6229f8","type":"catch","z":"55805384.a4695c","d":true,"name":"","scope":null,"uncaught":false,"x":440,"y":20,"wires":[["1cbfc88a.82bef7"]]},{"id":"2a12b79b.d9e0f8","type":"subflow:d65eded3.250b9","z":"9ea06256.355a2","d":true,"name":"","env":[{"name":"Tabname","value":"Test with Failure","type":"str"}],"x":650,"y":40,"wires":[]},{"id":"dbe8b435.a7f4c8","type":"catch","z":"9ea06256.355a2","d":true,"name":"","scope":null,"uncaught":false,"x":480,"y":40,"wires":[["2a12b79b.d9e0f8"]]},{"id":"322d058.566fbfa","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":787,"y":584,"wires":[["b53f67e3.0e4028"]]},{"id":"b53f67e3.0e4028","type":"change","z":"9ea06256.355a2","name":"play with volume - invalid number ","rules":[{"t":"set","p":"payload","pt":"msg","to":"play","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"{\"x\":\"Hallo\",\"y\":\"World\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":997,"y":584,"wires":[["39a502ae.bdf62e"]]},{"id":"b410ddd8.77b9d","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":735,"y":3033,"wires":[["572c1e4b.9d236"]]},{"id":"572c1e4b.9d236","type":"change","z":"9ea06256.355a2","name":"play tunein with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Arabella","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":965,"y":3033,"wires":[["2f900d43.a3c562"]]},{"id":"6dba351d.9f53cc","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":735,"y":3071,"wires":[["8e666d34.3a1a5"]]},{"id":"8e666d34.3a1a5","type":"change","z":"9ea06256.355a2","name":"play tunein with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Arabella","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":965,"y":3073,"wires":[["2f900d43.a3c562"]]},{"id":"833757b5.a4c0b8","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":735,"y":3113,"wires":[["2856f8dd.825148"]]},{"id":"2856f8dd.825148","type":"change","z":"9ea06256.355a2","name":"play mysonos love with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Love","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":985,"y":3113,"wires":[["2f900d43.a3c562"]]},{"id":"376bf938.dc9bd6","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":735,"y":3151,"wires":[["ae807b63.cc69a8"]]},{"id":"ae807b63.cc69a8","type":"change","z":"9ea06256.355a2","name":"play mysonos love with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Love","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":985,"y":3151,"wires":[["2f900d43.a3c562"]]},{"id":"88d0ca60.d83528","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":735,"y":3213,"wires":[["340d5a87.775326"]]},{"id":"340d5a87.775326","type":"change","z":"9ea06256.355a2","name":"play mysonos wrong title with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"xxxx","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":955,"y":3213,"wires":[["2f900d43.a3c562"]]},{"id":"b0a19150.d55f8","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_mysonos","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1395,"y":2599,"wires":[["59f166cc.c98498"]]},{"id":"5e661b87.edd5b4","type":"inject","z":"99e6906e.c69df","name":"trigger","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":691,"y":1207,"wires":[["b8d81bfc.e77d98"]]},{"id":"b8d81bfc.e77d98","type":"change","z":"99e6906e.c69df","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":841,"y":1247,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"9af19cc4.5706a","type":"comment","z":"775d7a2a.44f234","name":"msg.size ","info":"","x":121,"y":1142,"wires":[]},{"id":"e4134f34.a564d","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":362,"y":1182,"wires":[["d32d3c03.61ef1"]]},{"id":"a081172f.de7e58","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":113,"y":1182,"wires":[["e4134f34.a564d"]]},{"id":"8208c58d.b37718","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":1270,"wires":[]},{"id":"249fa767.71bb08","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":1215,"wires":[["6d2ea1a0.4a7ab"]]},{"id":"6d2ea1a0.4a7ab","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":361,"y":1215,"wires":[["d32d3c03.61ef1"]]},{"id":"f39f2932.5f5318","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":362,"y":1248,"wires":[["d32d3c03.61ef1"]]},{"id":"6e2ca31a.2e100c","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":113,"y":1248,"wires":[["f39f2932.5f5318"]]},{"id":"f06dff57.c0a35","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":341,"y":1292,"wires":[["d32d3c03.61ef1"]]},{"id":"d974bf84.9321f","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":1292,"wires":[["f06dff57.c0a35"]]},{"id":"38cf5a24.734d36","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":1325,"wires":[["69c14ed9.cef51"]]},{"id":"69c14ed9.cef51","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":1325,"wires":[["d32d3c03.61ef1"]]},{"id":"29767623.36181a","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":341,"y":1358,"wires":[["d32d3c03.61ef1"]]},{"id":"1e1b60be.3ad4bf","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":1358,"wires":[["29767623.36181a"]]},{"id":"2143919d.6b952e","type":"comment","z":"775d7a2a.44f234","name":"Results","info":"There are 3 playlists. \nSo with size 2,3 there should be a Warning","x":652,"y":1182,"wires":[]},{"id":"bc08b969.5611a8","type":"inject","z":"775d7a2a.44f234","name":"insert_uri  song from ML","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":159,"y":960,"wires":[["22888d78.e458b2"]]},{"id":"959d77f2.e655b8","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xxxx","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":540,"wires":[["3cac913b.eba05e"]]},{"id":"dd3ed6e5.761d18","type":"comment","z":"2e2bde07.2bda42","name":"insert prime playlisturi","info":"","x":880,"y":500,"wires":[]},{"id":"bf0a66f7.cce418","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"insert_prime_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":870,"y":571,"wires":[["19f12531.26b53b"]]},{"id":"8305d5e.8e6b328","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"x-rincon","payload":"insert_prime_playlisturi","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":910,"y":604,"wires":[["19f12531.26b53b"]]},{"id":"99c15c5e.5cb77","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xxxxxxxx","payload":"insert_prime_playlisturi","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":910,"y":637,"wires":[["19f12531.26b53b"]]},{"id":"bd9f6459.1ebb98","type":"inject","z":"2e2bde07.2bda42","name":"insert with wrong data","topic":"x-rincon-cpcontainer:laylists%2fB07W1Z3YMN%2f%23prime_playlist?sid=201&flags=8300&sn=14","payload":"insert_prime_playlisturi","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":880,"y":670,"wires":[["19f12531.26b53b"]]},{"id":"3f3f1637.83394a","type":"comment","z":"2e2bde07.2bda42","name":"insert_uri ","info":"","x":100,"y":503,"wires":[]},{"id":"5b339f20.ec5df","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1348,"y":568,"wires":[]},{"id":"98b3c343.19a4","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"x-rincon-cpcontainer:1006206ccatalog%2fplaylists%2fB07W1Z3YMN%2f%23prime_playlist?sid=201&flags=8300&sn=14","payload":"insert_prime_playlisturi","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":830,"y":535,"wires":[["545da1f1.2a0a4"]]},{"id":"a446ee43.22313","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xx","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":161,"y":1422,"wires":[["d12bd467.ca9358"]]},{"id":"3eb1dfa.e71d22","type":"comment","z":"2e2bde07.2bda42","name":"insert Music Library Playlist from My Sonos","info":"","x":200,"y":1312,"wires":[]},{"id":"37e62db0.b573b2","type":"comment","z":"2e2bde07.2bda42","name":"insert Sonos Playlist","info":"","x":129,"y":1626,"wires":[]},{"id":"3376c8b.910b438","type":"comment","z":"2e2bde07.2bda42","name":"get Music Library Playlist ","info":"","x":831,"y":1312,"wires":[]},{"id":"db68f8e.dd3cc08","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":769,"y":1391,"wires":[["3fea5db5.9f34e2"]]},{"id":"3fea5db5.9f34e2","type":"change","z":"2e2bde07.2bda42","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":968,"y":1391,"wires":[["16802e93.5f9981"]]},{"id":"74b7708e.62bfb","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":769,"y":1424,"wires":[["490db005.58636"]]},{"id":"490db005.58636","type":"change","z":"2e2bde07.2bda42","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":968,"y":1424,"wires":[["16802e93.5f9981"]]},{"id":"582a7acb.c91e94","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":769,"y":1458,"wires":[["d46d838a.c016"]]},{"id":"d46d838a.c016","type":"change","z":"2e2bde07.2bda42","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":968,"y":1458,"wires":[["16802e93.5f9981"]]},{"id":"57b47fb8.8fcd4","type":"change","z":"2e2bde07.2bda42","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"1.3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":968,"y":1494,"wires":[["16802e93.5f9981"]]},{"id":"82ac8203.67d3","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":769,"y":1494,"wires":[["57b47fb8.8fcd4"]]},{"id":"6001c06c.bca74","type":"inject","z":"2e2bde07.2bda42","name":"get musiclibrary playlist","topic":"","payload":"get_musiclibrary_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":821,"y":1346,"wires":[["5e775c52.8e9c84"]]},{"id":"96b504bf.6e7788","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1285,"y":1499,"wires":[]},{"id":"e95861c4.cfc17","type":"comment","z":"2e2bde07.2bda42","name":"get Sonos Playlists","info":"","x":810,"y":1629,"wires":[]},{"id":"c87d28e7.1a10f8","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":584,"wires":[["2c20b96a.e5bc96"]]},{"id":"7f764b36.d7daf4","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xxxx","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":617,"wires":[["2c20b96a.e5bc96"]]},{"id":"a6d04c24.10188","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":470,"y":577,"wires":[]},{"id":"f44b5c6a.7f9fc","type":"comment","z":"2e2bde07.2bda42","name":"get prime playlists from My Sonos","info":"","x":850,"y":1122,"wires":[]},{"id":"bf96fc4c.68de1","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1502,"wires":[["f2d56cb7.acbb5"]]},{"id":"f2d56cb7.acbb5","type":"change","z":"2e2bde07.2bda42","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":339,"y":1502,"wires":[["d12bd467.ca9358"]]},{"id":"1a2130af.aaec5f","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1536,"wires":[["3d4419ac.231f76"]]},{"id":"3d4419ac.231f76","type":"change","z":"2e2bde07.2bda42","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":339,"y":1536,"wires":[["d12bd467.ca9358"]]},{"id":"6f9c2092.82983","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1570,"wires":[["21486ce7.ffb0e4"]]},{"id":"21486ce7.ffb0e4","type":"change","z":"2e2bde07.2bda42","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":339,"y":1570,"wires":[["d12bd467.ca9358"]]},{"id":"532ed001.51c62","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"ML10CC","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1349,"wires":[["32ecf28b.53667e"]]},{"id":"5f3a4327.f1344c","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":584,"y":1456,"wires":[]},{"id":"8b4dcee2.1dd2f","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1387,"wires":[["d12bd467.ca9358"]]},{"id":"525cdbfa.edf624","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"1234","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":1456,"wires":[["d12bd467.ca9358"]]},{"id":"926581be.fcb26","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_amazonprime_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":771,"y":1156,"wires":[["468c3608.f260e8"]]},{"id":"b534038a.52f42","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":1713,"wires":[["a0ad1cdf.d4747"]]},{"id":"a0ad1cdf.d4747","type":"change","z":"2e2bde07.2bda42","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":989,"y":1713,"wires":[["5f8c615b.2003"]]},{"id":"55795e82.6b1d","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":1746,"wires":[["8e6d60f7.e4434"]]},{"id":"8e6d60f7.e4434","type":"change","z":"2e2bde07.2bda42","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":989,"y":1746,"wires":[["5f8c615b.2003"]]},{"id":"68bd9b67.ead3d4","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":1780,"wires":[["1fad53f3.dc08cc"]]},{"id":"1fad53f3.dc08cc","type":"change","z":"2e2bde07.2bda42","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":989,"y":1780,"wires":[["5f8c615b.2003"]]},{"id":"560c8c42.e2f224","type":"change","z":"2e2bde07.2bda42","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"1.3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":989,"y":1816,"wires":[["5f8c615b.2003"]]},{"id":"a4bf53da.9892","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":1816,"wires":[["560c8c42.e2f224"]]},{"id":"27dcafba.b7e4b","type":"inject","z":"2e2bde07.2bda42","name":"get musiclibrary playlist","topic":"","payload":"get_sonos_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":822,"y":1668,"wires":[["25b530bc.a5cfc"]]},{"id":"87d2d50b.eec388","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1286,"y":1821,"wires":[]},{"id":"3fe16e86.6cb4e2","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xx","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":138,"y":1733,"wires":[["53b639c8.3468b8"]]},{"id":"e23a6ce9.027fd","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":87,"y":1829,"wires":[["4632d938.8d3838"]]},{"id":"4632d938.8d3838","type":"change","z":"2e2bde07.2bda42","name":"insert from sonos playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_sonos_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":316,"y":1829,"wires":[["53b639c8.3468b8"]]},{"id":"de1c26f4.4b6648","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":87,"y":1863,"wires":[["3add7b46.acb3c4"]]},{"id":"3add7b46.acb3c4","type":"change","z":"2e2bde07.2bda42","name":"insert from sonos playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_sonos_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":316,"y":1863,"wires":[["53b639c8.3468b8"]]},{"id":"8ead3ed5.4974d","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":87,"y":1897,"wires":[["19ed835c.214c1d"]]},{"id":"19ed835c.214c1d","type":"change","z":"2e2bde07.2bda42","name":"insert from sonos playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_sonos_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":316,"y":1897,"wires":[["53b639c8.3468b8"]]},{"id":"672441e1.624b5","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"ML","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":147,"y":1660,"wires":[["d7562f53.684ef"]]},{"id":"980c723a.40412","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":581,"y":1767,"wires":[]},{"id":"9a8008a2.d9cd38","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":127,"y":1698,"wires":[["53b639c8.3468b8"]]},{"id":"2440044e.74bf5c","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"1234","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":147,"y":1767,"wires":[["53b639c8.3468b8"]]},{"id":"71eba2c5.4c259c","type":"comment","z":"2e2bde07.2bda42","name":"remove song","info":"","x":110,"y":2316,"wires":[]},{"id":"e020a73b.97c818","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":590,"y":2262,"wires":[]},{"id":"7a39fd8a.309694","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"0","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":2486,"wires":[["dd9f96c4.353d28"]]},{"id":"c041e9c9.a89588","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"-1","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":2519,"wires":[["dd9f96c4.353d28"]]},{"id":"e59a24bf.df41b8","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":2353,"wires":[["dd9f96c4.353d28"]]},{"id":"df4735f5.5a8d68","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"hallo","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":2387,"wires":[["dd9f96c4.353d28"]]},{"id":"cb15e9e3.c6b5f8","type":"inject","z":"2e2bde07.2bda42","name":"","topic":".,c","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":2420,"wires":[["dd9f96c4.353d28"]]},{"id":"ffb767d7.cbac48","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"..10.2","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":2453,"wires":[["dd9f96c4.353d28"]]},{"id":"159b30b8.266abf","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2002,"wires":[["613cd22a.44b13c"]]},{"id":"613cd22a.44b13c","type":"change","z":"2e2bde07.2bda42","name":"activate queue with volume - not number","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_queue","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":2002,"wires":[["5ecc6d9e.af7504"]]},{"id":"618e022a.f227ec","type":"comment","z":"2e2bde07.2bda42","name":"activate queue with volume but use default","info":"","x":201,"y":1969,"wires":[]},{"id":"a4a62d48.8553e","type":"change","z":"2e2bde07.2bda42","name":"activate queue with volume - invalid number","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_queue","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":331,"y":2035,"wires":[["5ecc6d9e.af7504"]]},{"id":"ea6b985e.9d3f68","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":2035,"wires":[["a4a62d48.8553e"]]},{"id":"f47a1b75.7a9858","type":"change","z":"2e2bde07.2bda42","name":"activate queue with volume - 1","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_queue","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2069,"wires":[["5ecc6d9e.af7504"]]},{"id":"3f695443.b2475c","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2069,"wires":[["f47a1b75.7a9858"]]},{"id":"5adf1b4a.403774","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":840,"y":2002,"wires":[["f7a859dd.a38898"]]},{"id":"31661052.1cb59","type":"comment","z":"2e2bde07.2bda42","name":"get queue","info":"","x":840,"y":1966,"wires":[]},{"id":"ad1c0aa3.d90fa8","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1310,"y":2087,"wires":[]},{"id":"8ac4b2bf.acf95","type":"comment","z":"2e2bde07.2bda42","name":"shuffle queue","info":"","x":850,"y":2053,"wires":[]},{"id":"c1c243cc.740df","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"SHUFLE","payload":"set_queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":890,"y":2088,"wires":[["f7a859dd.a38898"]]},{"id":"9b245ba0.a9fa68","type":"inject","z":"2e2bde07.2bda42","name":"test invalid command","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":880,"y":2183,"wires":[["f7a859dd.a38898"]]},{"id":"30eb293.0f209d6","type":"comment","z":"2e2bde07.2bda42","name":"invalid command","info":"","x":859,"y":2148,"wires":[]},{"id":"ff119fe5.e9233","type":"comment","z":"2e2bde07.2bda42","name":"ADDITIONAL TEST SEE HERE (No Playlists)","info":"no Music Library Playlists\n- move playlist directory to different place\n\nno Sonos Playlists\nno My Sonos items\nno Amazon Prime Playlists in My Sonons\n","x":209,"y":2578,"wires":[]},{"id":"80e23fff.0f586","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_sonos_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":2685,"wires":[["d5d78733.a3b618"]]},{"id":"365875e.b9e5f8a","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_amazonprime_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2652,"wires":[["d5d78733.a3b618"]]},{"id":"5a0d6d96.875a94","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":490,"y":2658,"wires":[]},{"id":"56085d81.49a104","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"12xdgt","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":650,"wires":[["2c20b96a.e5bc96"]]},{"id":"acc9ae1d.15e39","type":"comment","z":"2e2bde07.2bda42","name":"ADDITIONAL TEST SEE HERE ","info":"- empty queue\n- queue not activated\n","x":1050,"y":1965,"wires":[],"icon":"node-red/alert.svg"},{"id":"e53eb4f.935c748","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"x","payload":"insert_amazonprime_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":700,"y":1582,"wires":[["d12bd467.ca9358"]]},{"id":"ed16ee64.4d4eb","type":"inject","z":"99e6906e.c69df","name":"","topic":"On","payload":"set_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":480,"y":57,"wires":[["f2979581.a19d08"]]},{"id":"62c8c05b.eba5e","type":"inject","z":"99e6906e.c69df","name":"","topic":"Off","payload":"set_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":480,"y":89,"wires":[["f2979581.a19d08"]]},{"id":"bd8d926e.c5c12","type":"comment","z":"9ea06256.355a2","name":"set led","info":"","x":788,"y":76,"wires":[]},{"id":"7a53e124.78de4","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"set_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":789,"y":110,"wires":[["eaab7f3b.eb8db"]]},{"id":"40554e29.11064","type":"inject","z":"9ea06256.355a2","name":"","topic":"xxxxx","payload":"set_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":809,"y":143,"wires":[["eaab7f3b.eb8db"]]},{"id":"cbdb6952.c8e6a8","type":"comment","z":"2e2bde07.2bda42","name":"insert amazonprime playlists from My Sonos","info":"","x":211,"y":1123,"wires":[]},{"id":"5fa235d4.a3742c","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"Best","payload":"insert_amazonprime_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":1159,"wires":[["4dd5b2ff.80841c"]]},{"id":"6d10b284.35d90c","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"insert_amazonprime_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1197,"wires":[["9eb23d7d.4fa8a"]]},{"id":"5b4ba751.751278","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xxxxx","payload":"insert_amazonprime_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":1232,"wires":[["9eb23d7d.4fa8a"]]},{"id":"afc056d4.7db9c8","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"999","payload":"insert_amazonprime_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":1268,"wires":[["9eb23d7d.4fa8a"]]},{"id":"d92f3918.30fb88","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":999,"y":126,"wires":[["9225381f.320718"]]},{"id":"fb07cf1.4081e3","type":"comment","z":"2e2bde07.2bda42","name":"No Ip && invalid serial","info":"","x":138,"y":2917,"wires":[]},{"id":"bc77593.c2566a8","type":"comment","z":"2e2bde07.2bda42","name":"Invalid ip: from fritzbox","info":"","x":520,"y":2782,"wires":[]},{"id":"9ec7cbdf.5f6818","type":"comment","z":"2e2bde07.2bda42","name":"Invalid ip address - wrong syntax","info":"","x":550,"y":2862,"wires":[]},{"id":"f7531027.df1ee","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":2826,"wires":[["88c9fb4e.3c7ed8"]]},{"id":"95c2e9b3.5b3998","type":"comment","z":"2e2bde07.2bda42","name":"No ip && valid serial","info":"","x":510,"y":2822,"wires":[]},{"id":"19c87c23.068fb4","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":98,"y":2952,"wires":[["fec53bc8.d2ef38"]]},{"id":"4a14b3a8.5043ec","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":98,"y":2859,"wires":[["404bc2a2.32632c"]]},{"id":"5ae62e13.1aaaa","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":98,"y":2776,"wires":[["8011af3a.b5551"]]},{"id":"f4257bb8.59cb08","type":"comment","z":"99e6906e.c69df","name":"Insert Spotify URI","info":"","x":1176,"y":1116,"wires":[],"icon":"font-awesome/fa-arrow-circle-right"},{"id":"8d0b193b.cc2258","type":"inject","z":"99e6906e.c69df","name":"spotify track","topic":"spotify:track:5AdoS3gS47x40nBNlNmPQ8","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1167,"y":1149,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"1cd31901.348b97","type":"inject","z":"99e6906e.c69df","name":"spotify album","topic":"spotify:album:1TSZDcvlPtAnekTaItI3qO","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1167,"y":1216,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"ecb9c681.6642d8","type":"inject","z":"99e6906e.c69df","name":"spotify artistTopTracks","topic":"spotify:artistTopTracks:1dfeR4HaWDbWqFHLkxsg1d","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1197,"y":1182,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"f20742ee.3812c","type":"inject","z":"99e6906e.c69df","name":"spotify playlist","topic":"spotify:user:spotify:playlist:37i9dQZEVXbMDoHDwVN2tF","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1167,"y":1249,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"4f019de6.e2d3b4","type":"comment","z":"99e6906e.c69df","name":"Get ...","info":"","x":987,"y":646,"wires":[]},{"id":"5db761e2.a40d","type":"comment","z":"99e6906e.c69df","name":"Flash / remove","info":"","x":1229,"y":645,"wires":[]},{"id":"4e16e080.e4083","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"test_connected","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1241,"y":56,"wires":[["9225381f.320718"]]},{"id":"a310c609.fd61e8","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":550,"y":380,"wires":[]},{"id":"642f75f0.db899c","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"Heute soll das Wetter schön werden.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":260,"wires":[["ab7c66e.a0b8698"]]},{"id":"63e06903.06d2d8","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":664,"y":2120,"wires":[]},{"id":"51ed34ef.2ee2ac","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_songinfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":2179,"wires":[["454d295e.ee6df8"]]},{"id":"e57c7f7d.d2247","type":"comment","z":"9ea06256.355a2","name":"GET STATUS","info":"","x":75,"y":1404,"wires":[],"icon":"node-red/alert.svg"},{"id":"dd6943c6.e147","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":506,"y":636,"wires":[]},{"id":"c312e807.fb9ba8","type":"comment","z":"775d7a2a.44f234","name":"CONTROL PLAYER","info":"","x":95,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"bb0f52c0.7945a","type":"comment","z":"775d7a2a.44f234","name":"MANAGE QUEUE","info":"","x":95,"y":915,"wires":[],"icon":"node-red/alert.svg"},{"id":"80002b58.0f7ea8","type":"comment","z":"2e2bde07.2bda42","name":"insert_spotify_uri","info":"","x":120.0086669921875,"y":700.0017395019531,"wires":[]},{"id":"e89569de.cbbfd8","type":"inject","z":"2e2bde07.2bda42","name":"spotify wrong syntax","topic":"spotify:xxxxxx","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":129.0086669921875,"y":803.0017395019531,"wires":[["8b8526ef.f33738"]]},{"id":"173460da.e1173f","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":737,"wires":[["8b8526ef.f33738"]]},{"id":"64b60136.ca39c","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xxxxxx","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":149.0086669921875,"y":770.0017395019531,"wires":[["8b8526ef.f33738"]]},{"id":"3a59ea53.672ba6","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":590,"y":803,"wires":[]},{"id":"ff8b3c98.614d3","type":"comment","z":"2e2bde07.2bda42","name":"get spotify playlists from My Sonos","info":"","x":920,"y":722,"wires":[]},{"id":"9242dd3a.feec1","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_spotify","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":840,"y":756,"wires":[["fcdbef22.27949"]]},{"id":"96e78445.4a2818","type":"comment","z":"2e2bde07.2bda42","name":"play song","info":"","x":100,"y":2122,"wires":[]},{"id":"ca1fa4f8.794848","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":2162,"wires":[["38b072c9.5847fe"]]},{"id":"38b072c9.5847fe","type":"change","z":"2e2bde07.2bda42","name":"play song - no topic","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":2162,"wires":[["5ecc6d9e.af7504"]]},{"id":"aedcb4b9.375ae8","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":2197,"wires":[["2e75e771.045e48"]]},{"id":"2e75e771.045e48","type":"change","z":"2e2bde07.2bda42","name":"play song - -1","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":239,"y":2197,"wires":[["5ecc6d9e.af7504"]]},{"id":"227dfb46.8753a4","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":2232,"wires":[["e214e9dc.57d2d8"]]},{"id":"e214e9dc.57d2d8","type":"change","z":"2e2bde07.2bda42","name":"play song - xxxx","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"x","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":239,"y":2232,"wires":[["5ecc6d9e.af7504"]]},{"id":"395891f3.2a6e2e","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":2267,"wires":[["86ce36bb.7d7838"]]},{"id":"86ce36bb.7d7838","type":"change","z":"2e2bde07.2bda42","name":"play song - song 500","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"500","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":258,"y":2267,"wires":[["5ecc6d9e.af7504"]]},{"id":"36e9951f.1034ca","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":410,"y":160,"wires":[]},{"id":"59d5d6c2.7337a8","type":"inject","z":"775d7a2a.44f234","name":"insert_uri  album from ML","topic":"x-rincon-playlist:RINCON_000E58FE3AEA01400#A:ALBUM/Diamond%20Life","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":169,"y":993,"wires":[["22888d78.e458b2"]]},{"id":"244ca07a.204bf","type":"inject","z":"775d7a2a.44f234","name":"insert_uri  song from Amazon Prime","topic":"x-sonosapi-hls-static:catalog%2ftracks%2fB07GDMFXGB%2f%3fplaylistAsin%3dB07W1Z3YMN%26playlistType%3dprimePlaylist?sid=201&flags=0&sn=14","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":200,"y":1037,"wires":[["22888d78.e458b2"]]},{"id":"e5c4eab4.b04df8","type":"comment","z":"4318847d.0693cc","name":"::: J ::: Group to players","info":"","x":105,"y":1196,"wires":[]},{"id":"62a1b89.7509d48","type":"change","z":"4318847d.0693cc","name":"play swr3 on leader","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":251,"y":1230,"wires":[["7df282b4.10f7ac"]]},{"id":"ad8671c9.08f85","type":"inject","z":"4318847d.0693cc","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1230,"wires":[["62a1b89.7509d48"]]},{"id":"8af22d58.53aff","type":"change","z":"4318847d.0693cc","name":"join_group with new topic","rules":[{"t":"set","p":"topic","pt":"msg","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"join_group","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":817,"y":1230,"wires":[["bf85277a.dc7898"]]},{"id":"25dbf732.65c418","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_name","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":526,"y":1230,"wires":[["74efaec6.7c31a"]]},{"id":"119077c5.4b6e88","type":"comment","z":"99e6906e.c69df","name":"Activate, play, seek in track","info":"","x":756,"y":678,"wires":[]},{"id":"fdd63f73.7806d","type":"inject","z":"99e6906e.c69df","name":"insert_uri Music Library - song","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":765,"y":949,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"16e343b8.cc984c","type":"inject","z":"775d7a2a.44f234","name":"activate TV","topic":"x-rincon-stream:RINCON_5CAAFD00223601400","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":288,"wires":[["9974711e.7107e"]]},{"id":"fe2350f7.f7f82","type":"comment","z":"775d7a2a.44f234","name":"Others","info":"","x":109,"y":252,"wires":[]},{"id":"4abc338b.cb043c","type":"inject","z":"775d7a2a.44f234","name":"","topic":"x-rincon-cpcontainer:1006206ccatalog%2fplaylists%2fB07W1Z3YMN%2f%23prime_playlist?sid=201&flags=8300&sn=14","payload":"insertPrimePlaylistUri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":158,"y":1078,"wires":[["22888d78.e458b2"]]},{"id":"5fa4dbc.f66a224","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":669,"y":1011,"wires":[]},{"id":"d1be1bbd.0a42f8","type":"inject","z":"775d7a2a.44f234","name":"activate tunein B5","topic":"x-sonosapi-stream:s24903?sid=254&flags=8224&sn=0","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":340,"wires":[["b5752468.15d418"]]},{"id":"eda6b8af.911258","type":"inject","z":"775d7a2a.44f234","name":"activate Arabella direct","topic":"x-rincon-mp3radio://http://live.radioarabella.de/stream?ref=radioarabella.de","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":375,"wires":[["b5752468.15d418"]]},{"id":"236df86c.d3de28","type":"comment","z":"99e6906e.c69df","name":"Insert playlist from Sonos Playlists","info":"","x":784,"y":990,"wires":[]},{"id":"f96d89b0.a401e8","type":"comment","z":"2e2bde07.2bda42","name":"insert spotifiy playlists from My Sonos","info":"","x":170,"y":922,"wires":[]},{"id":"8fe669ac.891008","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"Main","payload":"insert_spotify_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":961,"wires":[["655b5cef.7bdee4"]]},{"id":"9dcda155.31f3a","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"insert_spotify_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":999,"wires":[["7292e00.782ef2"]]},{"id":"1e491ef9.587481","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xxxxx","payload":"insert_spotify_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1034,"wires":[["7292e00.782ef2"]]},{"id":"5d088289.7471ec","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"999","payload":"insert_spotify_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":1070,"wires":[["7292e00.782ef2"]]},{"id":"bad732ab.b9295","type":"inject","z":"2e2bde07.2bda42","name":"spotify wrong syntax","topic":"spotify:album:1TSZ","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":836,"wires":[["8b8526ef.f33738"]]},{"id":"a1bc563b.563b38","type":"inject","z":"2e2bde07.2bda42","name":"spotify wrong syntax","topic":"spotify:user:spotify:playlist:","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":870,"wires":[["8b8526ef.f33738"]]},{"id":"cfe47c90.eddb1","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":464.009765625,"y":2902.00390625,"wires":[]},{"id":"7ca9f9d9.666e78","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_spotify","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":2614,"wires":[["d5d78733.a3b618"]]},{"id":"f7d0bc8c.07903","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_musiclibrary_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2720,"wires":[["d5d78733.a3b618"]]},{"id":"547b39a3.f30828","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":1987,"wires":[["14f90bc4.af3534"]]},{"id":"9a7fcc84.cb323","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":119,"y":2021,"wires":[["14f90bc4.af3534"]]},{"id":"2168f3df.b75abc","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":2100,"wires":[["1cea8f6a.b6c9f1"]]},{"id":"af6db229.46343","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":119,"y":2134,"wires":[["1cea8f6a.b6c9f1"]]},{"id":"f7c525b1.bb4868","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"test_connected","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":119,"y":1954,"wires":[["14f90bc4.af3534","c462718a.7b287"]]},{"id":"d019e4ea.bdd108","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"test_connected","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":118,"y":2067,"wires":[["1cea8f6a.b6c9f1"]]},{"id":"e8890445.efc0d8","type":"inject","z":"9ea06256.355a2","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":397,"wires":[["2e34f5b1.a5a72a"]]},{"id":"c20aba70.072a08","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91.01171875,"y":1831.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"daa30934.76a648","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91.01171875,"y":1865.00390625,"wires":[["4d64eeac.4d3e3"]]},{"id":"4d64eeac.4d3e3","type":"function","z":"9ea06256.355a2","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":213.01171875,"y":1865.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"3c19df58.80cc9","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90.01171875,"y":1901.00390625,"wires":[["c300c365.38939"]]},{"id":"c300c365.38939","type":"function","z":"9ea06256.355a2","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":212.01171875,"y":1901.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"60cea140.4eb6c","type":"inject","z":"9ea06256.355a2","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121.01171875,"y":1796.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"2bfe6145.ba364e","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":736.01171875,"y":2586.00390625,"wires":[["2f900d43.a3c562"]]},{"id":"47a2fc8a.a0a874","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":736.01171875,"y":2620.00390625,"wires":[["fb61772e.805838"]]},{"id":"fb61772e.805838","type":"function","z":"9ea06256.355a2","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":858.01171875,"y":2620.00390625,"wires":[["2f900d43.a3c562"]]},{"id":"9737bc58.519b9","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":735.01171875,"y":2656.00390625,"wires":[["4f7f2247.043f3c"]]},{"id":"4f7f2247.043f3c","type":"function","z":"9ea06256.355a2","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":857.01171875,"y":2656.00390625,"wires":[["2f900d43.a3c562"]]},{"id":"6388e978.1cadb8","type":"inject","z":"9ea06256.355a2","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":766.01171875,"y":2551.00390625,"wires":[["2f900d43.a3c562"]]},{"id":"62c1a5af.94800c","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":102,"y":1651.00390625,"wires":[["ff182013.33f7c"]]},{"id":"c1b53f9f.0fdac","type":"comment","z":"9ea06256.355a2","name":"No Ip && invalid serial","info":"","x":142,"y":1617.00390625,"wires":[]},{"id":"f80fe12f.6276c","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":1478.00390625,"wires":[["904fe009.2ebb"]]},{"id":"ca753f39.10493","type":"comment","z":"9ea06256.355a2","name":"Invalid ip: from fritzbox","info":"","x":143,"y":1444.00390625,"wires":[]},{"id":"64a41fb7.fb67","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":1561.00390625,"wires":[["980baa4a.3e8988"]]},{"id":"528d6687.3d8918","type":"comment","z":"9ea06256.355a2","name":"Invalid ip address - wrong syntax","info":"","x":172,"y":1526.00390625,"wires":[]},{"id":"601f6242.f1b0bc","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":104,"y":1749.00390625,"wires":[["b802cbbe.6ae1d8"]]},{"id":"f40f4d0f.61a64","type":"comment","z":"9ea06256.355a2","name":"No ip && valid serial - WILL WORK!","info":"","x":184,"y":1714.00390625,"wires":[]},{"id":"3ff27aa9.44cc56","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":510,"y":1603,"wires":[]},{"id":"db0abaa3.b1af28","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":530,"y":240,"wires":[]},{"id":"9328b6f0.0ce098","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":430,"y":519,"wires":[]},{"id":"e0ca2d40.4a3d5","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":2223,"wires":[["454d295e.ee6df8"]]},{"id":"c22c8e1b.cb719","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_mysonos","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":115,"y":2724,"wires":[["c96a5709.436118"]]},{"id":"b3cb5da6.aee8f","type":"comment","z":"9ea06256.355a2","name":"No Ip && invalid serial","info":"","x":145,"y":2690,"wires":[]},{"id":"dbe4cd54.2a679","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_mysonos","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":114,"y":2551,"wires":[["30445e3b.fb4b02"]]},{"id":"b36035b6.ebc288","type":"comment","z":"9ea06256.355a2","name":"Invalid ip: from fritzbox","info":"","x":146,"y":2517,"wires":[]},{"id":"58855e60.aaa07","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_mysonos","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":114,"y":2634,"wires":[["88d06aad.24d9b8"]]},{"id":"964f7afb.be7a18","type":"comment","z":"9ea06256.355a2","name":"Invalid ip address - wrong syntax","info":"","x":175,"y":2599,"wires":[]},{"id":"42b867cc.3f2e68","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_mysonos","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":117,"y":2822,"wires":[["9c8175ba.da5068"]]},{"id":"34d03646.acd04a","type":"comment","z":"9ea06256.355a2","name":"No ip && valid serial - WILL WORK!","info":"","x":187,"y":2787,"wires":[]},{"id":"605ba607.f9ae78","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":513,"y":2675.99609375,"wires":[]},{"id":"6b5fc3f1.98809c","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":93,"y":378,"wires":[["6875cc2b.767cf4"]]},{"id":"52f2f6ec.d13d68","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":102,"y":215,"wires":[["8536a29e.1b70c"]]},{"id":"b6d65d64.5c187","type":"comment","z":"2e2bde07.2bda42","name":"No Ip && invalid serial","info":"","x":142,"y":181,"wires":[]},{"id":"7ce664e0.aa786c","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":54,"wires":[["7ee80fc8.c45a6"]]},{"id":"108935ad.88bbda","type":"comment","z":"2e2bde07.2bda42","name":"Invalid ip: from fritzbox","info":"","x":143,"y":20,"wires":[]},{"id":"34a73f71.9b97b","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":134,"wires":[["c42c98c6.6619c8"]]},{"id":"7e798fad.b2f4f","type":"comment","z":"2e2bde07.2bda42","name":"Invalid ip address - wrong syntax","info":"","x":172,"y":99,"wires":[]},{"id":"d61d6eec.2c8f3","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":104,"y":297,"wires":[["a84543d3.166d"]]},{"id":"fc9d77e9.cf56c8","type":"comment","z":"2e2bde07.2bda42","name":"No ip && valid serial - WILL WORK!","info":"","x":184,"y":262,"wires":[]},{"id":"e30904a.5307cf8","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":93,"y":412,"wires":[["3a869791.1b8c28"]]},{"id":"3a869791.1b8c28","type":"function","z":"2e2bde07.2bda42","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":215,"y":412,"wires":[["6875cc2b.767cf4"]]},{"id":"b3ed390f.025bc8","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":92,"y":448,"wires":[["147da13b.1818cf"]]},{"id":"147da13b.1818cf","type":"function","z":"2e2bde07.2bda42","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":214,"y":448,"wires":[["6875cc2b.767cf4"]]},{"id":"ab3d2e19.b08e9","type":"inject","z":"2e2bde07.2bda42","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":123,"y":343,"wires":[["6875cc2b.767cf4"]]},{"id":"5e89b1c4.34392","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":533,"y":198,"wires":[]},{"id":"c4405264.252e9","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":570,"y":400,"wires":[]},{"id":"35be5578.80893a","type":"comment","z":"4318847d.0693cc","name":"::: H ::: Set a morning station but dont play right now","info":"","x":195,"y":917,"wires":[]},{"id":"d82ccb20.029108","type":"inject","z":"99e6906e.c69df","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1200,"y":810,"wires":[["a113a1ca.0a6d9"]]},{"id":"a113a1ca.0a6d9","type":"change","z":"99e6906e.c69df","name":"remove several songs","rules":[{"t":"set","p":"payload","pt":"msg","to":"remove_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfSongs","pt":"msg","to":"1000","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":847,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"6c2d7412.15877c","type":"comment","z":"2e2bde07.2bda42","name":"remove several songs","info":"","x":760,"y":2340,"wires":[]},{"id":"d00535fd.77d288","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":730,"y":2380,"wires":[["9952b49d.b6b988"]]},{"id":"9952b49d.b6b988","type":"change","z":"2e2bde07.2bda42","name":"remove song","rules":[{"t":"set","p":"payload","pt":"msg","to":"remove_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfSongs","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":873,"y":2380,"wires":[["146ba1ed.ab89ee"]]},{"id":"88ec65b1.bd2408","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":730,"y":2414,"wires":[["58d222b9.d3a34c"]]},{"id":"58d222b9.d3a34c","type":"change","z":"2e2bde07.2bda42","name":"remove song","rules":[{"t":"set","p":"payload","pt":"msg","to":"remove_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfSongs","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":873,"y":2414,"wires":[["146ba1ed.ab89ee"]]},{"id":"dae83ff6.cae8c","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":730,"y":2449,"wires":[["699b9734.68e728"]]},{"id":"699b9734.68e728","type":"change","z":"2e2bde07.2bda42","name":"remove song","rules":[{"t":"set","p":"payload","pt":"msg","to":"remove_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfSongs","pt":"msg","to":".,c","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":873,"y":2449,"wires":[["146ba1ed.ab89ee"]]},{"id":"d6fe73ee.3d189","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":730,"y":2483,"wires":[["68e8f70a.65cba8"]]},{"id":"68e8f70a.65cba8","type":"change","z":"2e2bde07.2bda42","name":"remove song","rules":[{"t":"set","p":"payload","pt":"msg","to":"remove_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfSongs","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":873,"y":2483,"wires":[["146ba1ed.ab89ee"]]},{"id":"910c362e.284198","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":730,"y":2516,"wires":[["7ca0f1ee.56563"]]},{"id":"7ca0f1ee.56563","type":"change","z":"2e2bde07.2bda42","name":"remove song - will work ","rules":[{"t":"set","p":"payload","pt":"msg","to":"remove_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfSongs","pt":"msg","to":"10.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":913,"y":2516,"wires":[["146ba1ed.ab89ee"]]},{"id":"63014668.6013d8","type":"comment","z":"4318847d.0693cc","name":"::: K ::: Serving a local file - for instance to use it as notification","info":"","x":225,"y":1346,"wires":[]},{"id":"b7ea0159.a12ab","type":"http in","z":"4318847d.0693cc","name":"","url":"/bell1.mp3","method":"get","upload":false,"swaggerDoc":"","x":121,"y":1381,"wires":[["30837e5a.5ad7d2"]]},{"id":"30837e5a.5ad7d2","type":"file in","z":"4318847d.0693cc","name":"","filename":"/home/pi/Downloads/bell1.mp3","format":"","x":349,"y":1381,"wires":[["c8e65a9f.55e5e8"]]},{"id":"c8e65a9f.55e5e8","type":"http response","z":"4318847d.0693cc","name":"","statusCode":"","headers":{"content-type":"audio/mpeg"},"x":552,"y":1381,"wires":[]},{"id":"e522ea8c.be8558","type":"http in","z":"4318847d.0693cc","name":"","url":"/bell2.wav","method":"get","upload":false,"swaggerDoc":"","x":120,"y":1416,"wires":[["f499fea6.09005"]]},{"id":"f499fea6.09005","type":"file in","z":"4318847d.0693cc","name":"","filename":"/home/pi/Downloads/bell2.wav","format":"","x":349,"y":1416,"wires":[["27c6886d.d362b8"]]},{"id":"27c6886d.d362b8","type":"http response","z":"4318847d.0693cc","name":"","statusCode":"","headers":{"content-type":"audio/mpeg"},"x":552,"y":1416,"wires":[]},{"id":"caa64c34.28006","type":"http in","z":"4318847d.0693cc","name":"","url":"/help.html","method":"get","upload":false,"swaggerDoc":"","x":120,"y":1451,"wires":[["34ecbdd.59a3342"]]},{"id":"34ecbdd.59a3342","type":"file in","z":"4318847d.0693cc","name":"","filename":"/home/pi/Downloads/help.html","format":"utf8","x":349,"y":1451,"wires":[["b6b196fe.fc3a28"]]},{"id":"b6b196fe.fc3a28","type":"http response","z":"4318847d.0693cc","name":"","statusCode":"","headers":{"content-type":"text/html"},"x":552,"y":1451,"wires":[]},{"id":"876e6bef.2b8ca8","type":"comment","z":"4318847d.0693cc","name":"http://192.168.178.55:1880/bell1.mp3","info":"play tts notification","x":785,"y":1382,"wires":[]},{"id":"69625b1d.a0a244","type":"comment","z":"4318847d.0693cc","name":"http://192.168.178.55:1880/bell2.wav","info":"play tts notification","x":776,"y":1418,"wires":[]},{"id":"47e1d7a6.6a0658","type":"comment","z":"4318847d.0693cc","name":"http://192.168.178.55:1880/help.html","info":"play tts notification","x":776,"y":1453,"wires":[]},{"id":"2f1ad2af.0dab7e","type":"inject","z":"4318847d.0693cc","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1505,"wires":[["a240b2c5.25633"]]},{"id":"a240b2c5.25633","type":"change","z":"4318847d.0693cc","name":"play_notification - local file -  with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.55:1880/bell1.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":321,"y":1505,"wires":[["71e7d30e.00d74c"]]},{"id":"573c39b5.750278","type":"change","z":"4318847d.0693cc","name":"play_notification - local file - with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.55:1880/bell2.wav","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":321,"y":1540,"wires":[["71e7d30e.00d74c"]]},{"id":"a062ceaa.9c1c1","type":"inject","z":"4318847d.0693cc","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1540,"wires":[["573c39b5.750278"]]},{"id":"1e8bb19e.fefe0e","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":757,"y":1523,"wires":[]},{"id":"7a078d58.bed044","type":"http in","z":"55805384.a4695c","name":"","url":"/weather.mp3","method":"get","upload":false,"swaggerDoc":"","x":110,"y":174,"wires":[["8644e66.0ce5b18"]]},{"id":"8644e66.0ce5b18","type":"file in","z":"55805384.a4695c","name":"","filename":"/home/pi/Downloads/weather.mp3","format":"","x":453,"y":174,"wires":[["3fe0be9b.c6a862"]]},{"id":"3fe0be9b.c6a862","type":"http response","z":"55805384.a4695c","name":"","statusCode":"","headers":{"content-type":"audio/mpeg"},"x":734,"y":174,"wires":[]},{"id":"ff8f1190.18663","type":"comment","z":"55805384.a4695c","name":"http://192.168.178.55:1880/weather.mp3","info":"play tts notification","x":960,"y":180,"wires":[]},{"id":"44b5336.4b213cc","type":"change","z":"55805384.a4695c","name":"play_notification - local file -  with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.55:1880/weather.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":260,"wires":[["1783418c.b875ae"]]},{"id":"52aa6e83.72414","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1030,"y":280,"wires":[]},{"id":"37d6d7e5.ebfa68","type":"inject","z":"55805384.a4695c","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":377,"wires":[["89a66dee.9fcb3"]]},{"id":"efdd08d6.cc5988","type":"change","z":"55805384.a4695c","name":"play_notification with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"20","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":427,"y":377,"wires":[["916fe293.37335"]]},{"id":"89a66dee.9fcb3","type":"delay","z":"55805384.a4695c","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":224,"y":377,"wires":[["efdd08d6.cc5988"]]},{"id":"35aa7299.f6a99e","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1009,"y":90,"wires":[["9225381f.320718"]]},{"id":"be3f94c2.25dfe8","type":"inject","z":"99e6906e.c69df","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1213,"y":96,"wires":[["7cdda1ba.fd7b7"]]},{"id":"7cdda1ba.fd7b7","type":"change","z":"99e6906e.c69df","name":"get songinfo - warning","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_songinfo","tot":"str"},{"t":"set","p":"suppressWarnings","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1272,"y":136,"wires":[["9225381f.320718"]]},{"id":"6e1a4a94.6faed4","type":"inject","z":"99e6906e.c69df","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1039,"y":280,"wires":[["26888be2.80f9b4"]]},{"id":"28d88625.cffb1a","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":801,"y":1480,"wires":[["ecf78b66.f50b08"]]},{"id":"59706d3b.649434","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1127,"y":1480,"wires":[]},{"id":"80a6579.a3292a8","type":"comment","z":"9ea06256.355a2","name":"Invalid ip: from fritzbox","info":"","x":840,"y":1443,"wires":[]},{"id":"810e8434.e0abe8","type":"inject","z":"9ea06256.355a2","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":830,"y":1556,"wires":[["8a470931.71a4d8"]]},{"id":"e79de1d9.c134d","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1182,"y":1556,"wires":[]},{"id":"60c3d49f.58ee7c","type":"inject","z":"9ea06256.355a2","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":830,"y":1599,"wires":[["bd109717.3fb7f8"]]},{"id":"ead1d2c9.dad89","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":1639,"wires":[["6159246d.cf3bac"]]},{"id":"7f969558.6d046c","type":"inject","z":"9ea06256.355a2","name":"","topic":"NigtMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":1679,"wires":[["6159246d.cf3bac"]]},{"id":"852d4b9d.122f98","type":"inject","z":"99e6906e.c69df","name":"","topic":"Off","payload":"set_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":500,"y":134,"wires":[["f2979581.a19d08"]]},{"id":"5e8b717a.0e50f","type":"inject","z":"99e6906e.c69df","name":"","topic":"On","payload":"set_loudness","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":500,"y":199,"wires":[["f2979581.a19d08"]]},{"id":"cfcde6d.e832118","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1019,"y":161,"wires":[["9225381f.320718"]]},{"id":"dceff87d.ff6fe8","type":"comment","z":"9ea06256.355a2","name":"set crossfade","info":"","x":570,"y":80,"wires":[]},{"id":"d02705fc.4f6a98","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"set_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":570,"y":113,"wires":[["eaab7f3b.eb8db"]]},{"id":"56a5b67c.9e1fe8","type":"inject","z":"9ea06256.355a2","name":"","topic":"xxxxx","payload":"set_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":590,"y":146,"wires":[["eaab7f3b.eb8db"]]},{"id":"f313417d.d6072","type":"change","z":"9ea06256.355a2","name":"no topic","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":781,"wires":[["c634ec6.772531"]]},{"id":"db7e1e48.415ec","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":781,"wires":[["f313417d.d6072"]]},{"id":"4277a6d4.f36418","type":"change","z":"9ea06256.355a2","name":"emtpy topic","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":815,"wires":[["c634ec6.772531"]]},{"id":"3328c155.0f41ee","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":815,"wires":[["4277a6d4.f36418"]]},{"id":"c91b1770.bf7588","type":"change","z":"9ea06256.355a2","name":"wrong EQType name","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Ni","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":848,"wires":[["c634ec6.772531"]]},{"id":"666bf739.4a4c68","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":848,"wires":[["c91b1770.bf7588"]]},{"id":"251ae715.af8708","type":"change","z":"9ea06256.355a2","name":"missing eqvalue","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":882,"wires":[["c634ec6.772531"]]},{"id":"2ecec6dc.511fba","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":882,"wires":[["251ae715.af8708"]]},{"id":"6dcf90cc.c99a3","type":"change","z":"9ea06256.355a2","name":"empty value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":915,"wires":[["c634ec6.772531"]]},{"id":"cbeae512.0b3a48","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":915,"wires":[["6dcf90cc.c99a3"]]},{"id":"778e343.b4128cc","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":948,"wires":[["14192db2.028222"]]},{"id":"14192db2.028222","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":948,"wires":[["c634ec6.772531"]]},{"id":"a898fb78.49df68","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":981,"wires":[["10bbcd59.63d013"]]},{"id":"10bbcd59.63d013","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":981,"wires":[["c634ec6.772531"]]},{"id":"7cbd3ef8.1cba7","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":550,"y":1000,"wires":[]},{"id":"d6758645.60b068","type":"comment","z":"9ea06256.355a2","name":"set eq","info":"","x":55,"y":746,"wires":[]},{"id":"da033f8e.8a5da","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":1015,"wires":[["c746562a.f7cf98"]]},{"id":"c746562a.f7cf98","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"20","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":1015,"wires":[["c634ec6.772531"]]},{"id":"54cc1a93.be2f24","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":1049,"wires":[["10652b08.cdf7a5"]]},{"id":"10652b08.cdf7a5","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"-16","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":1049,"wires":[["c634ec6.772531"]]},{"id":"780fd479.d57f9c","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":1082,"wires":[["d21c8d75.1a6fb"]]},{"id":"d21c8d75.1a6fb","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":1082,"wires":[["c634ec6.772531"]]},{"id":"4e02dc11.1edb74","type":"inject","z":"99e6906e.c69df","name":"Speech Enhancement","topic":"DialogLevel","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1049,"y":314,"wires":[["26888be2.80f9b4"]]},{"id":"e09a244e.1c4898","type":"inject","z":"99e6906e.c69df","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":404,"wires":[["954bd4ea.062138"]]},{"id":"954bd4ea.062138","type":"change","z":"99e6906e.c69df","name":"NightMode","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"On","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":404,"wires":[["218e05d2.48724a"]]},{"id":"c361ad6d.9d6c5","type":"inject","z":"99e6906e.c69df","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":436,"wires":[["34659ec5.6b3322"]]},{"id":"34659ec5.6b3322","type":"change","z":"99e6906e.c69df","name":"Speech Enhancement","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"DialogLevel","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"On","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260.99131774902344,"y":435.9982604980469,"wires":[["218e05d2.48724a"]]},{"id":"c17ca575.002578","type":"inject","z":"99e6906e.c69df","name":"","topic":"00:05:00","payload":"set_sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":255,"wires":[["f2979581.a19d08"]]},{"id":"bf94a6dc.ab87b8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1029,"y":231,"wires":[["9225381f.320718"]]},{"id":"63c649cb.91aef8","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":973,"wires":[["90b50ccc.b3422"]]},{"id":"90b50ccc.b3422","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":951,"y":973,"wires":[["e5e961f1.3e495"]]},{"id":"8dce7afd.ecbe48","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1229,"y":1069,"wires":[]},{"id":"ae54958d.3920b8","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":1072,"wires":[["3abb42e2.d26b8e"]]},{"id":"3abb42e2.d26b8e","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"0:01","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":951,"y":1072,"wires":[["e5e961f1.3e495"]]},{"id":"2038996a.8dd056","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":1105,"wires":[["2fbce26b.4eac6e"]]},{"id":"2fbce26b.4eac6e","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":951,"y":1105,"wires":[["e5e961f1.3e495"]]},{"id":"9ad55345.1b15a","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":1138,"wires":[["f0b31f6.1de02e"]]},{"id":"f0b31f6.1de02e","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"70:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":951,"y":1138,"wires":[["e5e961f1.3e495"]]},{"id":"6a03da00.51df68","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":1171,"wires":[["37ec00a6.91c86"]]},{"id":"37ec00a6.91c86","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"70:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":951,"y":1171,"wires":[["e5e961f1.3e495"]]},{"id":"4079743b.ec8dbc","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":1204,"wires":[["c8d6e97e.be7588"]]},{"id":"c8d6e97e.be7588","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"1:00:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":951,"y":1204,"wires":[["e5e961f1.3e495"]]},{"id":"51d0e9b3.ac9038","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":1237,"wires":[["1ef0d110.ce49cf"]]},{"id":"1ef0d110.ce49cf","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"25:00:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":951,"y":1237,"wires":[["e5e961f1.3e495"]]},{"id":"7db46265.ab462c","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":1270,"wires":[["de739b7a.8fbfb8"]]},{"id":"de739b7a.8fbfb8","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"20:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":951,"y":1270,"wires":[["e5e961f1.3e495"]]},{"id":"6128cd86.7da1c4","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":1039,"wires":[["e5e961f1.3e495"]]},{"id":"fc5fbe86.0d0fd","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":789,"y":1039,"wires":[["6128cd86.7da1c4"]]},{"id":"1c3a3903.7dcec7","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":789,"y":1006,"wires":[["20e0af81.e9cfb"]]},{"id":"20e0af81.e9cfb","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"55","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":1006,"wires":[["e5e961f1.3e495"]]},{"id":"30f47819.2ced78","type":"comment","z":"9ea06256.355a2","name":"set sleep timer","info":"","x":820,"y":800,"wires":[]},{"id":"45029d46.2d44c4","type":"change","z":"9ea06256.355a2","name":"missing topic ","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":840,"wires":[["e5e961f1.3e495"]]},{"id":"2ddb13a.afdd6ec","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":840,"wires":[["45029d46.2d44c4"]]},{"id":"7d67a8dd.e58538","type":"change","z":"9ea06256.355a2","name":"empty topic","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":873,"wires":[["e5e961f1.3e495"]]},{"id":"bd5c7165.7e51","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":873,"wires":[["7d67a8dd.e58538"]]},{"id":"65d0d68b.dd53e8","type":"change","z":"9ea06256.355a2","name":"wrong topic type","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":941,"y":906,"wires":[["e5e961f1.3e495"]]},{"id":"80bf3618.e5ada8","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":906,"wires":[["65d0d68b.dd53e8"]]},{"id":"a3d4a069.06d27","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":940,"wires":[["e21e631a.97ed7"]]},{"id":"e21e631a.97ed7","type":"change","z":"9ea06256.355a2","name":"wrong topic type","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":941,"y":940,"wires":[["e5e961f1.3e495"]]},{"id":"91de21ac.add0b","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":299,"wires":[["114a696b.8570e7"]]},{"id":"114a696b.8570e7","type":"change","z":"775d7a2a.44f234","name":"50 seconds","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:00:50","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":299,"wires":[["fb524ea5.d8eaa"]]},{"id":"2f946d5e.d13732","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":332,"wires":[["735b3a9b.96e854"]]},{"id":"735b3a9b.96e854","type":"change","z":"775d7a2a.44f234","name":"5 min","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:05:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":332,"wires":[["fb524ea5.d8eaa"]]},{"id":"e8997568.c38028","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":365,"wires":[["47f60bb9.201d14"]]},{"id":"47f60bb9.201d14","type":"change","z":"775d7a2a.44f234","name":"55 min","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:55:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":365,"wires":[["fb524ea5.d8eaa"]]},{"id":"d90bb0ec.f0278","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":398,"wires":[["1843550e.64fecb"]]},{"id":"1843550e.64fecb","type":"change","z":"775d7a2a.44f234","name":"1 hour","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"01:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":398,"wires":[["fb524ea5.d8eaa"]]},{"id":"92c8791.bed9188","type":"comment","z":"775d7a2a.44f234","name":"set sleeptimer","info":"","x":819,"y":266,"wires":[]},{"id":"1d7953bf.1d478c","type":"comment","z":"9ea06256.355a2","name":"Invalid ip: from fritzbox","info":"","x":840,"y":1307,"wires":[]},{"id":"193f43ff.37f63c","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":1347,"wires":[["54bd3c94.273304"]]},{"id":"54bd3c94.273304","type":"change","z":"9ea06256.355a2","name":"05:00","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:05:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":1347,"wires":[["e22823f8.ab5fa","79d2602.1ee67a","7a1e95d6.09a1dc"]]},{"id":"3b07a9bc.edb316","type":"inject","z":"99e6906e.c69df","name":"Sub Level","topic":"SubGain","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1009,"y":348,"wires":[["26888be2.80f9b4"]]},{"id":"d5a53bc1.1a1b78","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":460,"wires":[["d343fb27.a0c378"]]},{"id":"d343fb27.a0c378","type":"change","z":"775d7a2a.44f234","name":"NightMode","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":939,"y":459,"wires":[["f9c89d00.dd568"]]},{"id":"9176772f.8ff298","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":494,"wires":[["e8d55955.d91368"]]},{"id":"e8d55955.d91368","type":"change","z":"775d7a2a.44f234","name":"Speech Enhancement","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"DialogLevel","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":969.9913177490234,"y":493.9982604980469,"wires":[["f9c89d00.dd568"]]},{"id":"facf9dd7.a9d2c","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1190,"y":500,"wires":[]},{"id":"ca52f4c.ebb3f08","type":"inject","z":"55805384.a4695c","name":"trigger","topic":"","payload":"get_mediainfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":503,"wires":[["60af36c5.7ff848"]]},{"id":"1413e200.433aee","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_mysonos","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":503,"wires":[["4057d604.719b58"]]},{"id":"82e1a63f.5053b8","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":730,"y":543,"wires":[]},{"id":"5f80c798.8e1158","type":"function","z":"55805384.a4695c","name":"map radioId - Logo","func":"const mySonosArray= msg.payload;\nfor (let i = 0; i < mySonosArray.length; ++i) {\n    if (mySonosArray[i].radioId === msg.radioId) {\n        msg.payload = mySonosArray[i].logo;\n        break;\n    }\n}\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":543,"wires":[["82e1a63f.5053b8"]]},{"id":"7a547ae8.434b74","type":"inject","z":"99e6906e.c69df","name":"","topic":"00:01:00","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":716,"y":812,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"ecc5a120.c36b","type":"comment","z":"55805384.a4695c","name":"get logo for radio station","info":"","x":105,"y":463,"wires":[]},{"id":"97d102a3.69b7e","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_loudness","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1019,"y":194,"wires":[["9225381f.320718"]]},{"id":"b9226c76.31a14","type":"comment","z":"775d7a2a.44f234","name":"get_groups: check payload and role","info":"","x":200,"y":540,"wires":[]},{"id":"d2150b4f.d90398","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":579,"wires":[["fece7b2b.f384f8"]]},{"id":"6240d44a.26596c","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":385,"y":615,"wires":[]},{"id":"2cc36f9.ae48a9","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":615,"wires":[["b84ac129.6b037"]]},{"id":"bcd21345.d8286","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":650,"wires":[["1cd4578e.9f8b88"]]},{"id":"c7ac28f3.9cf8a8","type":"comment","z":"775d7a2a.44f234","name":"get eq: check 1 or 0 ","info":"","x":750,"y":578,"wires":[]},{"id":"4267e272.f160ac","type":"inject","z":"775d7a2a.44f234","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":615,"wires":[["b899f1d.78a531"]]},{"id":"8be1bf84.93ea7","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1073,"y":633,"wires":[]},{"id":"4e8d059e.7c3d1c","type":"inject","z":"775d7a2a.44f234","name":"","topic":"DialogLevel","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":750,"y":651,"wires":[["b899f1d.78a531"]]},{"id":"c7819406.1317d8","type":"comment","z":"775d7a2a.44f234","name":"suppressWarnings: 1. keine Warnung, 2. Warnung","info":"","x":249,"y":708,"wires":[]},{"id":"78e4c5e4.573ccc","type":"inject","z":"775d7a2a.44f234","name":"suppressWarnings","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":149,"y":744,"wires":[["a852d82e.c759e8"]]},{"id":"a852d82e.c759e8","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_songinfo","tot":"str"},{"t":"set","p":"suppressWarnings","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":359,"y":744,"wires":[["4a6c0736.6a7908"]]},{"id":"2e790f99.60ca","type":"inject","z":"775d7a2a.44f234","name":"normal","topic":"","payload":"get_songinfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":779,"wires":[["4a6c0736.6a7908"]]},{"id":"cf496356.e96a9","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":701,"y":781,"wires":[]},{"id":"61d11102.6049b","type":"inject","z":"775d7a2a.44f234","name":"suppressWarnings","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":149,"y":813,"wires":[["13d3537b.83199d"]]},{"id":"13d3537b.83199d","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_songmedia","tot":"str"},{"t":"set","p":"suppressWarnings","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":359,"y":813,"wires":[["4a6c0736.6a7908"]]},{"id":"a787f5ab.6395a8","type":"inject","z":"775d7a2a.44f234","name":"normal","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":847,"wires":[["4a6c0736.6a7908"]]},{"id":"3d2e3c65.b1e794","type":"comment","z":"99e6906e.c69df","name":"My Sonos","info":"","x":65,"y":636,"wires":[],"icon":"node-red/alert.svg"},{"id":"63c04b25.a003a4","type":"inject","z":"99e6906e.c69df","name":"","topic":"Angi","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":759,"wires":[["d5573686.76e818"]]},{"id":"fa9e16a.0d77de8","type":"comment","z":"99e6906e.c69df","name":"Spotify","info":"","x":90,"y":726,"wires":[]},{"id":"2877aac7.fdb086","type":"inject","z":"99e6906e.c69df","name":"","topic":"Best of Prime Music","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":448,"y":1012,"wires":[["d5573686.76e818"]]},{"id":"396752b0.8ccffe","type":"comment","z":"99e6906e.c69df","name":"Music Library: insert and get","info":"","x":764,"y":1067,"wires":[]},{"id":"4cec2ebc.acd07","type":"inject","z":"99e6906e.c69df","name":"ML10CC:insert_musiclibrary_playlist","topic":"ML10CC","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":782,"y":1100,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"5526f642.063a08","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":691,"y":1133,"wires":[["43d126b4.f41448"]]},{"id":"43d126b4.f41448","type":"change","z":"99e6906e.c69df","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":821,"y":1173,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"99a6e666.afdbb8","type":"inject","z":"99e6906e.c69df","name":"","topic":"Arabella","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1131,"wires":[["d5573686.76e818"]]},{"id":"c9389f19.fbd05","type":"inject","z":"99e6906e.c69df","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1165,"wires":[["766d504c.20eab"]]},{"id":"766d504c.20eab","type":"change","z":"99e6906e.c69df","name":"stream Bayern 3 with volume 30","rules":[{"t":"set","p":"payload","pt":"msg","to":"stream","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Bayern 3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":172,"y":1204,"wires":[["d5573686.76e818"]]},{"id":"b6d00059.ea24e","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_items","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":669,"wires":[["d5573686.76e818"]]},{"id":"2ffeae5b.635932","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":468,"y":808,"wires":[]},{"id":"a77257a3.652b28","type":"comment","z":"99e6906e.c69df","name":"TuneIn","info":"","x":90,"y":1097,"wires":[]},{"id":"8d1e3600.cae318","type":"inject","z":"99e6906e.c69df","name":"","topic":"20 Jahre Napster","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":1008,"wires":[["d5573686.76e818"]]},{"id":"496f5dc0.e47c54","type":"comment","z":"99e6906e.c69df","name":"Napster","info":"","x":90,"y":908,"wires":[]},{"id":"da6c2766.351208","type":"inject","z":"99e6906e.c69df","name":"","topic":"Thriller","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":408,"y":979,"wires":[["d5573686.76e818"]]},{"id":"40e69ab4.40ee84","type":"comment","z":"99e6906e.c69df","name":"Amazon","info":"","x":398,"y":912,"wires":[]},{"id":"52f0bfde.6b9c8","type":"comment","z":"99e6906e.c69df","name":"Radioplayer","info":"","x":408,"y":1116,"wires":[]},{"id":"75178f6b.1d5c9","type":"inject","z":"99e6906e.c69df","name":"","topic":"1A Fitness Hits","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":438,"y":1149,"wires":[["d5573686.76e818"]]},{"id":"445398b7.1ff0a8","type":"inject","z":"99e6906e.c69df","name":"","topic":"Daily Mix","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":792,"wires":[["d5573686.76e818"]]},{"id":"6e0eebe8.53e534","type":"inject","z":"99e6906e.c69df","name":"","topic":"Best Of Love","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":428,"y":1045,"wires":[["d5573686.76e818"]]},{"id":"658364a5.451e3c","type":"inject","z":"99e6906e.c69df","name":"","topic":"GloomySunday","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":858,"wires":[["d5573686.76e818"]]},{"id":"f0a2e046.75133","type":"inject","z":"99e6906e.c69df","name":"","topic":"The Best Songs of the ","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1041,"wires":[["d5573686.76e818"]]},{"id":"f06c84f3.cb5d18","type":"inject","z":"99e6906e.c69df","name":"","topic":"Adele","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":825,"wires":[["d5573686.76e818"]]},{"id":"f4c3ac23.f3ff4","type":"inject","z":"99e6906e.c69df","name":"","topic":"Dust in the Wind","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":942,"wires":[["d5573686.76e818"]]},{"id":"6f9f9478.ed1e4c","type":"inject","z":"99e6906e.c69df","name":"","topic":"The Best Of Sade","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":975,"wires":[["d5573686.76e818"]]},{"id":"ef594c4.c9d47b","type":"inject","z":"99e6906e.c69df","name":"","topic":"Blowin' in the Wind","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":448,"y":946,"wires":[["d5573686.76e818"]]},{"id":"f1811ad0.762658","type":"inject","z":"99e6906e.c69df","name":"","topic":"s24896","payload":"play_tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1356,"wires":[["1a41c244.94b5de"]]},{"id":"ca17beb8.875fc","type":"comment","z":"99e6906e.c69df","name":"MANAGE RADIO","info":"","x":85,"y":1316,"wires":[],"icon":"node-red/alert.svg"},{"id":"59a35914.90f828","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":412,"y":1400,"wires":[]},{"id":"6cbfca5f.4e2204","type":"inject","z":"99e6906e.c69df","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1466,"wires":[["eda43bb1.83c098"]]},{"id":"eda43bb1.83c098","type":"change","z":"99e6906e.c69df","name":"play_tunein, volume 30","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":1466,"wires":[["1a41c244.94b5de"]]},{"id":"f9b5e2f1.62f17","type":"inject","z":"99e6906e.c69df","name":"","topic":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payload":"play_httpradio","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1393,"wires":[["1a41c244.94b5de"]]},{"id":"b5c6d343.f8399","type":"inject","z":"99e6906e.c69df","name":"","topic":"http://www.fritz.de/live.m3u","payload":"play_httpradio","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1426,"wires":[["1a41c244.94b5de"]]},{"id":"7b8c8849.3858f8","type":"inject","z":"99e6906e.c69df","name":"","topic":"On","payload":"set_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":500,"y":166,"wires":[["f2979581.a19d08"]]},{"id":"346a1d6e.cf3042","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":920,"wires":[["60fd7d89.dc53c4"]]},{"id":"8891edb8.84bc2","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"modelName","pt":"msg","to":"Sonos Play:3","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"create_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":920,"wires":[["595bdf63.151aa"]]},{"id":"b681ae6e.c4372","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":960,"wires":[["a47d3f46.5992c"]]},{"id":"775f34cb.cffa2c","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"modelName","pt":"msg","to":"Sonos Play:3","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"seperate_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":960,"wires":[["8da460bd.7e611"]]},{"id":"3685bcae.d2bb04","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":940,"wires":[]},{"id":"b47da8d0.dbeaf8","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":431,"wires":[["ad543336.f0861"]]},{"id":"d205e29.067282","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"modelName","pt":"msg","to":"Sonos Play:3","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"create_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":431,"wires":[["2915b46.c83b64c"]]},{"id":"d750abb1.ec0158","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":471,"wires":[["ef57c875.3d4cd8"]]},{"id":"79a98283.e4516c","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"modelName","pt":"msg","to":"Sonos Play:3","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"seperate_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":471,"wires":[["3cabb2b.65aab4e"]]},{"id":"6d3f722f.4badec","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":550,"y":511,"wires":[]},{"id":"ef3a9374.5bbbd","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":710,"y":1520,"wires":[]},{"id":"c31fe530.e9b228","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1520,"wires":[["d8625f5e.4503f"]]},{"id":"d8625f5e.4503f","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Party Delu","tot":"str"},{"t":"set","p":"filter","pt":"msg","to":"{\"mediaType\":\"all\",\"serviceName\":\"Spotify\"}","tot":"json"},{"t":"set","p":"payload","pt":"msg","to":"add","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":1520,"wires":[["b47332c1.b9838"]]},{"id":"c1615fb4.786f4","type":"comment","z":"775d7a2a.44f234","name":"MY SONOS","info":"","x":75,"y":1460,"wires":[],"icon":"node-red/alert.svg"},{"id":"5766bf24.70e61","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":310,"y":700,"wires":[["5270478.ebb8fb8"]]},{"id":"fb0bf022.436a5","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"play_old","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":320,"y":740,"wires":[["5270478.ebb8fb8"]]},{"id":"3062a9f.364a256","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"stop","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":450,"y":760,"wires":[["5270478.ebb8fb8"]]},{"id":"89bc7f96.e985a","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"toggleplayback","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":800,"wires":[["5270478.ebb8fb8"]]},{"id":"f73025ca.4e9028","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"pause","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":840,"wires":[["5270478.ebb8fb8"]]},{"id":"20fdba72.27d266","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":540,"wires":[["ecc6b9fb.a28bb8"]]},{"id":"986618a9.2293e8","type":"change","z":"99e6906e.c69df","name":"create stereopair","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"create_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":540,"wires":[["dde74552.b1d598"]]},{"id":"91ba37a8.e4d708","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":630,"y":520,"wires":[]},{"id":"54fe8abe.50c8f4","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":760,"wires":[["30b2e3a3.7eaebc"]]},{"id":"27c529fc.1c83e6","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":820,"wires":[["1a96ed72.7d56f3"]]},{"id":"7842b4b6.3a01dc","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":586,"wires":[["aa30c460.a2b5c8"]]},{"id":"393ee1d7.60b13e","type":"change","z":"99e6906e.c69df","name":"separate stereopair","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"separate_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":586,"wires":[["dde74552.b1d598"]]},{"id":"f2979581.a19d08","type":"sonos-control-player","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":577,"y":329,"wires":[["a310c609.fd61e8"]]},{"id":"218e05d2.48724a","type":"sonos-control-player","z":"99e6906e.c69df","confignode":"8d44022c.adb65","name":"Control Player living","x":551,"y":417,"wires":[["a310c609.fd61e8"]]},{"id":"2e34f5b1.a5a72a","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":401,"y":458,"wires":[["9328b6f0.0ce098"]]},{"id":"37c2fd6c.7c0e22","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"ff297616.de3c88","name":"","x":282,"y":257,"wires":[["db0abaa3.b1af28"]]},{"id":"1ac6489e.26d077","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"","x":281,"y":96,"wires":[["db0abaa3.b1af28"]]},{"id":"d49dd316.3ba3a","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"64704482.34d37c","name":"","x":281,"y":175,"wires":[["db0abaa3.b1af28"]]},{"id":"f96fa170.c44b1","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"c747354a.95e5e8","name":"","x":284,"y":349,"wires":[["db0abaa3.b1af28"]]},{"id":"7699a304.21796c","type":"sonos-control-player","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":1340,"y":843,"wires":[[]]},{"id":"80c178d.0218a88","type":"sonos-control-player","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":900,"y":951,"wires":[[]]},{"id":"55b6f9ce.2ef858","type":"sonos-control-player","z":"4318847d.0693cc","confignode":"8d44022c.adb65","name":"Control Player living","x":918,"y":567,"wires":[[]]},{"id":"39a502ae.bdf62e","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":1302,"y":452,"wires":[[]]},{"id":"d82099f6.76ef28","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":288,"y":119,"wires":[["36e9951f.1034ca"]]},{"id":"75eb41eb.d74ff","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":340,"y":636,"wires":[["dd6943c6.e147"]]},{"id":"fb524ea5.d8eaa","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":1100,"y":255,"wires":[[]]},{"id":"eaab7f3b.eb8db","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":1020,"y":127,"wires":[[]]},{"id":"bf85277a.dc7898","type":"sonos-control-player","z":"4318847d.0693cc","confignode":"8d44022c.adb65","name":"Ctrl Player Following Player","x":872,"y":1270,"wires":[[]]},{"id":"9974711e.7107e","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"8d44022c.adb65","name":"Control Player - Beam","x":322,"y":288,"wires":[[]]},{"id":"b5752468.15d418","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":420,"y":340,"wires":[[]]},{"id":"71e7d30e.00d74c","type":"sonos-control-player","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":602,"y":1523,"wires":[["1e8bb19e.fefe0e"]]},{"id":"1783418c.b875ae","type":"sonos-control-player","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":880,"y":260,"wires":[["52aa6e83.72414"]]},{"id":"916fe293.37335","type":"sonos-control-player","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":652,"y":377,"wires":[[]]},{"id":"c634ec6.772531","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"8d44022c.adb65","name":"","x":500,"y":961,"wires":[["7cbd3ef8.1cba7"]]},{"id":"e5e961f1.3e495","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":1199,"y":1029,"wires":[["8dce7afd.ecbe48"]]},{"id":"e22823f8.ab5fa","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"fritzbox","x":1135,"y":1275,"wires":[["8dce7afd.ecbe48"]]},{"id":"79d2602.1ee67a","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"2113e9bb.c52236","name":"offline","x":1145,"y":1322,"wires":[["8dce7afd.ecbe48"]]},{"id":"7a1e95d6.09a1dc","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"bc822e98.2348e","name":"ip does not exist","x":1142,"y":1368,"wires":[["8dce7afd.ecbe48"]]},{"id":"f9c89d00.dd568","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"8d44022c.adb65","name":"Control Player wz","x":1130,"y":460,"wires":[["facf9dd7.a9d2c"]]},{"id":"595bdf63.151aa","type":"sonos-control-player","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"right player","x":690,"y":920,"wires":[["3685bcae.d2bb04"]]},{"id":"8da460bd.7e611","type":"sonos-control-player","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"right player","x":690,"y":960,"wires":[["3685bcae.d2bb04"]]},{"id":"2915b46.c83b64c","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"32a98882.56e1c8","name":"right player","x":607,"y":431,"wires":[["6d3f722f.4badec"]]},{"id":"3cabb2b.65aab4e","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"32a98882.56e1c8","name":"right player","x":607,"y":471,"wires":[["6d3f722f.4badec"]]},{"id":"5270478.ebb8fb8","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"32a98882.56e1c8","name":"client","x":470,"y":700,"wires":[[]]},{"id":"dde74552.b1d598","type":"sonos-control-player","z":"99e6906e.c69df","confignode":"2113e9bb.c52236","name":"player left","x":540,"y":480,"wires":[["91ba37a8.e4d708"]]},{"id":"9225381f.320718","type":"sonos-get-status","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":1234,"y":201,"wires":[["eef64078.54f74"]]},{"id":"6ae1cc83.6144b4","type":"sonos-get-status","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":891,"y":70,"wires":[["6bbf67aa.5b6638"]]},{"id":"165a0add.39d6b5","type":"sonos-get-status","z":"4318847d.0693cc","confignode":"8d44022c.adb65","name":"Get Status WZ","x":284,"y":567,"wires":[["8978d019.4e76e"]]},{"id":"7a2ccae6.da3ab4","type":"sonos-get-status","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":249,"y":1122,"wires":[["87dc146e.24e978"]]},{"id":"21ee4228.06026e","type":"sonos-get-status","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"Get Status sonos","x":751,"y":1122,"wires":[["d6e0519a.3a67a"]]},{"id":"454d295e.ee6df8","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"8d44022c.adb65","name":"from Wohnzimmer means failure","x":350,"y":2179,"wires":[["63e06903.06d2d8"]]},{"id":"3c35ce4f.fc5422","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":424,"y":1830,"wires":[["63e06903.06d2d8"]]},{"id":"14f90bc4.af3534","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"fritzbox","x":323,"y":1986,"wires":[["63e06903.06d2d8"]]},{"id":"1cea8f6a.b6c9f1","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"2113e9bb.c52236","name":"play1","x":312,"y":2100,"wires":[["63e06903.06d2d8"]]},{"id":"74efaec6.7c31a","type":"sonos-get-status","z":"4318847d.0693cc","confignode":"32a98882.56e1c8","name":"Get Status Lead Player","x":579,"y":1270,"wires":[["8af22d58.53aff"]]},{"id":"904fe009.2ebb","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"","x":274,"y":1478,"wires":[["3ff27aa9.44cc56"]]},{"id":"980baa4a.3e8988","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"64704482.34d37c","name":"","x":274,"y":1561,"wires":[["3ff27aa9.44cc56"]]},{"id":"ff182013.33f7c","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"ff297616.de3c88","name":"","x":273.01171875,"y":1651.00390625,"wires":[["3ff27aa9.44cc56"]]},{"id":"b802cbbe.6ae1d8","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"c747354a.95e5e8","name":"","x":278,"y":1749,"wires":[["3ff27aa9.44cc56"]]},{"id":"26888be2.80f9b4","type":"sonos-get-status","z":"99e6906e.c69df","confignode":"8d44022c.adb65","name":"get status living","x":1264,"y":348,"wires":[["eef64078.54f74"]]},{"id":"ecf78b66.f50b08","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"","x":974,"y":1479.99609375,"wires":[["59706d3b.649434"]]},{"id":"8a470931.71a4d8","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"","x":1029,"y":1555.99609375,"wires":[["e79de1d9.c134d"]]},{"id":"bd109717.3fb7f8","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"64704482.34d37c","name":"","x":1030,"y":1599,"wires":[["e79de1d9.c134d"]]},{"id":"6159246d.cf3bac","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"8d44022c.adb65","name":"","x":1030,"y":1650,"wires":[["e79de1d9.c134d"]]},{"id":"c462718a.7b287","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"bc822e98.2348e","name":"fritzbox","x":440,"y":1943,"wires":[["63e06903.06d2d8"]]},{"id":"60af36c5.7ff848","type":"sonos-get-status","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":150,"y":543,"wires":[["1413e200.433aee"]]},{"id":"fece7b2b.f384f8","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"sonos","x":231,"y":579,"wires":[["6240d44a.26596c"]]},{"id":"b84ac129.6b037","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"32a98882.56e1c8","name":"bad","x":231,"y":615,"wires":[["6240d44a.26596c"]]},{"id":"1cd4578e.9f8b88","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"8d44022c.adb65","name":"wz","x":230,"y":650,"wires":[["6240d44a.26596c"]]},{"id":"b899f1d.78a531","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"8d44022c.adb65","name":"","x":938,"y":633,"wires":[["8be1bf84.93ea7"]]},{"id":"4a6c0736.6a7908","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":549,"y":781,"wires":[["cf496356.e96a9"]]},{"id":"60fd7d89.dc53c4","type":"sonos-get-status","z":"55805384.a4695c","confignode":"2113e9bb.c52236","name":"left player","x":280,"y":920,"wires":[["8891edb8.84bc2"]]},{"id":"a47d3f46.5992c","type":"sonos-get-status","z":"55805384.a4695c","confignode":"2113e9bb.c52236","name":"left player","x":280,"y":960,"wires":[["775f34cb.cffa2c"]]},{"id":"ad543336.f0861","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"2113e9bb.c52236","name":"left player","x":282,"y":431,"wires":[["d205e29.067282"]]},{"id":"ef57c875.3d4cd8","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"2113e9bb.c52236","name":"left player","x":282,"y":471,"wires":[["79a98283.e4516c"]]},{"id":"ecc6b9fb.a28bb8","type":"sonos-get-status","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","name":"player right","x":270,"y":540,"wires":[["986618a9.2293e8"]]},{"id":"30b2e3a3.7eaebc","type":"sonos-get-status","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":310,"y":760,"wires":[["82e1a63f.5053b8"]]},{"id":"1a96ed72.7d56f3","type":"sonos-get-status","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"","x":310,"y":820,"wires":[["82e1a63f.5053b8"]]},{"id":"aa30c460.a2b5c8","type":"sonos-get-status","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","name":"player right","x":270,"y":586,"wires":[["393ee1d7.60b13e"]]},{"id":"2f900d43.a3c562","type":"sonos-manage-radio","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":1085,"y":2740,"wires":[["647651d0.ec7cf"]]},{"id":"db0c711b.2b452","type":"sonos-manage-radio","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":401,"y":70,"wires":[["e4646c63.7ee1f"]]},{"id":"da04ebb5.e8a898","type":"sonos-manage-radio","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":422,"y":205,"wires":[["d37b15d5.397b58"]]},{"id":"8baf7361.9f09d","type":"sonos-manage-radio","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":982,"y":205,"wires":[[]]},{"id":"7bd694c7.71d67c","type":"sonos-manage-radio","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":589,"y":992,"wires":[["98119167.abb2e"]]},{"id":"59f166cc.c98498","type":"sonos-manage-radio","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"","x":1402,"y":2643,"wires":[[]]},{"id":"7df282b4.10f7ac","type":"sonos-manage-radio","z":"4318847d.0693cc","confignode":"32a98882.56e1c8","name":"Manage Radio Lead Player","x":301,"y":1270,"wires":[["25dbf732.65c418"]]},{"id":"30445e3b.fb4b02","type":"sonos-manage-radio","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"","x":285,"y":2552,"wires":[["605ba607.f9ae78"]]},{"id":"88d06aad.24d9b8","type":"sonos-manage-radio","z":"9ea06256.355a2","confignode":"64704482.34d37c","name":"","x":285,"y":2634,"wires":[["605ba607.f9ae78"]]},{"id":"c96a5709.436118","type":"sonos-manage-radio","z":"9ea06256.355a2","confignode":"ff297616.de3c88","name":"","x":287,"y":2724,"wires":[["605ba607.f9ae78"]]},{"id":"9c8175ba.da5068","type":"sonos-manage-radio","z":"9ea06256.355a2","confignode":"c747354a.95e5e8","name":"","x":286,"y":2822,"wires":[["605ba607.f9ae78"]]},{"id":"4057d604.719b58","type":"sonos-manage-radio","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":360,"y":543,"wires":[["5f80c798.8e1158"]]},{"id":"1a41c244.94b5de","type":"sonos-manage-radio","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":390,"y":1356,"wires":[["59a35914.90f828"]]},{"id":"c02b5a3d.f2fbb8","type":"sonos-manage-queue","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":1197,"y":1000,"wires":[["69a99ad3.b4ebb4"]]},{"id":"8da0051e.c44428","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"Manage Queue sonos","x":321,"y":319,"wires":[[]]},{"id":"38b84114.bff09e","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":768,"y":464,"wires":[["bdacd3ce.91154"]]},{"id":"a13967f6.62ada8","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":351,"y":462,"wires":[["bc96e24a.7279a"]]},{"id":"8e53bdac.3629","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":989,"y":464,"wires":[["744d729c.ee78dc"]]},{"id":"b42fb10f.ed5db","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":136,"y":460,"wires":[["6280f87a.0562c8"]]},{"id":"9e0d7aee.907268","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":623,"y":676,"wires":[["b1f4e729.e2d8f8"]]},{"id":"9d9e559d.4c6cd8","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":986,"y":676,"wires":[[]]},{"id":"9cb4182a.c21788","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":282,"y":844,"wires":[["f3a32fe6.edbb2"]]},{"id":"ed5d16e4.4fc1a8","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":621,"y":844,"wires":[["5e3888d0.c68968","49a80ca6.a45b84"]]},{"id":"e89430c.1b878d","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":1014,"y":807,"wires":[["9f30753d.caadd8"]]},{"id":"d02602c0.d8e8b","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":282,"y":676,"wires":[["625148f2.018378"]]},{"id":"cc766b34.a82ec8","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":1301,"y":1122,"wires":[[]]},{"id":"d32d3c03.61ef1","type":"sonos-manage-queue","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":702,"y":1270,"wires":[["8208c58d.b37718"]]},{"id":"3cac913b.eba05e","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":292,"y":540,"wires":[["a6d04c24.10188"]]},{"id":"19f12531.26b53b","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":1179,"y":621,"wires":[["5b339f20.ec5df"]]},{"id":"545da1f1.2a0a4","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":1070,"y":535,"wires":[["5b339f20.ec5df"]]},{"id":"16802e93.5f9981","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":1275,"y":1442,"wires":[["96b504bf.6e7788"]]},{"id":"5e775c52.8e9c84","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":1035,"y":1346,"wires":[[]]},{"id":"2c20b96a.e5bc96","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":300,"y":617,"wires":[["a6d04c24.10188"]]},{"id":"32ecf28b.53667e","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":254,"y":1349,"wires":[[]]},{"id":"d12bd467.ca9358","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":560,"y":1397,"wires":[["5f3a4327.f1344c"]]},{"id":"468c3608.f260e8","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":1011,"y":1156,"wires":[[]]},{"id":"5f8c615b.2003","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":1276,"y":1764,"wires":[["87d2d50b.eec388"]]},{"id":"25b530bc.a5cfc","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":1036,"y":1668,"wires":[[]]},{"id":"d7562f53.684ef","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":364,"y":1660,"wires":[[]]},{"id":"53b639c8.3468b8","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":525,"y":1712,"wires":[["980c723a.40412"]]},{"id":"5ecc6d9e.af7504","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":560,"y":2196,"wires":[["e020a73b.97c818"]]},{"id":"f7a859dd.a38898","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":1140,"y":2087,"wires":[["ad1c0aa3.d90fa8"]]},{"id":"d5d78733.a3b618","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":330,"y":2658,"wires":[["5a0d6d96.875a94"]]},{"id":"4dd5b2ff.80841c","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":490,"y":1159,"wires":[[]]},{"id":"9eb23d7d.4fa8a","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":560,"y":1207,"wires":[[]]},{"id":"88c9fb4e.3c7ed8","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"c747354a.95e5e8","name":"","x":278,"y":2826,"wires":[["cfe47c90.eddb1"]]},{"id":"8011af3a.b5551","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"","x":278,"y":2776,"wires":[["cfe47c90.eddb1"]]},{"id":"404bc2a2.32632c","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"64704482.34d37c","name":"","x":278,"y":2859,"wires":[["cfe47c90.eddb1"]]},{"id":"fec53bc8.d2ef38","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"ff297616.de3c88","name":"","x":278,"y":2952,"wires":[["cfe47c90.eddb1"]]},{"id":"22888d78.e458b2","type":"sonos-manage-queue","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":480,"y":1011,"wires":[["5fa4dbc.f66a224"]]},{"id":"8b8526ef.f33738","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":420,"y":803,"wires":[["3a59ea53.672ba6"]]},{"id":"fcdbef22.27949","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":1070,"y":756,"wires":[[]]},{"id":"dd9f96c4.353d28","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":440,"y":2419,"wires":[[]]},{"id":"655b5cef.7bdee4","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":408,"y":961,"wires":[[]]},{"id":"7292e00.782ef2","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":420,"y":1034,"wires":[[]]},{"id":"7ee80fc8.c45a6","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"","x":282,"y":54,"wires":[["5e89b1c4.34392"]]},{"id":"c42c98c6.6619c8","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"64704482.34d37c","name":"","x":282,"y":134,"wires":[["5e89b1c4.34392"]]},{"id":"8536a29e.1b70c","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"ff297616.de3c88","name":"","x":281,"y":215,"wires":[["5e89b1c4.34392"]]},{"id":"a84543d3.166d","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"c747354a.95e5e8","name":"","x":281,"y":296,"wires":[["5e89b1c4.34392"]]},{"id":"6875cc2b.767cf4","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":400,"y":400,"wires":[["c4405264.252e9"]]},{"id":"146ba1ed.ab89ee","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":1240,"y":2440,"wires":[[]]},{"id":"d5573686.76e818","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":430,"y":756,"wires":[["2ffeae5b.635932"]]},{"id":"b47332c1.b9838","type":"sonos-manage-mysonos","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":510,"y":1520,"wires":[["ef3a9374.5bbbd"]]},{"id":"7c8c520d.0388ac","type":"fs-ops-copy","z":"55805384.a4695c","name":"","sourcePath":"","sourcePathType":"str","sourceFilename":"file","sourceFilenameType":"msg","destPath":"/home/pi/Downloads","destPathType":"str","destFilename":"weather.mp3","destFilenameType":"str","link":false,"overwrite":true,"x":380,"y":260,"wires":[["44b5336.4b213cc"]]},{"id":"ab7c66e.a0b8698","type":"polly","z":"55805384.a4695c","name":"","voice":"41","ssml":false,"dir":"/home/pi/Downloads","config":"dd1b16a.4333de8","x":230,"y":260,"wires":[["7c8c520d.0388ac"],[]]},{"id":"bcf3bd00.9bb39","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1200,"wires":[["be69db4a.15a898"]]},{"id":"be69db4a.15a898","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":1200,"wires":[["32b13295.c6360e"]]},{"id":"148844e9.3ef9bb","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":650,"y":1200,"wires":[]},{"id":"32b13295.c6360e","type":"sonos-control-player","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"leader","x":510,"y":1200,"wires":[["148844e9.3ef9bb"]]},{"id":"a8987bea.0d6d08","type":"comment","z":"55805384.a4695c","name":"list and master","info":"","x":85,"y":640,"wires":[]},{"id":"42c9cb46.b26dd4","type":"comment","z":"55805384.a4695c","name":"list and master","info":"","x":85,"y":1140,"wires":[]},{"id":"1acdc6da.684f59","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1250,"wires":[["ebd5c902.737b98"]]},{"id":"ebd5c902.737b98","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":1250,"wires":[["f0961efb.002e5"]]},{"id":"663bf32e.e0cc8c","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":650,"y":1250,"wires":[]},{"id":"f0961efb.002e5","type":"sonos-control-player","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"bath","x":510,"y":1250,"wires":[["663bf32e.e0cc8c"]]},{"id":"80de6b21.05c4b8","type":"comment","z":"55805384.a4695c","name":"leader and bath are grouped","info":"","x":860,"y":1220,"wires":[]},{"id":"48bb69e.93b5998","type":"polly","z":"4318847d.0693cc","name":"","voice":"0","ssml":false,"dir":"overwritten","config":"8945d5a5.31aef8","x":352,"y":1906,"wires":[["751fc24c.5f892c"],[]]},{"id":"47273022.7b687","type":"inject","z":"4318847d.0693cc","name":"weather","topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1861,"wires":[["60d50c04.dc4f34"]]},{"id":"384278f8.a57c98","type":"change","z":"4318847d.0693cc","name":"prepare play_notification","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"$globalContext('system_baseUrl') & '/notifications/' & topic","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":652,"y":1944,"wires":[["a94b74c4.c18738"]]},{"id":"3d333a85.6f6896","type":"sonos-control-player","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":1164,"y":1861,"wires":[[]]},{"id":"6dc684d2.01c19c","type":"fs-ops-copy","z":"4318847d.0693cc","name":"","sourcePath":"","sourcePathType":"str","sourceFilename":"file","sourceFilenameType":"msg","destPath":"notification_cache","destPathType":"global","destFilename":"topic","destFilenameType":"msg","link":false,"overwrite":true,"x":596,"y":1902,"wires":[["384278f8.a57c98"]]},{"id":"751fc24c.5f892c","type":"switch","z":"4318847d.0693cc","name":"","property":"_polly.cached","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":468,"y":1908,"wires":[["6dc684d2.01c19c"],["384278f8.a57c98"]]},{"id":"17d3d81e.fd5208","type":"inject","z":"4318847d.0693cc","name":"Caution","topic":"notification_caution.mp3","payload":"Caution Caution Caution","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1893,"wires":[["60d50c04.dc4f34"]]},{"id":"f951db37.428e28","type":"inject","z":"4318847d.0693cc","name":"inform","topic":"notification_inform.mp3","payload":"Please mind your steps","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1926,"wires":[["60d50c04.dc4f34"]]},{"id":"c4e97855.112e88","type":"comment","z":"4318847d.0693cc","name":"Trigger Examples","info":"","x":119,"y":1822,"wires":[]},{"id":"af5b8d26.1705c","type":"comment","z":"4318847d.0693cc","name":"Create/Update mp3 file, create uri and parameter","info":"","x":481,"y":1822,"wires":[]},{"id":"d80a6d67.99515","type":"comment","z":"4318847d.0693cc","name":"Serialize msgs and play notification","info":"","x":1030,"y":1821,"wires":[]},{"id":"63cf7c29.d98064","type":"inject","z":"4318847d.0693cc","name":"Clear storage / cache","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":600,"y":1677,"wires":[["c4a71b8c.25a638","15147b67.cd39d5"]]},{"id":"a8b10427.3fe018","type":"link in","z":"4318847d.0693cc","name":"execute play_notification","links":["a94b74c4.c18738"],"x":904,"y":1861,"wires":[["c6772716.60af68"]]},{"id":"a94b74c4.c18738","type":"link out","z":"4318847d.0693cc","name":"Trigger play_notification","links":["a8b10427.3fe018"],"x":752,"y":1861,"wires":[]},{"id":"c6e721c.1b95de","type":"inject","z":"4318847d.0693cc","name":"set","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1711,"wires":[["6f073a90.08bd84","1e24ff39.4630d1","78ebe214.17527c"]]},{"id":"c5ad62c1.4abfb","type":"comment","z":"4318847d.0693cc","name":"(TTS) Notifcation ","info":"","x":85,"y":1642,"wires":[]},{"id":"ed11ae49.b8a2d","type":"comment","z":"4318847d.0693cc","name":"Set Up","info":"","x":91,"y":1677,"wires":[]},{"id":"6f073a90.08bd84","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"system_baseUrl","pt":"global","to":"http://192.168.178.49:1880","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1678,"wires":[[]]},{"id":"1e24ff39.4630d1","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"notification_directory","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":306,"y":1710,"wires":[[]]},{"id":"78ebe214.17527c","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"notification_cache","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1742,"wires":[[]]},{"id":"cb99335a.e0a0e","type":"change","z":"4318847d.0693cc","name":"add cache","rules":[{"t":"set","p":"options.dir","pt":"msg","to":"notification_cache","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":605,"y":1860,"wires":[["48bb69e.93b5998"]]},{"id":"a9529c34.96d74","type":"link in","z":"4318847d.0693cc","name":"TTS Execute","links":["18152db0.dc8512","60d50c04.dc4f34","26ac2b2.49d16d4"],"x":315,"y":1860,"wires":[["e9d1d7a9.402848"]]},{"id":"60d50c04.dc4f34","type":"link out","z":"4318847d.0693cc","name":"TTS Trigger","links":["a9529c34.96d74"],"x":207,"y":1860,"wires":[]},{"id":"63902954.cc2b48","type":"comment","z":"4318847d.0693cc","name":"Maintain","info":"","x":809,"y":1677,"wires":[]},{"id":"62c214c3.ab9e3c","type":"fs-ops-delete","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":720,"y":1716,"wires":[[]]},{"id":"c4a71b8c.25a638","type":"fs-ops-dir","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filter":"notification_*.*","filterType":"str","dir":"files","dirType":"msg","x":570,"y":1716,"wires":[["62c214c3.ab9e3c"]]},{"id":"15147b67.cd39d5","type":"fs-ops-dir","z":"4318847d.0693cc","name":"","path":"notification_cache","pathType":"global","filter":"*_*.mp3","filterType":"str","dir":"files","dirType":"msg","x":570,"y":1749,"wires":[["866b0ab0.299a28"]]},{"id":"866b0ab0.299a28","type":"fs-ops-delete","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":720,"y":1749,"wires":[[]]},{"id":"21466965.515bf6","type":"status","z":"4318847d.0693cc","name":"","scope":["3d333a85.6f6896"],"x":949,"y":1910,"wires":[["6c22fb96.b37484"]]},{"id":"6c22fb96.b37484","type":"change","z":"4318847d.0693cc","name":"initiate next","rules":[{"t":"set","p":"releaseNext","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1101,"y":1910,"wires":[["c6772716.60af68"]]},{"id":"c6772716.60af68","type":"function","z":"4318847d.0693cc","name":"queue","func":"// modified version - originally from https://gist.github.com/dceejay/cea8afa28b7a93ebdc0f \n\n// restartQueue = create new\nif (msg.hasOwnProperty(\"restartQueue\")) {\n    context.queue = []\n    \n// if queue doesn't exist, create it    \n} else {\n    context.queue = context.queue || []\n    context.busy = context.busy || false\n\n    // if the msg is a trigger one release next message\n    if (msg.hasOwnProperty(\"releaseNext\")) {\n        if (context.queue.length > 0) {\n            var m = context.queue.shift()\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return m \n        }\n        else {\n            context.busy = false;\n        }\n    }\n    else {\n        if (context.busy) {\n            // if busy add to queue\n            context.queue.push(msg);\n        }\n        else {\n        // otherwise we are empty so just pass through and set busy flag\n            context.busy = true;\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return msg;\n        }\n    }\n}\nnode.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n\nreturn null;","outputs":1,"noerr":0,"x":1012,"y":1861,"wires":[["3d333a85.6f6896"]]},{"id":"b9e60025.3c367","type":"http in","z":"4318847d.0693cc","name":"","url":"/notifications/:mp3file","method":"get","upload":false,"swaggerDoc":"","x":150,"y":2057,"wires":[["86792da2.4cb06"]]},{"id":"ef769238.e5b02","type":"comment","z":"4318847d.0693cc","name":"serve mp3 file for SONOS player","info":"","x":170,"y":2020,"wires":[]},{"id":"86792da2.4cb06","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('notification_directory') & '/' & msg.req.params.mp3file","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":374,"y":2057,"wires":[["c2fa6cb.342c39"]]},{"id":"c2fa6cb.342c39","type":"file in","z":"4318847d.0693cc","name":"","filename":"","format":"","chunk":false,"sendError":false,"encoding":"base64","x":534,"y":2057,"wires":[["5f4a3564.9a4dbc"]]},{"id":"254c135f.106e1c","type":"http response","z":"4318847d.0693cc","name":"","statusCode":"404","headers":{"content-type":"text/plain"},"x":660,"y":2106,"wires":[]},{"id":"605e5893.1b9518","type":"catch","z":"4318847d.0693cc","name":"","scope":["c2fa6cb.342c39"],"uncaught":false,"x":343,"y":2106,"wires":[["3d66be80.80e5c2"]]},{"id":"3d66be80.80e5c2","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"error","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":493,"y":2106,"wires":[["254c135f.106e1c"]]},{"id":"5f4a3564.9a4dbc","type":"http response","z":"4318847d.0693cc","name":"","statusCode":"200","headers":{"content-type":"audio/mpeg"},"x":664,"y":2057,"wires":[]},{"id":"fa8b69a4.f26918","type":"comment","z":"4318847d.0693cc","name":"Test","info":"http://192.168.178.49:1880/notifications/notification_weather.mp3","x":910,"y":2020,"wires":[]},{"id":"392665f5.7dc97a","type":"inject","z":"4318847d.0693cc","name":"Flush queue","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":990,"y":1677,"wires":[["eb9430a5.b1ba6"]]},{"id":"eb9430a5.b1ba6","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"restartQueue","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1012,"y":1714,"wires":[["c6772716.60af68"]]},{"id":"3fdfbd94.502552","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":290,"wires":[["6d877017.25006"]]},{"id":"6d877017.25006","type":"function","z":"a0a649cc.ca04e8","name":"payload + infinite","func":"msg.payload = 1.0 / 0;\nnode.log(JSON.stringify(msg))\nreturn msg;","outputs":1,"noerr":0,"x":291,"y":290,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"2a300999.190196","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":322,"wires":[["acca6930.c13528"]]},{"id":"acca6930.c13528","type":"function","z":"a0a649cc.ca04e8","name":"payload - infinite","func":"msg.payload = -1.0/0;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":322,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"d14c2c12.1b404","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":292,"wires":[["ac808215.11ba7"]]},{"id":"d52b5af5.c6c438","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":324,"wires":[["73f496ef.b3cf78"]]},{"id":"73f496ef.b3cf78","type":"function","z":"a0a649cc.ca04e8","name":"xyz - infinite","func":"msg.payload.xyz = -1.0/0;\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":324,"wires":[["bcf459fe.1b0ad8"]]},{"id":"ac808215.11ba7","type":"function","z":"a0a649cc.ca04e8","name":"xyz + infinite","func":"//msg.payload.xyz = 1.0 / 0;\nmsg.payload.xyz = Number.POSITIVE_INFINITY;\nnode.log('>>>' + JSON.stringify(msg))\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":292,"wires":[["bcf459fe.1b0ad8"]]},{"id":"1bfcaa65.a2c6f6","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload - old","func":"/** Validate msg.payload.xyz\n * \n*/\n\nif (typeof msg.payload === 'undefined' || msg.payload === null || \n    (typeof msg.payload === 'number' && isNaN(msg.payload))) {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok');\n    if (typeof msg.payload.xyz === 'undefined' || msg.payload.xyz === null || \n        (typeof msg.payload.xyz === 'number' && isNaN(msg.payload.xyz))|| msg.payload.xyz ==='' ) {\n        node.error('invalid msg.payload.xyz', msg);\n        return;\n    } else {\n        node.warn('found ' + JSON.stringify(msg.payload.xyz)  + '... we can start processing');\n    }\n}\nreturn msg;","outputs":1,"noerr":0,"x":1030,"y":780,"wires":[[]]},{"id":"6e9d66f0.bc30b8","type":"function","z":"a0a649cc.ca04e8","name":"validate msg.payload.xyz -- throws error in case of undefined msg.payload","func":"/** Validate msg.payload.xyz\n * \n*/\n\nif (msg.payload.hasOwnProperty('xyz')) {\n    node.warn('found ' + JSON.stringify(msg.payload.xyz)  + '... we can start processing');\n} else {\n    node.error('invalid msg.payload.xyz', msg);\n}\n\nreturn msg;\n","outputs":1,"noerr":0,"x":880,"y":740,"wires":[[]]},{"id":"63a7db00.cc8604","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload","func":"/** Validate msg.payload.xyz\n * \n*/\nkey = ['payload', 'xzy']\nnode.debug(msg[key])\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":820,"wires":[[]]},{"id":"199abacf.6c38e5","type":"inject","z":"4318847d.0693cc","name":"habits","topic":"notification_habits.mp3","payload":"If you're like most people, you probably seek first to be understood; you want to get your point across. And in doing so, you may ignore the other person completely, pretend that you're listening, selectively hear only certain parts of the conversation or attentively focus on only the words being said, but miss the meaning entirely. So why does this happen? Because most people listen with the intent to reply, not to understand. You listen to yourself as you prepare in your mind what you are going to say, the questions you are going to ask, etc. You filter everything you hear through your life experiences, your frame of reference. You check what you hear against your autobiography and see how it measures up. And consequently, you decide prematurely what the other person means before he/she finishes communicating. Do any of the following sound familiar?","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1958,"wires":[["60d50c04.dc4f34"]]},{"id":"966aad12.32d61","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"lab","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1520,"wires":[["b4d29905.a54948"]]},{"id":"b4d29905.a54948","type":"sonos-get-status","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":290,"y":1520,"wires":[["bd7cf8db.c20818"]]},{"id":"bd7cf8db.c20818","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":470,"y":1560,"wires":[]},{"id":"2cc83417.9ed16c","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"lab","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1580,"wires":[["c55f0404.ac4f68"]]},{"id":"c55f0404.ac4f68","type":"sonos-get-status","z":"55805384.a4695c","confignode":"8d44022c.adb65","name":"liv","x":270,"y":1580,"wires":[["bd7cf8db.c20818"]]},{"id":"43717774.188a68","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":92,"wires":[["62b73ed8.903b"]]},{"id":"62b73ed8.903b","type":"change","z":"95a81269.b7f3c","name":"No topic","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":242,"y":92,"wires":[["ee1bad9f.cdcdd"]]},{"id":"ee1bad9f.cdcdd","type":"sonos-control-player","z":"95a81269.b7f3c","confignode":"f0ced157.0eab1","name":"leader","x":590,"y":216,"wires":[["7a89662f.1aa968"]]},{"id":"7a89662f.1aa968","type":"debug","z":"95a81269.b7f3c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":650,"y":256,"wires":[]},{"id":"568d0e25.7296e","type":"change","z":"95a81269.b7f3c","name":"volume not number - boolean","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":303,"y":157,"wires":[["ee1bad9f.cdcdd"]]},{"id":"2ad10685.4efd8a","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":157,"wires":[["568d0e25.7296e"]]},{"id":"d966efb6.32af3","type":"comment","z":"95a81269.b7f3c","name":"FAILURE","info":"","x":65,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"90fe52ac.97b8c","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":221,"wires":[["842092f8.28f4a"]]},{"id":"842092f8.28f4a","type":"change","z":"95a81269.b7f3c","name":"volume empty string","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":283,"y":221,"wires":[["ee1bad9f.cdcdd"]]},{"id":"831f2d06.f5994","type":"debug","z":"95a81269.b7f3c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":810,"y":620,"wires":[]},{"id":"ef12e2d4.3d4e1","type":"sonos-control-player","z":"95a81269.b7f3c","confignode":"88e9fa70.4a53e8","name":"coordinator","x":571,"y":574,"wires":[["831f2d06.f5994"]]},{"id":"f1c8a027.d3b1a","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":574,"wires":[["90fe41f4.0d989"]]},{"id":"90fe41f4.0d989","type":"change","z":"95a81269.b7f3c","name":"volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":242,"y":574,"wires":[["ef12e2d4.3d4e1"]]},{"id":"c1382231.e8866","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":124,"wires":[["2423536b.8c7a5c"]]},{"id":"2423536b.8c7a5c","type":"change","z":"95a81269.b7f3c","name":"volume not number - string","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":303,"y":124,"wires":[["ee1bad9f.cdcdd"]]},{"id":"111fddfd.700ab2","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":189,"wires":[["b8965693.6b88b8"]]},{"id":"b8965693.6b88b8","type":"change","z":"95a81269.b7f3c","name":"volume not number - json","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"{\"xxx\":3}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":293,"y":189,"wires":[["ee1bad9f.cdcdd"]]},{"id":"95669ece.825a6","type":"comment","z":"95a81269.b7f3c","name":"additional topic checking - should aways be http: or https:","info":"","x":710,"y":96,"wires":[],"icon":"node-red/alert.svg"},{"id":"ec08d9eb.221378","type":"change","z":"95a81269.b7f3c","name":"useCoordinator string","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":283,"y":256,"wires":[["ee1bad9f.cdcdd"]]},{"id":"1c6be319.2c8b8d","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":256,"wires":[["ec08d9eb.221378"]]},{"id":"30f12caf.3a6694","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":289,"wires":[["f49c1bf7.a52778"]]},{"id":"f49c1bf7.a52778","type":"change","z":"95a81269.b7f3c","name":"useCoordinator empty","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":284,"y":289,"wires":[["ee1bad9f.cdcdd"]]},{"id":"db5de750.8a8058","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":321,"wires":[["365e0532.f227fa"]]},{"id":"365e0532.f227fa","type":"change","z":"95a81269.b7f3c","name":"useCoordinator integer","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":285,"y":321,"wires":[["ee1bad9f.cdcdd"]]},{"id":"1bd1c3ee.88dc3c","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":354,"wires":[["ce7fbbc8.1257f8"]]},{"id":"ce7fbbc8.1257f8","type":"change","z":"95a81269.b7f3c","name":"useCoordinator json","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"{\"xxx\":3}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":284,"y":354,"wires":[["ee1bad9f.cdcdd"]]},{"id":"8f2b73fb.52767","type":"change","z":"95a81269.b7f3c","name":"sameVolume string","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":393,"wires":[["ee1bad9f.cdcdd"]]},{"id":"4671cda.6c37234","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":96,"y":393,"wires":[["8f2b73fb.52767"]]},{"id":"9efffc4a.816e5","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":96,"y":426,"wires":[["529fb2af.bf483c"]]},{"id":"529fb2af.bf483c","type":"change","z":"95a81269.b7f3c","name":"sameVolume empty","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":426,"wires":[["ee1bad9f.cdcdd"]]},{"id":"45d2352f.0a9d1c","type":"change","z":"95a81269.b7f3c","name":"sameVolume integer","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":459,"wires":[["ee1bad9f.cdcdd"]]},{"id":"676263a9.59718c","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":96,"y":459,"wires":[["45d2352f.0a9d1c"]]},{"id":"3c5aa43e.996d4c","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":96,"y":492,"wires":[["d580f51d.9abd38"]]},{"id":"d580f51d.9abd38","type":"change","z":"95a81269.b7f3c","name":"sameVolume JSON","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"{\"xxx\":3}","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":492,"wires":[["ee1bad9f.cdcdd"]]},{"id":"d53acf33.06a7b","type":"change","z":"95a81269.b7f3c","name":"onlyWhenPlaying string","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"onlyWhenPlaying","pt":"msg","to":"xxxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":396,"wires":[["ee1bad9f.cdcdd"]]},{"id":"10ed7d9f.3aced2","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":516,"y":396,"wires":[["d53acf33.06a7b"]]},{"id":"720dcb31.d0a614","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":517,"y":429,"wires":[["8f4c4cd7.33cf6"]]},{"id":"8f4c4cd7.33cf6","type":"change","z":"95a81269.b7f3c","name":"onlyWhenPlaying empty","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"onlyWhenPlaying","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":711,"y":429,"wires":[["ee1bad9f.cdcdd"]]},{"id":"17fbdf9.7b0972","type":"change","z":"95a81269.b7f3c","name":"onlyWhenPlaying integer","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"onlyWhenPlaying","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":712,"y":462,"wires":[["ee1bad9f.cdcdd"]]},{"id":"e86c502.5c5f9b","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":518,"y":462,"wires":[["17fbdf9.7b0972"]]},{"id":"c8a1d18e.e8bb4","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":519,"y":495,"wires":[["1f9f3bb4.50f8f4"]]},{"id":"1f9f3bb4.50f8f4","type":"change","z":"95a81269.b7f3c","name":"onlyWhenPlaying JSON","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"onlyWhenPlaying","pt":"msg","to":"{\"xxx\":3}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":713,"y":495,"wires":[["ee1bad9f.cdcdd"]]},{"id":"579234d2.c02c3c","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":980,"y":396,"wires":[["3798298a.9e16a6"]]},{"id":"3798298a.9e16a6","type":"change","z":"95a81269.b7f3c","name":"duration string","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"onlyWhenPlaying","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"duration","pt":"msg","to":"xxxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1144,"y":396,"wires":[["ee1bad9f.cdcdd"]]},{"id":"dca86252.e7b74","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":980,"y":429,"wires":[["fb8b1c23.84e15"]]},{"id":"fb8b1c23.84e15","type":"change","z":"95a81269.b7f3c","name":"duration empty","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"onlyWhenPlaying","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"duration","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1144,"y":429,"wires":[["ee1bad9f.cdcdd"]]},{"id":"ed2c855.909ae78","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":980,"y":462,"wires":[["9ce2687e.5c0938"]]},{"id":"9ce2687e.5c0938","type":"change","z":"95a81269.b7f3c","name":"duration integer","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"onlyWhenPlaying","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"duration","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1144,"y":462,"wires":[["ee1bad9f.cdcdd"]]},{"id":"dfda629b.f53cb","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":980,"y":495,"wires":[["597c8a35.2fc664"]]},{"id":"597c8a35.2fc664","type":"change","z":"95a81269.b7f3c","name":"duration json","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"onlyWhenPlaying","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"duration","pt":"msg","to":"{\"xxx\":3}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":1134,"y":495,"wires":[["ee1bad9f.cdcdd"]]},{"id":"71f5a8aa.2484a8","type":"comment","z":"95a81269.b7f3c","name":"Properties","info":"","x":100,"y":59,"wires":[],"icon":"node-red/alert.svg"},{"id":"107f3173.e155cf","type":"comment","z":"95a81269.b7f3c","name":"SUCCESS Group with 3","info":"","x":150,"y":540,"wires":[],"icon":"node-red/alert.svg"},{"id":"1b777686.9b5a59","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":714,"wires":[["54349a2c.96d904"]]},{"id":"54349a2c.96d904","type":"change","z":"95a81269.b7f3c","name":"use coordinator, not same volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":322,"y":714,"wires":[["bd1eb5f5.eab538"]]},{"id":"d7ad4c64.f7b87","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":680,"wires":[["906033ad.745f3"]]},{"id":"906033ad.745f3","type":"change","z":"95a81269.b7f3c","name":"use coordinator","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"useCoordinator","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":680,"wires":[["bd1eb5f5.eab538"]]},{"id":"bd1eb5f5.eab538","type":"sonos-control-player","z":"95a81269.b7f3c","confignode":"32a98882.56e1c8","name":"client","x":552,"y":650,"wires":[["831f2d06.f5994"]]},{"id":"e9d1d7a9.402848","type":"function","z":"4318847d.0693cc","name":"check globals","func":"// checks existens of requried global variables\n//\nlet value = global.get('system_baseUrl')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - system_baseUrl not defined')\n    return null\n}\nvalue = global.get('notification_cache')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_cache not defined')\n    return null\n}\nvalue = global.get('notification_directory')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_directory not defined')\n    return null\n}\nreturn msg\n\nfunction isTruthyAndNotEmptyString (input) {\n    return !(typeof input === 'undefined' || input === null ||\n      (typeof input === 'number' && !Number.isFinite(input)) || input === '')\n}","outputs":1,"noerr":0,"x":432,"y":1860,"wires":[["cb99335a.e0a0e"]]},{"id":"d3477aba.549be8","type":"comment","z":"4318847d.0693cc","name":"Recommendation: Define globals as permanent","info":"This is done in the settings.js file. \nUncomment the contextStorage paragraph.\nThis will store all context variable on disk.","x":348,"y":1642,"wires":[]},{"id":"2e419a66.56d056","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":606,"wires":[["ab16dfa.e157e2"]]},{"id":"ab16dfa.e157e2","type":"change","z":"95a81269.b7f3c","name":"only coordinator uses volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":302,"y":606,"wires":[["ef12e2d4.3d4e1"]]},{"id":"bb8aebd1.384058","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":646,"wires":[["5e025761.ce7528"]]},{"id":"5e025761.ce7528","type":"change","z":"95a81269.b7f3c","name":"client only","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":241,"y":646,"wires":[["bd1eb5f5.eab538"]]},{"id":"4dd5940a.bf418c","type":"comment","z":"95a81269.b7f3c","name":"SUCCESS All stand alone","info":"","x":150,"y":760,"wires":[],"icon":"node-red/alert.svg"},{"id":"4898f00b.83968","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":800,"wires":[["b59c1540.d48a28"]]},{"id":"b59c1540.d48a28","type":"change","z":"95a81269.b7f3c","name":"volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":242,"y":800,"wires":[["b9492488.e235a8","aacea6a4.e3dfc8","c470b8b9.c74918"]]},{"id":"b9492488.e235a8","type":"sonos-control-player","z":"95a81269.b7f3c","confignode":"32a98882.56e1c8","name":"bath","x":394,"y":766,"wires":[[]]},{"id":"aacea6a4.e3dfc8","type":"sonos-control-player","z":"95a81269.b7f3c","confignode":"f0ced157.0eab1","name":"kitchen ( not leader)","x":444,"y":799,"wires":[[]]},{"id":"c470b8b9.c74918","type":"sonos-control-player","z":"95a81269.b7f3c","confignode":"8d44022c.adb65","name":"living","x":394,"y":831,"wires":[[]]},{"id":"a58eb0c2.f3c9c","type":"change","z":"95a81269.b7f3c","name":"volume, duration","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"00:00:05","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":906,"wires":[["e86adf5c.db71b"]]},{"id":"e86adf5c.db71b","type":"sonos-control-player","z":"95a81269.b7f3c","confignode":"32a98882.56e1c8","name":"bath","x":590,"y":905,"wires":[[]]},{"id":"e57c8551.4c1b78","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":906,"wires":[["a58eb0c2.f3c9c"]]},{"id":"121c1422.69489c","type":"inject","z":"95a81269.b7f3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":940,"wires":[["acfcd549.cbef08"]]},{"id":"acfcd549.cbef08","type":"change","z":"95a81269.b7f3c","name":"volume, only when playing","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.49:1880/notifications/notification_habits.mp3","tot":"str"},{"t":"set","p":"onlyWhenPlaying","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":940,"wires":[["e86adf5c.db71b"]]}]