[{"id":"55805384.a4695c","type":"tab","label":"Sandbox","disabled":false,"info":""},{"id":"9ea06256.355a2","type":"tab","label":"Failure","disabled":false,"info":""},{"id":"2e2bde07.2bda42","type":"tab","label":"Failure Queue","disabled":false,"info":""},{"id":"775d7a2a.44f234","type":"tab","label":"Succes others","disabled":false,"info":""},{"id":"405b0e15.987b5","type":"tab","label":"Universal","disabled":false,"info":""},{"id":"99e6906e.c69df","type":"tab","label":"Nodes & Commands","disabled":false,"info":""},{"id":"4318847d.0693cc","type":"tab","label":"Examples-Complex","disabled":false,"info":""},{"id":"a0a649cc.ca04e8","type":"tab","label":"Validate messages","disabled":true,"info":""},{"id":"91448cef.2efc9","type":"tab","label":"Miele","disabled":true,"info":""},{"id":"314a1b14.9fc2a4","type":"tab","label":"Groups","disabled":false,"info":""},{"id":"d65eded3.250b9","type":"subflow","name":"HandleErrors","info":"","category":"","in":[{"x":61,"y":79,"wires":[{"id":"6b0e515b.e62cd"}]}],"out":[],"env":[{"name":"Tabname","type":"str","value":"unknown","ui":{"type":"input","opts":{"types":["str"]},"label":{}}},{"name":"DebugToMobile","type":"bool","value":"false","ui":{"type":"input","opts":{"types":["bool"]},"label":{}}},{"name":"KeyVariable","type":"str","value":"system_keyTasker","ui":{"type":"input","opts":{"types":["str"]},"label":{}}}],"color":"#E9967A","icon":"node-red/alert.svg"},{"id":"24092027.ab82","type":"subflow","name":"get bearer","info":"Get a new bearer and refresh token and stores it in global variables. \n\nThe global variables system_bearerMiele and system_refreshMiele are being used.","category":"Miele","in":[{"x":30,"y":63,"wires":[{"id":"85119bed.21b168"}]}],"out":[{"x":1221,"y":43,"wires":[{"id":"430fd0da.a6602","port":0}]}],"env":[{"name":"vg","type":"str","value":"de-DE","ui":{"label":{"en-US":"Country"},"type":"select","opts":{"opts":[{"l":{"en-US":"Germany"},"v":"de-DE"}]}}},{"name":"doRefresh","type":"bool","value":"false","ui":{"label":{"en-US":"Use refresh token"},"type":"checkbox","opts":{}}}],"color":"#A70625","inputLabels":["client and user credentials"],"outputLabels":["Miele reponse object"],"icon":"font-awesome/fa-key","status":{"x":1221,"y":254,"wires":[{"id":"ccdd1aa3.d7afe8","port":0},{"id":"afceb2f2.d18f3","port":0},{"id":"4400b51a.44eacc","port":0}]}},{"id":"ea970db4.5106b","type":"subflow","name":"get all appliances","info":"Get a list of all appliances with indentification and state.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":80,"wires":[{"id":"eaf22f71.d9969"}]}],"out":[{"x":1119,"y":74,"wires":[{"id":"a35f8dee.9f18f","port":0}]}],"env":[{"name":"language","type":"str","value":"en","ui":{"label":{"en-US":"Language"},"type":"select","opts":{"opts":[{"l":{"en-US":"English"},"v":"en"},{"l":{"en-US":"Deutsch"},"v":"de"}]}}}],"color":"#A70625","inputLabels":["just trigger"],"outputLabels":["appliance list in household"],"icon":"font-awesome/fa-list-ul","status":{"x":1120,"y":220,"wires":[{"id":"fe83c7a3.1ef478","port":0},{"id":"84b66c9d.f62ef","port":0},{"id":"681dd18d.1baa4","port":0}]}},{"id":"aeba9414.6f40a8","type":"subflow","name":"get appliance","info":"Get an object with identification and state data for the given appliance id.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":97,"wires":[{"id":"a260e272.ea783"}]}],"out":[{"x":1143,"y":33,"wires":[{"id":"3da93881.b6e868","port":0}]}],"env":[{"name":"language","type":"str","value":"en","ui":{"label":{"en-US":"Language"},"type":"select","opts":{"opts":[{"l":{"en-US":"English"},"v":"en"},{"l":{"en-US":"Deutsch"},"v":"de"}]}}}],"color":"#A70625","inputLabels":["appliance id as payload"],"outputLabels":["appliance identification and state"],"icon":"font-awesome/fa-info","status":{"x":1140,"y":164,"wires":[{"id":"dd906f4c.1361a","port":0},{"id":"fd32a717.878c28","port":0},{"id":"96a3026.b505b","port":0}]}},{"id":"4ae29caa.8056e4","type":"subflow","name":"get actions","info":"Get an object with all valid actions for the given appliance id at the current appliance state.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":88,"wires":[{"id":"d3015191.5633d"}]}],"out":[{"x":1099,"y":38,"wires":[{"id":"c8655abf.93b328","port":0}]}],"env":[],"color":"#A70625","inputLabels":["appliance id"],"outputLabels":["all actions"],"icon":"node-red/debug.svg","status":{"x":1099,"y":158,"wires":[{"id":"2c02bcd4.dc63d4","port":0},{"id":"1455fb1d.b32055","port":0},{"id":"d9bc2537.715df8","port":0}]}},{"id":"ad607e01.511ea","type":"subflow","name":"set action","info":"Set (execute) an action for the given appliance. Valid action depend on kind of appliance and state!","category":"Miele","in":[{"x":40,"y":75,"wires":[{"id":"2542e5f6.b0fd8a"}]}],"out":[{"x":1011,"y":74,"wires":[{"id":"21b0eeb.798de12","port":0}]}],"env":[],"color":"#A70625","inputLabels":["appliance id in payload and an action "],"outputLabels":["result"],"icon":"font-awesome/fa-angle-double-right","status":{"x":1010,"y":240,"wires":[{"id":"e4fefa21.402038","port":0},{"id":"9ebcdded.4fad9","port":0},{"id":"ebacb8a0.327d58","port":0}]}},{"id":"69e44f53.5d62f","type":"subflow","name":"Subflow 1","info":"","category":"","in":[{"x":60,"y":80,"wires":[{"id":"4cc2813d.75068"}]}],"out":[{"x":580,"y":80,"wires":[{"id":"ccdfdd96.2d83e","port":0}]}],"env":[{"name":"subflowProperty","type":"str","value":"Hi Sub"}],"color":"#DDAA99"},{"id":"88e9fa70.4a53e8","type":"sonos-config","z":"","name":"coordinator","serialnum":"5C-AA-FD-00-22-36:1","ipaddress":"192.168.178.37"},{"id":"c747354a.95e5e8","type":"sonos-config","z":0,"name":"no ip but correct serial number","serialnum":"94-9F-3E-C1-3B-99:8","ipaddress":""},{"id":"9037fbab.1d8408","type":"sonos-config","z":0,"name":"fritzbox ip address","serialnum":"","ipaddress":"192.168.178.1"},{"id":"64704482.34d37c","type":"sonos-config","z":0,"name":"ip address with wrong syntax","serialnum":"","ipaddress":"191168.178.41"},{"id":"ff297616.de3c88","type":"sonos-config","z":0,"name":"no ip address & invalid serial","serialnum":"5C-AA-FD22-36:1","ipaddress":""},{"id":"8d44022c.adb65","type":"sonos-config","z":"","name":"living","serialnum":"94-9F-3E-C1-3B-99:8","ipaddress":"192.168.178.36"},{"id":"32a98882.56e1c8","type":"sonos-config","z":"","name":"bath","serialnum":"00-0E-58-FE-3A-EA:5","ipaddress":"192.168.178.35"},{"id":"bc822e98.2348e","type":"sonos-config","z":0,"name":"not exist","serialnum":"00-0E-58-FE-3A-EA:5","ipaddress":"192.168.178.91"},{"id":"2113e9bb.c52236","type":"sonos-config","z":"","name":"variable","serialnum":"B8-E9-37-58-31-C0:A","ipaddress":"192.168.178.38"},{"id":"dd1b16a.4333de8","type":"polly-config","z":0,"name":"pollyaws"},{"id":"8945d5a5.31aef8","type":"polly-config","z":"","name":"pollyaws"},{"id":"5d28cfba.78da7","type":"sonos-config","z":"","name":"Play 1","ipaddress":"192.168.3.13"},{"id":"647651d0.ec7cf","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":550,"y":2520,"wires":[]},{"id":"c6791a45.0bb278","type":"comment","z":"99e6906e.c69df","name":"CONTROL PLAYER","info":"","x":95,"y":663,"wires":[],"icon":"node-red/alert.svg"},{"id":"f4248c81.32327","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"+5","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":833,"wires":[["f2979581.a19d08"]]},{"id":"2cf59.d462b0a72","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":701,"wires":[["f2979581.a19d08"]]},{"id":"6bd8d342.61224c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"unmute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":734,"wires":[["f2979581.a19d08"]]},{"id":"ddb5876d.01a778","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":793,"y":699,"wires":[["9225381f.320718"]]},{"id":"eef64078.54f74","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1272,"y":897,"wires":[]},{"id":"860023f6.20cb6","type":"comment","z":"99e6906e.c69df","name":"GET STATUS","info":"","x":769,"y":663,"wires":[],"icon":"node-red/alert.svg"},{"id":"d739357f.c78c18","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":813,"y":814,"wires":[["9225381f.320718"]]},{"id":"81d87131.0f66a","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"flush_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":612,"y":1260,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"efdd332a.0b675","type":"inject","z":"99e6906e.c69df","name":"","topic":"2","payload":"play_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1292,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"1eff2c9b.4bc873","type":"inject","z":"99e6906e.c69df","name":"insert_uri http","topic":"https://archive.org/download/testmp3testfile/mpthreetest.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":1431,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"c00d8a62.9fccf8","type":"comment","z":"99e6906e.c69df","name":"MANAGE QUEUE","info":"","x":131,"y":1217,"wires":[],"icon":"node-red/alert.svg"},{"id":"69a99ad3.b4ebb4","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":810,"y":1540,"wires":[]},{"id":"8f176bf.4f77c98","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":391,"y":1261,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"8ab0eed6.5e689","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"leave_group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1022,"wires":[["218e05d2.48724a"]]},{"id":"42de01d4.7ea0d","type":"inject","z":"99e6906e.c69df","name":"","topic":"sonos","payload":"join_group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1054,"wires":[["218e05d2.48724a"]]},{"id":"b834b2a3.10b9b","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"-5","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":800,"wires":[["f2979581.a19d08"]]},{"id":"5bb03490.b8cdcc","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"pause","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":766,"wires":[["f2979581.a19d08"]]},{"id":"d3c4b5a7.528288","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"flush_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":329,"wires":[["b42fb10f.ed5db"]]},{"id":"6280f87a.0562c8","type":"change","z":"4318847d.0693cc","name":"queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"queue","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Best of Prime","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":301,"y":331,"wires":[["5fe3a2ed.eb907c"]]},{"id":"744d729c.ee78dc","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":552,"y":371,"wires":[]},{"id":"8dd4792.76eb088","type":"comment","z":"4318847d.0693cc","name":"Example 3: Replace SONOS queue without playing","info":"","x":195,"y":296,"wires":[]},{"id":"c112b57b.4469b8","type":"comment","z":"9ea06256.355a2","name":"CONTROL PLAYER","info":"","x":95,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"374fd5fd.c937aa","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":100,"wires":[["2e34f5b1.a5a72a"]]},{"id":"e2d2580b.4557e8","type":"inject","z":"4318847d.0693cc","name":"","topic":"Arabella","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":56,"wires":[["aa2e6460.b540a8"]]},{"id":"5d8ef2c9.43ff1c","type":"change","z":"4318847d.0693cc","name":"get_songmedia","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_songmedia","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":728,"y":71,"wires":[["6ae1cc83.6144b4"]]},{"id":"6bbf67aa.5b6638","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1039,"y":71,"wires":[]},{"id":"faf9af99.954a4","type":"inject","z":"4318847d.0693cc","name":"","topic":"Best Of Lovesongs","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":95,"wires":[["aa2e6460.b540a8"]]},{"id":"e4646c63.7ee1f","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":567,"y":71,"wires":[["5d8ef2c9.43ff1c"]]},{"id":"f7c7fcf2.8c6ed","type":"comment","z":"4318847d.0693cc","name":"Example 1:  Play (TuneIn, Amazon) radio station using My Sonos and retrieve title, ...","info":"","x":295,"y":20,"wires":[]},{"id":"782d3661.e6e158","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_songinfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":811,"y":847,"wires":[["9225381f.320718"]]},{"id":"16e2e597.f999ba","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_mediainfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":811,"y":879,"wires":[["9225381f.320718"]]},{"id":"72c32438.a6be2c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_positioninfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":821,"y":911,"wires":[["9225381f.320718"]]},{"id":"33494d25.d17ca2","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_muted","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":801,"y":735,"wires":[["9225381f.320718"]]},{"id":"3d60005d.62d19","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_name","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":801,"y":767,"wires":[["9225381f.320718"]]},{"id":"6a1d28c8.fea828","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1019,"y":699,"wires":[["9225381f.320718"]]},{"id":"6b455079.05614","type":"inject","z":"99e6906e.c69df","name":"","topic":"last","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":634,"y":1359,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"2a44a257.0f6ffe","type":"inject","z":"99e6906e.c69df","name":"","topic":"2","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":623,"y":1293,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"3c6ee6fb.a1f9ca","type":"inject","z":"99e6906e.c69df","name":"","topic":"first","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":633,"y":1326,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"1fc5c102.abee9f","type":"comment","z":"4318847d.0693cc","name":"Example 4: Line in Play:5 / TV Beam or Playbar","info":"","x":185,"y":437,"wires":[]},{"id":"8978d019.4e76e","type":"switch","z":"4318847d.0693cc","name":"","property":"payload.modelName","propertyType":"msg","rules":[{"t":"eq","v":"Sonos Play:5","vt":"str"},{"t":"eq","v":"Sonos Beam","vt":"str"},{"t":"eq","v":"Sonos Playbar","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":431,"y":470,"wires":[["de574d05.b6a53"],["e7542013.832ae"],["e7542013.832ae"]]},{"id":"de574d05.b6a53","type":"change","z":"4318847d.0693cc","name":"line in","rules":[{"t":"set","p":"topic","pt":"msg","to":"'x-rincon-stream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":565,"y":441,"wires":[["41f8648f.bd838c"]]},{"id":"22d840cd.c8b46","type":"inject","z":"99e6906e.c69df","name":"","topic":"x-rincon-stream:RINCON_5CAAFD00223601400","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":878,"wires":[["f2979581.a19d08"]]},{"id":"8fac247a.f91548","type":"comment","z":"55805384.a4695c","name":"polly and more","info":"","x":85,"y":20,"wires":[]},{"id":"d07c1d15.6af63","type":"inject","z":"99e6906e.c69df","name":"","topic":"SonosMix","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":165,"y":1541,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"77db7f57.751e9","type":"comment","z":"4318847d.0693cc","name":"Example 5: Play Playlist from Music Library","info":"","x":165,"y":556,"wires":[]},{"id":"2172120a.6207ae","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"flush_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":590,"wires":[["d02602c0.d8e8b"]]},{"id":"b1f4e729.e2d8f8","type":"change","z":"4318847d.0693cc","name":"activate queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":806,"y":590,"wires":[["9d9e559d.4c6cd8"]]},{"id":"ff1ec5fc.0cff68","type":"inject","z":"4318847d.0693cc","name":"","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Playlists/MLAdele.wpl","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":480,"y":666,"wires":[["9e0d7aee.907268"]]},{"id":"225eea23.4db686","type":"comment","z":"4318847d.0693cc","name":"or direct","info":"","x":480,"y":634,"wires":[]},{"id":"d890d3f3.68cd6","type":"inject","z":"4318847d.0693cc","name":"mute","topic":"","payload":"mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":771,"wires":[["80c178d.0218a88","f9e99c11.a8edc"]]},{"id":"f9e99c11.a8edc","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":223,"y":811,"wires":[["a65048e1.879f98"]]},{"id":"98119167.abb2e","type":"change","z":"4318847d.0693cc","name":"stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":741,"y":811,"wires":[["80c178d.0218a88"]]},{"id":"418f0e18.4cf29","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":569,"y":848,"wires":[["61b7db70.f099d4"]]},{"id":"61b7db70.f099d4","type":"change","z":"4318847d.0693cc","name":"unmute","rules":[{"t":"set","p":"payload","pt":"msg","to":"unmute","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":751,"y":848,"wires":[["80c178d.0218a88"]]},{"id":"a65048e1.879f98","type":"change","z":"4318847d.0693cc","name":"play tuneIn station","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":392,"y":811,"wires":[["418f0e18.4cf29","7bd694c7.71d67c"]]},{"id":"bac1bf03.f728","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":470,"wires":[["165a0add.39d6b5"]]},{"id":"e7542013.832ae","type":"change","z":"4318847d.0693cc","name":"tv (line in)","rules":[{"t":"set","p":"topic","pt":"msg","to":"'x-sonos-htastream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400:spdif'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":501,"wires":[["41f8648f.bd838c"]]},{"id":"41f8648f.bd838c","type":"change","z":"4318847d.0693cc","name":"activate line","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":727,"y":470,"wires":[["55b6f9ce.2ef858"]]},{"id":"610c7f81.c561","type":"inject","z":"99e6906e.c69df","name":"","topic":"SHUFFLE","payload":"set_queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":149,"y":1392,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"8638cd91.2bd02","type":"inject","z":"99e6906e.c69df","name":"","topic":"NORMAL","payload":"set_queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":1359,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"c90daf5a.fe606","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":411,"y":1294,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"625148f2.018378","type":"change","z":"4318847d.0693cc","name":"insert playlist","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"MLAdele","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":451,"y":590,"wires":[["9e0d7aee.907268"]]},{"id":"497dc083.e5d35","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":100,"wires":[["9124b25e.5e7bb"]]},{"id":"9124b25e.5e7bb","type":"function","z":"a0a649cc.ca04e8","name":"xyz does not exist","func":"msg.payload = 'hallo';\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":100,"wires":[["bcf459fe.1b0ad8"]]},{"id":"e180e70c.33b628","type":"function","z":"a0a649cc.ca04e8","name":"xyz is null","func":"msg.payload.xyz = null;\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":196,"wires":[["bcf459fe.1b0ad8"]]},{"id":"351eb48c.4094ac","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":196,"wires":[["e180e70c.33b628"]]},{"id":"c54adc23.e480e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":468,"wires":[["305adb80.ed3b84","63a7db00.cc8604"]]},{"id":"305adb80.ed3b84","type":"function","z":"a0a649cc.ca04e8","name":"xyz string is OK ","func":"msg.payload = { 'xyz':'richtiger String'};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":468,"wires":[["bcf459fe.1b0ad8"]]},{"id":"47d40166.41248","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":356,"wires":[["22871aaa.f17016"]]},{"id":"22871aaa.f17016","type":"function","z":"a0a649cc.ca04e8","name":"xyz empty string","func":"msg.payload = {\"xyz\":''};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":356,"wires":[["bcf459fe.1b0ad8"]]},{"id":"a4f89f5b.58eb4","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":98,"wires":[["c7fabc9b.407e1"]]},{"id":"c7fabc9b.407e1","type":"change","z":"a0a649cc.ca04e8","name":"payload does not exist","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":98,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"7cd29440.2439fc","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":194,"wires":[["892f9664.8696f8"]]},{"id":"892f9664.8696f8","type":"function","z":"a0a649cc.ca04e8","name":"payload null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":194,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"b9b94e98.ceb2e","type":"comment","z":"a0a649cc.ca04e8","name":"Objective of this tab - Documentation","info":"# Introduction\nOften errors occures because objects or part of objects are not initialized or hold invalid values. This causes errors in following flows. \n\n# Solution\nThe path of every property is being intensively checked: **undefined, null, empty string** and not value \"**NaN**\".\n\nNaN is a strange one. It can be exclued by testing \"msg.payload !== msg.payload\" or by testing \"(typeof msg.payload === 'number' && isNaN(msg.payload))\"\n\nThe second one is longer but more obsious. \n\nIn case of msg.propLevel1.propLevel2 I do test all elements except msg. Msg is given and can not be null or undefined. ","x":145,"y":20,"wires":[]},{"id":"ed0da7d.7d64e58","type":"function","z":"a0a649cc.ca04e8","name":"payload empty string","func":"msg.payload = '';\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":354,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"ae986c34.34ae5","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":354,"wires":[["ed0da7d.7d64e58"]]},{"id":"96ba426e.4e8e1","type":"function","z":"a0a649cc.ca04e8","name":"payload string","func":"msg.payload = 'payload text there';\nreturn msg;","outputs":1,"noerr":0,"x":281,"y":477,"wires":[["e3f119eb.d44758"]]},{"id":"db6427c6.b0c728","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":477,"wires":[["96ba426e.4e8e1"]]},{"id":"63a1eef5.4e185","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"-5","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":101,"wires":[["d82099f6.76ef28"]]},{"id":"de825881.6eda98","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"+5","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":189,"wires":[["d82099f6.76ef28"]]},{"id":"eee89416.02f1f8","type":"comment","z":"775d7a2a.44f234","name":"not working: plus is absorbed","info":"","x":180,"y":155,"wires":[]},{"id":"67a23bc0.a14964","type":"comment","z":"775d7a2a.44f234","name":"Volume control","info":"","x":140,"y":61,"wires":[]},{"id":"83ec348e.2b3848","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":500,"wires":[["7a9b4e0.b2f0ab4"]]},{"id":"7a9b4e0.b2f0ab4","type":"function","z":"a0a649cc.ca04e8","name":"xyz number is ok","func":"msg.payload = {\"xyz\": 5};\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":500,"wires":[["bcf459fe.1b0ad8"]]},{"id":"2a76f526.64ae8a","type":"comment","z":"a0a649cc.ca04e8","name":"validation of msg.payload","info":"","x":115,"y":63,"wires":[]},{"id":"3a375663.e13d9a","type":"function","z":"a0a649cc.ca04e8","name":"payload does not exist","func":"msg  = {'o': 'oooo'};\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":130,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"63d72607.f34638","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":130,"wires":[["3a375663.e13d9a"]]},{"id":"117da209.5252de","type":"function","z":"a0a649cc.ca04e8","name":"payload undefined","func":"msg.payload = undefined;\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":162,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"2dbcdfea.bf264","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":162,"wires":[["117da209.5252de"]]},{"id":"2ec859a5.f8eb66","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":226,"wires":[["de752d4c.21001"]]},{"id":"de752d4c.21001","type":"function","z":"a0a649cc.ca04e8","name":"payload NaN","func":"msg.payload = parseInt('Hallo');  // provides NaN\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":226,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"b3403a6f.c88838","type":"function","z":"a0a649cc.ca04e8","name":"payload number ","func":"msg.payload = 10;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":509,"wires":[["e3f119eb.d44758"]]},{"id":"1150c24c.b1ae2e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":509,"wires":[["b3403a6f.c88838"]]},{"id":"957f1041.a180b","type":"function","z":"a0a649cc.ca04e8","name":"payload array","func":"msg.payload = [];\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":541,"wires":[["e3f119eb.d44758"]]},{"id":"d8d75b12.f06148","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":541,"wires":[["957f1041.a180b"]]},{"id":"d7b0c62c.795398","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":573,"wires":[["d0fed59c.990ac8"]]},{"id":"d0fed59c.990ac8","type":"function","z":"a0a649cc.ca04e8","name":"payload object ","func":"msg.payload = {'something':'Hallo'};\nreturn msg;","outputs":1,"noerr":0,"x":281,"y":573,"wires":[["e3f119eb.d44758"]]},{"id":"ec88ae1e.ff4b6","type":"function","z":"a0a649cc.ca04e8","name":"payload object ","func":"msg.payload = {'something': undefined};\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":605,"wires":[["e3f119eb.d44758"]]},{"id":"d80d6e9c.59f3e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":605,"wires":[["ec88ae1e.ff4b6"]]},{"id":"e3d3b952.dd6838","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":637,"wires":[["6e895944.0c26f8"]]},{"id":"6e895944.0c26f8","type":"function","z":"a0a649cc.ca04e8","name":"payload parseInt('5') ","func":"msg.payload = parseInt('5');\nreturn msg;","outputs":1,"noerr":0,"x":301,"y":637,"wires":[["e3f119eb.d44758"]]},{"id":"f507b549.24e008","type":"function","z":"a0a649cc.ca04e8","name":"payload parseInt(5) ","func":"msg.payload = parseInt(5);\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":670,"wires":[["e3f119eb.d44758"]]},{"id":"a201018b.af083","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":670,"wires":[["f507b549.24e008"]]},{"id":"1d4a5f09.801521","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":164,"wires":[["65a613f5.8794dc"]]},{"id":"65a613f5.8794dc","type":"function","z":"a0a649cc.ca04e8","name":"xyz undefined","func":"msg.payload.xyz = undefined;\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":164,"wires":[["bcf459fe.1b0ad8"]]},{"id":"fe262f00.41ee9","type":"function","z":"a0a649cc.ca04e8","name":"xyz does not exist","func":"msg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":132,"wires":[["bcf459fe.1b0ad8"]]},{"id":"3c32d77.e212a28","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":132,"wires":[["fe262f00.41ee9"]]},{"id":"2e25b173.d1dd2e","type":"function","z":"a0a649cc.ca04e8","name":"xyz NaN","func":"msg.payload.xyz = parseInt('Hallo'); // NaN\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":228,"wires":[["bcf459fe.1b0ad8"]]},{"id":"e6f0a81b.1a9dc8","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":228,"wires":[["2e25b173.d1dd2e"]]},{"id":"74bc604d.fd188","type":"comment","z":"a0a649cc.ca04e8","name":"validation of msg.payload.xyz","info":"","x":665,"y":67,"wires":[]},{"id":"6c500479.64f93c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":532,"wires":[["7a8f82dd.bf758c"]]},{"id":"7a8f82dd.bf758c","type":"function","z":"a0a649cc.ca04e8","name":"xyz object  is ok","func":"msg.payload = {'xyz': {}};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":532,"wires":[["bcf459fe.1b0ad8"]]},{"id":"c2fe0b5f.2c5c38","type":"function","z":"a0a649cc.ca04e8","name":"xyz array  is ok","func":"msg.payload = { 'xyz': []};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":564,"wires":[["bcf459fe.1b0ad8"]]},{"id":"75ca332f.81145c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":564,"wires":[["c2fe0b5f.2c5c38"]]},{"id":"e3f119eb.d44758","type":"function","z":"a0a649cc.ca04e8","d":true,"name":"validate msg.payload","func":"/** Validate msg.payload\n * \n*/\n\n// old version: \n// if (typeof msg.payload === 'undefined' || msg.payload === null || (typeof msg.payload === 'number' && isNaN(msg.payload)) || msg.payload === '') {\n\nif (typeof msg.payload === 'undefined' || msg.payload === null || (typeof msg.payload === 'number' && !Number.isFinite(msg.payload)) || msg.payload ==='') {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok', msg);\n}\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":700,"wires":[[]]},{"id":"71e12096.9b21c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":258,"wires":[["892e2d7e.c143"]]},{"id":"892e2d7e.c143","type":"function","z":"a0a649cc.ca04e8","name":"payload NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":271,"y":258,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"bcf459fe.1b0ad8","type":"function","z":"a0a649cc.ca04e8","d":true,"name":"validate msg payload","func":"/** Validate msg.payload.xyz\n * \n*/\nif (!isValidProperty(msg, ['payload', 'xyz'])) {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok', msg);\n}\nreturn msg;\n\nfunction isValidProperty(nestedObj, pathArray){\n    const property = pathArray.reduce(\n      (obj, key) => (obj && obj[key] !== 'undefined' ? obj[key] : undefined),\n      nestedObj\n    )\n    return typeof property !== 'undefined'\n  }","outputs":1,"noerr":0,"x":1040,"y":670,"wires":[[]]},{"id":"21af558b.13c2ba","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":260,"wires":[["65d7d2d2.d82a5c"]]},{"id":"65d7d2d2.d82a5c","type":"function","z":"a0a649cc.ca04e8","name":"xyz NaN","func":"msg.payload.xyz = NaN; // NaN\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":260,"wires":[["bcf459fe.1b0ad8"]]},{"id":"5c5d1c68.22bf54","type":"inject","z":"99e6906e.c69df","name":"activate_avtransport","topic":"x-rincon-stream:RINCON_5CAAFD00223601400","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":911,"wires":[["372185d5.1d1a4a"]]},{"id":"372185d5.1d1a4a","type":"change","z":"99e6906e.c69df","name":"volume 30","rules":[{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":311,"y":911,"wires":[["f2979581.a19d08"]]},{"id":"7fdc8a90.778d44","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":380,"wires":[["a662246b.c9a948"]]},{"id":"a662246b.c9a948","type":"change","z":"9ea06256.355a2","name":"avtransport with volume - not number","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":380,"wires":[["39a502ae.bdf62e"]]},{"id":"72def357.4d838c","type":"comment","z":"9ea06256.355a2","name":"activate avtransport with volume","info":"","x":171,"y":347,"wires":[]},{"id":"3b78414f.38dede","type":"change","z":"9ea06256.355a2","name":"avtransport with volume - invalid number","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":321,"y":413,"wires":[["39a502ae.bdf62e"]]},{"id":"a425b1eb.3038","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":413,"wires":[["3b78414f.38dede"]]},{"id":"d919048c.b05e48","type":"change","z":"9ea06256.355a2","name":"avtransport with volume - ok","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":447,"wires":[["39a502ae.bdf62e"]]},{"id":"a2234dbe.9d699","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":447,"wires":[["d919048c.b05e48"]]},{"id":"c3fcf19f.62a37","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2553,"wires":[["3e20b9ea.a3d6e6"]]},{"id":"3e20b9ea.a3d6e6","type":"change","z":"9ea06256.355a2","name":"play mysonos arabella with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Arabella","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":2553,"wires":[["2f900d43.a3c562"]]},{"id":"30daef9a.dcd72","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2655,"wires":[["462eae92.63d07"]]},{"id":"462eae92.63d07","type":"change","z":"9ea06256.355a2","name":"play tunein with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":2655,"wires":[["2f900d43.a3c562"]]},{"id":"8624bfb1.18ffa","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2593,"wires":[["a0ad39e5.b760d8"]]},{"id":"a0ad39e5.b760d8","type":"change","z":"9ea06256.355a2","name":"play mysonos Love with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Love","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2593,"wires":[["2f900d43.a3c562"]]},{"id":"fa17e07.604b32","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2693,"wires":[["fe23d0f4.85c73"]]},{"id":"fe23d0f4.85c73","type":"change","z":"9ea06256.355a2","name":"play tunein with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":2693,"wires":[["2f900d43.a3c562"]]},{"id":"6b5cc4aa.c99b7c","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":134,"wires":[["aa36d09.b24b43"]]},{"id":"aa36d09.b24b43","type":"function","z":"9ea06256.355a2","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":212,"y":134,"wires":[["2e34f5b1.a5a72a"]]},{"id":"1009be46.8c0fb2","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":170,"wires":[["68e73b2a.782454"]]},{"id":"68e73b2a.782454","type":"function","z":"9ea06256.355a2","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":211,"y":170,"wires":[["2e34f5b1.a5a72a"]]},{"id":"b12a4877.40ad38","type":"comment","z":"a0a649cc.ca04e8","name":"Following are all OK","info":"","x":110,"y":443,"wires":[]},{"id":"cf30cfb3.f7a6","type":"comment","z":"a0a649cc.ca04e8","name":"Following are all OK","info":"","x":635,"y":436,"wires":[]},{"id":"dd1ad5ab.e8b008","type":"http request","z":"d65eded3.250b9","name":"","method":"POST","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","authType":"basic","x":720,"y":60,"wires":[[]]},{"id":"1bbc7a30.e4cbe6","type":"template","z":"d65eded3.250b9","name":"define url","field":"url","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"https://autoremotejoaomgcd.appspot.com/sendnotification?key={{key}}&title=\"HomeService Error Message\"&text={{payload}};\n","output":"str","x":570,"y":60,"wires":[["dd1ad5ab.e8b008"]]},{"id":"6b0e515b.e62cd","type":"function","z":"d65eded3.250b9","name":"define/send error message","func":"/** Send error message to TASKER if debugToMobile is true\n* GITHUB subflow handle errors\n* @since 2019-10-13T1931\n* PREREQ: uses TASKER autoremote and needs key, stored in global variable\n*/\n\n  const unknown = 'unbekannt';\n\n  let errorTab = env.get('Tabname');\n  if (typeof errorTab === 'undefined' || errorTab === null || errorTab === '') {\n    errorTab = unknown;\n    node.warn('Tabname not defined');\n  }\n\n  let errorNodeName = unknown;\n  let errorNodeType = unknown;\n  let errorNodeId = unknown;\n  let errorMessage = unknown;\n  if (typeof msg.error === 'undefined' || msg.error === null || msg.error === '') {\n    // no infos - use default text above\n  } else {\n    if (typeof msg.error.source === 'undefined' || msg.error.source === null || msg.error.source === '') {\n      // no source infos - use default text above\n    } else {\n      if (typeof msg.error.source.name === 'undefined' || msg.error.source.name === null || msg.error.source.name === '') {\n        // use default text above\n      } else {\n        errorNodeName = msg.error.source.name;\n      }\n      if (typeof msg.error.source.type === 'undefined' || msg.error.source.type === null || msg.error.source.type === '') {\n        // use default text above\n      } else {\n        errorNodeType = msg.error.source.type;\n      }\n      if (typeof msg.error.source.id === 'undefined' || msg.error.source.id === null || msg.error.source.id === '') {\n        // use default text\n      } else {\n        errorNodeId = msg.error.source.id;\n      }\n    }\n    if (typeof msg.error.message === 'undefined' || msg.error.message === null || msg.error.message === '') {\n      // no infos - use default text\n    } else {\n      errorMessage = msg.error.message;\n    }\n  }\n  const fullMessage = `Fehler in TAB: ${errorTab} NODENAME: ${errorNodeName} NODETYPE: ${errorNodeType} NODEID: ${errorNodeId} DETAIL: ${errorMessage}`;\n\n  let msgUIandLog = { payload: fullMessage };\n\n  let msgMobile;\n  if (env.get('DebugToMobile')) {\n    const keyVariableName = env.get('KeyVariable'); // first get name of global variable\n    if (typeof keyVariableName === 'undefined' || keyVariableName === null || keyVariableName === '') {\n      node.error('Error in subflow: handle error: Invalid key variable name');\n      msgMobile = null; // no message\n      msgUIandLog = null; // no message\n    } else {\n      const key = global.get(keyVariableName);\n      if (typeof key === 'undefined' || key === null || key === '') {\n        node.error('Error in subflow: handle error: Key variable not defined or key invalid');\n        msgMobile = null; // no message\n        msgUIandLog = null; // no message\n      } else {\n        msgMobile = { payload: fullMessage, key: key };\n      }\n    }\n  } else {\n    msgMobile = null; // not message\n  }\n  return [msgMobile, msgUIandLog];\n\n","outputs":2,"noerr":0,"x":280,"y":80,"wires":[["1bbc7a30.e4cbe6"],["337e0a88.64b546"]],"outputLabels":["email data",""]},{"id":"337e0a88.64b546","type":"debug","z":"d65eded3.250b9","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"payload","targetType":"msg","x":590,"y":120,"wires":[]},{"id":"1cbfc88a.82bef7","type":"subflow:d65eded3.250b9","z":"55805384.a4695c","name":"","env":[{"name":"Tabname","value":"Sandbox","type":"str"},{"name":"DebugToMobile","value":"true","type":"bool"}],"x":610,"y":20,"wires":[]},{"id":"ca8b047.c6229f8","type":"catch","z":"55805384.a4695c","d":true,"name":"","scope":null,"uncaught":false,"x":440,"y":20,"wires":[["1cbfc88a.82bef7"]]},{"id":"2a12b79b.d9e0f8","type":"subflow:d65eded3.250b9","z":"9ea06256.355a2","d":true,"name":"","env":[{"name":"Tabname","value":"Test with Failure","type":"str"}],"x":650,"y":40,"wires":[]},{"id":"dbe8b435.a7f4c8","type":"catch","z":"9ea06256.355a2","d":true,"name":"","scope":null,"uncaught":false,"x":480,"y":40,"wires":[["2a12b79b.d9e0f8"]]},{"id":"b410ddd8.77b9d","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2753,"wires":[["572c1e4b.9d236"]]},{"id":"572c1e4b.9d236","type":"change","z":"9ea06256.355a2","name":"play tunein with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Arabella","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":2753,"wires":[["2f900d43.a3c562"]]},{"id":"6dba351d.9f53cc","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2791,"wires":[["8e666d34.3a1a5"]]},{"id":"8e666d34.3a1a5","type":"change","z":"9ea06256.355a2","name":"play tunein with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Arabella","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":2793,"wires":[["2f900d43.a3c562"]]},{"id":"833757b5.a4c0b8","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2833,"wires":[["2856f8dd.825148"]]},{"id":"2856f8dd.825148","type":"change","z":"9ea06256.355a2","name":"play mysonos love with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Love","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2833,"wires":[["2f900d43.a3c562"]]},{"id":"376bf938.dc9bd6","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2871,"wires":[["ae807b63.cc69a8"]]},{"id":"ae807b63.cc69a8","type":"change","z":"9ea06256.355a2","name":"play mysonos love with volume (wrong volume)","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Love","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2871,"wires":[["2f900d43.a3c562"]]},{"id":"88d0ca60.d83528","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":2933,"wires":[["340d5a87.775326"]]},{"id":"340d5a87.775326","type":"change","z":"9ea06256.355a2","name":"play mysonos wrong title with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_mysonos","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"xxxx","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":2933,"wires":[["2f900d43.a3c562"]]},{"id":"9af19cc4.5706a","type":"comment","z":"775d7a2a.44f234","name":"msg.size ","info":"","x":121,"y":1057,"wires":[]},{"id":"e4134f34.a564d","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":362,"y":1097,"wires":[["d32d3c03.61ef1"]]},{"id":"a081172f.de7e58","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":113,"y":1097,"wires":[["e4134f34.a564d"]]},{"id":"8208c58d.b37718","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":1185,"wires":[]},{"id":"249fa767.71bb08","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":1130,"wires":[["6d2ea1a0.4a7ab"]]},{"id":"6d2ea1a0.4a7ab","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":361,"y":1130,"wires":[["d32d3c03.61ef1"]]},{"id":"f39f2932.5f5318","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":362,"y":1163,"wires":[["d32d3c03.61ef1"]]},{"id":"6e2ca31a.2e100c","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":113,"y":1163,"wires":[["f39f2932.5f5318"]]},{"id":"f06dff57.c0a35","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":341,"y":1207,"wires":[["d32d3c03.61ef1"]]},{"id":"d974bf84.9321f","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":1207,"wires":[["f06dff57.c0a35"]]},{"id":"38cf5a24.734d36","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":1240,"wires":[["69c14ed9.cef51"]]},{"id":"69c14ed9.cef51","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":1240,"wires":[["d32d3c03.61ef1"]]},{"id":"29767623.36181a","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":341,"y":1273,"wires":[["d32d3c03.61ef1"]]},{"id":"1e1b60be.3ad4bf","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":1273,"wires":[["29767623.36181a"]]},{"id":"2143919d.6b952e","type":"comment","z":"775d7a2a.44f234","name":"Results","info":"There are 3 playlists. \nSo with size 2,3 there should be a Warning","x":652,"y":1097,"wires":[]},{"id":"bc08b969.5611a8","type":"inject","z":"775d7a2a.44f234","name":"insert_uri  song from ML","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":159,"y":960,"wires":[["22888d78.e458b2"]]},{"id":"959d77f2.e655b8","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xxxx","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":60,"wires":[["3cac913b.eba05e"]]},{"id":"3f3f1637.83394a","type":"comment","z":"2e2bde07.2bda42","name":"insert_uri ","info":"","x":800,"y":23,"wires":[]},{"id":"a446ee43.22313","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xx","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":620,"wires":[["d12bd467.ca9358"]]},{"id":"3eb1dfa.e71d22","type":"comment","z":"2e2bde07.2bda42","name":"insert Music Library Playlist from My Sonos","info":"","x":199,"y":510,"wires":[]},{"id":"37e62db0.b573b2","type":"comment","z":"2e2bde07.2bda42","name":"insert Sonos Playlist","info":"","x":130,"y":860,"wires":[]},{"id":"3376c8b.910b438","type":"comment","z":"2e2bde07.2bda42","name":"get Music Library Playlist ","info":"","x":830,"y":510,"wires":[]},{"id":"db68f8e.dd3cc08","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":768,"y":589,"wires":[["3fea5db5.9f34e2"]]},{"id":"3fea5db5.9f34e2","type":"change","z":"2e2bde07.2bda42","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":967,"y":589,"wires":[["16802e93.5f9981"]]},{"id":"74b7708e.62bfb","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":768,"y":622,"wires":[["490db005.58636"]]},{"id":"490db005.58636","type":"change","z":"2e2bde07.2bda42","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":967,"y":622,"wires":[["16802e93.5f9981"]]},{"id":"582a7acb.c91e94","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":768,"y":656,"wires":[["d46d838a.c016"]]},{"id":"d46d838a.c016","type":"change","z":"2e2bde07.2bda42","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":967,"y":656,"wires":[["16802e93.5f9981"]]},{"id":"57b47fb8.8fcd4","type":"change","z":"2e2bde07.2bda42","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"1.3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":967,"y":692,"wires":[["16802e93.5f9981"]]},{"id":"82ac8203.67d3","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":768,"y":692,"wires":[["57b47fb8.8fcd4"]]},{"id":"6001c06c.bca74","type":"inject","z":"2e2bde07.2bda42","name":"get musiclibrary playlist","topic":"","payload":"get_musiclibrary_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":544,"wires":[["5e775c52.8e9c84"]]},{"id":"96b504bf.6e7788","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1284,"y":697,"wires":[]},{"id":"e95861c4.cfc17","type":"comment","z":"2e2bde07.2bda42","name":"get Sonos Playlists","info":"","x":811,"y":863,"wires":[]},{"id":"c87d28e7.1a10f8","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":800,"y":104,"wires":[["2c20b96a.e5bc96"]]},{"id":"7f764b36.d7daf4","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xxxx","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":137,"wires":[["2c20b96a.e5bc96"]]},{"id":"a6d04c24.10188","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1170,"y":97,"wires":[]},{"id":"bf96fc4c.68de1","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":700,"wires":[["f2d56cb7.acbb5"]]},{"id":"f2d56cb7.acbb5","type":"change","z":"2e2bde07.2bda42","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":338,"y":700,"wires":[["d12bd467.ca9358"]]},{"id":"1a2130af.aaec5f","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":734,"wires":[["3d4419ac.231f76"]]},{"id":"3d4419ac.231f76","type":"change","z":"2e2bde07.2bda42","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":338,"y":734,"wires":[["d12bd467.ca9358"]]},{"id":"6f9c2092.82983","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":768,"wires":[["21486ce7.ffb0e4"]]},{"id":"21486ce7.ffb0e4","type":"change","z":"2e2bde07.2bda42","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":338,"y":768,"wires":[["d12bd467.ca9358"]]},{"id":"532ed001.51c62","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"ML10CC","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":547,"wires":[["32ecf28b.53667e"]]},{"id":"5f3a4327.f1344c","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":583,"y":654,"wires":[]},{"id":"8b4dcee2.1dd2f","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":585,"wires":[["d12bd467.ca9358"]]},{"id":"525cdbfa.edf624","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"1234","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":169,"y":654,"wires":[["d12bd467.ca9358"]]},{"id":"b534038a.52f42","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":771,"y":947,"wires":[["a0ad1cdf.d4747"]]},{"id":"a0ad1cdf.d4747","type":"change","z":"2e2bde07.2bda42","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":947,"wires":[["5f8c615b.2003"]]},{"id":"55795e82.6b1d","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":771,"y":980,"wires":[["8e6d60f7.e4434"]]},{"id":"8e6d60f7.e4434","type":"change","z":"2e2bde07.2bda42","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":980,"wires":[["5f8c615b.2003"]]},{"id":"68bd9b67.ead3d4","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":771,"y":1014,"wires":[["1fad53f3.dc08cc"]]},{"id":"1fad53f3.dc08cc","type":"change","z":"2e2bde07.2bda42","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":1014,"wires":[["5f8c615b.2003"]]},{"id":"560c8c42.e2f224","type":"change","z":"2e2bde07.2bda42","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"1.3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":1050,"wires":[["5f8c615b.2003"]]},{"id":"a4bf53da.9892","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":771,"y":1050,"wires":[["560c8c42.e2f224"]]},{"id":"27dcafba.b7e4b","type":"inject","z":"2e2bde07.2bda42","name":"get musiclibrary playlist","topic":"","payload":"get_sonos_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":823,"y":902,"wires":[["25b530bc.a5cfc"]]},{"id":"87d2d50b.eec388","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1287,"y":1055,"wires":[]},{"id":"3fe16e86.6cb4e2","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xx","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":139,"y":967,"wires":[["53b639c8.3468b8"]]},{"id":"e23a6ce9.027fd","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":1063,"wires":[["4632d938.8d3838"]]},{"id":"4632d938.8d3838","type":"change","z":"2e2bde07.2bda42","name":"insert from sonos playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_sonos_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":317,"y":1063,"wires":[["53b639c8.3468b8"]]},{"id":"de1c26f4.4b6648","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":1097,"wires":[["3add7b46.acb3c4"]]},{"id":"3add7b46.acb3c4","type":"change","z":"2e2bde07.2bda42","name":"insert from sonos playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_sonos_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":317,"y":1097,"wires":[["53b639c8.3468b8"]]},{"id":"8ead3ed5.4974d","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":1131,"wires":[["19ed835c.214c1d"]]},{"id":"19ed835c.214c1d","type":"change","z":"2e2bde07.2bda42","name":"insert from sonos playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_sonos_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":317,"y":1131,"wires":[["53b639c8.3468b8"]]},{"id":"672441e1.624b5","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"ML","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":148,"y":894,"wires":[["d7562f53.684ef"]]},{"id":"980c723a.40412","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":582,"y":1001,"wires":[]},{"id":"9a8008a2.d9cd38","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":128,"y":932,"wires":[["53b639c8.3468b8"]]},{"id":"2440044e.74bf5c","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"1234","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":148,"y":1001,"wires":[["53b639c8.3468b8"]]},{"id":"71eba2c5.4c259c","type":"comment","z":"2e2bde07.2bda42","name":"remove song","info":"","x":110,"y":1200,"wires":[]},{"id":"7a39fd8a.309694","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"0","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1370,"wires":[["dd9f96c4.353d28"]]},{"id":"c041e9c9.a89588","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"-1","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1403,"wires":[["dd9f96c4.353d28"]]},{"id":"e59a24bf.df41b8","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1237,"wires":[["dd9f96c4.353d28"]]},{"id":"df4735f5.5a8d68","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"hallo","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1271,"wires":[["dd9f96c4.353d28"]]},{"id":"cb15e9e3.c6b5f8","type":"inject","z":"2e2bde07.2bda42","name":"","topic":".,c","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1304,"wires":[["dd9f96c4.353d28"]]},{"id":"ffb767d7.cbac48","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"..10.2","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1337,"wires":[["dd9f96c4.353d28"]]},{"id":"5adf1b4a.403774","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1100,"y":1263,"wires":[["f7a859dd.a38898"]]},{"id":"31661052.1cb59","type":"comment","z":"2e2bde07.2bda42","name":"get queue","info":"","x":1100,"y":1227,"wires":[]},{"id":"ad1c0aa3.d90fa8","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1570,"y":1348,"wires":[]},{"id":"8ac4b2bf.acf95","type":"comment","z":"2e2bde07.2bda42","name":"shuffle queue","info":"","x":1110,"y":1314,"wires":[]},{"id":"c1c243cc.740df","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"SHUFLE","payload":"set_queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1150,"y":1349,"wires":[["f7a859dd.a38898"]]},{"id":"9b245ba0.a9fa68","type":"inject","z":"2e2bde07.2bda42","name":"test invalid command","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1140,"y":1444,"wires":[["f7a859dd.a38898"]]},{"id":"30eb293.0f209d6","type":"comment","z":"2e2bde07.2bda42","name":"invalid command","info":"","x":1119,"y":1409,"wires":[]},{"id":"56085d81.49a104","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"12xdgt","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":170,"wires":[["2c20b96a.e5bc96"]]},{"id":"acc9ae1d.15e39","type":"comment","z":"2e2bde07.2bda42","name":"ADDITIONAL TEST SEE HERE ","info":"- empty queue\n- queue not activated\n","x":1310,"y":1226,"wires":[],"icon":"node-red/alert.svg"},{"id":"ed16ee64.4d4eb","type":"inject","z":"99e6906e.c69df","name":"","topic":"On","payload":"set_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":360,"y":701,"wires":[["f2979581.a19d08"]]},{"id":"62c8c05b.eba5e","type":"inject","z":"99e6906e.c69df","name":"","topic":"Off","payload":"set_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":360,"y":733,"wires":[["f2979581.a19d08"]]},{"id":"bd8d926e.c5c12","type":"comment","z":"9ea06256.355a2","name":"set led","info":"","x":330,"y":220,"wires":[]},{"id":"7a53e124.78de4","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"set_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":331,"y":254,"wires":[["eaab7f3b.eb8db"]]},{"id":"40554e29.11064","type":"inject","z":"9ea06256.355a2","name":"","topic":"xxxxx","payload":"set_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":351,"y":287,"wires":[["eaab7f3b.eb8db"]]},{"id":"d92f3918.30fb88","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":999,"y":769,"wires":[["9225381f.320718"]]},{"id":"f4257bb8.59cb08","type":"comment","z":"99e6906e.c69df","name":"Insert Spotify URI","info":"","x":500,"y":1560,"wires":[],"icon":"font-awesome/fa-arrow-circle-right"},{"id":"8d0b193b.cc2258","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Track","topic":"spotify:track:5AdoS3gS47x40nBNlNmPQ8","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":521,"y":1593,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"1cd31901.348b97","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Album","topic":"spotify:album:1TSZDcvlPtAnekTaItI3qO","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":521,"y":1660,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"ecb9c681.6642d8","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri TopTrack","topic":"spotify:artistTopTracks:1dfeR4HaWDbWqFHLkxsg1d","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":531,"y":1626,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"f20742ee.3812c","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Playlist","topic":"spotify:user:spotify:playlist:37i9dQZEVXbMDoHDwVN2tF","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":531,"y":1693,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"4f019de6.e2d3b4","type":"comment","z":"99e6906e.c69df","name":"Get ...","info":"","x":381,"y":1227,"wires":[]},{"id":"5db761e2.a40d","type":"comment","z":"99e6906e.c69df","name":"Flash / remove","info":"","x":623,"y":1226,"wires":[]},{"id":"4e16e080.e4083","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"test_connected","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1241,"y":699,"wires":[["9225381f.320718"]]},{"id":"a310c609.fd61e8","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":505,"y":984,"wires":[]},{"id":"642f75f0.db899c","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"Heute soll das Wetter schn werden.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":260,"wires":[["ab7c66e.a0b8698"]]},{"id":"63e06903.06d2d8","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":550,"y":1300,"wires":[]},{"id":"51ed34ef.2ee2ac","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_songinfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":116,"y":1399,"wires":[["454d295e.ee6df8"]]},{"id":"c312e807.fb9ba8","type":"comment","z":"775d7a2a.44f234","name":"CONTROL PLAYER","info":"","x":95,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"bb0f52c0.7945a","type":"comment","z":"775d7a2a.44f234","name":"MANAGE QUEUE","info":"","x":95,"y":915,"wires":[],"icon":"node-red/alert.svg"},{"id":"80002b58.0f7ea8","type":"comment","z":"2e2bde07.2bda42","name":"insert_spotify_uri","info":"","x":820,"y":240,"wires":[]},{"id":"e89569de.cbbfd8","type":"inject","z":"2e2bde07.2bda42","name":"spotify wrong syntax","topic":"spotify:xxxxxx","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":829,"y":343,"wires":[["8b8526ef.f33738"]]},{"id":"173460da.e1173f","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":819.9913330078125,"y":276.9982604980469,"wires":[["8b8526ef.f33738"]]},{"id":"64b60136.ca39c","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"xxxxxx","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":849,"y":310,"wires":[["8b8526ef.f33738"]]},{"id":"3a59ea53.672ba6","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1289.9913330078125,"y":342.9982604980469,"wires":[]},{"id":"36e9951f.1034ca","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":310,"y":80,"wires":[]},{"id":"59d5d6c2.7337a8","type":"inject","z":"775d7a2a.44f234","name":"insert_uri  album from ML","topic":"x-rincon-playlist:RINCON_000E58FE3AEA01400#A:ALBUM/Diamond%20Life","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":169,"y":993,"wires":[["22888d78.e458b2"]]},{"id":"e5c4eab4.b04df8","type":"comment","z":"4318847d.0693cc","name":"Example 7: Group players","info":"","x":115,"y":915,"wires":[]},{"id":"62a1b89.7509d48","type":"change","z":"4318847d.0693cc","name":"play swr3 on coordinator","rules":[{"t":"set","p":"payload","pt":"msg","to":"stream","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SWR3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":271,"y":949,"wires":[["435d406c.05c4e"]]},{"id":"ad8671c9.08f85","type":"inject","z":"4318847d.0693cc","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":949,"wires":[["62a1b89.7509d48"]]},{"id":"8af22d58.53aff","type":"change","z":"4318847d.0693cc","name":"join group","rules":[{"t":"set","p":"topic","pt":"msg","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"join_group","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":775,"y":949,"wires":[["bf85277a.dc7898"]]},{"id":"25dbf732.65c418","type":"change","z":"4318847d.0693cc","name":"get coordinator name","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_name","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":548,"y":949,"wires":[["74efaec6.7c31a"]]},{"id":"119077c5.4b6e88","type":"comment","z":"99e6906e.c69df","name":"Activate, play, seek in track","info":"","x":150,"y":1259,"wires":[]},{"id":"fdd63f73.7806d","type":"inject","z":"99e6906e.c69df","name":"insert_uri Music Library - song","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":159,"y":1463,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"16e343b8.cc984c","type":"inject","z":"775d7a2a.44f234","name":"activate TV","topic":"x-rincon-stream:RINCON_5CAAFD00223601400","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":288,"wires":[["9974711e.7107e"]]},{"id":"fe2350f7.f7f82","type":"comment","z":"775d7a2a.44f234","name":"Others","info":"","x":109,"y":252,"wires":[]},{"id":"5fa4dbc.f66a224","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":590,"y":980,"wires":[]},{"id":"d1be1bbd.0a42f8","type":"inject","z":"775d7a2a.44f234","name":"activate tunein B5","topic":"x-sonosapi-stream:s24903?sid=254&flags=8224&sn=0","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":340,"wires":[["b5752468.15d418"]]},{"id":"eda6b8af.911258","type":"inject","z":"775d7a2a.44f234","name":"activate Arabella direct","topic":"x-rincon-mp3radio://http://live.radioarabella.de/stream?ref=radioarabella.de","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":375,"wires":[["b5752468.15d418"]]},{"id":"236df86c.d3de28","type":"comment","z":"99e6906e.c69df","name":"Insert playlist from Sonos Playlists","info":"","x":178,"y":1508,"wires":[]},{"id":"bad732ab.b9295","type":"inject","z":"2e2bde07.2bda42","name":"spotify wrong syntax","topic":"spotify:album:1TSZ","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":829.9913330078125,"y":375.9982604980469,"wires":[["8b8526ef.f33738"]]},{"id":"a1bc563b.563b38","type":"inject","z":"2e2bde07.2bda42","name":"spotify wrong syntax","topic":"spotify:user:spotify:playlist:","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":829.9913330078125,"y":409.9982604980469,"wires":[["8b8526ef.f33738"]]},{"id":"547b39a3.f30828","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":105,"y":1207,"wires":[["14f90bc4.af3534"]]},{"id":"9a7fcc84.cb323","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":125,"y":1241,"wires":[["14f90bc4.af3534"]]},{"id":"2168f3df.b75abc","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":105,"y":1320,"wires":[["1cea8f6a.b6c9f1"]]},{"id":"af6db229.46343","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":125,"y":1354,"wires":[["1cea8f6a.b6c9f1"]]},{"id":"f7c525b1.bb4868","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"test_connected","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":125,"y":1174,"wires":[["14f90bc4.af3534","c462718a.7b287"]]},{"id":"d019e4ea.bdd108","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"test_connected","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":1287,"wires":[["1cea8f6a.b6c9f1"]]},{"id":"e8890445.efc0d8","type":"inject","z":"9ea06256.355a2","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":65,"wires":[["2e34f5b1.a5a72a"]]},{"id":"c20aba70.072a08","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":97.01171875,"y":1051.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"daa30934.76a648","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":97.01171875,"y":1085.00390625,"wires":[["4d64eeac.4d3e3"]]},{"id":"4d64eeac.4d3e3","type":"function","z":"9ea06256.355a2","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":219.01171875,"y":1085.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"3c19df58.80cc9","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":96.01171875,"y":1121.00390625,"wires":[["c300c365.38939"]]},{"id":"c300c365.38939","type":"function","z":"9ea06256.355a2","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":218.01171875,"y":1121.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"60cea140.4eb6c","type":"inject","z":"9ea06256.355a2","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":127.01171875,"y":1016.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"601f6242.f1b0bc","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":969.00390625,"wires":[["b802cbbe.6ae1d8"]]},{"id":"f40f4d0f.61a64","type":"comment","z":"9ea06256.355a2","name":"No ip && valid serial - WILL WORK!","info":"","x":189,"y":935,"wires":[]},{"id":"9328b6f0.0ce098","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":400,"y":88,"wires":[]},{"id":"e0ca2d40.4a3d5","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":126,"y":1443,"wires":[["454d295e.ee6df8"]]},{"id":"6b5fc3f1.98809c","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":93,"y":378,"wires":[["6875cc2b.767cf4"]]},{"id":"52f2f6ec.d13d68","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":102,"y":215,"wires":[["8536a29e.1b70c"]]},{"id":"b6d65d64.5c187","type":"comment","z":"2e2bde07.2bda42","name":"No Ip && invalid serial","info":"","x":142,"y":181,"wires":[]},{"id":"7ce664e0.aa786c","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":54,"wires":[["7ee80fc8.c45a6"]]},{"id":"108935ad.88bbda","type":"comment","z":"2e2bde07.2bda42","name":"Invalid ip: from fritzbox","info":"","x":143,"y":20,"wires":[]},{"id":"34a73f71.9b97b","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":134,"wires":[["c42c98c6.6619c8"]]},{"id":"7e798fad.b2f4f","type":"comment","z":"2e2bde07.2bda42","name":"Invalid ip address - wrong syntax","info":"","x":172,"y":99,"wires":[]},{"id":"d61d6eec.2c8f3","type":"inject","z":"2e2bde07.2bda42","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":104,"y":297,"wires":[["a84543d3.166d"]]},{"id":"fc9d77e9.cf56c8","type":"comment","z":"2e2bde07.2bda42","name":"No ip && valid serial - WILL WORK!","info":"","x":184,"y":262,"wires":[]},{"id":"e30904a.5307cf8","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":93,"y":412,"wires":[["3a869791.1b8c28"]]},{"id":"3a869791.1b8c28","type":"function","z":"2e2bde07.2bda42","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":215,"y":412,"wires":[["6875cc2b.767cf4"]]},{"id":"b3ed390f.025bc8","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":92,"y":448,"wires":[["147da13b.1818cf"]]},{"id":"147da13b.1818cf","type":"function","z":"2e2bde07.2bda42","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":214,"y":448,"wires":[["6875cc2b.767cf4"]]},{"id":"ab3d2e19.b08e9","type":"inject","z":"2e2bde07.2bda42","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":123,"y":343,"wires":[["6875cc2b.767cf4"]]},{"id":"5e89b1c4.34392","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":533,"y":198,"wires":[]},{"id":"c4405264.252e9","type":"debug","z":"2e2bde07.2bda42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":570,"y":400,"wires":[]},{"id":"35be5578.80893a","type":"comment","z":"4318847d.0693cc","name":"Example 6: Set a morning station but dont play right now","info":"","x":215,"y":736,"wires":[]},{"id":"d82ccb20.029108","type":"inject","z":"99e6906e.c69df","name":"","topic":"2","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":624,"y":1391,"wires":[["a113a1ca.0a6d9"]]},{"id":"a113a1ca.0a6d9","type":"change","z":"99e6906e.c69df","name":"remove several songs","rules":[{"t":"set","p":"numberOfSongs","pt":"msg","to":"4","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":644,"y":1428,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"6c2d7412.15877c","type":"comment","z":"2e2bde07.2bda42","name":"remove several songs","info":"","x":580,"y":1224,"wires":[]},{"id":"d00535fd.77d288","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":1264,"wires":[["9952b49d.b6b988"]]},{"id":"9952b49d.b6b988","type":"change","z":"2e2bde07.2bda42","name":"remove song","rules":[{"t":"set","p":"payload","pt":"msg","to":"remove_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfSongs","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":693,"y":1264,"wires":[["146ba1ed.ab89ee"]]},{"id":"88ec65b1.bd2408","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":1298,"wires":[["58d222b9.d3a34c"]]},{"id":"58d222b9.d3a34c","type":"change","z":"2e2bde07.2bda42","name":"remove song","rules":[{"t":"set","p":"payload","pt":"msg","to":"remove_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfSongs","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":693,"y":1298,"wires":[["146ba1ed.ab89ee"]]},{"id":"dae83ff6.cae8c","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":1333,"wires":[["699b9734.68e728"]]},{"id":"699b9734.68e728","type":"change","z":"2e2bde07.2bda42","name":"remove song","rules":[{"t":"set","p":"payload","pt":"msg","to":"remove_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfSongs","pt":"msg","to":".,c","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":693,"y":1333,"wires":[["146ba1ed.ab89ee"]]},{"id":"d6fe73ee.3d189","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":1367,"wires":[["68e8f70a.65cba8"]]},{"id":"68e8f70a.65cba8","type":"change","z":"2e2bde07.2bda42","name":"remove song","rules":[{"t":"set","p":"payload","pt":"msg","to":"remove_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfSongs","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":693,"y":1367,"wires":[["146ba1ed.ab89ee"]]},{"id":"910c362e.284198","type":"inject","z":"2e2bde07.2bda42","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":1400,"wires":[["7ca0f1ee.56563"]]},{"id":"7ca0f1ee.56563","type":"change","z":"2e2bde07.2bda42","name":"remove song - will work ","rules":[{"t":"set","p":"payload","pt":"msg","to":"remove_song","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfSongs","pt":"msg","to":"10.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":733,"y":1400,"wires":[["146ba1ed.ab89ee"]]},{"id":"7a078d58.bed044","type":"http in","z":"55805384.a4695c","name":"","url":"/weather.mp3","method":"get","upload":false,"swaggerDoc":"","x":110,"y":174,"wires":[["8644e66.0ce5b18"]]},{"id":"8644e66.0ce5b18","type":"file in","z":"55805384.a4695c","name":"","filename":"/home/pi/Downloads/weather.mp3","format":"","x":453,"y":174,"wires":[["3fe0be9b.c6a862"]]},{"id":"3fe0be9b.c6a862","type":"http response","z":"55805384.a4695c","name":"","statusCode":"","headers":{"content-type":"audio/mpeg"},"x":734,"y":174,"wires":[]},{"id":"ff8f1190.18663","type":"comment","z":"55805384.a4695c","name":"http://192.168.178.55:1880/weather.mp3","info":"play tts notification","x":960,"y":180,"wires":[]},{"id":"44b5336.4b213cc","type":"change","z":"55805384.a4695c","name":"play_notification - local file -  with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://192.168.178.55:1880/weather.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":260,"wires":[["1783418c.b875ae"]]},{"id":"52aa6e83.72414","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1030,"y":280,"wires":[]},{"id":"37d6d7e5.ebfa68","type":"inject","z":"55805384.a4695c","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":377,"wires":[["89a66dee.9fcb3"]]},{"id":"efdd08d6.cc5988","type":"change","z":"55805384.a4695c","name":"play_notification with volume","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"20","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":427,"y":377,"wires":[["916fe293.37335"]]},{"id":"89a66dee.9fcb3","type":"delay","z":"55805384.a4695c","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":224,"y":377,"wires":[["efdd08d6.cc5988"]]},{"id":"35aa7299.f6a99e","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1009,"y":733,"wires":[["9225381f.320718"]]},{"id":"7cdda1ba.fd7b7","type":"change","z":"99e6906e.c69df","name":"suppress warning","rules":[{"t":"set","p":"suppressWarnings","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1262,"y":779,"wires":[["9225381f.320718"]]},{"id":"6e1a4a94.6faed4","type":"inject","z":"99e6906e.c69df","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1039,"y":923,"wires":[["26888be2.80f9b4"]]},{"id":"28d88625.cffb1a","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":780,"y":1220,"wires":[["ecf78b66.f50b08"]]},{"id":"59706d3b.649434","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1126,"y":1220,"wires":[]},{"id":"80a6579.a3292a8","type":"comment","z":"9ea06256.355a2","name":"Invalid ip: from fritzbox","info":"","x":819,"y":1183,"wires":[]},{"id":"810e8434.e0abe8","type":"inject","z":"9ea06256.355a2","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":809,"y":1296,"wires":[["8a470931.71a4d8"]]},{"id":"e79de1d9.c134d","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1181,"y":1296,"wires":[]},{"id":"60c3d49f.58ee7c","type":"inject","z":"9ea06256.355a2","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":809,"y":1339,"wires":[["bd109717.3fb7f8"]]},{"id":"ead1d2c9.dad89","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":769,"y":1379,"wires":[["6159246d.cf3bac"]]},{"id":"7f969558.6d046c","type":"inject","z":"9ea06256.355a2","name":"","topic":"NigtMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":1419,"wires":[["6159246d.cf3bac"]]},{"id":"852d4b9d.122f98","type":"inject","z":"99e6906e.c69df","name":"","topic":"Off","payload":"set_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":380,"y":768,"wires":[["f2979581.a19d08"]]},{"id":"5e8b717a.0e50f","type":"inject","z":"99e6906e.c69df","name":"","topic":"On","payload":"set_loudness","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":380,"y":835,"wires":[["f2979581.a19d08"]]},{"id":"cfcde6d.e832118","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1019,"y":804,"wires":[["9225381f.320718"]]},{"id":"dceff87d.ff6fe8","type":"comment","z":"9ea06256.355a2","name":"set crossfade","info":"","x":112,"y":224,"wires":[]},{"id":"d02705fc.4f6a98","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"set_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":257,"wires":[["eaab7f3b.eb8db"]]},{"id":"56a5b67c.9e1fe8","type":"inject","z":"9ea06256.355a2","name":"","topic":"xxxxx","payload":"set_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":290,"wires":[["eaab7f3b.eb8db"]]},{"id":"f313417d.d6072","type":"change","z":"9ea06256.355a2","name":"no topic","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":560,"wires":[["c634ec6.772531"]]},{"id":"db7e1e48.415ec","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":560,"wires":[["f313417d.d6072"]]},{"id":"4277a6d4.f36418","type":"change","z":"9ea06256.355a2","name":"emtpy topic","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":594,"wires":[["c634ec6.772531"]]},{"id":"3328c155.0f41ee","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":594,"wires":[["4277a6d4.f36418"]]},{"id":"c91b1770.bf7588","type":"change","z":"9ea06256.355a2","name":"wrong EQType name","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Ni","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":627,"wires":[["c634ec6.772531"]]},{"id":"666bf739.4a4c68","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":627,"wires":[["c91b1770.bf7588"]]},{"id":"251ae715.af8708","type":"change","z":"9ea06256.355a2","name":"missing eqvalue","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":661,"wires":[["c634ec6.772531"]]},{"id":"2ecec6dc.511fba","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":661,"wires":[["251ae715.af8708"]]},{"id":"6dcf90cc.c99a3","type":"change","z":"9ea06256.355a2","name":"empty value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":694,"wires":[["c634ec6.772531"]]},{"id":"cbeae512.0b3a48","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":694,"wires":[["6dcf90cc.c99a3"]]},{"id":"778e343.b4128cc","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":727,"wires":[["14192db2.028222"]]},{"id":"14192db2.028222","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":727,"wires":[["c634ec6.772531"]]},{"id":"a898fb78.49df68","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":760,"wires":[["10bbcd59.63d013"]]},{"id":"10bbcd59.63d013","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":760,"wires":[["c634ec6.772531"]]},{"id":"7cbd3ef8.1cba7","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":550,"y":779,"wires":[]},{"id":"d6758645.60b068","type":"comment","z":"9ea06256.355a2","name":"set eq","info":"","x":55,"y":525,"wires":[]},{"id":"da033f8e.8a5da","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":794,"wires":[["c746562a.f7cf98"]]},{"id":"c746562a.f7cf98","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"20","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":794,"wires":[["c634ec6.772531"]]},{"id":"54cc1a93.be2f24","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":828,"wires":[["10652b08.cdf7a5"]]},{"id":"10652b08.cdf7a5","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"-16","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":828,"wires":[["c634ec6.772531"]]},{"id":"780fd479.d57f9c","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":861,"wires":[["d21c8d75.1a6fb"]]},{"id":"d21c8d75.1a6fb","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":861,"wires":[["c634ec6.772531"]]},{"id":"4e02dc11.1edb74","type":"inject","z":"99e6906e.c69df","name":"","topic":"DialogLevel","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1039,"y":957,"wires":[["26888be2.80f9b4"]]},{"id":"e09a244e.1c4898","type":"inject","z":"99e6906e.c69df","name":"","topic":"NightMode","payload":"set_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":956,"wires":[["954bd4ea.062138"]]},{"id":"954bd4ea.062138","type":"change","z":"99e6906e.c69df","name":"On","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"On","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":956,"wires":[["218e05d2.48724a"]]},{"id":"34659ec5.6b3322","type":"change","z":"99e6906e.c69df","name":"On","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"On","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":288.99131774902344,"y":987.9982604980469,"wires":[["218e05d2.48724a"]]},{"id":"c17ca575.002578","type":"inject","z":"99e6906e.c69df","name":"","topic":"00:05:00","payload":"set_sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":400,"y":870,"wires":[["f2979581.a19d08"]]},{"id":"bf94a6dc.ab87b8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1029,"y":874,"wires":[["9225381f.320718"]]},{"id":"63c649cb.91aef8","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":700,"wires":[["90b50ccc.b3422"]]},{"id":"90b50ccc.b3422","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":700,"wires":[["e5e961f1.3e495"]]},{"id":"8dce7afd.ecbe48","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1209,"y":796,"wires":[]},{"id":"ae54958d.3920b8","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":799,"wires":[["3abb42e2.d26b8e"]]},{"id":"3abb42e2.d26b8e","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"0:01","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":799,"wires":[["e5e961f1.3e495"]]},{"id":"2038996a.8dd056","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":832,"wires":[["2fbce26b.4eac6e"]]},{"id":"2fbce26b.4eac6e","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":832,"wires":[["e5e961f1.3e495"]]},{"id":"9ad55345.1b15a","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":865,"wires":[["f0b31f6.1de02e"]]},{"id":"f0b31f6.1de02e","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"70:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":865,"wires":[["e5e961f1.3e495"]]},{"id":"6a03da00.51df68","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":898,"wires":[["37ec00a6.91c86"]]},{"id":"37ec00a6.91c86","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"70:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":898,"wires":[["e5e961f1.3e495"]]},{"id":"4079743b.ec8dbc","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":931,"wires":[["c8d6e97e.be7588"]]},{"id":"c8d6e97e.be7588","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"1:00:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":931,"wires":[["e5e961f1.3e495"]]},{"id":"51d0e9b3.ac9038","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":964,"wires":[["1ef0d110.ce49cf"]]},{"id":"1ef0d110.ce49cf","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"25:00:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":964,"wires":[["e5e961f1.3e495"]]},{"id":"7db46265.ab462c","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":997,"wires":[["de739b7a.8fbfb8"]]},{"id":"de739b7a.8fbfb8","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"20:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":997,"wires":[["e5e961f1.3e495"]]},{"id":"6128cd86.7da1c4","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":766,"wires":[["e5e961f1.3e495"]]},{"id":"fc5fbe86.0d0fd","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":769,"y":766,"wires":[["6128cd86.7da1c4"]]},{"id":"1c3a3903.7dcec7","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":769,"y":733,"wires":[["20e0af81.e9cfb"]]},{"id":"20e0af81.e9cfb","type":"change","z":"9ea06256.355a2","name":"invalid time format","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"55","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":733,"wires":[["e5e961f1.3e495"]]},{"id":"30f47819.2ced78","type":"comment","z":"9ea06256.355a2","name":"set sleep timer","info":"","x":800,"y":527,"wires":[]},{"id":"45029d46.2d44c4","type":"change","z":"9ea06256.355a2","name":"missing topic ","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":911,"y":567,"wires":[["e5e961f1.3e495"]]},{"id":"2ddb13a.afdd6ec","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":567,"wires":[["45029d46.2d44c4"]]},{"id":"7d67a8dd.e58538","type":"change","z":"9ea06256.355a2","name":"empty topic","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":911,"y":600,"wires":[["e5e961f1.3e495"]]},{"id":"bd5c7165.7e51","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":600,"wires":[["7d67a8dd.e58538"]]},{"id":"65d0d68b.dd53e8","type":"change","z":"9ea06256.355a2","name":"wrong topic type","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":921,"y":633,"wires":[["e5e961f1.3e495"]]},{"id":"80bf3618.e5ada8","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":633,"wires":[["65d0d68b.dd53e8"]]},{"id":"a3d4a069.06d27","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":667,"wires":[["e21e631a.97ed7"]]},{"id":"e21e631a.97ed7","type":"change","z":"9ea06256.355a2","name":"wrong topic type","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":921,"y":667,"wires":[["e5e961f1.3e495"]]},{"id":"91de21ac.add0b","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":299,"wires":[["114a696b.8570e7"]]},{"id":"114a696b.8570e7","type":"change","z":"775d7a2a.44f234","name":"50 seconds","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:00:50","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":299,"wires":[["fb524ea5.d8eaa"]]},{"id":"2f946d5e.d13732","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":332,"wires":[["735b3a9b.96e854"]]},{"id":"735b3a9b.96e854","type":"change","z":"775d7a2a.44f234","name":"5 min","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:05:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":332,"wires":[["fb524ea5.d8eaa"]]},{"id":"e8997568.c38028","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":365,"wires":[["47f60bb9.201d14"]]},{"id":"47f60bb9.201d14","type":"change","z":"775d7a2a.44f234","name":"55 min","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:55:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":365,"wires":[["fb524ea5.d8eaa"]]},{"id":"d90bb0ec.f0278","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":398,"wires":[["1843550e.64fecb"]]},{"id":"1843550e.64fecb","type":"change","z":"775d7a2a.44f234","name":"1 hour","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"01:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":398,"wires":[["fb524ea5.d8eaa"]]},{"id":"92c8791.bed9188","type":"comment","z":"775d7a2a.44f234","name":"set sleeptimer","info":"","x":819,"y":266,"wires":[]},{"id":"1d7953bf.1d478c","type":"comment","z":"9ea06256.355a2","name":"Invalid ip: from fritzbox","info":"","x":820,"y":1034,"wires":[]},{"id":"193f43ff.37f63c","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":1074,"wires":[["54bd3c94.273304"]]},{"id":"54bd3c94.273304","type":"change","z":"9ea06256.355a2","name":"05:00","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:05:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":1074,"wires":[["e22823f8.ab5fa","79d2602.1ee67a","7a1e95d6.09a1dc"]]},{"id":"3b07a9bc.edb316","type":"inject","z":"99e6906e.c69df","name":"","topic":"SubGain","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1029,"y":991,"wires":[["26888be2.80f9b4"]]},{"id":"d5a53bc1.1a1b78","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":460,"wires":[["d343fb27.a0c378"]]},{"id":"d343fb27.a0c378","type":"change","z":"775d7a2a.44f234","name":"NightMode","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":939,"y":459,"wires":[["f9c89d00.dd568"]]},{"id":"9176772f.8ff298","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":799,"y":494,"wires":[["e8d55955.d91368"]]},{"id":"e8d55955.d91368","type":"change","z":"775d7a2a.44f234","name":"Speech Enhancement","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"DialogLevel","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":969.9913177490234,"y":493.9982604980469,"wires":[["f9c89d00.dd568"]]},{"id":"facf9dd7.a9d2c","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1190,"y":500,"wires":[]},{"id":"ca52f4c.ebb3f08","type":"inject","z":"55805384.a4695c","name":"trigger","topic":"","payload":"get_mediainfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":503,"wires":[["60af36c5.7ff848"]]},{"id":"1413e200.433aee","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_mysonos","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":503,"wires":[["4057d604.719b58"]]},{"id":"82e1a63f.5053b8","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":730,"y":543,"wires":[]},{"id":"5f80c798.8e1158","type":"function","z":"55805384.a4695c","name":"map radioId - Logo","func":"const mySonosArray= msg.payload;\nfor (let i = 0; i < mySonosArray.length; ++i) {\n    if (mySonosArray[i].radioId === msg.radioId) {\n        msg.payload = mySonosArray[i].logo;\n        break;\n    }\n}\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":543,"wires":[["82e1a63f.5053b8"]]},{"id":"7a547ae8.434b74","type":"inject","z":"99e6906e.c69df","name":"","topic":"00:01:00","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1326,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"ecc5a120.c36b","type":"comment","z":"55805384.a4695c","name":"get logo for radio station","info":"","x":105,"y":463,"wires":[]},{"id":"97d102a3.69b7e","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_loudness","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1019,"y":839,"wires":[["9225381f.320718"]]},{"id":"b9226c76.31a14","type":"comment","z":"775d7a2a.44f234","name":"get_groups: check payload and role","info":"","x":200,"y":540,"wires":[]},{"id":"d2150b4f.d90398","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":579,"wires":[["fece7b2b.f384f8"]]},{"id":"6240d44a.26596c","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":385,"y":615,"wires":[]},{"id":"2cc36f9.ae48a9","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":615,"wires":[["b84ac129.6b037"]]},{"id":"bcd21345.d8286","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":650,"wires":[["1cd4578e.9f8b88"]]},{"id":"c7ac28f3.9cf8a8","type":"comment","z":"775d7a2a.44f234","name":"get eq: check 1 or 0 ","info":"","x":750,"y":578,"wires":[]},{"id":"4267e272.f160ac","type":"inject","z":"775d7a2a.44f234","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":615,"wires":[["b899f1d.78a531"]]},{"id":"8be1bf84.93ea7","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1073,"y":633,"wires":[]},{"id":"4e8d059e.7c3d1c","type":"inject","z":"775d7a2a.44f234","name":"","topic":"DialogLevel","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":750,"y":651,"wires":[["b899f1d.78a531"]]},{"id":"c7819406.1317d8","type":"comment","z":"775d7a2a.44f234","name":"suppressWarnings: 1. keine Warnung, 2. Warnung","info":"","x":249,"y":708,"wires":[]},{"id":"78e4c5e4.573ccc","type":"inject","z":"775d7a2a.44f234","name":"suppressWarnings","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":149,"y":744,"wires":[["a852d82e.c759e8"]]},{"id":"a852d82e.c759e8","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_songinfo","tot":"str"},{"t":"set","p":"suppressWarnings","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":359,"y":744,"wires":[["4a6c0736.6a7908"]]},{"id":"2e790f99.60ca","type":"inject","z":"775d7a2a.44f234","name":"normal","topic":"","payload":"get_songinfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":779,"wires":[["4a6c0736.6a7908"]]},{"id":"cf496356.e96a9","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":701,"y":781,"wires":[]},{"id":"61d11102.6049b","type":"inject","z":"775d7a2a.44f234","name":"suppressWarnings","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":149,"y":813,"wires":[["13d3537b.83199d"]]},{"id":"13d3537b.83199d","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_songmedia","tot":"str"},{"t":"set","p":"suppressWarnings","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":359,"y":813,"wires":[["4a6c0736.6a7908"]]},{"id":"a787f5ab.6395a8","type":"inject","z":"775d7a2a.44f234","name":"normal","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":847,"wires":[["4a6c0736.6a7908"]]},{"id":"ca17beb8.875fc","type":"comment","z":"99e6906e.c69df","name":"MANAGE RADIO","info":"","x":980,"y":1217,"wires":[],"icon":"node-red/alert.svg"},{"id":"59a35914.90f828","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1185,"y":1251,"wires":[]},{"id":"f9b5e2f1.62f17","type":"inject","z":"99e6906e.c69df","name":"","topic":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payload":"play_httpradio","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1005,"y":1254,"wires":[["1a41c244.94b5de"]]},{"id":"b5c6d343.f8399","type":"inject","z":"99e6906e.c69df","name":"","topic":"http://www.fritz.de/live.m3u","payload":"play_httpradio","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1005,"y":1287,"wires":[["1a41c244.94b5de"]]},{"id":"7b8c8849.3858f8","type":"inject","z":"99e6906e.c69df","name":"","topic":"On","payload":"set_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":380,"y":800,"wires":[["f2979581.a19d08"]]},{"id":"346a1d6e.cf3042","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":920,"wires":[["60fd7d89.dc53c4"]]},{"id":"8891edb8.84bc2","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"modelName","pt":"msg","to":"Sonos Play:3","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"create_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":920,"wires":[["595bdf63.151aa"]]},{"id":"b681ae6e.c4372","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":960,"wires":[["a47d3f46.5992c"]]},{"id":"775f34cb.cffa2c","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"modelName","pt":"msg","to":"Sonos Play:3","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"seperate_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":960,"wires":[["8da460bd.7e611"]]},{"id":"3685bcae.d2bb04","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":940,"wires":[]},{"id":"b47da8d0.dbeaf8","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":431,"wires":[["ad543336.f0861"]]},{"id":"d205e29.067282","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"modelName","pt":"msg","to":"Sonos Play:3","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"create_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":431,"wires":[["2915b46.c83b64c"]]},{"id":"d750abb1.ec0158","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":471,"wires":[["ef57c875.3d4cd8"]]},{"id":"79a98283.e4516c","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"modelName","pt":"msg","to":"Sonos Play:3","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"seperate_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":471,"wires":[["3cabb2b.65aab4e"]]},{"id":"6d3f722f.4badec","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":550,"y":511,"wires":[]},{"id":"fb0bf022.436a5","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"play_old","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":839,"y":261,"wires":[["5270478.ebb8fb8"]]},{"id":"20fdba72.27d266","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1092,"wires":[["ecc6b9fb.a28bb8"]]},{"id":"986618a9.2293e8","type":"change","z":"99e6906e.c69df","name":"create stereopair","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"create_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":1092,"wires":[["dde74552.b1d598"]]},{"id":"91ba37a8.e4d708","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":650,"y":1082,"wires":[]},{"id":"54fe8abe.50c8f4","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":760,"wires":[["30b2e3a3.7eaebc"]]},{"id":"27c529fc.1c83e6","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":820,"wires":[["1a96ed72.7d56f3"]]},{"id":"7842b4b6.3a01dc","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1125,"wires":[["aa30c460.a2b5c8"]]},{"id":"393ee1d7.60b13e","type":"change","z":"99e6906e.c69df","name":"separate stereopair","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"separate_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":1125,"wires":[["dde74552.b1d598"]]},{"id":"f2979581.a19d08","type":"sonos-control-player","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":580,"y":912,"wires":[["a310c609.fd61e8"]]},{"id":"218e05d2.48724a","type":"sonos-control-player","z":"99e6906e.c69df","confignode":"8d44022c.adb65","name":"Control Player living","x":480,"y":1021,"wires":[["a310c609.fd61e8"]]},{"id":"2e34f5b1.a5a72a","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":401,"y":126,"wires":[["9328b6f0.0ce098"]]},{"id":"80c178d.0218a88","type":"sonos-control-player","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":900,"y":770,"wires":[[]]},{"id":"55b6f9ce.2ef858","type":"sonos-control-player","z":"4318847d.0693cc","confignode":"8d44022c.adb65","name":"Control Player living","x":918,"y":470,"wires":[[]]},{"id":"39a502ae.bdf62e","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":623,"y":418,"wires":[[]]},{"id":"d82099f6.76ef28","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":288,"y":119,"wires":[["36e9951f.1034ca"]]},{"id":"fb524ea5.d8eaa","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":1100,"y":255,"wires":[[]]},{"id":"eaab7f3b.eb8db","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":562,"y":271,"wires":[[]]},{"id":"bf85277a.dc7898","type":"sonos-control-player","z":"4318847d.0693cc","confignode":"32a98882.56e1c8","name":"Ctrl Player Following Player","x":863,"y":989,"wires":[[]]},{"id":"9974711e.7107e","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"8d44022c.adb65","name":"Control Player - Beam","x":322,"y":288,"wires":[[]]},{"id":"b5752468.15d418","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":420,"y":340,"wires":[[]]},{"id":"1783418c.b875ae","type":"sonos-control-player","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":880,"y":260,"wires":[["52aa6e83.72414"]]},{"id":"916fe293.37335","type":"sonos-control-player","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":652,"y":377,"wires":[[]]},{"id":"c634ec6.772531","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"8d44022c.adb65","name":"","x":500,"y":740,"wires":[["7cbd3ef8.1cba7"]]},{"id":"e5e961f1.3e495","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":1179,"y":756,"wires":[["8dce7afd.ecbe48"]]},{"id":"e22823f8.ab5fa","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"fritzbox","x":1115,"y":1002,"wires":[["8dce7afd.ecbe48"]]},{"id":"79d2602.1ee67a","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"2113e9bb.c52236","name":"offline","x":1125,"y":1049,"wires":[["8dce7afd.ecbe48"]]},{"id":"7a1e95d6.09a1dc","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"bc822e98.2348e","name":"ip does not exist","x":1122,"y":1095,"wires":[["8dce7afd.ecbe48"]]},{"id":"f9c89d00.dd568","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"8d44022c.adb65","name":"Control Player wz","x":1130,"y":460,"wires":[["facf9dd7.a9d2c"]]},{"id":"595bdf63.151aa","type":"sonos-control-player","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"right player","x":690,"y":920,"wires":[["3685bcae.d2bb04"]]},{"id":"8da460bd.7e611","type":"sonos-control-player","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"right player","x":690,"y":960,"wires":[["3685bcae.d2bb04"]]},{"id":"2915b46.c83b64c","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"32a98882.56e1c8","name":"right player","x":607,"y":431,"wires":[["6d3f722f.4badec"]]},{"id":"3cabb2b.65aab4e","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"32a98882.56e1c8","name":"right player","x":607,"y":471,"wires":[["6d3f722f.4badec"]]},{"id":"5270478.ebb8fb8","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"32a98882.56e1c8","name":"client","x":989,"y":261,"wires":[[]]},{"id":"dde74552.b1d598","type":"sonos-control-player","z":"99e6906e.c69df","confignode":"2113e9bb.c52236","name":"player left","x":640,"y":1119,"wires":[["91ba37a8.e4d708"]]},{"id":"9225381f.320718","type":"sonos-get-status","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":1234,"y":844,"wires":[["eef64078.54f74"]]},{"id":"6ae1cc83.6144b4","type":"sonos-get-status","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":897,"y":71,"wires":[["6bbf67aa.5b6638"]]},{"id":"165a0add.39d6b5","type":"sonos-get-status","z":"4318847d.0693cc","confignode":"8d44022c.adb65","name":"Get Status WZ","x":284,"y":470,"wires":[["8978d019.4e76e"]]},{"id":"454d295e.ee6df8","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"8d44022c.adb65","name":"from Wohnzimmer means failure","x":356,"y":1399,"wires":[["63e06903.06d2d8"]]},{"id":"3c35ce4f.fc5422","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":430,"y":1050,"wires":[["63e06903.06d2d8"]]},{"id":"14f90bc4.af3534","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"fritzbox","x":329,"y":1206,"wires":[["63e06903.06d2d8"]]},{"id":"1cea8f6a.b6c9f1","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"2113e9bb.c52236","name":"play1","x":318,"y":1320,"wires":[["63e06903.06d2d8"]]},{"id":"74efaec6.7c31a","type":"sonos-get-status","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":577,"y":989,"wires":[["8af22d58.53aff"]]},{"id":"b802cbbe.6ae1d8","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"c747354a.95e5e8","name":"","x":284,"y":969,"wires":[["63e06903.06d2d8"]]},{"id":"26888be2.80f9b4","type":"sonos-get-status","z":"99e6906e.c69df","confignode":"8d44022c.adb65","name":"get status living","x":1264,"y":991,"wires":[["eef64078.54f74"]]},{"id":"ecf78b66.f50b08","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"","x":973,"y":1219.99609375,"wires":[["59706d3b.649434"]]},{"id":"8a470931.71a4d8","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"","x":1028,"y":1295.99609375,"wires":[["e79de1d9.c134d"]]},{"id":"bd109717.3fb7f8","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"64704482.34d37c","name":"","x":1029,"y":1339,"wires":[["e79de1d9.c134d"]]},{"id":"6159246d.cf3bac","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"8d44022c.adb65","name":"","x":1029,"y":1390,"wires":[["e79de1d9.c134d"]]},{"id":"c462718a.7b287","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"bc822e98.2348e","name":"fritzbox","x":446,"y":1163,"wires":[["63e06903.06d2d8"]]},{"id":"60af36c5.7ff848","type":"sonos-get-status","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":150,"y":543,"wires":[["1413e200.433aee"]]},{"id":"fece7b2b.f384f8","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"sonos","x":231,"y":579,"wires":[["6240d44a.26596c"]]},{"id":"b84ac129.6b037","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"32a98882.56e1c8","name":"bad","x":231,"y":615,"wires":[["6240d44a.26596c"]]},{"id":"1cd4578e.9f8b88","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"8d44022c.adb65","name":"wz","x":230,"y":650,"wires":[["6240d44a.26596c"]]},{"id":"b899f1d.78a531","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"8d44022c.adb65","name":"","x":938,"y":633,"wires":[["8be1bf84.93ea7"]]},{"id":"4a6c0736.6a7908","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":549,"y":781,"wires":[["cf496356.e96a9"]]},{"id":"60fd7d89.dc53c4","type":"sonos-get-status","z":"55805384.a4695c","confignode":"2113e9bb.c52236","name":"left player","x":280,"y":920,"wires":[["8891edb8.84bc2"]]},{"id":"a47d3f46.5992c","type":"sonos-get-status","z":"55805384.a4695c","confignode":"2113e9bb.c52236","name":"left player","x":280,"y":960,"wires":[["775f34cb.cffa2c"]]},{"id":"ad543336.f0861","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"2113e9bb.c52236","name":"left player","x":282,"y":431,"wires":[["d205e29.067282"]]},{"id":"ef57c875.3d4cd8","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"2113e9bb.c52236","name":"left player","x":282,"y":471,"wires":[["79a98283.e4516c"]]},{"id":"ecc6b9fb.a28bb8","type":"sonos-get-status","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","name":"player right","x":270,"y":1092,"wires":[["986618a9.2293e8"]]},{"id":"30b2e3a3.7eaebc","type":"sonos-get-status","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":310,"y":760,"wires":[["82e1a63f.5053b8"]]},{"id":"1a96ed72.7d56f3","type":"sonos-get-status","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"","x":310,"y":820,"wires":[["82e1a63f.5053b8"]]},{"id":"aa30c460.a2b5c8","type":"sonos-get-status","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","name":"player right","x":270,"y":1125,"wires":[["393ee1d7.60b13e"]]},{"id":"2f900d43.a3c562","type":"sonos-manage-radio","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":440,"y":2460,"wires":[["647651d0.ec7cf"]]},{"id":"7bd694c7.71d67c","type":"sonos-manage-radio","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":589,"y":811,"wires":[["98119167.abb2e"]]},{"id":"4057d604.719b58","type":"sonos-manage-radio","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":360,"y":543,"wires":[["5f80c798.8e1158"]]},{"id":"1a41c244.94b5de","type":"sonos-manage-radio","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":1194,"y":1287,"wires":[["59a35914.90f828"]]},{"id":"c02b5a3d.f2fbb8","type":"sonos-manage-queue","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":809,"y":1576,"wires":[["69a99ad3.b4ebb4"]]},{"id":"b42fb10f.ed5db","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":136,"y":369,"wires":[["6280f87a.0562c8"]]},{"id":"9e0d7aee.907268","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":623,"y":590,"wires":[["b1f4e729.e2d8f8"]]},{"id":"9d9e559d.4c6cd8","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":986,"y":590,"wires":[[]]},{"id":"d02602c0.d8e8b","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":282,"y":590,"wires":[["625148f2.018378"]]},{"id":"d32d3c03.61ef1","type":"sonos-manage-queue","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":702,"y":1185,"wires":[["8208c58d.b37718"]]},{"id":"3cac913b.eba05e","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":992,"y":60,"wires":[["a6d04c24.10188"]]},{"id":"16802e93.5f9981","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":1274,"y":640,"wires":[["96b504bf.6e7788"]]},{"id":"5e775c52.8e9c84","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":1034,"y":544,"wires":[[]]},{"id":"2c20b96a.e5bc96","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":1000,"y":137,"wires":[["a6d04c24.10188"]]},{"id":"32ecf28b.53667e","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":253,"y":547,"wires":[[]]},{"id":"d12bd467.ca9358","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":559,"y":595,"wires":[["5f3a4327.f1344c"]]},{"id":"5f8c615b.2003","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":1277,"y":998,"wires":[["87d2d50b.eec388"]]},{"id":"25b530bc.a5cfc","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":1037,"y":902,"wires":[[]]},{"id":"d7562f53.684ef","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"invalid player","x":365,"y":894,"wires":[[]]},{"id":"53b639c8.3468b8","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":526,"y":946,"wires":[["980c723a.40412"]]},{"id":"f7a859dd.a38898","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":1400,"y":1348,"wires":[["ad1c0aa3.d90fa8"]]},{"id":"22888d78.e458b2","type":"sonos-manage-queue","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":440,"y":980,"wires":[["5fa4dbc.f66a224"]]},{"id":"8b8526ef.f33738","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":1119.9913330078125,"y":342.9982604980469,"wires":[["3a59ea53.672ba6"]]},{"id":"dd9f96c4.353d28","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":360,"y":1304,"wires":[[]]},{"id":"7ee80fc8.c45a6","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"9037fbab.1d8408","name":"","x":282,"y":54,"wires":[["5e89b1c4.34392"]]},{"id":"c42c98c6.6619c8","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"64704482.34d37c","name":"","x":282,"y":134,"wires":[["5e89b1c4.34392"]]},{"id":"8536a29e.1b70c","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"ff297616.de3c88","name":"","x":281,"y":215,"wires":[["5e89b1c4.34392"]]},{"id":"a84543d3.166d","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"c747354a.95e5e8","name":"","x":281,"y":296,"wires":[["5e89b1c4.34392"]]},{"id":"6875cc2b.767cf4","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":400,"y":400,"wires":[["c4405264.252e9"]]},{"id":"146ba1ed.ab89ee","type":"sonos-manage-queue","z":"2e2bde07.2bda42","confignode":"88e9fa70.4a53e8","name":"","x":920,"y":1344,"wires":[[]]},{"id":"7c8c520d.0388ac","type":"fs-ops-copy","z":"55805384.a4695c","name":"","sourcePath":"","sourcePathType":"str","sourceFilename":"file","sourceFilenameType":"msg","destPath":"/home/pi/Downloads","destPathType":"str","destFilename":"weather.mp3","destFilenameType":"str","link":false,"overwrite":true,"x":380,"y":260,"wires":[["44b5336.4b213cc"]]},{"id":"ab7c66e.a0b8698","type":"polly","z":"55805384.a4695c","name":"","voice":"41","ssml":false,"dir":"/home/pi/Downloads","config":"dd1b16a.4333de8","x":230,"y":260,"wires":[["7c8c520d.0388ac"],[]]},{"id":"bcf3bd00.9bb39","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1200,"wires":[["be69db4a.15a898"]]},{"id":"be69db4a.15a898","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_noti","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":1200,"wires":[["32b13295.c6360e"]]},{"id":"148844e9.3ef9bb","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":710,"y":1200,"wires":[]},{"id":"32b13295.c6360e","type":"sonos-control-player","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"coordinator","x":530,"y":1200,"wires":[["148844e9.3ef9bb"]]},{"id":"a8987bea.0d6d08","type":"comment","z":"55805384.a4695c","name":"list and master","info":"","x":85,"y":640,"wires":[]},{"id":"42c9cb46.b26dd4","type":"comment","z":"55805384.a4695c","name":"list and master","info":"","x":85,"y":1140,"wires":[]},{"id":"1acdc6da.684f59","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1250,"wires":[["ebd5c902.737b98"]]},{"id":"ebd5c902.737b98","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"play_notification","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"60","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":1250,"wires":[["f0961efb.002e5"]]},{"id":"663bf32e.e0cc8c","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":650,"y":1250,"wires":[]},{"id":"f0961efb.002e5","type":"sonos-control-player","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"bath","x":510,"y":1250,"wires":[["663bf32e.e0cc8c"]]},{"id":"80de6b21.05c4b8","type":"comment","z":"55805384.a4695c","name":"coordinator and bath are grouped","info":"","x":950,"y":1200,"wires":[]},{"id":"3fdfbd94.502552","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":290,"wires":[["6d877017.25006"]]},{"id":"6d877017.25006","type":"function","z":"a0a649cc.ca04e8","name":"payload + infinite","func":"msg.payload = 1.0 / 0;\nnode.log(JSON.stringify(msg))\nreturn msg;","outputs":1,"noerr":0,"x":291,"y":290,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"2a300999.190196","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":322,"wires":[["acca6930.c13528"]]},{"id":"acca6930.c13528","type":"function","z":"a0a649cc.ca04e8","name":"payload - infinite","func":"msg.payload = -1.0/0;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":322,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"d14c2c12.1b404","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":292,"wires":[["ac808215.11ba7"]]},{"id":"d52b5af5.c6c438","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":324,"wires":[["73f496ef.b3cf78"]]},{"id":"73f496ef.b3cf78","type":"function","z":"a0a649cc.ca04e8","name":"xyz - infinite","func":"msg.payload.xyz = -1.0/0;\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":324,"wires":[["bcf459fe.1b0ad8"]]},{"id":"ac808215.11ba7","type":"function","z":"a0a649cc.ca04e8","name":"xyz + infinite","func":"//msg.payload.xyz = 1.0 / 0;\nmsg.payload.xyz = Number.POSITIVE_INFINITY;\nnode.log('>>>' + JSON.stringify(msg))\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":292,"wires":[["bcf459fe.1b0ad8"]]},{"id":"1bfcaa65.a2c6f6","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload - old","func":"/** Validate msg.payload.xyz\n * \n*/\n\nif (typeof msg.payload === 'undefined' || msg.payload === null || \n    (typeof msg.payload === 'number' && isNaN(msg.payload))) {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok');\n    if (typeof msg.payload.xyz === 'undefined' || msg.payload.xyz === null || \n        (typeof msg.payload.xyz === 'number' && isNaN(msg.payload.xyz))|| msg.payload.xyz ==='' ) {\n        node.error('invalid msg.payload.xyz', msg);\n        return;\n    } else {\n        node.warn('found ' + JSON.stringify(msg.payload.xyz)  + '... we can start processing');\n    }\n}\nreturn msg;","outputs":1,"noerr":0,"x":1030,"y":780,"wires":[[]]},{"id":"6e9d66f0.bc30b8","type":"function","z":"a0a649cc.ca04e8","name":"validate msg.payload.xyz -- throws error in case of undefined msg.payload","func":"/** Validate msg.payload.xyz\n * \n*/\n\nif (msg.payload.hasOwnProperty('xyz')) {\n    node.warn('found ' + JSON.stringify(msg.payload.xyz)  + '... we can start processing');\n} else {\n    node.error('invalid msg.payload.xyz', msg);\n}\n\nreturn msg;\n","outputs":1,"noerr":0,"x":880,"y":740,"wires":[[]]},{"id":"63a7db00.cc8604","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload","func":"/** Validate msg.payload.xyz\n * \n*/\nkey = ['payload', 'xzy']\nnode.debug(msg[key])\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":820,"wires":[[]]},{"id":"966aad12.32d61","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"lab","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1320,"wires":[["b4d29905.a54948"]]},{"id":"b4d29905.a54948","type":"sonos-get-status","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":290,"y":1320,"wires":[["bd7cf8db.c20818"]]},{"id":"bd7cf8db.c20818","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":470,"y":1360,"wires":[]},{"id":"2cc83417.9ed16c","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"lab","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1380,"wires":[["c55f0404.ac4f68"]]},{"id":"c55f0404.ac4f68","type":"sonos-get-status","z":"55805384.a4695c","confignode":"8d44022c.adb65","name":"liv","x":270,"y":1380,"wires":[["bd7cf8db.c20818"]]},{"id":"e654cd9d.ff717","type":"comment","z":"4318847d.0693cc","name":"Event Listener","info":"","x":75,"y":1760,"wires":[]},{"id":"89cec88d.7db0d8","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":450,"y":1759,"wires":[]},{"id":"646b900b.4eb7a","type":"inject","z":"4318847d.0693cc","name":"trigger","topic":"","payload":"lab_subscribe","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":910,"y":1799,"wires":[["7f6b1bb8.88b0a4"]]},{"id":"7f6b1bb8.88b0a4","type":"sonos-control-player","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":1060,"y":1799,"wires":[["f8fdf7a4.dcc0c8"]]},{"id":"f8fdf7a4.dcc0c8","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1210,"y":1799,"wires":[]},{"id":"8d5e88ad.c70f38","type":"http in","z":"4318847d.0693cc","d":true,"name":"","url":"/notify","method":"post","upload":false,"swaggerDoc":"","x":110,"y":1794,"wires":[["89cec88d.7db0d8","3def845b.cf556c"]]},{"id":"3def845b.cf556c","type":"http response","z":"4318847d.0693cc","name":"","statusCode":"200","headers":{"content-type":"text/html"},"x":664,"y":1794,"wires":[]},{"id":"1cb172b5.14d9cd","type":"http request","z":"ea970db4.5106b","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":480,"y":160,"wires":[["a35f8dee.9f18f"]]},{"id":"93008453.2d0988","type":"change","z":"ea970db4.5106b","name":"define url delete payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/?language=\" & $env('language')","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":120,"wires":[["1cb172b5.14d9cd"]]},{"id":"d7fd649a.9ff818","type":"template","z":"ea970db4.5106b","name":"header with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":429,"y":80,"wires":[["93008453.2d0988"]]},{"id":"dea3f134.ddc37","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":150,"wires":[["6ac23f94.dc3d"]]},{"id":"feb96bef.d13c48","type":"comment","z":"91448cef.2efc9","name":"B. get information about all devices","info":"","x":147,"y":117,"wires":[]},{"id":"df69bc9f.4c2d5","type":"debug","z":"91448cef.2efc9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":748,"y":400,"wires":[]},{"id":"754625fb.8865fc","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":323,"wires":[["33b22f76.f4038"]]},{"id":"2ecedcf0.da0db4","type":"comment","z":"91448cef.2efc9","name":"C. get all information about one specifc device","info":"","x":175,"y":289,"wires":[]},{"id":"7a654d71.f942e4","type":"comment","z":"91448cef.2efc9","name":"D. get all actions of one specific device - depend on the current state of the device","info":"","x":285,"y":615,"wires":[]},{"id":"45bd620f.4b086c","type":"comment","z":"91448cef.2efc9","name":"A. get new bearer  - also do refresh token","info":"","x":165,"y":20,"wires":[]},{"id":"fed8fd9e.68c2d","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":87,"y":53,"wires":[["f5ecdf57.03ab1"]]},{"id":"a048c655.ec1f78","type":"subflow:24092027.ab82","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"},{"name":"clientId","value":"xx","type":"str"},{"name":"clientSecret","value":"xxx","type":"str"},{"name":"username","value":"xxxxx","type":"str"},{"name":"password","value":"xxxxxx","type":"str"}],"x":391,"y":53,"wires":[["df69bc9f.4c2d5"]]},{"id":"f5ecdf57.03ab1","type":"credentials","z":"91448cef.2efc9","name":"","props":[{"value":"username","type":"msg"},{"value":"password","type":"msg"},{"value":"clientId","type":"msg"},{"value":"clientSecret","type":"msg"}],"x":230,"y":53,"wires":[["a048c655.ec1f78"]]},{"id":"7742f9f5.4a43e8","type":"change","z":"24092027.ab82","name":"get env","rules":[{"t":"set","p":"vg","pt":"msg","to":"vg","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":63,"wires":[["cbba5ff0.57a32"]]},{"id":"6ac23f94.dc3d","type":"subflow:ea970db4.5106b","z":"91448cef.2efc9","name":"","env":[],"x":254,"y":150,"wires":[["df69bc9f.4c2d5"]]},{"id":"eaf22f71.d9969","type":"function","z":"ea970db4.5106b","name":"verify input","func":"// verify token\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":218,"y":80,"wires":[["d7fd649a.9ff818"],["681dd18d.1baa4"]]},{"id":"33b22f76.f4038","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":323,"wires":[["df69bc9f.4c2d5"]]},{"id":"88aafd6a.c0982","type":"http request","z":"aeba9414.6f40a8","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":460,"y":120,"wires":[["3da93881.b6e868"]]},{"id":"3f0996d.8ed756a","type":"change","z":"aeba9414.6f40a8","name":"msg.url, no payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/?language=\" & $env('language')","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":80,"wires":[["88aafd6a.c0982"]]},{"id":"98d65a27.8020b8","type":"template","z":"aeba9414.6f40a8","name":"msg.headers with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":410,"y":40,"wires":[["3f0996d.8ed756a"]]},{"id":"a260e272.ea783","type":"function","z":"aeba9414.6f40a8","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":192,"y":97,"wires":[["98d65a27.8020b8"],["fd32a717.878c28"]]},{"id":"bc574599.2b5938","type":"comment","z":"91448cef.2efc9","name":"C. get current status of a specifc device","info":"","x":155,"y":443,"wires":[]},{"id":"8912f7bb.095be8","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":476,"wires":[["9100eaf.d08d818"]]},{"id":"9100eaf.d08d818","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":476,"wires":[["ffb4b516.d45be8"]]},{"id":"d4f62349.a5a59","type":"comment","z":"91448cef.2efc9","name":"C. get current device type of a specifc device","info":"","x":175,"y":367,"wires":[]},{"id":"3eee5c2a.855a04","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":400,"wires":[["2640e37d.d5b69c"]]},{"id":"2640e37d.d5b69c","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":400,"wires":[["35daca5.d3adb36"]]},{"id":"1e76a8e5.b32bc7","type":"comment","z":"91448cef.2efc9","name":"B. get device id of first device","info":"","x":125,"y":191,"wires":[]},{"id":"4590828c.8b3f2c","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":224,"wires":[["472d288e.030668"]]},{"id":"472d288e.030668","type":"subflow:ea970db4.5106b","z":"91448cef.2efc9","name":"","env":[],"x":251,"y":224,"wires":[["d960c503.4130c8"]]},{"id":"d960c503.4130c8","type":"function","z":"91448cef.2efc9","name":"id first object","func":"msg.payload = msg.payload[Object.keys(msg.payload)[0]].ident.deviceIdentLabel.fabNumber\nreturn msg;","outputs":1,"noerr":0,"x":433,"y":224,"wires":[["df69bc9f.4c2d5"]]},{"id":"80c862b8.062ff","type":"comment","z":"91448cef.2efc9","name":"C. get remaining time of specific device","info":"","x":155,"y":520,"wires":[]},{"id":"c47bb64d.541918","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":553,"wires":[["77c1288.984c0d8"]]},{"id":"77c1288.984c0d8","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":553,"wires":[["5dfa60dc.87fc8"]]},{"id":"5dfa60dc.87fc8","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.state.remainingTime[0]*60 + payload.state.remainingTime[1] &  \" min\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":553,"wires":[["df69bc9f.4c2d5"]]},{"id":"35daca5.d3adb36","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.ident.type.value_localized","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":400,"wires":[["df69bc9f.4c2d5"]]},{"id":"ffb4b516.d45be8","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.state.status.value_localized","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":476,"wires":[["df69bc9f.4c2d5"]]},{"id":"f278936b.e797","type":"subflow:4ae29caa.8056e4","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":295,"y":648,"wires":[["df69bc9f.4c2d5"]]},{"id":"a2806ac3.d3a2d8","type":"http request","z":"4ae29caa.8056e4","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":460,"y":118,"wires":[["c8655abf.93b328"]]},{"id":"e9e5b981.24d568","type":"change","z":"4ae29caa.8056e4","name":"msg.url, no payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/actions/\"","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":78,"wires":[["a2806ac3.d3a2d8"]]},{"id":"f2707f72.38a2f","type":"template","z":"4ae29caa.8056e4","name":"msg.headers with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":429,"y":38,"wires":[["e9e5b981.24d568"]]},{"id":"d3015191.5633d","type":"function","z":"4ae29caa.8056e4","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":198,"y":88,"wires":[["f2707f72.38a2f"],["d9bc2537.715df8"]]},{"id":"9c8e0be2.1c8a58","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":648,"wires":[["f278936b.e797"]]},{"id":"c0e959c7.d684f8","type":"comment","z":"91448cef.2efc9","name":"E. execute command set name {\"deviceName\":\"My_Devicename\"}","info":"","x":245,"y":708,"wires":[]},{"id":"b7906361.bd13b","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":94,"y":740,"wires":[["21e8e59.be3271a"]]},{"id":"dafbb889.fb7f58","type":"http request","z":"ad607e01.511ea","name":"PUT to Miele","method":"PUT","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":499,"y":188,"wires":[["21b0eeb.798de12"]]},{"id":"8bbd1614.6e5288","type":"change","z":"ad607e01.511ea","name":"url, body","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/actions/\"","tot":"jsonata"},{"t":"move","p":"action","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":389,"y":68,"wires":[["47b32910.93a498"]]},{"id":"2542e5f6.b0fd8a","type":"function","z":"ad607e01.511ea","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nif (!msg.action){\n    node.error('invalid msg.action - action', msg)\n    return [null, {payload:\"invalid msg.action - action\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":193,"y":75,"wires":[["8bbd1614.6e5288"],["ebacb8a0.327d58"]]},{"id":"bba95584.0ba288","type":"subflow:ad607e01.511ea","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":423,"y":740,"wires":[["df69bc9f.4c2d5"]]},{"id":"f7de50c4.54625","type":"template","z":"ad607e01.511ea","name":"header with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":459,"y":146,"wires":[["dafbb889.fb7f58"]]},{"id":"6f3d8c02.c4ff64","type":"subflow:ad607e01.511ea","z":"91448cef.2efc9","name":"","env":[],"x":423,"y":821,"wires":[["df69bc9f.4c2d5"]]},{"id":"488026b0.68fa38","type":"comment","z":"91448cef.2efc9","name":"E. execute command stop {\"processAction\":2}","info":"","x":175,"y":788,"wires":[]},{"id":"3da93881.b6e868","type":"switch","z":"aeba9414.6f40a8","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":670,"y":40,"wires":[["96a3026.b505b"],["6a599077.f8081"]]},{"id":"6a599077.f8081","type":"function","z":"aeba9414.6f40a8","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":830,"y":120,"wires":[["dd906f4c.1361a"]]},{"id":"dd906f4c.1361a","type":"template","z":"aeba9414.6f40a8","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":980,"y":120,"wires":[[]]},{"id":"fd32a717.878c28","type":"template","z":"aeba9414.6f40a8","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":350,"y":164,"wires":[[]]},{"id":"a35f8dee.9f18f","type":"switch","z":"ea970db4.5106b","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":650,"y":80,"wires":[["84b66c9d.f62ef"],["8c52e1d0.35a7c"]]},{"id":"8c52e1d0.35a7c","type":"function","z":"ea970db4.5106b","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":810,"y":160,"wires":[["fe83c7a3.1ef478"]]},{"id":"fe83c7a3.1ef478","type":"template","z":"ea970db4.5106b","name":"error http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":963,"y":160,"wires":[[]]},{"id":"84b66c9d.f62ef","type":"template","z":"ea970db4.5106b","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":954,"y":120,"wires":[[]]},{"id":"96a3026.b505b","type":"template","z":"aeba9414.6f40a8","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":990,"y":80,"wires":[[]]},{"id":"681dd18d.1baa4","type":"template","z":"ea970db4.5106b","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":390,"y":218,"wires":[[]]},{"id":"ccdfdd96.2d83e","type":"template","z":"69e44f53.5d62f","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"env >>{{${subflowProperty}}}\npayload >>{{envSubflowProperty}}\n","output":"str","x":460,"y":80,"wires":[[]]},{"id":"4cc2813d.75068","type":"change","z":"69e44f53.5d62f","name":"","rules":[{"t":"set","p":"envSubflowProperty","pt":"msg","to":"subflowProperty","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":80,"wires":[["ccdfdd96.2d83e"]]},{"id":"c8655abf.93b328","type":"switch","z":"4ae29caa.8056e4","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":703,"y":38,"wires":[["2c02bcd4.dc63d4"],["52535782.315028"]]},{"id":"52535782.315028","type":"function","z":"4ae29caa.8056e4","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":815,"y":118,"wires":[["1455fb1d.b32055"]]},{"id":"1455fb1d.b32055","type":"template","z":"4ae29caa.8056e4","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":962,"y":118,"wires":[[]]},{"id":"2c02bcd4.dc63d4","type":"template","z":"4ae29caa.8056e4","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":972,"y":78,"wires":[[]]},{"id":"d9bc2537.715df8","type":"template","z":"4ae29caa.8056e4","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":310,"y":158,"wires":[[]]},{"id":"21b0eeb.798de12","type":"switch","z":"ad607e01.511ea","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":693,"y":80,"wires":[["e4fefa21.402038"],["6ad0d242.05cb5c"]]},{"id":"6ad0d242.05cb5c","type":"function","z":"ad607e01.511ea","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":716,"y":160,"wires":[["9ebcdded.4fad9"]]},{"id":"9ebcdded.4fad9","type":"template","z":"ad607e01.511ea","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":863,"y":160,"wires":[[]]},{"id":"e4fefa21.402038","type":"template","z":"ad607e01.511ea","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":873,"y":120,"wires":[[]]},{"id":"ebacb8a0.327d58","type":"template","z":"ad607e01.511ea","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":330,"y":240,"wires":[[]]},{"id":"21e8e59.be3271a","type":"change","z":"91448cef.2efc9","name":"machine id, action","rules":[{"t":"set","p":"payload","pt":"msg","to":"000149287451","tot":"str"},{"t":"set","p":"action","pt":"msg","to":"{\"deviceName\":\"hkMiele\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":249,"y":740,"wires":[["bba95584.0ba288"]]},{"id":"47b32910.93a498","type":"json","z":"ad607e01.511ea","name":"","property":"payload","action":"obj","pretty":false,"x":399,"y":108,"wires":[["f7de50c4.54625"]]},{"id":"7ab1b56e.a9c78c","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":94,"y":821,"wires":[["c54123db.3130e"]]},{"id":"c54123db.3130e","type":"change","z":"91448cef.2efc9","name":"machine id, action","rules":[{"t":"set","p":"payload","pt":"msg","to":"000149287451","tot":"str"},{"t":"set","p":"action","pt":"msg","to":"{\"processAction\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":249,"y":821,"wires":[["6f3d8c02.c4ff64"]]},{"id":"7f9fee0b.c9bac","type":"comment","z":"91448cef.2efc9","name":"both commands throw error 204 without error message although action was performed succesfully","info":"","x":910,"y":706,"wires":[]},{"id":"e44fd735.4b89a8","type":"switch","z":"24092027.ab82","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":774,"y":143,"wires":[["ccdd1aa3.d7afe8","430fd0da.a6602"],["32c1a07f.b3aaa"]]},{"id":"32c1a07f.b3aaa","type":"function","z":"24092027.ab82","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":934,"y":223,"wires":[["afceb2f2.d18f3"]]},{"id":"afceb2f2.d18f3","type":"template","z":"24092027.ab82","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":1081,"y":223,"wires":[[]]},{"id":"ccdd1aa3.d7afe8","type":"template","z":"24092027.ab82","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":1091,"y":183,"wires":[[]]},{"id":"4400b51a.44eacc","type":"template","z":"24092027.ab82","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":360,"y":258,"wires":[[]]},{"id":"85119bed.21b168","type":"function","z":"24092027.ab82","name":"verify input","func":"// verify bearer & msg properties\nif (!msg.username) {\n    node.error('msg.username not defined', msg)\n    return [null, {payload:'msg.username not defined'}]\n}\nif (!msg.password){\n    node.error('msg.password not defined', msg)\n    return [null, {payload:\"msg.password not definedd\"}]\n}\nif (!msg.clientId){\n    node.error('msg.clientId not defined', msg)\n    return [null, {payload:\"msg.clientId not defined\"}]\n}\nif (!msg.clientSecret){\n    node.error('msg.clientSecret not defined', msg)\n    return [null, {payload:\"msg.clientSecret not defined\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":160,"y":63,"wires":[["7742f9f5.4a43e8"],["4400b51a.44eacc"]]},{"id":"994c115f.0117b","type":"template","z":"24092027.ab82","name":"create body new","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"grant_type=password&username={{username}}&password={{password}}&client_id={{clientId}}&client_secret={{clientSecret}}&vg={{vg}}","output":"str","x":527,"y":103,"wires":[["a1d20301.4f124"]]},{"id":"a1d20301.4f124","type":"change","z":"24092027.ab82","name":"define url, headers","rules":[{"t":"set","p":"url","pt":"msg","to":"https://api.mcs3.miele.com/thirdparty/token/","tot":"str"},{"t":"set","p":"headers","pt":"msg","to":"{\"Content-Type\":\"application/x-www-form-urlencoded\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":754,"y":63,"wires":[["d782c3de.6219"]]},{"id":"d782c3de.6219","type":"http request","z":"24092027.ab82","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":774,"y":103,"wires":[["e44fd735.4b89a8"]]},{"id":"98c0b90e.acfad8","type":"comment","z":"24092027.ab82","name":"Miele only supports form encoded","info":"","x":530,"y":23,"wires":[]},{"id":"430fd0da.a6602","type":"change","z":"24092027.ab82","name":"","rules":[{"t":"set","p":"system_bearerMiele","pt":"global","to":"payload.access_token","tot":"msg"},{"t":"set","p":"system_refreshMiele","pt":"global","to":"payload.refresh_token","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1001,"y":136,"wires":[[]]},{"id":"6fe89867.753478","type":"template","z":"24092027.ab82","name":"create body refresh","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"grant_type=refresh_token&refresh_token={{global.system_refreshMiele}}&client_id={{clientId}}&client_secret={{clientSecret}}&vg={{vg}}","output":"str","x":537,"y":63,"wires":[["a1d20301.4f124"]]},{"id":"cbba5ff0.57a32","type":"switch","z":"24092027.ab82","name":"","property":"doRefresh","propertyType":"env","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":360,"y":103,"wires":[["6fe89867.753478"],["994c115f.0117b"]]},{"id":"16aae61e.bf794a","type":"sonos-get-status","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"","x":1030,"y":1340,"wires":[["41fe655a.93240c"]]},{"id":"d58d4f4e.a63f3","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get_state","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":840,"y":1340,"wires":[["16aae61e.bf794a"]]},{"id":"41fe655a.93240c","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1200,"y":1340,"wires":[]},{"id":"baaae8c8.cc20a8","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"activate_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":40,"wires":[["22058463.00a99c"]]},{"id":"8030db3.65af728","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"2","payload":"play_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":74,"wires":[["22058463.00a99c"]]},{"id":"bdda6a1f.29d1f8","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"00:01:00","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":108,"wires":[["22058463.00a99c"]]},{"id":"f742a485.3ff128","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"NORMAL","payload":"set_queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":141,"wires":[["22058463.00a99c"]]},{"id":"550a8a3f.cfb914","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"SHUFFLE","payload":"set_queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":149,"y":174,"wires":[["22058463.00a99c"]]},{"id":"b65db428.753988","type":"inject","z":"314a1b14.9fc2a4","name":"insert_uri http","topic":"https://archive.org/download/testmp3testfile/mpthreetest.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":208,"wires":[["22058463.00a99c"]]},{"id":"75be372e.5d3338","type":"inject","z":"314a1b14.9fc2a4","name":"insert_uri Music Library - song","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":159,"y":240,"wires":[["22058463.00a99c"]]},{"id":"66aaed4b.2b7454","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"SonosMix","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":274,"wires":[["22058463.00a99c"]]},{"id":"22058463.00a99c","type":"sonos-manage-queue","z":"314a1b14.9fc2a4","confignode":"32a98882.56e1c8","name":"Client","x":470,"y":200,"wires":[["51607e2c.4d0a3"]]},{"id":"51607e2c.4d0a3","type":"debug","z":"314a1b14.9fc2a4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":506,"y":240,"wires":[]},{"id":"f23f75ac.a22ce8","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"flush_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":450,"y":40,"wires":[["22058463.00a99c"]]},{"id":"dd246d69.fa8e8","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"2","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":461,"y":73,"wires":[["22058463.00a99c"]]},{"id":"10c3f280.a1360e","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"first","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":471,"y":106,"wires":[["22058463.00a99c"]]},{"id":"13fa9bbd.26ca14","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"last","payload":"remove_song","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":472,"y":139,"wires":[["22058463.00a99c"]]},{"id":"fc4d3b3e.4d4848","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":320,"wires":[["22058463.00a99c"]]},{"id":"55ae4268.f1c01c","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":353,"wires":[["22058463.00a99c"]]},{"id":"16d24fec.41159","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_state","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":460,"wires":[["dd881f8e.f08cb"]]},{"id":"dd881f8e.f08cb","type":"sonos-get-status","z":"314a1b14.9fc2a4","confignode":"32a98882.56e1c8","name":"","x":533,"y":573,"wires":[["ea00a675.372a48"]]},{"id":"fde9306d.6821f","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_basics","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":92,"y":428,"wires":[["dd881f8e.f08cb"]]},{"id":"a6e8ed0d.6cbcd","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":598,"wires":[["dd881f8e.f08cb"]]},{"id":"70598857.4097a8","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_songinfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":631,"wires":[["dd881f8e.f08cb"]]},{"id":"856892a8.2dd0e","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_mediainfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":663,"wires":[["dd881f8e.f08cb"]]},{"id":"f5848401.764408","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_positioninfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":695,"wires":[["dd881f8e.f08cb"]]},{"id":"8b78bdf7.9dad7","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":492,"wires":[["dd881f8e.f08cb"]]},{"id":"eb10ce1.8b6383","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_muted","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":524,"wires":[["dd881f8e.f08cb"]]},{"id":"7233706.ce66a9","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_name","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":556,"wires":[["dd881f8e.f08cb"]]},{"id":"3809c15.21c5d3e","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":318,"y":428,"wires":[["dd881f8e.f08cb"]]},{"id":"9b4d8d40.40fb6","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":298,"y":498,"wires":[["dd881f8e.f08cb"]]},{"id":"2d3b316c.bf9cce","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"test_connected","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":428,"wires":[["dd881f8e.f08cb"]]},{"id":"accb1035.cf239","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":308,"y":462,"wires":[["dd881f8e.f08cb"]]},{"id":"121fe0a9.e5124f","type":"change","z":"314a1b14.9fc2a4","name":"get songinfo - warning","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_songinfo","tot":"str"},{"t":"set","p":"suppressWarnings","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":571,"y":508,"wires":[["dd881f8e.f08cb"]]},{"id":"bd1c416d.1c805","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":318,"y":533,"wires":[["dd881f8e.f08cb"]]},{"id":"760933b2.9f827c","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":328,"y":603,"wires":[["dd881f8e.f08cb"]]},{"id":"a69968db.7265b8","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_loudness","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":318,"y":566,"wires":[["dd881f8e.f08cb"]]},{"id":"ea00a675.372a48","type":"debug","z":"314a1b14.9fc2a4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":571,"y":626,"wires":[]},{"id":"39f860eb.8918","type":"inject","z":"314a1b14.9fc2a4","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":512,"y":468,"wires":[["121fe0a9.e5124f"]]},{"id":"754d654d.f646dc","type":"sonos-get-status","z":"314a1b14.9fc2a4","confignode":"8d44022c.adb65","name":"get status living","x":580,"y":720,"wires":[["ea00a675.372a48"]]},{"id":"ec047541.76a8c8","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":338,"y":652,"wires":[["754d654d.f646dc"]]},{"id":"b095aa54.0957d8","type":"inject","z":"314a1b14.9fc2a4","name":"Speech Enhancement","topic":"DialogLevel","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":348,"y":686,"wires":[["754d654d.f646dc"]]},{"id":"b2f0b9dd.0fa098","type":"inject","z":"314a1b14.9fc2a4","name":"Sub Level","topic":"SubGain","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":308,"y":720,"wires":[["754d654d.f646dc"]]},{"id":"2f277ad1.ac7b16","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"00:05:00","payload":"set_sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":180,"wires":[["1f07e058.b720e"]]},{"id":"1f07e058.b720e","type":"sonos-control-player","z":"314a1b14.9fc2a4","confignode":"32a98882.56e1c8","name":"","x":897,"y":234,"wires":[["f8a0df91.08192"]]},{"id":"f8a0df91.08192","type":"debug","z":"314a1b14.9fc2a4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":285,"wires":[]},{"id":"d5cd882e.a57598","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_sonos_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":1140,"wires":[["2b272b5.f3b4ad4"]]},{"id":"2b272b5.f3b4ad4","type":"sonos-manage-queue","z":"314a1b14.9fc2a4","confignode":"32a98882.56e1c8","name":"","x":380,"y":1060,"wires":[["84308891.d383a8"]]},{"id":"84308891.d383a8","type":"debug","z":"314a1b14.9fc2a4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":550,"y":1060,"wires":[]},{"id":"15116e87.801481","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_musiclibrary_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1100,"wires":[["2b272b5.f3b4ad4"]]},{"id":"d5dcda35.d48888","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"s24896","payload":"play_tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":910,"y":560,"wires":[["d4ef0eb0.a0c66"]]},{"id":"b7aba8b1.c0bb78","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payload":"play_httpradio","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":890,"y":597,"wires":[["d4ef0eb0.a0c66"]]},{"id":"d4ef0eb0.a0c66","type":"sonos-manage-radio","z":"314a1b14.9fc2a4","confignode":"32a98882.56e1c8","name":"","x":1170,"y":560,"wires":[["1a043af3.675685"]]},{"id":"1a043af3.675685","type":"debug","z":"314a1b14.9fc2a4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1192,"y":604,"wires":[]},{"id":"9623b610.30b708","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"leave_group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1010,"y":100,"wires":[["58b6c2a5.f9ab6c"]]},{"id":"58b6c2a5.f9ab6c","type":"sonos-control-player","z":"314a1b14.9fc2a4","confignode":"88e9fa70.4a53e8","name":"coordinator","x":1170,"y":100,"wires":[["e73a6a53.77b8d8"]]},{"id":"e73a6a53.77b8d8","type":"debug","z":"314a1b14.9fc2a4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1190,"y":160,"wires":[]},{"id":"c5eda7f4.528658","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"Kche","payload":"join_group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":900,"y":140,"wires":[["58b6c2a5.f9ab6c"]]},{"id":"e59be7f3.c1abe8","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"Bad","payload":"join_group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":680,"y":300,"wires":[["1f07e058.b720e"]]},{"id":"72c44232.f7d0cc","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"","payload":"get_items","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":800,"wires":[["965fc80f.0d07c8"]]},{"id":"965fc80f.0d07c8","type":"sonos-manage-mysonos","z":"314a1b14.9fc2a4","confignode":"32a98882.56e1c8","name":"","x":390,"y":820,"wires":[["7b52ed40.16d7e4"]]},{"id":"7b52ed40.16d7e4","type":"debug","z":"314a1b14.9fc2a4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":450,"y":860,"wires":[]},{"id":"5c41aa29.d0b254","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"Arabella","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":840,"wires":[["965fc80f.0d07c8"]]},{"id":"45841b72.be1234","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"Best of Prime Music","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":147,"y":887,"wires":[["965fc80f.0d07c8"]]},{"id":"605d2347.e4d64c","type":"inject","z":"314a1b14.9fc2a4","name":"insert_uri http","topic":"https://archive.org/download/testmp3testfile/mpthreetest.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1020,"wires":[["2b272b5.f3b4ad4"]]},{"id":"c966f483.7acb58","type":"inject","z":"314a1b14.9fc2a4","name":"insert_uri Music Library - song","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":1060,"wires":[["2b272b5.f3b4ad4"]]},{"id":"7535b2af.8e26cc","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"SonosMix","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":1180,"wires":[["2b272b5.f3b4ad4"]]},{"id":"79d1aea5.1d3aa","type":"inject","z":"314a1b14.9fc2a4","name":"ML10CC:insert_musiclibrary_playlist","topic":"ML10CC","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":1220,"wires":[["2b272b5.f3b4ad4"]]},{"id":"82007297.d7f71","type":"inject","z":"314a1b14.9fc2a4","name":"","topic":"Thriller","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":190,"y":920,"wires":[["965fc80f.0d07c8"]]},{"id":"e7b19e1d.5d00a","type":"sonos-control-player","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"bath","x":370,"y":1480,"wires":[["8b3141c9.8f74f"]]},{"id":"932e3c44.97da","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"lab_function","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":1480,"wires":[["e7b19e1d.5d00a"]]},{"id":"8b3141c9.8f74f","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":590,"y":1480,"wires":[]},{"id":"9bd80b5f.452a68","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"lab_function","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1540,"wires":[["5fdc8c84.8a4d44"]]},{"id":"5fdc8c84.8a4d44","type":"sonos-control-player","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"coor","x":370,"y":1540,"wires":[["8b3141c9.8f74f"]]},{"id":"5f23b38.15ec94c","type":"sonos-get-status","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":230,"y":1640,"wires":[["5c04ec83.db6924"]]},{"id":"186d6e78.944262","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"lab","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1640,"wires":[["5f23b38.15ec94c"]]},{"id":"5c04ec83.db6924","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":400,"y":1640,"wires":[]},{"id":"ce9af637.5002d8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_sonos_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":424,"y":1381,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"6533f76b.03c628","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get_musiclibrary_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":384,"y":1415,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"8722cd32.1fa46","type":"comment","z":"405b0e15.987b5","name":"Basics: playerName, volume, sameVolume - all optional","info":"","x":205,"y":423,"wires":[]},{"id":"5913b0e7.4e005","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but negative","rules":[{"t":"set","p":"volume","pt":"msg","to":"-20","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":841,"wires":[["ec89cc15.4290d"]]},{"id":"ec89cc15.4290d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":1200,"y":492,"wires":[["d82bbbf0.10b338"]]},{"id":"d82bbbf0.10b338","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1210,"y":455,"wires":[]},{"id":"1ffd9830.ec71b8","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but 0","rules":[{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":873,"wires":[["ec89cc15.4290d"]]},{"id":"35faf3a3.de329c","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but 100","rules":[{"t":"set","p":"volume","pt":"msg","to":"100","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":905,"wires":[["ec89cc15.4290d"]]},{"id":"a833b530.6713b8","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but empty","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":937,"wires":[["ec89cc15.4290d"]]},{"id":"55ef2881.06c478","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but digital and letter","rules":[{"t":"set","p":"volume","pt":"msg","to":"3x","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":969,"wires":[["ec89cc15.4290d"]]},{"id":"8954dadd.55f548","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but text","rules":[{"t":"set","p":"volume","pt":"msg","to":"hello","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":1001,"wires":[["ec89cc15.4290d"]]},{"id":"c72353ac.cc08d","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but .","rules":[{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":".","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":1033,"wires":[["ec89cc15.4290d"]]},{"id":"5240bf47.043fc","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":492,"wires":[["525370cd.abe1"]]},{"id":"525370cd.abe1","type":"change","z":"405b0e15.987b5","name":"wrong volume - but boolean","rules":[{"t":"set","p":"volume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":364,"y":492,"wires":[["ec89cc15.4290d"]]},{"id":"bcccdf9.be39c2","type":"change","z":"405b0e15.987b5","name":"wrong volume - but JSON","rules":[{"t":"set","p":"volume","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":355,"y":524,"wires":[["ec89cc15.4290d"]]},{"id":"b4b269f0.1aa7f8","type":"change","z":"405b0e15.987b5","name":"wrong volume - but timestamp","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":374,"y":556,"wires":[["ec89cc15.4290d"]]},{"id":"9fadd5a8.3857c8","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but 0","rules":[{"t":"set","p":"volume","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":598,"wires":[["ec89cc15.4290d"]]},{"id":"fc66c449.e0eb78","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but -5","rules":[{"t":"set","p":"volume","pt":"msg","to":"-5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":630,"wires":[["ec89cc15.4290d"]]},{"id":"da13c3fc.1c5bc","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but 100","rules":[{"t":"set","p":"volume","pt":"msg","to":"100","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":662,"wires":[["ec89cc15.4290d"]]},{"id":"cbdbaf6.23a935","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but 1.1","rules":[{"t":"set","p":"volume","pt":"msg","to":"1.1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":694,"wires":[["ec89cc15.4290d"]]},{"id":"2df6203e.1bff4","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but 10.20","rules":[{"t":"set","p":"volume","pt":"msg","to":"10.20","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":726,"wires":[["ec89cc15.4290d"]]},{"id":"83eeb43b.415378","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":391,"y":758,"wires":[["ec89cc15.4290d"]]},{"id":"ff664a1e.3e6338","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":809,"wires":[["ec89cc15.4290d"]]},{"id":"1af40005.9bd39","type":"comment","z":"405b0e15.987b5","name":"volume","info":"","x":90,"y":458,"wires":[]},{"id":"1b8c8042.f4546","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but boolean","rules":[{"t":"set","p":"playerName","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":986,"y":636,"wires":[["ec89cc15.4290d"]]},{"id":"79b0c290.63eaec","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but JSON","rules":[{"t":"set","p":"playerName","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":986,"y":668,"wires":[["ec89cc15.4290d"]]},{"id":"9872b6f8.387178","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but timestamp","rules":[{"t":"set","p":"playerName","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":996,"y":700,"wires":[["ec89cc15.4290d"]]},{"id":"ef0d807.b9ff58","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but number","rules":[{"t":"set","p":"playerName","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":985,"y":732,"wires":[["ec89cc15.4290d"]]},{"id":"834cab61.d72528","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string but empty","rules":[{"t":"set","p":"playerName","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1006,"y":764,"wires":[["ec89cc15.4290d"]]},{"id":"6a81463f.ae85b8","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string but xxx","rules":[{"t":"set","p":"playerName","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":996,"y":796,"wires":[["ec89cc15.4290d"]]},{"id":"cf992380.a74fa","type":"comment","z":"405b0e15.987b5","name":"playerName","info":"","x":746,"y":601,"wires":[]},{"id":"fe42c076.54c0f","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but string","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":986,"y":873,"wires":[["ec89cc15.4290d"]]},{"id":"93c379c8.a09d78","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but JSON","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":986,"y":905,"wires":[["ec89cc15.4290d"]]},{"id":"c812b0e7.50966","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but timestamp","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":996,"y":937,"wires":[["ec89cc15.4290d"]]},{"id":"a43b74d.bb1d988","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but number","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":986,"y":969,"wires":[["ec89cc15.4290d"]]},{"id":"e1a43d1.a122bc","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string but empty","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1006,"y":1001,"wires":[["ec89cc15.4290d"]]},{"id":"d5a3125b.e29c3","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string but xxx","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":996,"y":1033,"wires":[["ec89cc15.4290d"]]},{"id":"5bcffcf0.b7caa4","type":"comment","z":"405b0e15.987b5","name":"sameVolume","info":"","x":746,"y":840,"wires":[]},{"id":"94e0a41f.c38288","type":"comment","z":"405b0e15.987b5","name":"SUCCESS SUCCESS SUCCESS","info":"","x":145,"y":1803,"wires":[]},{"id":"1c957790.d44598","type":"change","z":"405b0e15.987b5","name":"volume string 30, sameVolume missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":1878,"wires":[["405d1b34.ef7614"]]},{"id":"b0c9da96.fec0b8","type":"change","z":"405b0e15.987b5","name":"volume number 12, sameVolume missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"12","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":401,"y":1910,"wires":[["405d1b34.ef7614"]]},{"id":"e394c644.9a6a78","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"num"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":391,"y":1942,"wires":[["405d1b34.ef7614"]]},{"id":"77ac95f8.95f24c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume false","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":391,"y":1974,"wires":[["405d1b34.ef7614"]]},{"id":"62df47f3.957b58","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Bad","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":431,"y":2012,"wires":[["405d1b34.ef7614"]]},{"id":"335dc449.e3916c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Wohnzimmer","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":461,"y":2044,"wires":[["405d1b34.ef7614"]]},{"id":"d806c9f8.804ab8","type":"comment","z":"99e6906e.c69df","name":"UNIVERSAL: Group based & SONOS player name ","info":"","x":195,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"92452937.a71ce8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":88,"wires":[["16182df1.06e562"]]},{"id":"88f1aa5a.e99258","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"toggle.playback","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":120,"wires":[["16182df1.06e562"]]},{"id":"975d8d1c.3aa88","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"stop","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":153,"wires":[["16182df1.06e562"]]},{"id":"5e28b483.ab0fac","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"next.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":186,"wires":[["16182df1.06e562"]]},{"id":"3b8f19e6.b8fa86","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"previous.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":219,"wires":[["16182df1.06e562"]]},{"id":"95eac179.184b6","type":"inject","z":"99e6906e.c69df","name":"play.notification","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":481,"wires":[["f39fd4c6.c693d8"]]},{"id":"f39fd4c6.c693d8","type":"change","z":"99e6906e.c69df","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":295,"y":481,"wires":[["16182df1.06e562"]]},{"id":"1d89f0f8.dc229f","type":"inject","z":"99e6906e.c69df","name":"","topic":"12","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":251,"wires":[["16182df1.06e562"]]},{"id":"16182df1.06e562","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","name":"living - not coordinator","x":502,"y":283,"wires":[["253e6e0f.936ce2"]]},{"id":"b5ad35e.9695fc8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.playbackstate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":335,"y":100,"wires":[["16182df1.06e562"]]},{"id":"9b60bae5.777068","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":335,"y":132,"wires":[["16182df1.06e562"]]},{"id":"7c1ccbb4.1d5e84","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.role","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":326,"y":164,"wires":[["16182df1.06e562"]]},{"id":"453e8b30.866a84","type":"inject","z":"99e6906e.c69df","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":263,"y":371,"wires":[["16182df1.06e562"]]},{"id":"af55f14f.61f45","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":102,"y":404,"wires":[["47f21f5b.ea2e2"]]},{"id":"47f21f5b.ea2e2","type":"change","z":"99e6906e.c69df","name":"volume 30","rules":[{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":252,"y":404,"wires":[["16182df1.06e562"]]},{"id":"9bbcc937.1cb818","type":"comment","z":"99e6906e.c69df","name":"stream","info":"","x":93,"y":370,"wires":[],"icon":"node-red/alert.svg"},{"id":"fdb85b79.0837d8","type":"inject","z":"99e6906e.c69df","name":"joiner.play.notification","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":513,"wires":[["936341a0.c643"]]},{"id":"936341a0.c643","type":"change","z":"99e6906e.c69df","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":332,"y":513,"wires":[["173eec81.585413"]]},{"id":"eec9246d.1f2648","type":"comment","z":"99e6906e.c69df","name":"Spotify","info":"","x":750,"y":54,"wires":[]},{"id":"812b072a.612888","type":"inject","z":"99e6906e.c69df","name":"","topic":"Best of Prime Music","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1180,"y":268,"wires":[["a9db5d2e.1926f"]]},{"id":"dbeacf68.35cd2","type":"inject","z":"99e6906e.c69df","name":"","topic":"Arabella","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":372,"wires":[["a9db5d2e.1926f"]]},{"id":"c19f8b36.fb3cb8","type":"inject","z":"99e6906e.c69df","name":"","topic":"Bayern 3","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":406,"wires":[["609118f6.681228"]]},{"id":"609118f6.681228","type":"change","z":"99e6906e.c69df","name":"volume 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":969,"y":406,"wires":[["a9db5d2e.1926f"]]},{"id":"c60888ce.468e98","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1311,"y":103,"wires":[]},{"id":"441199c5.cca368","type":"comment","z":"99e6906e.c69df","name":"TuneIn","info":"","x":750,"y":338,"wires":[]},{"id":"4bdcb794.3ff248","type":"inject","z":"99e6906e.c69df","name":"","topic":"20 Jahre Napster","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":261,"wires":[["a9db5d2e.1926f"]]},{"id":"7bdf6ae8.a8a724","type":"comment","z":"99e6906e.c69df","name":"Napster","info":"","x":750,"y":161,"wires":[]},{"id":"d4ade2e6.5e6e9","type":"comment","z":"99e6906e.c69df","name":"Amazon","info":"","x":1110,"y":201,"wires":[]},{"id":"c3334b98.28bea8","type":"comment","z":"99e6906e.c69df","name":"Radioplayer","info":"","x":1190,"y":420,"wires":[]},{"id":"43251eaa.34532","type":"inject","z":"99e6906e.c69df","name":"","topic":"1A Fitness Hits","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1230,"y":453,"wires":[["a9db5d2e.1926f"]]},{"id":"3fe1fb80.affab4","type":"inject","z":"99e6906e.c69df","name":"","topic":"Daily Mix","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":87,"wires":[["a9db5d2e.1926f"]]},{"id":"49dd186a.e9aa88","type":"inject","z":"99e6906e.c69df","name":"","topic":"Best Of Love","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1160,"y":301,"wires":[["a9db5d2e.1926f"]]},{"id":"15950ef.c9b88f1","type":"inject","z":"99e6906e.c69df","name":"","topic":"GloomySunday","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":121,"wires":[["a9db5d2e.1926f"]]},{"id":"6529fc5b.f5f734","type":"inject","z":"99e6906e.c69df","name":"","topic":"The Best Songs of the ","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":760,"y":294,"wires":[["a9db5d2e.1926f"]]},{"id":"4c48dc51.243ca4","type":"inject","z":"99e6906e.c69df","name":"","topic":"Dust in the Wind","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":195,"wires":[["a9db5d2e.1926f"]]},{"id":"80dc1753.f96bd8","type":"inject","z":"99e6906e.c69df","name":"","topic":"The Best Of Sade","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":228,"wires":[["a9db5d2e.1926f"]]},{"id":"bfe6d4e7.250c38","type":"inject","z":"99e6906e.c69df","name":"","topic":"Blowin' in the Wind","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1180,"y":235,"wires":[["a9db5d2e.1926f"]]},{"id":"a9db5d2e.1926f","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":1092,"y":154,"wires":[["1b806e1c.605952","c60888ce.468e98"]]},{"id":"1b806e1c.605952","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","name":"any","x":1250,"y":154,"wires":[["c60888ce.468e98"]]},{"id":"33feb94f.e7cf76","type":"comment","z":"99e6906e.c69df","name":"MY SONOS with UNIVERSAL","info":"","x":789,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"1903850c.428b8b","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.items","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":994,"y":50,"wires":[["831ff605.9a9f98"]]},{"id":"831ff605.9a9f98","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":1164,"y":50,"wires":[["c60888ce.468e98"]]},{"id":"2fcf04cb.93592c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":55,"wires":[["ffeb7ac3.578f98"]]},{"id":"ffeb7ac3.578f98","type":"change","z":"99e6906e.c69df","name":"player Bad, same volume","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":55,"wires":[["16182df1.06e562"]]},{"id":"54cc19fe.c61ca8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":291,"wires":[["16182df1.06e562"]]},{"id":"41fde303.97545c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":325,"wires":[["d39a9106.99993"]]},{"id":"d39a9106.99993","type":"change","z":"99e6906e.c69df","name":"play.queue, vol. 30","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.queue","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":325,"wires":[["16182df1.06e562"]]},{"id":"7789ab79.2f0354","type":"comment","z":"99e6906e.c69df","name":"queue","info":"","x":90,"y":292,"wires":[],"icon":"node-red/alert.svg"},{"id":"46ee7875.108758","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":730,"y":312,"wires":[["40a60a57.8c31e4"]]},{"id":"8e154c8a.8533a","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":296,"wires":[["47b4da16.908d54"]]},{"id":"15624fbc.1cdbe","type":"comment","z":"405b0e15.987b5","name":"No Ip && invalid serial","info":"","x":140,"y":262,"wires":[]},{"id":"6ea8dfec.5079e","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":131,"wires":[["2c2cd61e.343cba"]]},{"id":"a3eb53b0.a010e","type":"comment","z":"405b0e15.987b5","name":"Invalid ip: from fritzbox","info":"","x":143,"y":97,"wires":[]},{"id":"69a91786.ce6b18","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":213,"wires":[["2d69512a.43bb6e"]]},{"id":"6dbddecf.92143","type":"comment","z":"405b0e15.987b5","name":"Invalid ip address - wrong syntax","info":"","x":170,"y":178,"wires":[]},{"id":"f61cc5e4.1a00a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":379,"wires":[["23162a8.e7dc6d6"]]},{"id":"8699983a.eb0458","type":"comment","z":"405b0e15.987b5","name":"No ip && valid serial - WILL WORK!","info":"","x":181,"y":344,"wires":[]},{"id":"a30879a7.772fb8","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":730,"y":346,"wires":[["d8a671fa.965e9"]]},{"id":"d8a671fa.965e9","type":"function","z":"405b0e15.987b5","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":852,"y":346,"wires":[["40a60a57.8c31e4"]]},{"id":"7c4c0a10.483354","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":729,"y":382,"wires":[["a4087202.20aec"]]},{"id":"a4087202.20aec","type":"function","z":"405b0e15.987b5","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":851,"y":382,"wires":[["40a60a57.8c31e4"]]},{"id":"4d33ff2b.a2a25","type":"inject","z":"405b0e15.987b5","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":760,"y":277,"wires":[["40a60a57.8c31e4"]]},{"id":"22f69f98.77d5c","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1050,"y":277,"wires":[]},{"id":"d7adcafd.de0038","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":471,"y":213,"wires":[]},{"id":"b091e82.57ec718","type":"comment","z":"405b0e15.987b5","name":"Network and commands","info":"","x":115,"y":57,"wires":[]},{"id":"2c2cd61e.343cba","type":"sonos-universal","z":"405b0e15.987b5","confignode":"9037fbab.1d8408","name":"fritzbox","x":221,"y":131,"wires":[["d7adcafd.de0038"]]},{"id":"2d69512a.43bb6e","type":"sonos-universal","z":"405b0e15.987b5","confignode":"64704482.34d37c","name":"ip with wrong syntax","x":260,"y":213,"wires":[["d7adcafd.de0038"]]},{"id":"40a60a57.8c31e4","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"any1","x":990,"y":317,"wires":[["22f69f98.77d5c"]]},{"id":"47b4da16.908d54","type":"sonos-universal","z":"405b0e15.987b5","confignode":"ff297616.de3c88","name":"no ip && wrong serial","x":259,"y":296,"wires":[["d7adcafd.de0038"]]},{"id":"23162a8.e7dc6d6","type":"sonos-universal","z":"405b0e15.987b5","confignode":"c747354a.95e5e8","name":"no ip but correct serial number","x":292,"y":379,"wires":[["d7adcafd.de0038"]]},{"id":"fbbe37f9.ec80e8","type":"comment","z":"405b0e15.987b5","name":"FAILURE FAILURE FAILURE FAILURE","info":"","x":155,"y":20,"wires":[]},{"id":"405d1b34.ef7614","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"any2","x":1000,"y":2110,"wires":[["3aaebcd9.9ca424"]]},{"id":"3aaebcd9.9ca424","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1024,"y":2072,"wires":[]},{"id":"9d140217.b47b5","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":1878,"wires":[["6f9edaf5.1a2804"]]},{"id":"6f9edaf5.1a2804","type":"change","z":"405b0e15.987b5","name":"player.get.volume Kche","rules":[{"t":"set","p":"payload","pt":"msg","to":"player.get.volume","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Kche","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":954,"y":1878,"wires":[["405d1b34.ef7614"]]},{"id":"b30a23b6.b7d41","type":"change","z":"405b0e15.987b5","name":"player.get.volume Wohnzimmer","rules":[{"t":"set","p":"payload","pt":"msg","to":"player.get.volume","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":974,"y":1911,"wires":[["405d1b34.ef7614"]]},{"id":"8614b4a2.7e5e28","type":"change","z":"405b0e15.987b5","name":"player.get.volume Bad","rules":[{"t":"set","p":"payload","pt":"msg","to":"player.get.volume","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":944,"y":1944,"wires":[["405d1b34.ef7614"]]},{"id":"6b9376ef.17cd08","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":1911,"wires":[["b30a23b6.b7d41"]]},{"id":"b51e15d2.f53e48","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":1944,"wires":[["8614b4a2.7e5e28"]]},{"id":"aba4d4d7.178b68","type":"comment","z":"405b0e15.987b5","name":"play.notifcation","info":"","x":120,"y":1086,"wires":[]},{"id":"714d9e9e.10685","type":"comment","z":"99e6906e.c69df","name":"notification","info":"","x":100,"y":447,"wires":[],"icon":"node-red/alert.svg"},{"id":"173eec81.585413","type":"sonos-universal","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","name":"joiner","x":473,"y":513,"wires":[["17d641b5.8acd1e"]]},{"id":"253e6e0f.936ce2","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":493,"y":247,"wires":[]},{"id":"17d641b5.8acd1e","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":490,"y":475,"wires":[]},{"id":"32f4d00a.54695","type":"inject","z":"99e6906e.c69df","name":"","topic":"DialogLevel","payload":"set_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":989,"wires":[[]]},{"id":"d9bd2fe.3f22dd","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"flush_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1371,"wires":[["ee6945bc.9041e8"]]},{"id":"7d288f4d.cfe58","type":"change","z":"405b0e15.987b5","name":"play.queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":452,"y":1371,"wires":[["bd69f167.291ad"]]},{"id":"8d7daf16.7137c","type":"comment","z":"405b0e15.987b5","name":"play.queue with empty queue","info":"","x":160,"y":1337,"wires":[]},{"id":"ee6945bc.9041e8","type":"sonos-manage-queue","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":280,"y":1371,"wires":[["7d288f4d.cfe58"]]},{"id":"bd69f167.291ad","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":604,"y":1371,"wires":[["939badd3.96142"]]},{"id":"939badd3.96142","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":738,"y":1371,"wires":[]},{"id":"310bf27f.6ac1ae","type":"comment","z":"405b0e15.987b5","name":"play.tunein","info":"","x":100,"y":1436,"wires":[]},{"id":"d8e94884.e6a4d8","type":"inject","z":"405b0e15.987b5","name":"TuneIn wrong syntax","topic":"x1324","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1472,"wires":[["ae162836.4cf128"]]},{"id":"4701316e.f4fcb","type":"inject","z":"405b0e15.987b5","name":"TuneIn wrong syntax","topic":"1234","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1504,"wires":[["ae162836.4cf128"]]},{"id":"95f36a14.a0c4c8","type":"inject","z":"405b0e15.987b5","name":"TuneIn wrong syntax","topic":"s234b","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1536,"wires":[["ae162836.4cf128"]]},{"id":"ae162836.4cf128","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":321,"y":1504,"wires":[["9d03522b.25c0d"]]},{"id":"9d03522b.25c0d","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":455,"y":1504,"wires":[]},{"id":"cf6e211f.ed38","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":940,"y":1280,"wires":[["fac63c2e.2a50d"]]},{"id":"fac63c2e.2a50d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"","x":1140,"y":1240,"wires":[["ac47b548.bb4608"]]},{"id":"ac47b548.bb4608","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":750,"y":1120,"wires":[]},{"id":"8008d1e7.5e594","type":"inject","z":"405b0e15.987b5","name":"","topic":"xxxxx","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":940,"y":1198,"wires":[["fac63c2e.2a50d"]]},{"id":"51b3182a.7150a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.mp","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":920,"y":1166,"wires":[["fac63c2e.2a50d"]]},{"id":"589aeb79.ba1484","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"","x":540,"y":1120,"wires":[["ac47b548.bb4608"]]},{"id":"d8002769.a7c318","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"00:00:0x","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":327,"y":1184,"wires":[["589aeb79.ba1484"]]},{"id":"42698402.2e609c","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0y:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":327,"y":1217,"wires":[["589aeb79.ba1484"]]},{"id":"98c6f099.1f4ba","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":327,"y":1249,"wires":[["589aeb79.ba1484"]]},{"id":"f5e5d8ed.0f81a8","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0:0:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":327,"y":1281,"wires":[["589aeb79.ba1484"]]},{"id":"838e2878.592fd8","type":"change","z":"405b0e15.987b5","name":"duration - boolean","rules":[{"t":"set","p":"duration","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":317,"y":1120,"wires":[["589aeb79.ba1484"]]},{"id":"884e560.861eba8","type":"change","z":"405b0e15.987b5","name":"duration - number","rules":[{"t":"set","p":"duration","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":318,"y":1152,"wires":[["589aeb79.ba1484"]]},{"id":"7d4d2d0c.592394","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1120,"wires":[["d8002769.a7c318","42698402.2e609c","98c6f099.1f4ba","f5e5d8ed.0f81a8","838e2878.592fd8","884e560.861eba8"]]},{"id":"c71ec1c.6cbb74","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1280,"wires":[["d8002769.a7c318","42698402.2e609c","98c6f099.1f4ba","f5e5d8ed.0f81a8","838e2878.592fd8","884e560.861eba8"]]},{"id":"6b4b84a6.2ae86c","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.mp4","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":940,"y":1312,"wires":[["fac63c2e.2a50d"]]},{"id":"af8776db.d19ad8","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.aac","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":960,"y":1344,"wires":[["fac63c2e.2a50d"]]},{"id":"11214f83.e8d74","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.flac","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":940,"y":1376,"wires":[["fac63c2e.2a50d"]]},{"id":"33ace11a.e1613e","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.m4a","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":940,"y":1408,"wires":[["fac63c2e.2a50d"]]},{"id":"2dff2c1f.b72864","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.ogg","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":940,"y":1440,"wires":[["fac63c2e.2a50d"]]},{"id":"6d413ae6.b8b044","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.asf","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":959,"y":1472,"wires":[["fac63c2e.2a50d"]]},{"id":"deee1f01.2999e","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.wma","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":940,"y":1504,"wires":[["fac63c2e.2a50d"]]},{"id":"cc39110a.1e83b","type":"comment","z":"405b0e15.987b5","name":"will work but not play","info":"","x":910,"y":1240,"wires":[]},{"id":"db945235.1367a","type":"comment","z":"405b0e15.987b5","name":"next previous - switch to stream to test","info":"","x":190,"y":1600,"wires":[]},{"id":"e031e20c.374b8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"next.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":1635,"wires":[["ae162836.4cf128"]]},{"id":"4187e914.5f9c98","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"previous.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1668,"wires":[["ae162836.4cf128"]]},{"id":"486fc26d.27d13c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":1640,"wires":[["9e5e352e.fd5368"]]},{"id":"9e5e352e.fd5368","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":1080,"y":1700,"wires":[[]]},{"id":"6dd36199.39de5","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":524.5,"wires":[["bcccdf9.be39c2"]]},{"id":"c0d6e696.8a94a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":557,"wires":[["b4b269f0.1aa7f8"]]},{"id":"17c84f76.837541","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":598,"wires":[["9fadd5a8.3857c8"]]},{"id":"be0b7ad2.6d65f8","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":630,"wires":[["fc66c449.e0eb78"]]},{"id":"8ca90867.418be8","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":662,"wires":[["da13c3fc.1c5bc"]]},{"id":"1d6663a5.2d36bc","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":694,"wires":[["cbdbaf6.23a935"]]},{"id":"6073330.8a18dcc","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":726,"wires":[["2df6203e.1bff4"]]},{"id":"a733eb78.fe3898","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":758,"wires":[["83eeb43b.415378"]]},{"id":"d49eaaeb.7fa568","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":809,"wires":[["ff664a1e.3e6338"]]},{"id":"cea6a57a.491368","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":841,"wires":[["5913b0e7.4e005"]]},{"id":"4d4786af.b1c098","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":873,"wires":[["1ffd9830.ec71b8"]]},{"id":"9eb7063b.0e1108","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":905,"wires":[["35faf3a3.de329c"]]},{"id":"6a13bb74.5c90b4","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":937,"wires":[["a833b530.6713b8"]]},{"id":"e80a0639.757868","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":969,"wires":[["55ef2881.06c478"]]},{"id":"d302b0a2.6397","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":131,"y":1034,"wires":[["c72353ac.cc08d"]]},{"id":"28507a27.895196","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":131,"y":1002,"wires":[["8954dadd.55f548"]]},{"id":"ffcc0c9.52f51f","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":636,"wires":[["1b8c8042.f4546"]]},{"id":"f752e536.b630f8","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":668,"wires":[["79b0c290.63eaec"]]},{"id":"672bd93f.a3d578","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":700,"wires":[["9872b6f8.387178"]]},{"id":"20274561.9c3b4a","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":732,"wires":[["ef0d807.b9ff58"]]},{"id":"367792e3.bfe2ce","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":764,"wires":[["834cab61.d72528"]]},{"id":"a32c1b6b.566378","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":796,"wires":[["6a81463f.ae85b8"]]},{"id":"7ee7e9d7.f96dc8","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":873,"wires":[["fe42c076.54c0f"]]},{"id":"1609dd98.6e79c2","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":905,"wires":[["93c379c8.a09d78"]]},{"id":"6269dc15.ad4e64","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":937,"wires":[["c812b0e7.50966"]]},{"id":"da24775c.ae7568","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":969,"wires":[["a43b74d.bb1d988"]]},{"id":"37373f1f.be594","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":1001,"wires":[["e1a43d1.a122bc"]]},{"id":"e2dd2c1f.b9488","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":1033,"wires":[["d5a3125b.e29c3"]]},{"id":"c19121d3.96db1","type":"inject","z":"405b0e15.987b5","name":"","topic":"-1","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":1673,"wires":[["9e5e352e.fd5368"]]},{"id":"3345d807.883348","type":"inject","z":"405b0e15.987b5","name":"","topic":"0","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":1706,"wires":[["9e5e352e.fd5368"]]},{"id":"822d5dc0.e1fb9","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":1740,"wires":[["9e5e352e.fd5368"]]},{"id":"2420e27.3add31e","type":"inject","z":"405b0e15.987b5","name":"","topic":"100","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":780,"y":1740,"wires":[["9e5e352e.fd5368"]]},{"id":"4c3d7d99.589f14","type":"inject","z":"405b0e15.987b5","name":"","topic":"3x","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":1640,"wires":[["9e5e352e.fd5368"]]},{"id":"b9a97285.6cebe","type":"inject","z":"405b0e15.987b5","name":"","topic":"hallo","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":780,"y":1673,"wires":[["9e5e352e.fd5368"]]},{"id":"7f1e93ff.4c2fbc","type":"inject","z":"405b0e15.987b5","name":"","topic":".","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":1705,"wires":[["9e5e352e.fd5368"]]},{"id":"b86e7e34.d0e0f","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1878,"wires":[["1c957790.d44598"]]},{"id":"40d7d88c.755228","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1910,"wires":[["b0c9da96.fec0b8"]]},{"id":"2986efa3.54e3b","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1942,"wires":[["e394c644.9a6a78"]]},{"id":"1b629ce5.4bdc33","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1974,"wires":[["77ac95f8.95f24c"]]},{"id":"29696888.eb1358","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":2012,"wires":[["62df47f3.957b58"]]},{"id":"79a1c33e.33e06c","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":2044,"wires":[["335dc449.e3916c"]]},{"id":"a3965646.35b118","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":670,"y":480,"wires":[["3f8f86d5.fca95a"]]},{"id":"3f8f86d5.fca95a","type":"change","z":"405b0e15.987b5","name":"volume missingb but sameVolume true","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":480,"wires":[["ec89cc15.4290d"]]},{"id":"181a89ad.6460c6","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Bad","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":2076,"wires":[["405d1b34.ef7614"]]},{"id":"67b2a46d.59410c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player wohnzimmer","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":2109,"wires":[["405d1b34.ef7614"]]},{"id":"adf541a5.0cb21","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":129,"y":2076,"wires":[["181a89ad.6460c6"]]},{"id":"933cf2b3.63a7f","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":129,"y":2108,"wires":[["67b2a46d.59410c"]]},{"id":"6ad1cfa4.f46fa","type":"inject","z":"405b0e15.987b5","name":"ZAPSPLAT","topic":"https://www.zapsplat.com/wp-content/uploads/2015/sound-effects-the-sound-pack-tree/tspt_pull_bell_02_065.mp3?_=1","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":2213,"wires":[["af708f2c.eb039"]]},{"id":"a75b8773.803058","type":"inject","z":"405b0e15.987b5","name":"soundbible dog","topic":"http://soundbible.com/mp3/labrador-barking-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121,"y":2245,"wires":[["af708f2c.eb039"]]},{"id":"748eb572.94a7dc","type":"inject","z":"405b0e15.987b5","name":"Bell","topic":"http://soundbible.com/mp3/bells-tibetan-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":93,"y":2277,"wires":[["af708f2c.eb039"]]},{"id":"f6442e4b.2ca74","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":103,"y":2341,"wires":[["af708f2c.eb039"]]},{"id":"1676e92a.61efa7","type":"inject","z":"405b0e15.987b5","name":"alarm","topic":"http://soundbible.com/mp3/Fire%20Truck%20Siren-SoundBible.com-642727443.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":93,"y":2309,"wires":[["af708f2c.eb039"]]},{"id":"64ecb30a.571c2c","type":"comment","z":"405b0e15.987b5","name":"play.notification","info":"","x":121,"y":2178,"wires":[]},{"id":"fe7e5f19.c9fa7","type":"comment","z":"405b0e15.987b5","name":"Volume/sameVolume/playerName","info":"","x":180,"y":1840,"wires":[]},{"id":"af708f2c.eb039","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"","x":340,"y":2280,"wires":[[]]},{"id":"de50ea04.b9f108","type":"inject","z":"405b0e15.987b5","name":"ZAPSPLAT","topic":"https://www.zapsplat.com/wp-content/uploads/2015/sound-effects-the-sound-pack-tree/tspt_pull_bell_02_065.mp3?_=1","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":591,"y":2215,"wires":[["3fbf466d.b527ea"]]},{"id":"9ec0b72f.038888","type":"inject","z":"405b0e15.987b5","name":"soundbible dog","topic":"http://soundbible.com/mp3/labrador-barking-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":601,"y":2247,"wires":[["3fbf466d.b527ea"]]},{"id":"9f33e93.bc94618","type":"inject","z":"405b0e15.987b5","name":"Bell","topic":"http://soundbible.com/mp3/bells-tibetan-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":572,"y":2279,"wires":[["3fbf466d.b527ea"]]},{"id":"2b5acb79.a6b7e4","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":582,"y":2343,"wires":[["3fbf466d.b527ea"]]},{"id":"d1fda60.5f5df58","type":"inject","z":"405b0e15.987b5","name":"alarm","topic":"http://soundbible.com/mp3/Fire%20Truck%20Siren-SoundBible.com-642727443.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":572,"y":2311,"wires":[["3fbf466d.b527ea"]]},{"id":"95a74f68.2ef37","type":"comment","z":"405b0e15.987b5","name":"joiner.play.notification","info":"","x":600,"y":2180,"wires":[]},{"id":"3fbf466d.b527ea","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"","x":820,"y":2275,"wires":[[]]},{"id":"aa0091ea.485d1","type":"inject","z":"405b0e15.987b5","name":"joiner ","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":1280,"wires":[["2cc2954d.16586a"]]},{"id":"2cc2954d.16586a","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"coordinator","x":710,"y":1280,"wires":[["939badd3.96142"]]},{"id":"295d9daf.b86d92","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":581,"y":2375,"wires":[["565335ac.1ab00c"]]},{"id":"565335ac.1ab00c","type":"change","z":"405b0e15.987b5","name":"volume string 70","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":741,"y":2375,"wires":[["3fbf466d.b527ea"]]},{"id":"c4a5756d.d6c5b8","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":2373,"wires":[["8113d12b.637c7"]]},{"id":"8113d12b.637c7","type":"change","z":"405b0e15.987b5","name":"volume string 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":2373,"wires":[["af708f2c.eb039"]]},{"id":"6839dba2.9ce034","type":"comment","z":"405b0e15.987b5","name":"Test case: player an / aus und notification spielen","info":"","x":480,"y":2407,"wires":[]},{"id":"fb13005d.4af38","type":"inject","z":"99e6906e.c69df","name":"","topic":"Angi","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":781,"y":500,"wires":[["a9db5d2e.1926f"]]},{"id":"d130c11c.38eb3","type":"comment","z":"99e6906e.c69df","name":"Music Library","info":"","x":752,"y":467,"wires":[],"icon":"node-red/alert.svg"},{"id":"42d34d.81c6bcb4","type":"inject","z":"99e6906e.c69df","name":"","topic":"ML10CC","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":791,"y":535,"wires":[["a9db5d2e.1926f"]]},{"id":"964d4389.6dd4f","type":"comment","z":"775d7a2a.44f234","name":"MANAGE MY SONOS","info":"","x":700,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"d2708f56.3eb55","type":"inject","z":"775d7a2a.44f234","name":"","topic":"ML10CC","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":700,"y":80,"wires":[["7b5ebb93.47be94"]]},{"id":"7b5ebb93.47be94","type":"sonos-manage-mysonos","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":890,"y":80,"wires":[["29abebd9.677b64"]]},{"id":"29abebd9.677b64","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1050,"y":80,"wires":[]},{"id":"396752b0.8ccffe","type":"comment","z":"99e6906e.c69df","name":"Music Library:many playlists!","info":"","x":158,"y":1585,"wires":[]},{"id":"5526f642.063a08","type":"inject","z":"99e6906e.c69df","name":"insert_musiclibrary ...","topic":"ML10CC","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":135,"y":1619,"wires":[["43d126b4.f41448"]]},{"id":"43d126b4.f41448","type":"change","z":"99e6906e.c69df","name":"using msg.size","rules":[{"t":"set","p":"size","pt":"msg","to":"500","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":141,"y":1659,"wires":[["c02b5a3d.f2fbb8"]]},{"id":"aa2e6460.b540a8","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":398,"y":71,"wires":[["e4646c63.7ee1f"]]},{"id":"2a470d1d.b5bc02","type":"comment","z":"4318847d.0693cc","name":"Example 2: Play a (MusicLibrary, Amazon) playlist using My Sonos ","info":"","x":245,"y":160,"wires":[]},{"id":"6bda4392.15afbc","type":"inject","z":"4318847d.0693cc","name":"","topic":"ML10CC","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":200,"wires":[["a12c4300.4a2fa"]]},{"id":"a12c4300.4a2fa","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":371,"y":214,"wires":[["cc0d78f0.3cebb8"]]},{"id":"20f34bd4.e96c84","type":"inject","z":"4318847d.0693cc","name":"","topic":"Best of Prime","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":235,"wires":[["a12c4300.4a2fa"]]},{"id":"17d0af16.8a31a1","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":676,"y":214,"wires":[]},{"id":"cc0d78f0.3cebb8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"32a98882.56e1c8","name":"","x":542,"y":214,"wires":[["17d0af16.8a31a1"]]},{"id":"5fe3a2ed.eb907c","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":390,"y":371,"wires":[["744d729c.ee78dc"]]},{"id":"435d406c.05c4e","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":290,"y":988,"wires":[["25dbf732.65c418"]]},{"id":"48bb69e.93b5998","type":"polly","z":"4318847d.0693cc","name":"","voice":"0","ssml":false,"dir":"overwritten","config":"8945d5a5.31aef8","x":352,"y":1360,"wires":[["751fc24c.5f892c"],[]]},{"id":"47273022.7b687","type":"inject","z":"4318847d.0693cc","name":"weather","topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1315,"wires":[["60d50c04.dc4f34"]]},{"id":"384278f8.a57c98","type":"change","z":"4318847d.0693cc","name":"prepare play notification","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.notification","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"$globalContext('system_baseUrl') & '/notifications/' & topic","tot":"jsonata"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":652,"y":1398,"wires":[["a94b74c4.c18738"]]},{"id":"6dc684d2.01c19c","type":"fs-ops-copy","z":"4318847d.0693cc","name":"","sourcePath":"","sourcePathType":"str","sourceFilename":"file","sourceFilenameType":"msg","destPath":"notification_cache","destPathType":"global","destFilename":"topic","destFilenameType":"msg","link":false,"overwrite":true,"x":596,"y":1356,"wires":[["384278f8.a57c98"]]},{"id":"751fc24c.5f892c","type":"switch","z":"4318847d.0693cc","name":"","property":"_polly.cached","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":468,"y":1362,"wires":[["6dc684d2.01c19c"],["384278f8.a57c98"]]},{"id":"17d3d81e.fd5208","type":"inject","z":"4318847d.0693cc","name":"Caution","topic":"notification_caution.mp3","payload":"Caution Caution Caution","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1347,"wires":[["60d50c04.dc4f34"]]},{"id":"f951db37.428e28","type":"inject","z":"4318847d.0693cc","name":"inform","topic":"notification_inform.mp3","payload":"Please mind your steps","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1380,"wires":[["60d50c04.dc4f34"]]},{"id":"c4e97855.112e88","type":"comment","z":"4318847d.0693cc","name":"Trigger Examples","info":"","x":119,"y":1276,"wires":[]},{"id":"af5b8d26.1705c","type":"comment","z":"4318847d.0693cc","name":"Create/Update mp3 file, create uri and parameter","info":"","x":481,"y":1276,"wires":[]},{"id":"d80a6d67.99515","type":"comment","z":"4318847d.0693cc","name":"Serialize msgs and play notification","info":"","x":1030,"y":1275,"wires":[]},{"id":"63cf7c29.d98064","type":"inject","z":"4318847d.0693cc","name":"Clear storage / cache","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":747,"y":1131,"wires":[["c4a71b8c.25a638","15147b67.cd39d5"]]},{"id":"a8b10427.3fe018","type":"link in","z":"4318847d.0693cc","name":"execute play_notification","links":["a94b74c4.c18738"],"x":904,"y":1315,"wires":[["c6772716.60af68"]]},{"id":"a94b74c4.c18738","type":"link out","z":"4318847d.0693cc","name":"Trigger play_notification","links":["a8b10427.3fe018"],"x":752,"y":1315,"wires":[]},{"id":"c6e721c.1b95de","type":"inject","z":"4318847d.0693cc","name":"set","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1165,"wires":[["6f073a90.08bd84","1e24ff39.4630d1","78ebe214.17527c"]]},{"id":"c5ad62c1.4abfb","type":"comment","z":"4318847d.0693cc","name":"TTS, notification","info":"","x":85,"y":1096,"wires":[]},{"id":"ed11ae49.b8a2d","type":"comment","z":"4318847d.0693cc","name":"Set Up","info":"","x":91,"y":1131,"wires":[]},{"id":"6f073a90.08bd84","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"system_baseUrl","pt":"global","to":"http://192.168.178.49:1880","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1132,"wires":[[]]},{"id":"1e24ff39.4630d1","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"notification_directory","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":306,"y":1164,"wires":[[]]},{"id":"78ebe214.17527c","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"notification_cache","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1196,"wires":[[]]},{"id":"cb99335a.e0a0e","type":"change","z":"4318847d.0693cc","name":"add cache","rules":[{"t":"set","p":"options.dir","pt":"msg","to":"notification_cache","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":605,"y":1314,"wires":[["48bb69e.93b5998"]]},{"id":"a9529c34.96d74","type":"link in","z":"4318847d.0693cc","name":"TTS Execute","links":["18152db0.dc8512","60d50c04.dc4f34","26ac2b2.49d16d4"],"x":315,"y":1314,"wires":[["e9d1d7a9.402848"]]},{"id":"60d50c04.dc4f34","type":"link out","z":"4318847d.0693cc","name":"TTS Trigger","links":["a9529c34.96d74"],"x":207,"y":1314,"wires":[]},{"id":"63902954.cc2b48","type":"comment","z":"4318847d.0693cc","name":"Maintain","info":"","x":554,"y":1132,"wires":[]},{"id":"62c214c3.ab9e3c","type":"fs-ops-delete","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1170,"wires":[[]]},{"id":"c4a71b8c.25a638","type":"fs-ops-dir","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filter":"notification_*.*","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1170,"wires":[["62c214c3.ab9e3c"]]},{"id":"15147b67.cd39d5","type":"fs-ops-dir","z":"4318847d.0693cc","name":"","path":"notification_cache","pathType":"global","filter":"*_*.mp3","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1203,"wires":[["866b0ab0.299a28"]]},{"id":"866b0ab0.299a28","type":"fs-ops-delete","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1203,"wires":[[]]},{"id":"21466965.515bf6","type":"status","z":"4318847d.0693cc","name":"","scope":["7435b64e.0a2fb8"],"x":949,"y":1364,"wires":[["6c22fb96.b37484"]]},{"id":"6c22fb96.b37484","type":"change","z":"4318847d.0693cc","name":"initiate next","rules":[{"t":"set","p":"releaseNext","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1101,"y":1364,"wires":[["c6772716.60af68"]]},{"id":"c6772716.60af68","type":"function","z":"4318847d.0693cc","name":"queue","func":"// modified version - originally from https://gist.github.com/dceejay/cea8afa28b7a93ebdc0f \n\n// restartQueue = create new\nif (msg.hasOwnProperty(\"restartQueue\")) {\n    context.queue = []\n    \n// if queue doesn't exist, create it    \n} else {\n    context.queue = context.queue || []\n    context.busy = context.busy || false\n\n    // if the msg is a trigger one release next message\n    if (msg.hasOwnProperty(\"releaseNext\")) {\n        if (context.queue.length > 0) {\n            var m = context.queue.shift()\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return m \n        }\n        else {\n            context.busy = false;\n        }\n    }\n    else {\n        if (context.busy) {\n            // if busy add to queue\n            context.queue.push(msg);\n        }\n        else {\n        // otherwise we are empty so just pass through and set busy flag\n            context.busy = true;\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return msg;\n        }\n    }\n}\nnode.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n\nreturn null;","outputs":1,"noerr":0,"x":1012,"y":1315,"wires":[["7435b64e.0a2fb8"]]},{"id":"b9e60025.3c367","type":"http in","z":"4318847d.0693cc","name":"","url":"/notifications/:mp3file","method":"get","upload":false,"swaggerDoc":"","x":150,"y":1511,"wires":[["86792da2.4cb06"]]},{"id":"ef769238.e5b02","type":"comment","z":"4318847d.0693cc","name":"serve mp3 file for SONOS player","info":"","x":170,"y":1474,"wires":[]},{"id":"86792da2.4cb06","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('notification_directory') & '/' & msg.req.params.mp3file","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":374,"y":1511,"wires":[["c2fa6cb.342c39"]]},{"id":"c2fa6cb.342c39","type":"file in","z":"4318847d.0693cc","name":"","filename":"","format":"","chunk":false,"sendError":false,"encoding":"base64","x":534,"y":1511,"wires":[["a7138852.445228"]]},{"id":"605e5893.1b9518","type":"catch","z":"4318847d.0693cc","name":"","scope":["86792da2.4cb06","c2fa6cb.342c39","a7138852.445228"],"uncaught":false,"x":549,"y":1559,"wires":[["beb5575e.889f28","11576894.2c6de7"]]},{"id":"5f4a3564.9a4dbc","type":"http response","z":"4318847d.0693cc","name":"","statusCode":"","headers":{},"x":829,"y":1510,"wires":[]},{"id":"fa8b69a4.f26918","type":"comment","z":"4318847d.0693cc","name":"Test","info":"http://192.168.178.49:1880/notifications/notification_weather.mp3","x":386,"y":1475,"wires":[]},{"id":"392665f5.7dc97a","type":"inject","z":"4318847d.0693cc","name":"Flush command queue","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1095,"y":1131,"wires":[["eb9430a5.b1ba6"]]},{"id":"eb9430a5.b1ba6","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"restartQueue","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1107,"y":1168,"wires":[["c6772716.60af68"]]},{"id":"e9d1d7a9.402848","type":"function","z":"4318847d.0693cc","name":"check globals","func":"// checks existens of requried global variables\n//\nlet value = global.get('system_baseUrl')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - system_baseUrl not defined')\n    return null\n}\nvalue = global.get('notification_cache')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_cache not defined')\n    return null\n}\nvalue = global.get('notification_directory')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_directory not defined')\n    return null\n}\nreturn msg\n\nfunction isTruthyAndNotEmptyString (input) {\n    return !(typeof input === 'undefined' || input === null ||\n      (typeof input === 'number' && !Number.isFinite(input)) || input === '')\n}","outputs":1,"noerr":0,"x":432,"y":1314,"wires":[["cb99335a.e0a0e"]]},{"id":"d3477aba.549be8","type":"comment","z":"4318847d.0693cc","name":"Recommendation: Define globals as permanent","info":"This is done in the settings.js file. \nUncomment the contextStorage paragraph.\nThis will store all context variable on disk.","x":440,"y":1096,"wires":[]},{"id":"993b5c0.98e92a8","type":"inject","z":"4318847d.0693cc","name":"weather","topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":450,"y":1420,"wires":[["384278f8.a57c98"]]},{"id":"a7138852.445228","type":"change","z":"4318847d.0693cc","name":"set 200","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"200","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":1511,"wires":[["5f4a3564.9a4dbc"]]},{"id":"beb5575e.889f28","type":"change","z":"4318847d.0693cc","name":"set 404","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"404","tot":"num"},{"t":"set","p":"payload","pt":"msg","to":"error","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":675,"y":1559,"wires":[["5f4a3564.9a4dbc"]]},{"id":"11576894.2c6de7","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"true","targetType":"full","x":670,"y":1594,"wires":[]},{"id":"7435b64e.0a2fb8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":1141,"y":1315,"wires":[["54925fa5.2dc5e"]]},{"id":"54925fa5.2dc5e","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1270,"y":1360,"wires":[]},{"id":"d4793d8e.eecd5","type":"inject","z":"4318847d.0693cc","name":"habit","topic":"notification_habit.mp3","payload":"Don't do unto others what you would not have done unto you. Don't do unto others what you would not have done unto you.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1413,"wires":[["60d50c04.dc4f34"]]},{"id":"4e0e512f.95e4","type":"sonos-get-status","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"","x":290,"y":1060,"wires":[["ddc54684.9f7c08"]]},{"id":"49e3a401.f7c4ec","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get_crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1060,"wires":[["4e0e512f.95e4"]]},{"id":"ddc54684.9f7c08","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":1060,"wires":[]},{"id":"fad60220.01028","type":"sonos-get-status","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":330,"y":1860,"wires":[["b38d92a7.7e404"]]},{"id":"85dbbbe5.20fe08","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1860,"wires":[["fad60220.01028"]]},{"id":"b38d92a7.7e404","type":"change","z":"55805384.a4695c","name":"payload.uri","rules":[{"t":"delete","p":"payload","pt":"msg"},{"t":"set","p":"payload.title","pt":"msg","to":"song.title","tot":"msg"},{"t":"set","p":"payload.uri","pt":"msg","to":"song.uri","tot":"msg"},{"t":"set","p":"payload.currentUri","pt":"msg","to":"media.CurrentURI","tot":"msg"},{"t":"set","p":"payload.trackUri","pt":"msg","to":"position.TrackURI","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":1860,"wires":[["640222fb.95f08c","ee964c2a.7348c"]]},{"id":"640222fb.95f08c","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":670,"y":1800,"wires":[]},{"id":"ee964c2a.7348c","type":"file","z":"55805384.a4695c","name":"","filename":"\\Users\\hekla\\AppData\\Local\\Temp\\MySonosList.txt","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"utf8","x":830,"y":1860,"wires":[[]]},{"id":"48fcd1c8.a5f3","type":"inject","z":"55805384.a4695c","name":"","topic":"Top Songs","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1940,"wires":[["9dceb57d.aa0848"]]},{"id":"9dceb57d.aa0848","type":"sonos-manage-mysonos","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":383,"y":1940,"wires":[["2f2205f4.f0f5da","d473f9d2.e20ea8"]]},{"id":"2f2205f4.f0f5da","type":"sonos-universal","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":620,"y":1940,"wires":[["40312ccb.8341c4"]]},{"id":"40312ccb.8341c4","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":830,"y":1940,"wires":[]},{"id":"d473f9d2.e20ea8","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":610,"y":2000,"wires":[]},{"id":"d31c26b.2628bd8","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"player.get.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":2140,"wires":[["b7c40b5b.7fad18"]]},{"id":"b7c40b5b.7fad18","type":"sonos-universal","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":340,"y":2140,"wires":[["d473f9d2.e20ea8"]]},{"id":"da9064f1.19a568","type":"sonos-universal","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"","x":340,"y":2180,"wires":[["d473f9d2.e20ea8"]]},{"id":"46d458b4.a70238","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"player.get.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":2180,"wires":[["da9064f1.19a568"]]},{"id":"3bf94694.4e44da","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"lab","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":2100,"wires":[["15f05024.91bf3"]]},{"id":"15f05024.91bf3","type":"sonos-universal","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":340,"y":2100,"wires":[["d473f9d2.e20ea8"]]},{"id":"215e529.18f4cae","type":"comment","z":"405b0e15.987b5","name":"Mute and Volume","info":"","x":85,"y":2500,"wires":[]},{"id":"9bf4462f.bb86c8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":2777,"wires":[["91de4831.650de8"]]},{"id":"91de4831.650de8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"joiner","x":830,"y":2820,"wires":[["ecc420a.bdc5fe"]]},{"id":"ecc420a.bdc5fe","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":850,"y":2780,"wires":[]},{"id":"8bc548eb.b758a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":2846,"wires":[["91de4831.650de8"]]},{"id":"1a93ec5f.3affd4","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":2878,"wires":[["91de4831.650de8"]]},{"id":"16e8b5bc.4d364a","type":"inject","z":"405b0e15.987b5","name":"","topic":"On","payload":"set.mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":2693,"wires":[["91de4831.650de8"]]},{"id":"670f799f.402c78","type":"inject","z":"405b0e15.987b5","name":"","topic":"On","payload":"player.set.mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":2726,"wires":[["91de4831.650de8"]]},{"id":"c09ace25.3eb3c","type":"inject","z":"405b0e15.987b5","name":"","topic":"20","payload":"adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":2560,"wires":[["91de4831.650de8"]]},{"id":"11d7336d.333d5d","type":"inject","z":"405b0e15.987b5","name":"","topic":"10","payload":"player.adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":2627,"wires":[["91de4831.650de8"]]},{"id":"4391f31.13cc80c","type":"inject","z":"405b0e15.987b5","name":"","topic":"-20","payload":"adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":2593,"wires":[["91de4831.650de8"]]},{"id":"7272876b.e5f638","type":"inject","z":"405b0e15.987b5","name":"","topic":"-10","payload":"player.adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":2660,"wires":[["91de4831.650de8"]]},{"id":"20542b72.a61be4","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":117,"y":2812,"wires":[["91de4831.650de8"]]},{"id":"65f29149.8538a","type":"comment","z":"405b0e15.987b5","name":"Group Queue","info":"","x":75,"y":2960,"wires":[]},{"id":"5a355136.2bacb","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":3032,"wires":[["6a464d05.31f294"]]},{"id":"fdd05f91.4bf99","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"joiner","x":428,"y":2991,"wires":[["4922e20b.21448c"]]},{"id":"bcf34126.fd0e","type":"sonos-universal","z":"405b0e15.987b5","confignode":"2113e9bb.c52236","name":"independent","x":448,"y":3091,"wires":[["4922e20b.21448c"]]},{"id":"6a464d05.31f294","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"coordinator","x":448,"y":3040,"wires":[["4922e20b.21448c"]]},{"id":"9fa47f84.5e029","type":"change","z":"405b0e15.987b5","name":"Kche","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Kche","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":3111,"wires":[["6a464d05.31f294"]]},{"id":"32d4987b.115d28","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":3111,"wires":[["9fa47f84.5e029"]]},{"id":"f0ef755f.a916b8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":3151,"wires":[["892104c9.73e2a8"]]},{"id":"892104c9.73e2a8","type":"change","z":"405b0e15.987b5","name":"Bad","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":3151,"wires":[["6a464d05.31f294"]]},{"id":"4922e20b.21448c","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":625,"y":3040,"wires":[]},{"id":"fdb520de.f832b","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":3000,"wires":[["fdd05f91.4bf99"]]},{"id":"48fa30d4.5b4ca","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":3064,"wires":[["bcf34126.fd0e"]]},{"id":"416bc75e.ac5b68","type":"comment","z":"405b0e15.987b5","name":"Player Group","info":"","x":76,"y":3209,"wires":[]},{"id":"c09d0a51.7f05a8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"joiner","x":314,"y":3249,"wires":[["4e84d515.827f7c"]]},{"id":"4bca0245.30df3c","type":"sonos-universal","z":"405b0e15.987b5","confignode":"2113e9bb.c52236","name":"independent","x":449,"y":3322,"wires":[["4e84d515.827f7c"]]},{"id":"7a5e31a.ddb77d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"coordinator","x":449,"y":3282,"wires":[["4e84d515.827f7c"]]},{"id":"b3b79bff.fd0188","type":"change","z":"405b0e15.987b5","name":"Kche","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Kche","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":278,"y":3360,"wires":[["7a5e31a.ddb77d"]]},{"id":"ff91378.c66a4c8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121,"y":3360,"wires":[["b3b79bff.fd0188"]]},{"id":"d31d32de.d4abb","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121,"y":3400,"wires":[["17f10797.129fe8"]]},{"id":"17f10797.129fe8","type":"change","z":"405b0e15.987b5","name":"Bad","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":278,"y":3400,"wires":[["7a5e31a.ddb77d"]]},{"id":"4e84d515.827f7c","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":610,"y":3249,"wires":[]},{"id":"4244a437.206f8c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121,"y":3249,"wires":[["c09d0a51.7f05a8"]]},{"id":"bcaaaf61.1905b","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121,"y":3313,"wires":[["4bca0245.30df3c"]]},{"id":"7bcf3095.0f916","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":3281,"wires":[["7a5e31a.ddb77d"]]},{"id":"78ae1fe1.54f6c","type":"inject","z":"55805384.a4695c","name":"","topic":"http://soundbible.com/mp3/Two%20Tone%20Doorbell-SoundBible.com-1238551671.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":2360,"wires":[["e01f8eb1.feeaf"]]},{"id":"e01f8eb1.feeaf","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":2360,"wires":[["35e81d3a.aadfc2"]]},{"id":"35e81d3a.aadfc2","type":"sonos-universal","z":"55805384.a4695c","confignode":"2113e9bb.c52236","name":"","x":560,"y":2360,"wires":[[]]},{"id":"1a55af66.08dd31","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://soundbible.com/grab.php?id=1466&type=mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":960,"y":1133,"wires":[["fac63c2e.2a50d"]]}]