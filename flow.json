[{"id":"55805384.a4695c","type":"tab","label":"Sandbox","disabled":false,"info":""},{"id":"258668aa.420c18","type":"tab","label":"payload / topic","disabled":false,"info":""},{"id":"9ea06256.355a2","type":"tab","label":"Failure","disabled":false,"info":""},{"id":"775d7a2a.44f234","type":"tab","label":"Succes ","disabled":false,"info":""},{"id":"405b0e15.987b5","type":"tab","label":"Universal","disabled":false,"info":""},{"id":"99e6906e.c69df","type":"tab","label":"Old Commands","disabled":false,"info":""},{"id":"4318847d.0693cc","type":"tab","label":"Old Complex","disabled":false,"info":""},{"id":"a0a649cc.ca04e8","type":"tab","label":"Validate messages","disabled":true,"info":""},{"id":"91448cef.2efc9","type":"tab","label":"Miele","disabled":true,"info":""},{"id":"d65eded3.250b9","type":"subflow","name":"HandleErrors","info":"","category":"","in":[{"x":61,"y":79,"wires":[{"id":"6b0e515b.e62cd"}]}],"out":[],"env":[{"name":"Tabname","type":"str","value":"unknown","ui":{"type":"input","opts":{"types":["str"]},"label":{}}},{"name":"DebugToMobile","type":"bool","value":"false","ui":{"type":"input","opts":{"types":["bool"]},"label":{}}},{"name":"KeyVariable","type":"str","value":"system_keyTasker","ui":{"type":"input","opts":{"types":["str"]},"label":{}}}],"color":"#E9967A","icon":"node-red/alert.svg"},{"id":"24092027.ab82","type":"subflow","name":"get bearer","info":"Get a new bearer and refresh token and stores it in global variables. \n\nThe global variables system_bearerMiele and system_refreshMiele are being used.","category":"Miele","in":[{"x":30,"y":63,"wires":[{"id":"85119bed.21b168"}]}],"out":[{"x":1221,"y":43,"wires":[{"id":"430fd0da.a6602","port":0}]}],"env":[{"name":"vg","type":"str","value":"de-DE","ui":{"label":{"en-US":"Country"},"type":"select","opts":{"opts":[{"l":{"en-US":"Germany"},"v":"de-DE"}]}}},{"name":"doRefresh","type":"bool","value":"false","ui":{"label":{"en-US":"Use refresh token"},"type":"checkbox","opts":{}}}],"color":"#A70625","inputLabels":["client and user credentials"],"outputLabels":["Miele reponse object"],"icon":"font-awesome/fa-key","status":{"x":1221,"y":254,"wires":[{"id":"ccdd1aa3.d7afe8","port":0},{"id":"afceb2f2.d18f3","port":0},{"id":"4400b51a.44eacc","port":0}]}},{"id":"ea970db4.5106b","type":"subflow","name":"get all appliances","info":"Get a list of all appliances with indentification and state.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":80,"wires":[{"id":"eaf22f71.d9969"}]}],"out":[{"x":1119,"y":74,"wires":[{"id":"a35f8dee.9f18f","port":0}]}],"env":[{"name":"language","type":"str","value":"en","ui":{"label":{"en-US":"Language"},"type":"select","opts":{"opts":[{"l":{"en-US":"English"},"v":"en"},{"l":{"en-US":"Deutsch"},"v":"de"}]}}}],"color":"#A70625","inputLabels":["just trigger"],"outputLabels":["appliance list in household"],"icon":"font-awesome/fa-list-ul","status":{"x":1120,"y":220,"wires":[{"id":"fe83c7a3.1ef478","port":0},{"id":"84b66c9d.f62ef","port":0},{"id":"681dd18d.1baa4","port":0}]}},{"id":"aeba9414.6f40a8","type":"subflow","name":"get appliance","info":"Get an object with identification and state data for the given appliance id.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":97,"wires":[{"id":"a260e272.ea783"}]}],"out":[{"x":1143,"y":33,"wires":[{"id":"3da93881.b6e868","port":0}]}],"env":[{"name":"language","type":"str","value":"en","ui":{"label":{"en-US":"Language"},"type":"select","opts":{"opts":[{"l":{"en-US":"English"},"v":"en"},{"l":{"en-US":"Deutsch"},"v":"de"}]}}}],"color":"#A70625","inputLabels":["appliance id as payload"],"outputLabels":["appliance identification and state"],"icon":"font-awesome/fa-info","status":{"x":1140,"y":164,"wires":[{"id":"dd906f4c.1361a","port":0},{"id":"fd32a717.878c28","port":0},{"id":"96a3026.b505b","port":0}]}},{"id":"4ae29caa.8056e4","type":"subflow","name":"get actions","info":"Get an object with all valid actions for the given appliance id at the current appliance state.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":88,"wires":[{"id":"d3015191.5633d"}]}],"out":[{"x":1099,"y":38,"wires":[{"id":"c8655abf.93b328","port":0}]}],"env":[],"color":"#A70625","inputLabels":["appliance id"],"outputLabels":["all actions"],"icon":"node-red/debug.svg","status":{"x":1099,"y":158,"wires":[{"id":"2c02bcd4.dc63d4","port":0},{"id":"1455fb1d.b32055","port":0},{"id":"d9bc2537.715df8","port":0}]}},{"id":"ad607e01.511ea","type":"subflow","name":"set action","info":"Set (execute) an action for the given appliance. Valid action depend on kind of appliance and state!","category":"Miele","in":[{"x":40,"y":75,"wires":[{"id":"2542e5f6.b0fd8a"}]}],"out":[{"x":1011,"y":74,"wires":[{"id":"21b0eeb.798de12","port":0}]}],"env":[],"color":"#A70625","inputLabels":["appliance id in payload and an action "],"outputLabels":["result"],"icon":"font-awesome/fa-angle-double-right","status":{"x":1010,"y":240,"wires":[{"id":"e4fefa21.402038","port":0},{"id":"9ebcdded.4fad9","port":0},{"id":"ebacb8a0.327d58","port":0}]}},{"id":"69e44f53.5d62f","type":"subflow","name":"Subflow 1","info":"","category":"","in":[{"x":60,"y":80,"wires":[{"id":"4cc2813d.75068"}]}],"out":[{"x":580,"y":80,"wires":[{"id":"ccdfdd96.2d83e","port":0}]}],"env":[{"name":"subflowProperty","type":"str","value":"Hi Sub"}],"color":"#DDAA99"},{"id":"88e9fa70.4a53e8","type":"sonos-config","z":"","name":"coordinator","serialnum":"5C-AA-FD-00-22-36:1","ipaddress":"192.168.178.37"},{"id":"c747354a.95e5e8","type":"sonos-config","z":0,"name":"no ip but correct serial number","serialnum":"94-9F-3E-C1-3B-99:8","ipaddress":""},{"id":"9037fbab.1d8408","type":"sonos-config","z":0,"name":"fritzbox ip address","serialnum":"","ipaddress":"192.168.178.1"},{"id":"64704482.34d37c","type":"sonos-config","z":0,"name":"ip address with wrong syntax","serialnum":"","ipaddress":"191168.178.41"},{"id":"ff297616.de3c88","type":"sonos-config","z":0,"name":"no ip address & invalid serial","serialnum":"5C-AA-FD22-36:1","ipaddress":""},{"id":"8d44022c.adb65","type":"sonos-config","z":"","name":"living","serialnum":"94-9F-3E-C1-3B-99:8","ipaddress":"192.168.178.36"},{"id":"32a98882.56e1c8","type":"sonos-config","z":"","name":"bath","serialnum":"00-0E-58-FE-3A-EA:5","ipaddress":"192.168.178.35"},{"id":"bc822e98.2348e","type":"sonos-config","z":0,"name":"not exist","serialnum":"00-0E-58-FE-3A-EA:5","ipaddress":"192.168.178.91"},{"id":"2113e9bb.c52236","type":"sonos-config","z":"","name":"variable","serialnum":"B8-E9-37-58-31-C0:A","ipaddress":"192.168.178.38"},{"id":"8945d5a5.31aef8","type":"polly-config","z":"","name":"pollyaws"},{"id":"efdd332a.0b675","type":"inject","z":"99e6906e.c69df","name":"","topic":"2","payload":"play.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":918,"wires":[["ec1960b5.00b3f"]]},{"id":"d3c4b5a7.528288","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"clear.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":329,"wires":[["fc8ec1ee.dada8"]]},{"id":"6280f87a.0562c8","type":"change","z":"4318847d.0693cc","name":"queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"queue","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Best of Prime","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":301,"y":331,"wires":[["5fe3a2ed.eb907c"]]},{"id":"744d729c.ee78dc","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":552,"y":371,"wires":[]},{"id":"8dd4792.76eb088","type":"comment","z":"4318847d.0693cc","name":"Example 3: Replace SONOS queue without playing","info":"","x":195,"y":296,"wires":[]},{"id":"c112b57b.4469b8","type":"comment","z":"9ea06256.355a2","name":"CONTROL PLAYER","info":"","x":95,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"374fd5fd.c937aa","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":100,"wires":[["2e34f5b1.a5a72a"]]},{"id":"e2d2580b.4557e8","type":"inject","z":"4318847d.0693cc","name":"","topic":"Arabella","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":56,"wires":[["aa2e6460.b540a8"]]},{"id":"5d8ef2c9.43ff1c","type":"change","z":"4318847d.0693cc","name":"get.trackplus","rules":[{"t":"set","p":"payload","pt":"msg","to":"get.trackplus","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":718,"y":71,"wires":[["fa5800f0.d6f4c"]]},{"id":"6bbf67aa.5b6638","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1005,"y":71,"wires":[]},{"id":"faf9af99.954a4","type":"inject","z":"4318847d.0693cc","name":"","topic":"Best Of Lovesongs","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":95,"wires":[["aa2e6460.b540a8"]]},{"id":"e4646c63.7ee1f","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":567,"y":71,"wires":[["5d8ef2c9.43ff1c"]]},{"id":"f7c7fcf2.8c6ed","type":"comment","z":"4318847d.0693cc","name":"Example 1:  Play (TuneIn, Amazon) radio station using My Sonos and retrieve title, ...","info":"","x":295,"y":20,"wires":[]},{"id":"33494d25.d17ca2","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":223,"wires":[["4ed9c170.a95e9"]]},{"id":"6a1d28c8.fea828","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":993,"y":455,"wires":[["4ed9c170.a95e9"]]},{"id":"2a44a257.0f6ffe","type":"inject","z":"99e6906e.c69df","name":"","topic":"2","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1083,"wires":[["ec1960b5.00b3f"]]},{"id":"1fc5c102.abee9f","type":"comment","z":"4318847d.0693cc","name":"Example 4: Line in Play:5 / TV Beam or Playbar","info":"","x":185,"y":437,"wires":[]},{"id":"8978d019.4e76e","type":"switch","z":"4318847d.0693cc","name":"","property":"payload.modelName","propertyType":"msg","rules":[{"t":"eq","v":"Sonos Play:5","vt":"str"},{"t":"eq","v":"Sonos Beam","vt":"str"},{"t":"eq","v":"Sonos Playbar","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":431,"y":470,"wires":[["de574d05.b6a53"],["e7542013.832ae"],["e7542013.832ae"]]},{"id":"de574d05.b6a53","type":"change","z":"4318847d.0693cc","name":"line in","rules":[{"t":"set","p":"topic","pt":"msg","to":"'x-rincon-stream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":565,"y":441,"wires":[["41f8648f.bd838c"]]},{"id":"77db7f57.751e9","type":"comment","z":"4318847d.0693cc","name":"Example 5: Play Playlist from Music Library","info":"","x":165,"y":556,"wires":[]},{"id":"2172120a.6207ae","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"clear.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":590,"wires":[["fad22422.5dcc88"]]},{"id":"b1f4e729.e2d8f8","type":"change","z":"4318847d.0693cc","name":"activate queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":771,"y":591,"wires":[["ab1e13ab.c7d74"]]},{"id":"ff1ec5fc.0cff68","type":"inject","z":"4318847d.0693cc","name":"","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Playlists/MLAdele.wpl","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":445,"y":666,"wires":[["9e0d7aee.907268"]]},{"id":"225eea23.4db686","type":"comment","z":"4318847d.0693cc","name":"or direct","info":"","x":445,"y":634,"wires":[]},{"id":"d890d3f3.68cd6","type":"inject","z":"4318847d.0693cc","name":"mute","topic":"On","payload":"set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":771,"wires":[["f9e99c11.a8edc","24a0a7e6.ae3b08"]]},{"id":"f9e99c11.a8edc","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":223,"y":793,"wires":[["a65048e1.879f98"]]},{"id":"98119167.abb2e","type":"change","z":"4318847d.0693cc","name":"stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":704,"y":794,"wires":[["24a0a7e6.ae3b08"]]},{"id":"418f0e18.4cf29","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":569,"y":843,"wires":[["61b7db70.f099d4"]]},{"id":"61b7db70.f099d4","type":"change","z":"4318847d.0693cc","name":"unmute","rules":[{"t":"set","p":"payload","pt":"msg","to":"set.mutestate","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":714,"y":843,"wires":[["24a0a7e6.ae3b08"]]},{"id":"a65048e1.879f98","type":"change","z":"4318847d.0693cc","name":"play tuneIn station","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":392,"y":793,"wires":[["418f0e18.4cf29","9cfa79ba.d93968"]]},{"id":"bac1bf03.f728","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":470,"wires":[["165a0add.39d6b5"]]},{"id":"e7542013.832ae","type":"change","z":"4318847d.0693cc","name":"tv (line in)","rules":[{"t":"set","p":"topic","pt":"msg","to":"'x-sonos-htastream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400:spdif'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":501,"wires":[["41f8648f.bd838c","243370d4.f112d"]]},{"id":"41f8648f.bd838c","type":"change","z":"4318847d.0693cc","name":"activate line","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":727,"y":470,"wires":[["55b6f9ce.2ef858"]]},{"id":"610c7f81.c561","type":"inject","z":"99e6906e.c69df","name":"","topic":"normal","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":983,"wires":[["ec1960b5.00b3f"]]},{"id":"8638cd91.2bd02","type":"inject","z":"99e6906e.c69df","name":"","topic":"shuffle","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":951,"wires":[["ec1960b5.00b3f"]]},{"id":"625148f2.018378","type":"change","z":"4318847d.0693cc","name":"insert playlist","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"MLAdele","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":416,"y":591,"wires":[["9e0d7aee.907268"]]},{"id":"497dc083.e5d35","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":100,"wires":[["9124b25e.5e7bb"]]},{"id":"9124b25e.5e7bb","type":"function","z":"a0a649cc.ca04e8","name":"xyz does not exist","func":"msg.payload = 'hallo';\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":100,"wires":[["bcf459fe.1b0ad8"]]},{"id":"e180e70c.33b628","type":"function","z":"a0a649cc.ca04e8","name":"xyz is null","func":"msg.payload.xyz = null;\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":196,"wires":[["bcf459fe.1b0ad8"]]},{"id":"351eb48c.4094ac","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":196,"wires":[["e180e70c.33b628"]]},{"id":"c54adc23.e480e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":468,"wires":[["305adb80.ed3b84","63a7db00.cc8604"]]},{"id":"305adb80.ed3b84","type":"function","z":"a0a649cc.ca04e8","name":"xyz string is OK ","func":"msg.payload = { 'xyz':'richtiger String'};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":468,"wires":[["bcf459fe.1b0ad8"]]},{"id":"47d40166.41248","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":356,"wires":[["22871aaa.f17016"]]},{"id":"22871aaa.f17016","type":"function","z":"a0a649cc.ca04e8","name":"xyz empty string","func":"msg.payload = {\"xyz\":''};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":356,"wires":[["bcf459fe.1b0ad8"]]},{"id":"a4f89f5b.58eb4","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":98,"wires":[["c7fabc9b.407e1"]]},{"id":"c7fabc9b.407e1","type":"change","z":"a0a649cc.ca04e8","name":"payload does not exist","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":98,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"7cd29440.2439fc","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":194,"wires":[["892f9664.8696f8"]]},{"id":"892f9664.8696f8","type":"function","z":"a0a649cc.ca04e8","name":"payload null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":194,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"b9b94e98.ceb2e","type":"comment","z":"a0a649cc.ca04e8","name":"Objective of this tab - Documentation","info":"# Introduction\nOften errors occures because objects or part of objects are not initialized or hold invalid values. This causes errors in following flows. \n\n# Solution\nThe path of every property is being intensively checked: **undefined, null, empty string** and not value \"**NaN**\".\n\nNaN is a strange one. It can be exclued by testing \"msg.payload !== msg.payload\" or by testing \"(typeof msg.payload === 'number' && isNaN(msg.payload))\"\n\nThe second one is longer but more obsious. \n\nIn case of msg.propLevel1.propLevel2 I do test all elements except msg. Msg is given and can not be null or undefined. ","x":145,"y":20,"wires":[]},{"id":"ed0da7d.7d64e58","type":"function","z":"a0a649cc.ca04e8","name":"payload empty string","func":"msg.payload = '';\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":354,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"ae986c34.34ae5","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":354,"wires":[["ed0da7d.7d64e58"]]},{"id":"96ba426e.4e8e1","type":"function","z":"a0a649cc.ca04e8","name":"payload string","func":"msg.payload = 'payload text there';\nreturn msg;","outputs":1,"noerr":0,"x":281,"y":477,"wires":[["e3f119eb.d44758"]]},{"id":"db6427c6.b0c728","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":477,"wires":[["96ba426e.4e8e1"]]},{"id":"83ec348e.2b3848","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":500,"wires":[["7a9b4e0.b2f0ab4"]]},{"id":"7a9b4e0.b2f0ab4","type":"function","z":"a0a649cc.ca04e8","name":"xyz number is ok","func":"msg.payload = {\"xyz\": 5};\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":500,"wires":[["bcf459fe.1b0ad8"]]},{"id":"2a76f526.64ae8a","type":"comment","z":"a0a649cc.ca04e8","name":"validation of msg.payload","info":"","x":115,"y":63,"wires":[]},{"id":"3a375663.e13d9a","type":"function","z":"a0a649cc.ca04e8","name":"payload does not exist","func":"msg  = {'o': 'oooo'};\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":130,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"63d72607.f34638","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":130,"wires":[["3a375663.e13d9a"]]},{"id":"117da209.5252de","type":"function","z":"a0a649cc.ca04e8","name":"payload undefined","func":"msg.payload = undefined;\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":162,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"2dbcdfea.bf264","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":162,"wires":[["117da209.5252de"]]},{"id":"2ec859a5.f8eb66","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":226,"wires":[["de752d4c.21001"]]},{"id":"de752d4c.21001","type":"function","z":"a0a649cc.ca04e8","name":"payload NaN","func":"msg.payload = parseInt('Hallo');  // provides NaN\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":226,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"b3403a6f.c88838","type":"function","z":"a0a649cc.ca04e8","name":"payload number ","func":"msg.payload = 10;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":509,"wires":[["e3f119eb.d44758"]]},{"id":"1150c24c.b1ae2e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":509,"wires":[["b3403a6f.c88838"]]},{"id":"957f1041.a180b","type":"function","z":"a0a649cc.ca04e8","name":"payload array","func":"msg.payload = [];\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":541,"wires":[["e3f119eb.d44758"]]},{"id":"d8d75b12.f06148","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":541,"wires":[["957f1041.a180b"]]},{"id":"d7b0c62c.795398","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":573,"wires":[["d0fed59c.990ac8"]]},{"id":"d0fed59c.990ac8","type":"function","z":"a0a649cc.ca04e8","name":"payload object ","func":"msg.payload = {'something':'Hallo'};\nreturn msg;","outputs":1,"noerr":0,"x":281,"y":573,"wires":[["e3f119eb.d44758"]]},{"id":"ec88ae1e.ff4b6","type":"function","z":"a0a649cc.ca04e8","name":"payload object ","func":"msg.payload = {'something': undefined};\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":605,"wires":[["e3f119eb.d44758"]]},{"id":"d80d6e9c.59f3e","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":605,"wires":[["ec88ae1e.ff4b6"]]},{"id":"e3d3b952.dd6838","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":637,"wires":[["6e895944.0c26f8"]]},{"id":"6e895944.0c26f8","type":"function","z":"a0a649cc.ca04e8","name":"payload parseInt('5') ","func":"msg.payload = parseInt('5');\nreturn msg;","outputs":1,"noerr":0,"x":301,"y":637,"wires":[["e3f119eb.d44758"]]},{"id":"f507b549.24e008","type":"function","z":"a0a649cc.ca04e8","name":"payload parseInt(5) ","func":"msg.payload = parseInt(5);\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":670,"wires":[["e3f119eb.d44758"]]},{"id":"a201018b.af083","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":99,"y":670,"wires":[["f507b549.24e008"]]},{"id":"1d4a5f09.801521","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":164,"wires":[["65a613f5.8794dc"]]},{"id":"65a613f5.8794dc","type":"function","z":"a0a649cc.ca04e8","name":"xyz undefined","func":"msg.payload.xyz = undefined;\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":164,"wires":[["bcf459fe.1b0ad8"]]},{"id":"fe262f00.41ee9","type":"function","z":"a0a649cc.ca04e8","name":"xyz does not exist","func":"msg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":132,"wires":[["bcf459fe.1b0ad8"]]},{"id":"3c32d77.e212a28","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":132,"wires":[["fe262f00.41ee9"]]},{"id":"2e25b173.d1dd2e","type":"function","z":"a0a649cc.ca04e8","name":"xyz NaN","func":"msg.payload.xyz = parseInt('Hallo'); // NaN\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":228,"wires":[["bcf459fe.1b0ad8"]]},{"id":"e6f0a81b.1a9dc8","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":228,"wires":[["2e25b173.d1dd2e"]]},{"id":"74bc604d.fd188","type":"comment","z":"a0a649cc.ca04e8","name":"validation of msg.payload.xyz","info":"","x":665,"y":67,"wires":[]},{"id":"6c500479.64f93c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":532,"wires":[["7a8f82dd.bf758c"]]},{"id":"7a8f82dd.bf758c","type":"function","z":"a0a649cc.ca04e8","name":"xyz object  is ok","func":"msg.payload = {'xyz': {}};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":532,"wires":[["bcf459fe.1b0ad8"]]},{"id":"c2fe0b5f.2c5c38","type":"function","z":"a0a649cc.ca04e8","name":"xyz array  is ok","func":"msg.payload = { 'xyz': []};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":564,"wires":[["bcf459fe.1b0ad8"]]},{"id":"75ca332f.81145c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":564,"wires":[["c2fe0b5f.2c5c38"]]},{"id":"e3f119eb.d44758","type":"function","z":"a0a649cc.ca04e8","d":true,"name":"validate msg.payload","func":"/** Validate msg.payload\n * \n*/\n\n// old version: \n// if (typeof msg.payload === 'undefined' || msg.payload === null || (typeof msg.payload === 'number' && isNaN(msg.payload)) || msg.payload === '') {\n\nif (typeof msg.payload === 'undefined' || msg.payload === null || (typeof msg.payload === 'number' && !Number.isFinite(msg.payload)) || msg.payload ==='') {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok', msg);\n}\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":700,"wires":[[]]},{"id":"71e12096.9b21c","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":258,"wires":[["892e2d7e.c143"]]},{"id":"892e2d7e.c143","type":"function","z":"a0a649cc.ca04e8","name":"payload NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":271,"y":258,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"bcf459fe.1b0ad8","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload","func":"/** Validate msg.payload.xyz\n * \n*/\nif (!isValidProperty(msg, ['payload', 'xyz'])) {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok', msg);\n}\nreturn msg;\n\nfunction isValidProperty(nestedObj, pathArray){\n    const property = pathArray.reduce(\n      (obj, key) => (obj && obj[key] !== 'undefined' ? obj[key] : undefined),\n      nestedObj\n    )\n    return typeof property !== 'undefined'\n  }","outputs":1,"noerr":0,"x":1040,"y":670,"wires":[[]]},{"id":"21af558b.13c2ba","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":260,"wires":[["65d7d2d2.d82a5c"]]},{"id":"65d7d2d2.d82a5c","type":"function","z":"a0a649cc.ca04e8","name":"xyz NaN","func":"msg.payload.xyz = NaN; // NaN\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":260,"wires":[["bcf459fe.1b0ad8"]]},{"id":"7fdc8a90.778d44","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":280,"wires":[["a662246b.c9a948"]]},{"id":"a662246b.c9a948","type":"change","z":"9ea06256.355a2","name":"avtransport with volume - not number","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":280,"wires":[["39a502ae.bdf62e"]]},{"id":"72def357.4d838c","type":"comment","z":"9ea06256.355a2","name":"activate avtransport with volume","info":"","x":171,"y":247,"wires":[]},{"id":"3b78414f.38dede","type":"change","z":"9ea06256.355a2","name":"avtransport with volume - invalid number","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":321,"y":313,"wires":[["39a502ae.bdf62e"]]},{"id":"a425b1eb.3038","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":313,"wires":[["3b78414f.38dede"]]},{"id":"d919048c.b05e48","type":"change","z":"9ea06256.355a2","name":"avtransport with volume - ok","rules":[{"t":"set","p":"payload","pt":"msg","to":"activate_avtransport","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":347,"wires":[["39a502ae.bdf62e"]]},{"id":"a2234dbe.9d699","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":347,"wires":[["d919048c.b05e48"]]},{"id":"6b5cc4aa.c99b7c","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":134,"wires":[["aa36d09.b24b43"]]},{"id":"aa36d09.b24b43","type":"function","z":"9ea06256.355a2","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":212,"y":134,"wires":[["2e34f5b1.a5a72a"]]},{"id":"1009be46.8c0fb2","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":170,"wires":[["68e73b2a.782454"]]},{"id":"68e73b2a.782454","type":"function","z":"9ea06256.355a2","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":211,"y":170,"wires":[["2e34f5b1.a5a72a"]]},{"id":"b12a4877.40ad38","type":"comment","z":"a0a649cc.ca04e8","name":"Following are all OK","info":"","x":110,"y":443,"wires":[]},{"id":"cf30cfb3.f7a6","type":"comment","z":"a0a649cc.ca04e8","name":"Following are all OK","info":"","x":635,"y":436,"wires":[]},{"id":"dd1ad5ab.e8b008","type":"http request","z":"d65eded3.250b9","name":"","method":"POST","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","authType":"basic","x":720,"y":60,"wires":[[]]},{"id":"1bbc7a30.e4cbe6","type":"template","z":"d65eded3.250b9","name":"define url","field":"url","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"https://autoremotejoaomgcd.appspot.com/sendnotification?key={{key}}&title=\"HomeService Error Message\"&text={{payload}};\n","output":"str","x":570,"y":60,"wires":[["dd1ad5ab.e8b008"]]},{"id":"6b0e515b.e62cd","type":"function","z":"d65eded3.250b9","name":"define/send error message","func":"/** Send error message to TASKER if debugToMobile is true\n* GITHUB subflow handle errors\n* @since 2019-10-13T1931\n* PREREQ: uses TASKER autoremote and needs key, stored in global variable\n*/\n\n  const unknown = 'unbekannt';\n\n  let errorTab = env.get('Tabname');\n  if (typeof errorTab === 'undefined' || errorTab === null || errorTab === '') {\n    errorTab = unknown;\n    node.warn('Tabname not defined');\n  }\n\n  let errorNodeName = unknown;\n  let errorNodeType = unknown;\n  let errorNodeId = unknown;\n  let errorMessage = unknown;\n  if (typeof msg.error === 'undefined' || msg.error === null || msg.error === '') {\n    // no infos - use default text above\n  } else {\n    if (typeof msg.error.source === 'undefined' || msg.error.source === null || msg.error.source === '') {\n      // no source infos - use default text above\n    } else {\n      if (typeof msg.error.source.name === 'undefined' || msg.error.source.name === null || msg.error.source.name === '') {\n        // use default text above\n      } else {\n        errorNodeName = msg.error.source.name;\n      }\n      if (typeof msg.error.source.type === 'undefined' || msg.error.source.type === null || msg.error.source.type === '') {\n        // use default text above\n      } else {\n        errorNodeType = msg.error.source.type;\n      }\n      if (typeof msg.error.source.id === 'undefined' || msg.error.source.id === null || msg.error.source.id === '') {\n        // use default text\n      } else {\n        errorNodeId = msg.error.source.id;\n      }\n    }\n    if (typeof msg.error.message === 'undefined' || msg.error.message === null || msg.error.message === '') {\n      // no infos - use default text\n    } else {\n      errorMessage = msg.error.message;\n    }\n  }\n  const fullMessage = `Fehler in TAB: ${errorTab} NODENAME: ${errorNodeName} NODETYPE: ${errorNodeType} NODEID: ${errorNodeId} DETAIL: ${errorMessage}`;\n\n  let msgUIandLog = { payload: fullMessage };\n\n  let msgMobile;\n  if (env.get('DebugToMobile')) {\n    const keyVariableName = env.get('KeyVariable'); // first get name of global variable\n    if (typeof keyVariableName === 'undefined' || keyVariableName === null || keyVariableName === '') {\n      node.error('Error in subflow: handle error: Invalid key variable name');\n      msgMobile = null; // no message\n      msgUIandLog = null; // no message\n    } else {\n      const key = global.get(keyVariableName);\n      if (typeof key === 'undefined' || key === null || key === '') {\n        node.error('Error in subflow: handle error: Key variable not defined or key invalid');\n        msgMobile = null; // no message\n        msgUIandLog = null; // no message\n      } else {\n        msgMobile = { payload: fullMessage, key: key };\n      }\n    }\n  } else {\n    msgMobile = null; // not message\n  }\n  return [msgMobile, msgUIandLog];\n\n","outputs":2,"noerr":0,"x":280,"y":80,"wires":[["1bbc7a30.e4cbe6"],["337e0a88.64b546"]],"outputLabels":["email data",""]},{"id":"337e0a88.64b546","type":"debug","z":"d65eded3.250b9","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"payload","targetType":"msg","x":590,"y":120,"wires":[]},{"id":"1cbfc88a.82bef7","type":"subflow:d65eded3.250b9","z":"55805384.a4695c","name":"","env":[{"name":"Tabname","value":"Sandbox","type":"str"},{"name":"DebugToMobile","value":"true","type":"bool"}],"x":610,"y":20,"wires":[]},{"id":"ca8b047.c6229f8","type":"catch","z":"55805384.a4695c","d":true,"name":"","scope":null,"uncaught":false,"x":440,"y":20,"wires":[["1cbfc88a.82bef7"]]},{"id":"2a12b79b.d9e0f8","type":"subflow:d65eded3.250b9","z":"9ea06256.355a2","d":true,"name":"","env":[{"name":"Tabname","value":"Test with Failure","type":"str"}],"x":650,"y":40,"wires":[]},{"id":"dbe8b435.a7f4c8","type":"catch","z":"9ea06256.355a2","d":true,"name":"","scope":null,"uncaught":false,"x":480,"y":40,"wires":[["2a12b79b.d9e0f8"]]},{"id":"9af19cc4.5706a","type":"comment","z":"775d7a2a.44f234","name":"msg.size ","info":"","x":121,"y":861,"wires":[]},{"id":"e4134f34.a564d","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":362,"y":901,"wires":[["d32d3c03.61ef1"]]},{"id":"a081172f.de7e58","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":113,"y":901,"wires":[["e4134f34.a564d"]]},{"id":"8208c58d.b37718","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":989,"wires":[]},{"id":"249fa767.71bb08","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":934,"wires":[["6d2ea1a0.4a7ab"]]},{"id":"6d2ea1a0.4a7ab","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":361,"y":934,"wires":[["d32d3c03.61ef1"]]},{"id":"f39f2932.5f5318","type":"change","z":"775d7a2a.44f234","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":362,"y":967,"wires":[["d32d3c03.61ef1"]]},{"id":"6e2ca31a.2e100c","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":113,"y":967,"wires":[["f39f2932.5f5318"]]},{"id":"f06dff57.c0a35","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":341,"y":1011,"wires":[["d32d3c03.61ef1"]]},{"id":"d974bf84.9321f","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":1011,"wires":[["f06dff57.c0a35"]]},{"id":"38cf5a24.734d36","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":1044,"wires":[["69c14ed9.cef51"]]},{"id":"69c14ed9.cef51","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":1044,"wires":[["d32d3c03.61ef1"]]},{"id":"29767623.36181a","type":"change","z":"775d7a2a.44f234","name":"get musiclibrary playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":341,"y":1077,"wires":[["d32d3c03.61ef1"]]},{"id":"1e1b60be.3ad4bf","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":1077,"wires":[["29767623.36181a"]]},{"id":"2143919d.6b952e","type":"comment","z":"775d7a2a.44f234","name":"Results","info":"There are 3 playlists. \nSo with size 2,3 there should be a Warning","x":652,"y":901,"wires":[]},{"id":"bc08b969.5611a8","type":"inject","z":"775d7a2a.44f234","name":"insert_uri  song from ML","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":159,"y":764,"wires":[["22888d78.e458b2"]]},{"id":"ed16ee64.4d4eb","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"player.set.led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":280,"wires":[["16182df1.06e562"]]},{"id":"62c8c05b.eba5e","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"player.set.led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":312,"wires":[["16182df1.06e562"]]},{"id":"bd8d926e.c5c12","type":"comment","z":"9ea06256.355a2","name":"set led","info":"","x":610,"y":120,"wires":[]},{"id":"7a53e124.78de4","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"set_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":611,"y":154,"wires":[["eaab7f3b.eb8db"]]},{"id":"40554e29.11064","type":"inject","z":"9ea06256.355a2","name":"","topic":"xxxxx","payload":"set_led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":631,"y":187,"wires":[["eaab7f3b.eb8db"]]},{"id":"63e06903.06d2d8","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":530,"y":1020,"wires":[]},{"id":"c312e807.fb9ba8","type":"comment","z":"775d7a2a.44f234","name":"CONTROL PLAYER","info":"","x":95,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"bb0f52c0.7945a","type":"comment","z":"775d7a2a.44f234","name":"MANAGE QUEUE","info":"","x":95,"y":719,"wires":[],"icon":"node-red/alert.svg"},{"id":"59d5d6c2.7337a8","type":"inject","z":"775d7a2a.44f234","name":"insert_uri  album from ML","topic":"x-rincon-playlist:RINCON_000E58FE3AEA01400#A:ALBUM/Diamond%20Life","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":169,"y":797,"wires":[["22888d78.e458b2"]]},{"id":"e5c4eab4.b04df8","type":"comment","z":"4318847d.0693cc","name":"Example 7: Group players","info":"","x":115,"y":915,"wires":[]},{"id":"62a1b89.7509d48","type":"change","z":"4318847d.0693cc","name":"play swr3 on coordinator","rules":[{"t":"set","p":"payload","pt":"msg","to":"stream","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SWR3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":271,"y":949,"wires":[["435d406c.05c4e"]]},{"id":"ad8671c9.08f85","type":"inject","z":"4318847d.0693cc","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":949,"wires":[["62a1b89.7509d48"]]},{"id":"8af22d58.53aff","type":"change","z":"4318847d.0693cc","name":"join group","rules":[{"t":"set","p":"topic","pt":"msg","to":"KÃ¼che","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"player.join.group","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":951,"wires":[["d36c728b.5c65a"]]},{"id":"16e343b8.cc984c","type":"inject","z":"775d7a2a.44f234","name":"activate TV","topic":"x-rincon-stream:RINCON_5CAAFD00223601400","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":102,"wires":[["9974711e.7107e"]]},{"id":"fe2350f7.f7f82","type":"comment","z":"775d7a2a.44f234","name":"Others","info":"","x":109,"y":66,"wires":[]},{"id":"5fa4dbc.f66a224","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":590,"y":784,"wires":[]},{"id":"d1be1bbd.0a42f8","type":"inject","z":"775d7a2a.44f234","name":"activate tunein B5","topic":"x-sonosapi-stream:s24903?sid=254&flags=8224&sn=0","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":154,"wires":[["b5752468.15d418"]]},{"id":"eda6b8af.911258","type":"inject","z":"775d7a2a.44f234","name":"activate Arabella direct","topic":"x-rincon-mp3radio://http://live.radioarabella.de/stream?ref=radioarabella.de","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":189,"wires":[["b5752468.15d418"]]},{"id":"f7c525b1.bb4868","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"test_connected","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":125,"y":954,"wires":[["14f90bc4.af3534","c462718a.7b287"]]},{"id":"d019e4ea.bdd108","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"test_connected","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1020,"wires":[["1cea8f6a.b6c9f1"]]},{"id":"e8890445.efc0d8","type":"inject","z":"9ea06256.355a2","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":65,"wires":[["2e34f5b1.a5a72a"]]},{"id":"c20aba70.072a08","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":97.01171875,"y":831.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"daa30934.76a648","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":97.01171875,"y":865.00390625,"wires":[["4d64eeac.4d3e3"]]},{"id":"4d64eeac.4d3e3","type":"function","z":"9ea06256.355a2","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":219.01171875,"y":865.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"3c19df58.80cc9","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":96.01171875,"y":901.00390625,"wires":[["c300c365.38939"]]},{"id":"c300c365.38939","type":"function","z":"9ea06256.355a2","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":218.01171875,"y":901.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"60cea140.4eb6c","type":"inject","z":"9ea06256.355a2","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":127.01171875,"y":796.00390625,"wires":[["3c35ce4f.fc5422"]]},{"id":"9328b6f0.0ce098","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":400,"y":88,"wires":[]},{"id":"35be5578.80893a","type":"comment","z":"4318847d.0693cc","name":"Example 6: Set a morning station but dont play right now","info":"","x":215,"y":736,"wires":[]},{"id":"d82ccb20.029108","type":"inject","z":"99e6906e.c69df","name":"","topic":"2","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1115,"wires":[["a113a1ca.0a6d9"]]},{"id":"a113a1ca.0a6d9","type":"change","z":"99e6906e.c69df","name":"5 tracks","rules":[{"t":"set","p":"numberOfTracks","pt":"msg","to":"5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":1115,"wires":[["ec1960b5.00b3f"]]},{"id":"80a6579.a3292a8","type":"comment","z":"9ea06256.355a2","name":"Invalid ip: from fritzbox","info":"","x":799,"y":763,"wires":[]},{"id":"810e8434.e0abe8","type":"inject","z":"9ea06256.355a2","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":800,"wires":[["8a470931.71a4d8"]]},{"id":"e79de1d9.c134d","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1162,"y":800,"wires":[]},{"id":"60c3d49f.58ee7c","type":"inject","z":"9ea06256.355a2","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":790,"y":843,"wires":[["bd109717.3fb7f8"]]},{"id":"ead1d2c9.dad89","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":750,"y":883,"wires":[["6159246d.cf3bac"]]},{"id":"7f969558.6d046c","type":"inject","z":"9ea06256.355a2","name":"","topic":"NigtMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":780,"y":923,"wires":[["6159246d.cf3bac"]]},{"id":"852d4b9d.122f98","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"set.crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":471,"wires":[["16182df1.06e562"]]},{"id":"5e8b717a.0e50f","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"player.set.loudness","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":216,"wires":[["16182df1.06e562"]]},{"id":"cfcde6d.e832118","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":255,"wires":[["4ed9c170.a95e9"]]},{"id":"f313417d.d6072","type":"change","z":"9ea06256.355a2","name":"no topic","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":440,"wires":[["c634ec6.772531"]]},{"id":"db7e1e48.415ec","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":440,"wires":[["f313417d.d6072"]]},{"id":"4277a6d4.f36418","type":"change","z":"9ea06256.355a2","name":"emtpy topic","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":474,"wires":[["c634ec6.772531"]]},{"id":"3328c155.0f41ee","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":474,"wires":[["4277a6d4.f36418"]]},{"id":"c91b1770.bf7588","type":"change","z":"9ea06256.355a2","name":"wrong EQType name","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Ni","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":507,"wires":[["c634ec6.772531"]]},{"id":"666bf739.4a4c68","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":507,"wires":[["c91b1770.bf7588"]]},{"id":"251ae715.af8708","type":"change","z":"9ea06256.355a2","name":"missing eqvalue","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":541,"wires":[["c634ec6.772531"]]},{"id":"2ecec6dc.511fba","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":541,"wires":[["251ae715.af8708"]]},{"id":"6dcf90cc.c99a3","type":"change","z":"9ea06256.355a2","name":"empty value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":574,"wires":[["c634ec6.772531"]]},{"id":"cbeae512.0b3a48","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":574,"wires":[["6dcf90cc.c99a3"]]},{"id":"778e343.b4128cc","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":607,"wires":[["14192db2.028222"]]},{"id":"14192db2.028222","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":607,"wires":[["c634ec6.772531"]]},{"id":"a898fb78.49df68","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":640,"wires":[["10bbcd59.63d013"]]},{"id":"10bbcd59.63d013","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"O","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":640,"wires":[["c634ec6.772531"]]},{"id":"7cbd3ef8.1cba7","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":550,"y":659,"wires":[]},{"id":"d6758645.60b068","type":"comment","z":"9ea06256.355a2","name":"set eq","info":"","x":55,"y":405,"wires":[]},{"id":"da033f8e.8a5da","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":674,"wires":[["c746562a.f7cf98"]]},{"id":"c746562a.f7cf98","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"20","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":674,"wires":[["c634ec6.772531"]]},{"id":"54cc1a93.be2f24","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":708,"wires":[["10652b08.cdf7a5"]]},{"id":"10652b08.cdf7a5","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"-16","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":708,"wires":[["c634ec6.772531"]]},{"id":"780fd479.d57f9c","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":741,"wires":[["d21c8d75.1a6fb"]]},{"id":"d21c8d75.1a6fb","type":"change","z":"9ea06256.355a2","name":"wrong value","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"SubGain","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":741,"wires":[["c634ec6.772531"]]},{"id":"c17ca575.002578","type":"inject","z":"99e6906e.c69df","name":"","topic":"00:05:00","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":535,"wires":[["16182df1.06e562"]]},{"id":"bf94a6dc.ab87b8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":287,"wires":[["4ed9c170.a95e9"]]},{"id":"ca52f4c.ebb3f08","type":"inject","z":"55805384.a4695c","name":"trigger","topic":"","payload":"get_mediainfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":180,"wires":[["60af36c5.7ff848"]]},{"id":"1413e200.433aee","type":"change","z":"55805384.a4695c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_mysonos","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":180,"wires":[["4057d604.719b58"]]},{"id":"82e1a63f.5053b8","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":730,"y":220,"wires":[]},{"id":"5f80c798.8e1158","type":"function","z":"55805384.a4695c","name":"map radioId - Logo","func":"const mySonosArray= msg.payload;\nfor (let i = 0; i < mySonosArray.length; ++i) {\n    if (mySonosArray[i].radioId === msg.radioId) {\n        msg.payload = mySonosArray[i].logo;\n        break;\n    }\n}\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":220,"wires":[["82e1a63f.5053b8"]]},{"id":"7a547ae8.434b74","type":"inject","z":"99e6906e.c69df","name":"","topic":"00:01:00","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":151,"wires":[["16182df1.06e562"]]},{"id":"ecc5a120.c36b","type":"comment","z":"55805384.a4695c","name":"get logo for radio station","info":"","x":105,"y":140,"wires":[]},{"id":"c7ac28f3.9cf8a8","type":"comment","z":"775d7a2a.44f234","name":"get eq: check 1 or 0 ","info":"","x":150,"y":360,"wires":[]},{"id":"4267e272.f160ac","type":"inject","z":"775d7a2a.44f234","name":"","topic":"NightMode","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":149,"y":397,"wires":[["b899f1d.78a531"]]},{"id":"8be1bf84.93ea7","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":331,"y":379,"wires":[]},{"id":"4e8d059e.7c3d1c","type":"inject","z":"775d7a2a.44f234","name":"","topic":"DialogLevel","payload":"get_eq","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":433,"wires":[["b899f1d.78a531"]]},{"id":"c7819406.1317d8","type":"comment","z":"775d7a2a.44f234","name":"suppressWarnings: 1. keine Warnung, 2. Warnung","info":"","x":249,"y":531,"wires":[]},{"id":"78e4c5e4.573ccc","type":"inject","z":"775d7a2a.44f234","name":"suppressWarnings","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":149,"y":567,"wires":[["a852d82e.c759e8"]]},{"id":"a852d82e.c759e8","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_songinfo","tot":"str"},{"t":"set","p":"suppressWarnings","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":359,"y":567,"wires":[["4a6c0736.6a7908"]]},{"id":"2e790f99.60ca","type":"inject","z":"775d7a2a.44f234","name":"normal","topic":"","payload":"get_songinfo","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":602,"wires":[["4a6c0736.6a7908"]]},{"id":"cf496356.e96a9","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":701,"y":604,"wires":[]},{"id":"61d11102.6049b","type":"inject","z":"775d7a2a.44f234","name":"suppressWarnings","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":149,"y":636,"wires":[["13d3537b.83199d"]]},{"id":"13d3537b.83199d","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_songmedia","tot":"str"},{"t":"set","p":"suppressWarnings","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":359,"y":636,"wires":[["4a6c0736.6a7908"]]},{"id":"a787f5ab.6395a8","type":"inject","z":"775d7a2a.44f234","name":"normal","topic":"","payload":"get_songmedia","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":670,"wires":[["4a6c0736.6a7908"]]},{"id":"f9b5e2f1.62f17","type":"inject","z":"99e6906e.c69df","name":"","topic":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payload":"play.streamhttp","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":561,"y":1072,"wires":[["ec1960b5.00b3f"]]},{"id":"b5c6d343.f8399","type":"inject","z":"99e6906e.c69df","name":"","topic":"http://www.fritz.de/live.m3u","payload":"play.streamhttp","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":561,"y":1105,"wires":[["ec1960b5.00b3f"]]},{"id":"7b8c8849.3858f8","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"set.crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":503,"wires":[["16182df1.06e562"]]},{"id":"b47da8d0.dbeaf8","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":245,"wires":[["ad543336.f0861"]]},{"id":"d205e29.067282","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"modelName","pt":"msg","to":"Sonos Play:3","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"create_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":245,"wires":[["2915b46.c83b64c"]]},{"id":"d750abb1.ec0158","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":285,"wires":[["ef57c875.3d4cd8"]]},{"id":"79a98283.e4516c","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"modelName","pt":"msg","to":"Sonos Play:3","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"seperate_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":285,"wires":[["3cabb2b.65aab4e"]]},{"id":"6d3f722f.4badec","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":610,"y":200,"wires":[]},{"id":"fb0bf022.436a5","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"play_old","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1119,"y":161,"wires":[["5270478.ebb8fb8"]]},{"id":"2e34f5b1.a5a72a","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":401,"y":126,"wires":[["9328b6f0.0ce098"]]},{"id":"55b6f9ce.2ef858","type":"sonos-control-player","z":"4318847d.0693cc","confignode":"8d44022c.adb65","name":"Control Player living","x":918,"y":470,"wires":[[]]},{"id":"39a502ae.bdf62e","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":623,"y":318,"wires":[[]]},{"id":"eaab7f3b.eb8db","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":842,"y":171,"wires":[[]]},{"id":"9974711e.7107e","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"8d44022c.adb65","name":"Control Player - Beam","x":322,"y":102,"wires":[[]]},{"id":"b5752468.15d418","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":420,"y":154,"wires":[[]]},{"id":"c634ec6.772531","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"8d44022c.adb65","name":"","x":500,"y":620,"wires":[["7cbd3ef8.1cba7"]]},{"id":"2915b46.c83b64c","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"32a98882.56e1c8","name":"right player","x":607,"y":245,"wires":[["6d3f722f.4badec"]]},{"id":"3cabb2b.65aab4e","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"32a98882.56e1c8","name":"right player","x":607,"y":285,"wires":[["6d3f722f.4badec"]]},{"id":"5270478.ebb8fb8","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"32a98882.56e1c8","name":"client","x":1269,"y":161,"wires":[[]]},{"id":"165a0add.39d6b5","type":"sonos-get-status","z":"4318847d.0693cc","confignode":"8d44022c.adb65","name":"Get Status WZ","x":284,"y":470,"wires":[["8978d019.4e76e"]]},{"id":"3c35ce4f.fc5422","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":430,"y":830,"wires":[["63e06903.06d2d8"]]},{"id":"14f90bc4.af3534","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"fritzbox","x":329,"y":986,"wires":[["63e06903.06d2d8"]]},{"id":"1cea8f6a.b6c9f1","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"2113e9bb.c52236","name":"play1","x":310,"y":1020,"wires":[["63e06903.06d2d8"]]},{"id":"8a470931.71a4d8","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"","x":1009,"y":799.99609375,"wires":[["e79de1d9.c134d"]]},{"id":"bd109717.3fb7f8","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"64704482.34d37c","name":"","x":1010,"y":843,"wires":[["e79de1d9.c134d"]]},{"id":"6159246d.cf3bac","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"8d44022c.adb65","name":"","x":1010,"y":894,"wires":[["e79de1d9.c134d"]]},{"id":"c462718a.7b287","type":"sonos-get-status","z":"9ea06256.355a2","confignode":"bc822e98.2348e","name":"fritzbox","x":446,"y":943,"wires":[["63e06903.06d2d8"]]},{"id":"60af36c5.7ff848","type":"sonos-get-status","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":150,"y":220,"wires":[["1413e200.433aee"]]},{"id":"b899f1d.78a531","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"8d44022c.adb65","name":"","x":338,"y":415,"wires":[["8be1bf84.93ea7"]]},{"id":"4a6c0736.6a7908","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":549,"y":604,"wires":[["cf496356.e96a9"]]},{"id":"ad543336.f0861","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"2113e9bb.c52236","name":"left player","x":282,"y":245,"wires":[["d205e29.067282"]]},{"id":"ef57c875.3d4cd8","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"2113e9bb.c52236","name":"left player","x":282,"y":285,"wires":[["79a98283.e4516c"]]},{"id":"4057d604.719b58","type":"sonos-manage-radio","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":360,"y":220,"wires":[["5f80c798.8e1158"]]},{"id":"9e0d7aee.907268","type":"sonos-manage-queue","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":588,"y":591,"wires":[["b1f4e729.e2d8f8"]]},{"id":"d32d3c03.61ef1","type":"sonos-manage-queue","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":702,"y":989,"wires":[["8208c58d.b37718"]]},{"id":"22888d78.e458b2","type":"sonos-manage-queue","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":440,"y":784,"wires":[["5fa4dbc.f66a224"]]},{"id":"3fdfbd94.502552","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":290,"wires":[["6d877017.25006"]]},{"id":"6d877017.25006","type":"function","z":"a0a649cc.ca04e8","name":"payload + infinite","func":"msg.payload = 1.0 / 0;\nnode.log(JSON.stringify(msg))\nreturn msg;","outputs":1,"noerr":0,"x":291,"y":290,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"2a300999.190196","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":322,"wires":[["acca6930.c13528"]]},{"id":"acca6930.c13528","type":"function","z":"a0a649cc.ca04e8","name":"payload - infinite","func":"msg.payload = -1.0/0;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":322,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"d14c2c12.1b404","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":292,"wires":[["ac808215.11ba7"]]},{"id":"d52b5af5.c6c438","type":"inject","z":"a0a649cc.ca04e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":640,"y":324,"wires":[["73f496ef.b3cf78"]]},{"id":"73f496ef.b3cf78","type":"function","z":"a0a649cc.ca04e8","name":"xyz - infinite","func":"msg.payload.xyz = -1.0/0;\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":324,"wires":[["bcf459fe.1b0ad8"]]},{"id":"ac808215.11ba7","type":"function","z":"a0a649cc.ca04e8","name":"xyz + infinite","func":"//msg.payload.xyz = 1.0 / 0;\nmsg.payload.xyz = Number.POSITIVE_INFINITY;\nnode.log('>>>' + JSON.stringify(msg))\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":292,"wires":[["bcf459fe.1b0ad8"]]},{"id":"1bfcaa65.a2c6f6","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload - old","func":"/** Validate msg.payload.xyz\n * \n*/\n\nif (typeof msg.payload === 'undefined' || msg.payload === null || \n    (typeof msg.payload === 'number' && isNaN(msg.payload))) {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok');\n    if (typeof msg.payload.xyz === 'undefined' || msg.payload.xyz === null || \n        (typeof msg.payload.xyz === 'number' && isNaN(msg.payload.xyz))|| msg.payload.xyz ==='' ) {\n        node.error('invalid msg.payload.xyz', msg);\n        return;\n    } else {\n        node.warn('found ' + JSON.stringify(msg.payload.xyz)  + '... we can start processing');\n    }\n}\nreturn msg;","outputs":1,"noerr":0,"x":1030,"y":780,"wires":[[]]},{"id":"6e9d66f0.bc30b8","type":"function","z":"a0a649cc.ca04e8","name":"validate msg.payload.xyz -- throws error in case of undefined msg.payload","func":"/** Validate msg.payload.xyz\n * \n*/\n\nif (msg.payload.hasOwnProperty('xyz')) {\n    node.warn('found ' + JSON.stringify(msg.payload.xyz)  + '... we can start processing');\n} else {\n    node.error('invalid msg.payload.xyz', msg);\n}\n\nreturn msg;\n","outputs":1,"noerr":0,"x":880,"y":740,"wires":[[]]},{"id":"63a7db00.cc8604","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload","func":"/** Validate msg.payload.xyz\n * \n*/\nkey = ['payload', 'xzy']\nnode.debug(msg[key])\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":820,"wires":[[]]},{"id":"1cb172b5.14d9cd","type":"http request","z":"ea970db4.5106b","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":480,"y":160,"wires":[["a35f8dee.9f18f"]]},{"id":"93008453.2d0988","type":"change","z":"ea970db4.5106b","name":"define url delete payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/?language=\" & $env('language')","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":120,"wires":[["1cb172b5.14d9cd"]]},{"id":"d7fd649a.9ff818","type":"template","z":"ea970db4.5106b","name":"header with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":429,"y":80,"wires":[["93008453.2d0988"]]},{"id":"dea3f134.ddc37","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":150,"wires":[["6ac23f94.dc3d"]]},{"id":"feb96bef.d13c48","type":"comment","z":"91448cef.2efc9","name":"B. get information about all devices","info":"","x":147,"y":117,"wires":[]},{"id":"df69bc9f.4c2d5","type":"debug","z":"91448cef.2efc9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":748,"y":400,"wires":[]},{"id":"754625fb.8865fc","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":323,"wires":[["33b22f76.f4038"]]},{"id":"2ecedcf0.da0db4","type":"comment","z":"91448cef.2efc9","name":"C. get all information about one specifc device","info":"","x":175,"y":289,"wires":[]},{"id":"7a654d71.f942e4","type":"comment","z":"91448cef.2efc9","name":"D. get all actions of one specific device - depend on the current state of the device","info":"","x":285,"y":615,"wires":[]},{"id":"45bd620f.4b086c","type":"comment","z":"91448cef.2efc9","name":"A. get new bearer  - also do refresh token","info":"","x":165,"y":20,"wires":[]},{"id":"fed8fd9e.68c2d","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":87,"y":53,"wires":[["f5ecdf57.03ab1"]]},{"id":"a048c655.ec1f78","type":"subflow:24092027.ab82","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"},{"name":"clientId","value":"xx","type":"str"},{"name":"clientSecret","value":"xxx","type":"str"},{"name":"username","value":"xxxxx","type":"str"},{"name":"password","value":"xxxxxx","type":"str"}],"x":391,"y":53,"wires":[["df69bc9f.4c2d5"]]},{"id":"f5ecdf57.03ab1","type":"credentials","z":"91448cef.2efc9","name":"","props":[{"value":"username","type":"msg"},{"value":"password","type":"msg"},{"value":"clientId","type":"msg"},{"value":"clientSecret","type":"msg"}],"x":230,"y":53,"wires":[["a048c655.ec1f78"]]},{"id":"7742f9f5.4a43e8","type":"change","z":"24092027.ab82","name":"get env","rules":[{"t":"set","p":"vg","pt":"msg","to":"vg","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":63,"wires":[["cbba5ff0.57a32"]]},{"id":"6ac23f94.dc3d","type":"subflow:ea970db4.5106b","z":"91448cef.2efc9","name":"","env":[],"x":254,"y":150,"wires":[["df69bc9f.4c2d5"]]},{"id":"eaf22f71.d9969","type":"function","z":"ea970db4.5106b","name":"verify input","func":"// verify token\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":218,"y":80,"wires":[["d7fd649a.9ff818"],["681dd18d.1baa4"]]},{"id":"33b22f76.f4038","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":323,"wires":[["df69bc9f.4c2d5"]]},{"id":"88aafd6a.c0982","type":"http request","z":"aeba9414.6f40a8","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":460,"y":120,"wires":[["3da93881.b6e868"]]},{"id":"3f0996d.8ed756a","type":"change","z":"aeba9414.6f40a8","name":"msg.url, no payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/?language=\" & $env('language')","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":80,"wires":[["88aafd6a.c0982"]]},{"id":"98d65a27.8020b8","type":"template","z":"aeba9414.6f40a8","name":"msg.headers with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":410,"y":40,"wires":[["3f0996d.8ed756a"]]},{"id":"a260e272.ea783","type":"function","z":"aeba9414.6f40a8","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":192,"y":97,"wires":[["98d65a27.8020b8"],["fd32a717.878c28"]]},{"id":"bc574599.2b5938","type":"comment","z":"91448cef.2efc9","name":"C. get current status of a specifc device","info":"","x":155,"y":443,"wires":[]},{"id":"8912f7bb.095be8","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":476,"wires":[["9100eaf.d08d818"]]},{"id":"9100eaf.d08d818","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":476,"wires":[["ffb4b516.d45be8"]]},{"id":"d4f62349.a5a59","type":"comment","z":"91448cef.2efc9","name":"C. get current device type of a specifc device","info":"","x":175,"y":367,"wires":[]},{"id":"3eee5c2a.855a04","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":400,"wires":[["2640e37d.d5b69c"]]},{"id":"2640e37d.d5b69c","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":400,"wires":[["35daca5.d3adb36"]]},{"id":"1e76a8e5.b32bc7","type":"comment","z":"91448cef.2efc9","name":"B. get device id of first device","info":"","x":125,"y":191,"wires":[]},{"id":"4590828c.8b3f2c","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":224,"wires":[["472d288e.030668"]]},{"id":"472d288e.030668","type":"subflow:ea970db4.5106b","z":"91448cef.2efc9","name":"","env":[],"x":251,"y":224,"wires":[["d960c503.4130c8"]]},{"id":"d960c503.4130c8","type":"function","z":"91448cef.2efc9","name":"id first object","func":"msg.payload = msg.payload[Object.keys(msg.payload)[0]].ident.deviceIdentLabel.fabNumber\nreturn msg;","outputs":1,"noerr":0,"x":433,"y":224,"wires":[["df69bc9f.4c2d5"]]},{"id":"80c862b8.062ff","type":"comment","z":"91448cef.2efc9","name":"C. get remaining time of specific device","info":"","x":155,"y":520,"wires":[]},{"id":"c47bb64d.541918","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":553,"wires":[["77c1288.984c0d8"]]},{"id":"77c1288.984c0d8","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":553,"wires":[["5dfa60dc.87fc8"]]},{"id":"5dfa60dc.87fc8","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.state.remainingTime[0]*60 + payload.state.remainingTime[1] &  \" min\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":553,"wires":[["df69bc9f.4c2d5"]]},{"id":"35daca5.d3adb36","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.ident.type.value_localized","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":400,"wires":[["df69bc9f.4c2d5"]]},{"id":"ffb4b516.d45be8","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.state.status.value_localized","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":476,"wires":[["df69bc9f.4c2d5"]]},{"id":"f278936b.e797","type":"subflow:4ae29caa.8056e4","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":295,"y":648,"wires":[["df69bc9f.4c2d5"]]},{"id":"a2806ac3.d3a2d8","type":"http request","z":"4ae29caa.8056e4","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":460,"y":118,"wires":[["c8655abf.93b328"]]},{"id":"e9e5b981.24d568","type":"change","z":"4ae29caa.8056e4","name":"msg.url, no payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/actions/\"","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":78,"wires":[["a2806ac3.d3a2d8"]]},{"id":"f2707f72.38a2f","type":"template","z":"4ae29caa.8056e4","name":"msg.headers with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":429,"y":38,"wires":[["e9e5b981.24d568"]]},{"id":"d3015191.5633d","type":"function","z":"4ae29caa.8056e4","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":198,"y":88,"wires":[["f2707f72.38a2f"],["d9bc2537.715df8"]]},{"id":"9c8e0be2.1c8a58","type":"inject","z":"91448cef.2efc9","name":"","topic":"","payload":"000149287451","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":124,"y":648,"wires":[["f278936b.e797"]]},{"id":"c0e959c7.d684f8","type":"comment","z":"91448cef.2efc9","name":"E. execute command set name {\"deviceName\":\"My_Devicename\"}","info":"","x":245,"y":708,"wires":[]},{"id":"b7906361.bd13b","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":94,"y":740,"wires":[["21e8e59.be3271a"]]},{"id":"dafbb889.fb7f58","type":"http request","z":"ad607e01.511ea","name":"PUT to Miele","method":"PUT","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":499,"y":188,"wires":[["21b0eeb.798de12"]]},{"id":"8bbd1614.6e5288","type":"change","z":"ad607e01.511ea","name":"url, body","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/actions/\"","tot":"jsonata"},{"t":"move","p":"action","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":389,"y":68,"wires":[["47b32910.93a498"]]},{"id":"2542e5f6.b0fd8a","type":"function","z":"ad607e01.511ea","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nif (!msg.action){\n    node.error('invalid msg.action - action', msg)\n    return [null, {payload:\"invalid msg.action - action\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":193,"y":75,"wires":[["8bbd1614.6e5288"],["ebacb8a0.327d58"]]},{"id":"bba95584.0ba288","type":"subflow:ad607e01.511ea","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":423,"y":740,"wires":[["df69bc9f.4c2d5"]]},{"id":"f7de50c4.54625","type":"template","z":"ad607e01.511ea","name":"header with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":459,"y":146,"wires":[["dafbb889.fb7f58"]]},{"id":"6f3d8c02.c4ff64","type":"subflow:ad607e01.511ea","z":"91448cef.2efc9","name":"","env":[],"x":423,"y":821,"wires":[["df69bc9f.4c2d5"]]},{"id":"488026b0.68fa38","type":"comment","z":"91448cef.2efc9","name":"E. execute command stop {\"processAction\":2}","info":"","x":175,"y":788,"wires":[]},{"id":"3da93881.b6e868","type":"switch","z":"aeba9414.6f40a8","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":670,"y":40,"wires":[["96a3026.b505b"],["6a599077.f8081"]]},{"id":"6a599077.f8081","type":"function","z":"aeba9414.6f40a8","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":830,"y":120,"wires":[["dd906f4c.1361a"]]},{"id":"dd906f4c.1361a","type":"template","z":"aeba9414.6f40a8","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":980,"y":120,"wires":[[]]},{"id":"fd32a717.878c28","type":"template","z":"aeba9414.6f40a8","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":350,"y":164,"wires":[[]]},{"id":"a35f8dee.9f18f","type":"switch","z":"ea970db4.5106b","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":650,"y":80,"wires":[["84b66c9d.f62ef"],["8c52e1d0.35a7c"]]},{"id":"8c52e1d0.35a7c","type":"function","z":"ea970db4.5106b","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":810,"y":160,"wires":[["fe83c7a3.1ef478"]]},{"id":"fe83c7a3.1ef478","type":"template","z":"ea970db4.5106b","name":"error http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":963,"y":160,"wires":[[]]},{"id":"84b66c9d.f62ef","type":"template","z":"ea970db4.5106b","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":954,"y":120,"wires":[[]]},{"id":"96a3026.b505b","type":"template","z":"aeba9414.6f40a8","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":990,"y":80,"wires":[[]]},{"id":"681dd18d.1baa4","type":"template","z":"ea970db4.5106b","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":390,"y":218,"wires":[[]]},{"id":"ccdfdd96.2d83e","type":"template","z":"69e44f53.5d62f","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"env >>{{${subflowProperty}}}\npayload >>{{envSubflowProperty}}\n","output":"str","x":460,"y":80,"wires":[[]]},{"id":"4cc2813d.75068","type":"change","z":"69e44f53.5d62f","name":"","rules":[{"t":"set","p":"envSubflowProperty","pt":"msg","to":"subflowProperty","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":80,"wires":[["ccdfdd96.2d83e"]]},{"id":"c8655abf.93b328","type":"switch","z":"4ae29caa.8056e4","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":703,"y":38,"wires":[["2c02bcd4.dc63d4"],["52535782.315028"]]},{"id":"52535782.315028","type":"function","z":"4ae29caa.8056e4","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":815,"y":118,"wires":[["1455fb1d.b32055"]]},{"id":"1455fb1d.b32055","type":"template","z":"4ae29caa.8056e4","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":962,"y":118,"wires":[[]]},{"id":"2c02bcd4.dc63d4","type":"template","z":"4ae29caa.8056e4","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":972,"y":78,"wires":[[]]},{"id":"d9bc2537.715df8","type":"template","z":"4ae29caa.8056e4","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":310,"y":158,"wires":[[]]},{"id":"21b0eeb.798de12","type":"switch","z":"ad607e01.511ea","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":693,"y":80,"wires":[["e4fefa21.402038"],["6ad0d242.05cb5c"]]},{"id":"6ad0d242.05cb5c","type":"function","z":"ad607e01.511ea","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":716,"y":160,"wires":[["9ebcdded.4fad9"]]},{"id":"9ebcdded.4fad9","type":"template","z":"ad607e01.511ea","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":863,"y":160,"wires":[[]]},{"id":"e4fefa21.402038","type":"template","z":"ad607e01.511ea","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":873,"y":120,"wires":[[]]},{"id":"ebacb8a0.327d58","type":"template","z":"ad607e01.511ea","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":330,"y":240,"wires":[[]]},{"id":"21e8e59.be3271a","type":"change","z":"91448cef.2efc9","name":"machine id, action","rules":[{"t":"set","p":"payload","pt":"msg","to":"000149287451","tot":"str"},{"t":"set","p":"action","pt":"msg","to":"{\"deviceName\":\"hkMiele\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":249,"y":740,"wires":[["bba95584.0ba288"]]},{"id":"47b32910.93a498","type":"json","z":"ad607e01.511ea","name":"","property":"payload","action":"obj","pretty":false,"x":399,"y":108,"wires":[["f7de50c4.54625"]]},{"id":"7ab1b56e.a9c78c","type":"inject","z":"91448cef.2efc9","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":94,"y":821,"wires":[["c54123db.3130e"]]},{"id":"c54123db.3130e","type":"change","z":"91448cef.2efc9","name":"machine id, action","rules":[{"t":"set","p":"payload","pt":"msg","to":"000149287451","tot":"str"},{"t":"set","p":"action","pt":"msg","to":"{\"processAction\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":249,"y":821,"wires":[["6f3d8c02.c4ff64"]]},{"id":"7f9fee0b.c9bac","type":"comment","z":"91448cef.2efc9","name":"both commands throw error 204 without error message although action was performed succesfully","info":"","x":910,"y":706,"wires":[]},{"id":"e44fd735.4b89a8","type":"switch","z":"24092027.ab82","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":774,"y":143,"wires":[["ccdd1aa3.d7afe8","430fd0da.a6602"],["32c1a07f.b3aaa"]]},{"id":"32c1a07f.b3aaa","type":"function","z":"24092027.ab82","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":934,"y":223,"wires":[["afceb2f2.d18f3"]]},{"id":"afceb2f2.d18f3","type":"template","z":"24092027.ab82","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":1081,"y":223,"wires":[[]]},{"id":"ccdd1aa3.d7afe8","type":"template","z":"24092027.ab82","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":1091,"y":183,"wires":[[]]},{"id":"4400b51a.44eacc","type":"template","z":"24092027.ab82","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":360,"y":258,"wires":[[]]},{"id":"85119bed.21b168","type":"function","z":"24092027.ab82","name":"verify input","func":"// verify bearer & msg properties\nif (!msg.username) {\n    node.error('msg.username not defined', msg)\n    return [null, {payload:'msg.username not defined'}]\n}\nif (!msg.password){\n    node.error('msg.password not defined', msg)\n    return [null, {payload:\"msg.password not definedd\"}]\n}\nif (!msg.clientId){\n    node.error('msg.clientId not defined', msg)\n    return [null, {payload:\"msg.clientId not defined\"}]\n}\nif (!msg.clientSecret){\n    node.error('msg.clientSecret not defined', msg)\n    return [null, {payload:\"msg.clientSecret not defined\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":160,"y":63,"wires":[["7742f9f5.4a43e8"],["4400b51a.44eacc"]]},{"id":"994c115f.0117b","type":"template","z":"24092027.ab82","name":"create body new","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"grant_type=password&username={{username}}&password={{password}}&client_id={{clientId}}&client_secret={{clientSecret}}&vg={{vg}}","output":"str","x":527,"y":103,"wires":[["a1d20301.4f124"]]},{"id":"a1d20301.4f124","type":"change","z":"24092027.ab82","name":"define url, headers","rules":[{"t":"set","p":"url","pt":"msg","to":"https://api.mcs3.miele.com/thirdparty/token/","tot":"str"},{"t":"set","p":"headers","pt":"msg","to":"{\"Content-Type\":\"application/x-www-form-urlencoded\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":754,"y":63,"wires":[["d782c3de.6219"]]},{"id":"d782c3de.6219","type":"http request","z":"24092027.ab82","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":774,"y":103,"wires":[["e44fd735.4b89a8"]]},{"id":"98c0b90e.acfad8","type":"comment","z":"24092027.ab82","name":"Miele only supports form encoded","info":"","x":530,"y":23,"wires":[]},{"id":"430fd0da.a6602","type":"change","z":"24092027.ab82","name":"","rules":[{"t":"set","p":"system_bearerMiele","pt":"global","to":"payload.access_token","tot":"msg"},{"t":"set","p":"system_refreshMiele","pt":"global","to":"payload.refresh_token","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1001,"y":136,"wires":[[]]},{"id":"6fe89867.753478","type":"template","z":"24092027.ab82","name":"create body refresh","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"grant_type=refresh_token&refresh_token={{global.system_refreshMiele}}&client_id={{clientId}}&client_secret={{clientSecret}}&vg={{vg}}","output":"str","x":537,"y":63,"wires":[["a1d20301.4f124"]]},{"id":"cbba5ff0.57a32","type":"switch","z":"24092027.ab82","name":"","property":"doRefresh","propertyType":"env","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":360,"y":103,"wires":[["6fe89867.753478"],["994c115f.0117b"]]},{"id":"8722cd32.1fa46","type":"comment","z":"405b0e15.987b5","name":"Basics: playerName, volume, sameVolume - all optional","info":"","x":205,"y":423,"wires":[]},{"id":"5913b0e7.4e005","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but negative","rules":[{"t":"set","p":"volume","pt":"msg","to":"-20","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":841,"wires":[["ec89cc15.4290d"]]},{"id":"ec89cc15.4290d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":1200,"y":492,"wires":[["d82bbbf0.10b338"]]},{"id":"d82bbbf0.10b338","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1210,"y":455,"wires":[]},{"id":"1ffd9830.ec71b8","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but 0","rules":[{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":873,"wires":[["ec89cc15.4290d"]]},{"id":"35faf3a3.de329c","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but 100","rules":[{"t":"set","p":"volume","pt":"msg","to":"100","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":905,"wires":[["ec89cc15.4290d"]]},{"id":"a833b530.6713b8","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but empty","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":937,"wires":[["ec89cc15.4290d"]]},{"id":"55ef2881.06c478","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but digital and letter","rules":[{"t":"set","p":"volume","pt":"msg","to":"3x","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":969,"wires":[["ec89cc15.4290d"]]},{"id":"8954dadd.55f548","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but text","rules":[{"t":"set","p":"volume","pt":"msg","to":"hello","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":1001,"wires":[["ec89cc15.4290d"]]},{"id":"c72353ac.cc08d","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - but .","rules":[{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":".","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":1033,"wires":[["ec89cc15.4290d"]]},{"id":"5240bf47.043fc","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":492,"wires":[["525370cd.abe1"]]},{"id":"525370cd.abe1","type":"change","z":"405b0e15.987b5","name":"wrong volume - but boolean","rules":[{"t":"set","p":"volume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":364,"y":492,"wires":[["ec89cc15.4290d"]]},{"id":"bcccdf9.be39c2","type":"change","z":"405b0e15.987b5","name":"wrong volume - but JSON","rules":[{"t":"set","p":"volume","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":355,"y":524,"wires":[["ec89cc15.4290d"]]},{"id":"b4b269f0.1aa7f8","type":"change","z":"405b0e15.987b5","name":"wrong volume - but timestamp","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":374,"y":556,"wires":[["ec89cc15.4290d"]]},{"id":"9fadd5a8.3857c8","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but 0","rules":[{"t":"set","p":"volume","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":598,"wires":[["ec89cc15.4290d"]]},{"id":"fc66c449.e0eb78","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but -5","rules":[{"t":"set","p":"volume","pt":"msg","to":"-5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":630,"wires":[["ec89cc15.4290d"]]},{"id":"da13c3fc.1c5bc","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but 100","rules":[{"t":"set","p":"volume","pt":"msg","to":"100","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":662,"wires":[["ec89cc15.4290d"]]},{"id":"cbdbaf6.23a935","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but 1.1","rules":[{"t":"set","p":"volume","pt":"msg","to":"1.1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":694,"wires":[["ec89cc15.4290d"]]},{"id":"2df6203e.1bff4","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but 10.20","rules":[{"t":"set","p":"volume","pt":"msg","to":"10.20","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":726,"wires":[["ec89cc15.4290d"]]},{"id":"83eeb43b.415378","type":"change","z":"405b0e15.987b5","name":"wrong volume - number - but missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":391,"y":758,"wires":[["ec89cc15.4290d"]]},{"id":"ff664a1e.3e6338","type":"change","z":"405b0e15.987b5","name":"wrong volume - string - missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":809,"wires":[["ec89cc15.4290d"]]},{"id":"1af40005.9bd39","type":"comment","z":"405b0e15.987b5","name":"volume","info":"","x":90,"y":458,"wires":[]},{"id":"1b8c8042.f4546","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but boolean","rules":[{"t":"set","p":"playerName","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":986,"y":636,"wires":[["ec89cc15.4290d"]]},{"id":"79b0c290.63eaec","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but JSON","rules":[{"t":"set","p":"playerName","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":986,"y":668,"wires":[["ec89cc15.4290d"]]},{"id":"9872b6f8.387178","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but timestamp","rules":[{"t":"set","p":"playerName","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":996,"y":700,"wires":[["ec89cc15.4290d"]]},{"id":"ef0d807.b9ff58","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but number","rules":[{"t":"set","p":"playerName","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":985,"y":732,"wires":[["ec89cc15.4290d"]]},{"id":"834cab61.d72528","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string but empty","rules":[{"t":"set","p":"playerName","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1006,"y":764,"wires":[["ec89cc15.4290d"]]},{"id":"6a81463f.ae85b8","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string but xxx","rules":[{"t":"set","p":"playerName","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":996,"y":796,"wires":[["ec89cc15.4290d"]]},{"id":"cf992380.a74fa","type":"comment","z":"405b0e15.987b5","name":"playerName","info":"","x":746,"y":601,"wires":[]},{"id":"fe42c076.54c0f","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but string","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":986,"y":873,"wires":[["ec89cc15.4290d"]]},{"id":"93c379c8.a09d78","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but JSON","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":986,"y":905,"wires":[["ec89cc15.4290d"]]},{"id":"c812b0e7.50966","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but timestamp","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":996,"y":937,"wires":[["ec89cc15.4290d"]]},{"id":"a43b74d.bb1d988","type":"change","z":"405b0e15.987b5","name":"wrong playerName - but number","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":986,"y":969,"wires":[["ec89cc15.4290d"]]},{"id":"e1a43d1.a122bc","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string but empty","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1006,"y":1001,"wires":[["ec89cc15.4290d"]]},{"id":"d5a3125b.e29c3","type":"change","z":"405b0e15.987b5","name":"wrong playerName - string but xxx","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":996,"y":1033,"wires":[["ec89cc15.4290d"]]},{"id":"5bcffcf0.b7caa4","type":"comment","z":"405b0e15.987b5","name":"sameVolume","info":"","x":746,"y":840,"wires":[]},{"id":"94e0a41f.c38288","type":"comment","z":"405b0e15.987b5","name":"SUCCESS SUCCESS SUCCESS","info":"","x":145,"y":3413,"wires":[]},{"id":"1c957790.d44598","type":"change","z":"405b0e15.987b5","name":"volume string 30, sameVolume missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":3488,"wires":[["405d1b34.ef7614"]]},{"id":"b0c9da96.fec0b8","type":"change","z":"405b0e15.987b5","name":"volume number 12, sameVolume missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"12","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":401,"y":3520,"wires":[["405d1b34.ef7614"]]},{"id":"e394c644.9a6a78","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"num"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":391,"y":3552,"wires":[["405d1b34.ef7614"]]},{"id":"77ac95f8.95f24c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume false","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":391,"y":3584,"wires":[["405d1b34.ef7614"]]},{"id":"62df47f3.957b58","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Bad","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":431,"y":3622,"wires":[["405d1b34.ef7614"]]},{"id":"335dc449.e3916c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Wohnzimmer","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":461,"y":3654,"wires":[["405d1b34.ef7614"]]},{"id":"d806c9f8.804ab8","type":"comment","z":"99e6906e.c69df","name":"UNIVERSAL: Group based & SONOS player name ","info":"","x":195,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"92452937.a71ce8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":119,"wires":[["16182df1.06e562"]]},{"id":"88f1aa5a.e99258","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"toggle.playback","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":183,"wires":[["16182df1.06e562"]]},{"id":"975d8d1c.3aa88","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"stop","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":247,"wires":[["16182df1.06e562"]]},{"id":"5e28b483.ab0fac","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"next.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":279,"wires":[["16182df1.06e562"]]},{"id":"3b8f19e6.b8fa86","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"previous.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":311,"wires":[["16182df1.06e562"]]},{"id":"95eac179.184b6","type":"inject","z":"99e6906e.c69df","name":"play.notification","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":561,"y":961,"wires":[["f39fd4c6.c693d8"]]},{"id":"f39fd4c6.c693d8","type":"change","z":"99e6906e.c69df","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":735,"y":961,"wires":[["ec1960b5.00b3f"]]},{"id":"1d89f0f8.dc229f","type":"inject","z":"99e6906e.c69df","name":"","topic":"10","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":120,"wires":[["16182df1.06e562"]]},{"id":"16182df1.06e562","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":716,"y":615,"wires":[["253e6e0f.936ce2"]]},{"id":"b5ad35e.9695fc8","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.playbackstate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":983,"y":127,"wires":[["4ed9c170.a95e9"]]},{"id":"9b60bae5.777068","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":983,"y":391,"wires":[["4ed9c170.a95e9"]]},{"id":"7c1ccbb4.1d5e84","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.role","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":647,"wires":[["4ed9c170.a95e9"]]},{"id":"9bbcc937.1cb818","type":"comment","z":"99e6906e.c69df","name":"TuneIn","info":"","x":531,"y":855,"wires":[],"icon":"node-red/alert.svg"},{"id":"fdb85b79.0837d8","type":"inject","z":"99e6906e.c69df","name":"joiner.play.notification","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":581,"y":993,"wires":[["936341a0.c643"]]},{"id":"936341a0.c643","type":"change","z":"99e6906e.c69df","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":772,"y":993,"wires":[["173eec81.585413"]]},{"id":"2fcf04cb.93592c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":87,"wires":[["ffeb7ac3.578f98"]]},{"id":"ffeb7ac3.578f98","type":"change","z":"99e6906e.c69df","name":"volume","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":221,"y":87,"wires":[["16182df1.06e562"]]},{"id":"41fde303.97545c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"play.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":886,"wires":[["d39a9106.99993"]]},{"id":"d39a9106.99993","type":"change","z":"99e6906e.c69df","name":"vol. 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":886,"wires":[["ec1960b5.00b3f"]]},{"id":"7789ab79.2f0354","type":"comment","z":"99e6906e.c69df","name":"queue","info":"","x":90,"y":853,"wires":[],"icon":"node-red/alert.svg"},{"id":"46ee7875.108758","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":730,"y":165,"wires":[["40a60a57.8c31e4"]]},{"id":"8e154c8a.8533a","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":296,"wires":[["47b4da16.908d54"]]},{"id":"15624fbc.1cdbe","type":"comment","z":"405b0e15.987b5","name":"No Ip && invalid serial","info":"","x":140,"y":262,"wires":[]},{"id":"6ea8dfec.5079e","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":131,"wires":[["2c2cd61e.343cba"]]},{"id":"a3eb53b0.a010e","type":"comment","z":"405b0e15.987b5","name":"Invalid ip: from fritzbox","info":"","x":143,"y":97,"wires":[]},{"id":"69a91786.ce6b18","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":213,"wires":[["2d69512a.43bb6e"]]},{"id":"6dbddecf.92143","type":"comment","z":"405b0e15.987b5","name":"Invalid ip address - wrong syntax","info":"","x":170,"y":178,"wires":[]},{"id":"f61cc5e4.1a00a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":91,"y":379,"wires":[["23162a8.e7dc6d6"]]},{"id":"8699983a.eb0458","type":"comment","z":"405b0e15.987b5","name":"No ip && valid serial - WILL WORK!","info":"","x":181,"y":344,"wires":[]},{"id":"a30879a7.772fb8","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":730,"y":199,"wires":[["d8a671fa.965e9"]]},{"id":"d8a671fa.965e9","type":"function","z":"405b0e15.987b5","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":852,"y":199,"wires":[["40a60a57.8c31e4"]]},{"id":"7c4c0a10.483354","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":729,"y":235,"wires":[["a4087202.20aec"]]},{"id":"a4087202.20aec","type":"function","z":"405b0e15.987b5","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":851,"y":235,"wires":[["40a60a57.8c31e4"]]},{"id":"4d33ff2b.a2a25","type":"inject","z":"405b0e15.987b5","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":760,"y":130,"wires":[["40a60a57.8c31e4"]]},{"id":"22f69f98.77d5c","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1050,"y":130,"wires":[]},{"id":"d7adcafd.de0038","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":471,"y":213,"wires":[]},{"id":"b091e82.57ec718","type":"comment","z":"405b0e15.987b5","name":"Network and commands","info":"","x":115,"y":57,"wires":[]},{"id":"2c2cd61e.343cba","type":"sonos-universal","z":"405b0e15.987b5","confignode":"9037fbab.1d8408","name":"fritzbox","x":221,"y":131,"wires":[["d7adcafd.de0038"]]},{"id":"2d69512a.43bb6e","type":"sonos-universal","z":"405b0e15.987b5","confignode":"64704482.34d37c","name":"ip with wrong syntax","x":260,"y":213,"wires":[["d7adcafd.de0038"]]},{"id":"40a60a57.8c31e4","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"any1","x":990,"y":170,"wires":[["22f69f98.77d5c"]]},{"id":"47b4da16.908d54","type":"sonos-universal","z":"405b0e15.987b5","confignode":"ff297616.de3c88","name":"no ip && wrong serial","x":259,"y":296,"wires":[["d7adcafd.de0038"]]},{"id":"23162a8.e7dc6d6","type":"sonos-universal","z":"405b0e15.987b5","confignode":"c747354a.95e5e8","name":"no ip but correct serial number","x":292,"y":379,"wires":[["d7adcafd.de0038"]]},{"id":"fbbe37f9.ec80e8","type":"comment","z":"405b0e15.987b5","name":"FAILURE FAILURE FAILURE FAILURE","info":"","x":155,"y":20,"wires":[]},{"id":"405d1b34.ef7614","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"any2","x":925,"y":3720,"wires":[["3aaebcd9.9ca424"]]},{"id":"3aaebcd9.9ca424","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":949,"y":3682,"wires":[]},{"id":"9d140217.b47b5","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":695,"y":3488,"wires":[["6f9edaf5.1a2804"]]},{"id":"6f9edaf5.1a2804","type":"change","z":"405b0e15.987b5","name":"player.get.volume KÃ¼che","rules":[{"t":"set","p":"payload","pt":"msg","to":"player.get.volume","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"KÃ¼che","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":879,"y":3488,"wires":[["405d1b34.ef7614"]]},{"id":"b30a23b6.b7d41","type":"change","z":"405b0e15.987b5","name":"player.get.volume Wohnzimmer","rules":[{"t":"set","p":"payload","pt":"msg","to":"player.get.volume","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":899,"y":3521,"wires":[["405d1b34.ef7614"]]},{"id":"8614b4a2.7e5e28","type":"change","z":"405b0e15.987b5","name":"player.get.volume Bad","rules":[{"t":"set","p":"payload","pt":"msg","to":"player.get.volume","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":869,"y":3554,"wires":[["405d1b34.ef7614"]]},{"id":"6b9376ef.17cd08","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":695,"y":3521,"wires":[["b30a23b6.b7d41"]]},{"id":"b51e15d2.f53e48","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":695,"y":3554,"wires":[["8614b4a2.7e5e28"]]},{"id":"aba4d4d7.178b68","type":"comment","z":"405b0e15.987b5","name":"play.notifcation","info":"","x":85,"y":1080,"wires":[]},{"id":"714d9e9e.10685","type":"comment","z":"99e6906e.c69df","name":"Notification","info":"","x":541,"y":929,"wires":[],"icon":"node-red/alert.svg"},{"id":"173eec81.585413","type":"sonos-universal","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","name":"joiner","x":911,"y":993,"wires":[["17d641b5.8acd1e"]]},{"id":"253e6e0f.936ce2","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":739,"y":577,"wires":[]},{"id":"17d641b5.8acd1e","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":931,"y":953,"wires":[]},{"id":"d9bd2fe.3f22dd","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"flush_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1371,"wires":[["ee6945bc.9041e8"]]},{"id":"7d288f4d.cfe58","type":"change","z":"405b0e15.987b5","name":"play.queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":452,"y":1371,"wires":[["bd69f167.291ad"]]},{"id":"8d7daf16.7137c","type":"comment","z":"405b0e15.987b5","name":"play.queue with empty queue","info":"","x":160,"y":1337,"wires":[]},{"id":"ee6945bc.9041e8","type":"sonos-manage-queue","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":280,"y":1371,"wires":[["7d288f4d.cfe58"]]},{"id":"bd69f167.291ad","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":604,"y":1371,"wires":[["939badd3.96142"]]},{"id":"939badd3.96142","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":738,"y":1371,"wires":[]},{"id":"310bf27f.6ac1ae","type":"comment","z":"405b0e15.987b5","name":"play.tunein","info":"","x":100,"y":1436,"wires":[]},{"id":"d8e94884.e6a4d8","type":"inject","z":"405b0e15.987b5","name":"TuneIn wrong syntax","topic":"x1324","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1472,"wires":[["ae162836.4cf128"]]},{"id":"4701316e.f4fcb","type":"inject","z":"405b0e15.987b5","name":"TuneIn wrong syntax","topic":"1234","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1504,"wires":[["ae162836.4cf128"]]},{"id":"95f36a14.a0c4c8","type":"inject","z":"405b0e15.987b5","name":"TuneIn wrong syntax","topic":"s234b","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1536,"wires":[["ae162836.4cf128"]]},{"id":"ae162836.4cf128","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":321,"y":1504,"wires":[["9d03522b.25c0d"]]},{"id":"9d03522b.25c0d","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":350,"y":1460,"wires":[]},{"id":"cf6e211f.ed38","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1000,"y":1280,"wires":[["fac63c2e.2a50d"]]},{"id":"fac63c2e.2a50d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"","x":1140,"y":1240,"wires":[["ac47b548.bb4608"]]},{"id":"ac47b548.bb4608","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":750,"y":1120,"wires":[]},{"id":"8008d1e7.5e594","type":"inject","z":"405b0e15.987b5","name":"","topic":"xxxxx","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":940,"y":1198,"wires":[["fac63c2e.2a50d"]]},{"id":"51b3182a.7150a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.mp","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":920,"y":1166,"wires":[["fac63c2e.2a50d"]]},{"id":"589aeb79.ba1484","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"","x":540,"y":1120,"wires":[["ac47b548.bb4608"]]},{"id":"d8002769.a7c318","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"00:00:0x","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":327,"y":1184,"wires":[["589aeb79.ba1484"]]},{"id":"42698402.2e609c","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0y:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":327,"y":1217,"wires":[["589aeb79.ba1484"]]},{"id":"98c6f099.1f4ba","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":327,"y":1249,"wires":[["589aeb79.ba1484"]]},{"id":"f5e5d8ed.0f81a8","type":"change","z":"405b0e15.987b5","name":"duration wrong syntax","rules":[{"t":"set","p":"duration","pt":"msg","to":"0:0:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":327,"y":1281,"wires":[["589aeb79.ba1484"]]},{"id":"838e2878.592fd8","type":"change","z":"405b0e15.987b5","name":"duration - boolean","rules":[{"t":"set","p":"duration","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":317,"y":1120,"wires":[["589aeb79.ba1484"]]},{"id":"884e560.861eba8","type":"change","z":"405b0e15.987b5","name":"duration - number","rules":[{"t":"set","p":"duration","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":318,"y":1152,"wires":[["589aeb79.ba1484"]]},{"id":"7d4d2d0c.592394","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1120,"wires":[["d8002769.a7c318","42698402.2e609c","98c6f099.1f4ba","f5e5d8ed.0f81a8","838e2878.592fd8","884e560.861eba8"]]},{"id":"c71ec1c.6cbb74","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1280,"wires":[["d8002769.a7c318","42698402.2e609c","98c6f099.1f4ba","f5e5d8ed.0f81a8","838e2878.592fd8","884e560.861eba8"]]},{"id":"6b4b84a6.2ae86c","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.mp4","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1000,"y":1312,"wires":[["fac63c2e.2a50d"]]},{"id":"af8776db.d19ad8","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.aac","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1020,"y":1344,"wires":[["fac63c2e.2a50d"]]},{"id":"11214f83.e8d74","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.flac","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1000,"y":1376,"wires":[["fac63c2e.2a50d"]]},{"id":"33ace11a.e1613e","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.m4a","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1000,"y":1408,"wires":[["fac63c2e.2a50d"]]},{"id":"2dff2c1f.b72864","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.ogg","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1000,"y":1440,"wires":[["fac63c2e.2a50d"]]},{"id":"6d413ae6.b8b044","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.asf","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1019,"y":1472,"wires":[["fac63c2e.2a50d"]]},{"id":"deee1f01.2999e","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://192.168.178.25/xxxxx.wma","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1000,"y":1504,"wires":[["fac63c2e.2a50d"]]},{"id":"cc39110a.1e83b","type":"comment","z":"405b0e15.987b5","name":"will work but not play","info":"","x":910,"y":1240,"wires":[]},{"id":"db945235.1367a","type":"comment","z":"405b0e15.987b5","name":"next previous - switch to stream to test","info":"","x":190,"y":1600,"wires":[]},{"id":"e031e20c.374b8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"next.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":1635,"wires":[["ae162836.4cf128"]]},{"id":"4187e914.5f9c98","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"previous.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1668,"wires":[["ae162836.4cf128"]]},{"id":"486fc26d.27d13c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":1640,"wires":[["9e5e352e.fd5368"]]},{"id":"9e5e352e.fd5368","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":1080,"y":1700,"wires":[[]]},{"id":"6dd36199.39de5","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":524.5,"wires":[["bcccdf9.be39c2"]]},{"id":"c0d6e696.8a94a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":557,"wires":[["b4b269f0.1aa7f8"]]},{"id":"17c84f76.837541","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":598,"wires":[["9fadd5a8.3857c8"]]},{"id":"be0b7ad2.6d65f8","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":630,"wires":[["fc66c449.e0eb78"]]},{"id":"8ca90867.418be8","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":662,"wires":[["da13c3fc.1c5bc"]]},{"id":"1d6663a5.2d36bc","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":694,"wires":[["cbdbaf6.23a935"]]},{"id":"6073330.8a18dcc","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":726,"wires":[["2df6203e.1bff4"]]},{"id":"a733eb78.fe3898","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":758,"wires":[["83eeb43b.415378"]]},{"id":"d49eaaeb.7fa568","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":809,"wires":[["ff664a1e.3e6338"]]},{"id":"cea6a57a.491368","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":841,"wires":[["5913b0e7.4e005"]]},{"id":"4d4786af.b1c098","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":873,"wires":[["1ffd9830.ec71b8"]]},{"id":"9eb7063b.0e1108","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":905,"wires":[["35faf3a3.de329c"]]},{"id":"6a13bb74.5c90b4","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":937,"wires":[["a833b530.6713b8"]]},{"id":"e80a0639.757868","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":969,"wires":[["55ef2881.06c478"]]},{"id":"d302b0a2.6397","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":131,"y":1034,"wires":[["c72353ac.cc08d"]]},{"id":"28507a27.895196","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":131,"y":1002,"wires":[["8954dadd.55f548"]]},{"id":"ffcc0c9.52f51f","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":636,"wires":[["1b8c8042.f4546"]]},{"id":"f752e536.b630f8","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":668,"wires":[["79b0c290.63eaec"]]},{"id":"672bd93f.a3d578","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":700,"wires":[["9872b6f8.387178"]]},{"id":"20274561.9c3b4a","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":732,"wires":[["ef0d807.b9ff58"]]},{"id":"367792e3.bfe2ce","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":764,"wires":[["834cab61.d72528"]]},{"id":"a32c1b6b.566378","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":749,"y":796,"wires":[["6a81463f.ae85b8"]]},{"id":"7ee7e9d7.f96dc8","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":873,"wires":[["fe42c076.54c0f"]]},{"id":"1609dd98.6e79c2","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":905,"wires":[["93c379c8.a09d78"]]},{"id":"6269dc15.ad4e64","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":937,"wires":[["c812b0e7.50966"]]},{"id":"da24775c.ae7568","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":969,"wires":[["a43b74d.bb1d988"]]},{"id":"37373f1f.be594","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":1001,"wires":[["e1a43d1.a122bc"]]},{"id":"e2dd2c1f.b9488","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":748,"y":1033,"wires":[["d5a3125b.e29c3"]]},{"id":"c19121d3.96db1","type":"inject","z":"405b0e15.987b5","name":"","topic":"-1","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":1673,"wires":[["9e5e352e.fd5368"]]},{"id":"3345d807.883348","type":"inject","z":"405b0e15.987b5","name":"","topic":"0","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":1706,"wires":[["9e5e352e.fd5368"]]},{"id":"822d5dc0.e1fb9","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":1740,"wires":[["9e5e352e.fd5368"]]},{"id":"2420e27.3add31e","type":"inject","z":"405b0e15.987b5","name":"","topic":"100","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":780,"y":1740,"wires":[["9e5e352e.fd5368"]]},{"id":"4c3d7d99.589f14","type":"inject","z":"405b0e15.987b5","name":"","topic":"3x","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":1640,"wires":[["9e5e352e.fd5368"]]},{"id":"b9a97285.6cebe","type":"inject","z":"405b0e15.987b5","name":"","topic":"hallo","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":780,"y":1673,"wires":[["9e5e352e.fd5368"]]},{"id":"7f1e93ff.4c2fbc","type":"inject","z":"405b0e15.987b5","name":"","topic":".","payload":"player.set.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":1705,"wires":[["9e5e352e.fd5368"]]},{"id":"b86e7e34.d0e0f","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":3488,"wires":[["1c957790.d44598"]]},{"id":"40d7d88c.755228","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":3520,"wires":[["b0c9da96.fec0b8"]]},{"id":"2986efa3.54e3b","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":3552,"wires":[["e394c644.9a6a78"]]},{"id":"1b629ce5.4bdc33","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":3584,"wires":[["77ac95f8.95f24c"]]},{"id":"29696888.eb1358","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":3622,"wires":[["62df47f3.957b58"]]},{"id":"79a1c33e.33e06c","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":3654,"wires":[["335dc449.e3916c"]]},{"id":"a3965646.35b118","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":670,"y":480,"wires":[["3f8f86d5.fca95a"]]},{"id":"3f8f86d5.fca95a","type":"change","z":"405b0e15.987b5","name":"volume missingb but sameVolume true","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":931,"y":480,"wires":[["ec89cc15.4290d"]]},{"id":"181a89ad.6460c6","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Bad","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":3686,"wires":[["405d1b34.ef7614"]]},{"id":"67b2a46d.59410c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player wohnzimmer","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":3719,"wires":[["405d1b34.ef7614"]]},{"id":"adf541a5.0cb21","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":129,"y":3686,"wires":[["181a89ad.6460c6"]]},{"id":"933cf2b3.63a7f","type":"inject","z":"405b0e15.987b5","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":129,"y":3718,"wires":[["67b2a46d.59410c"]]},{"id":"6ad1cfa4.f46fa","type":"inject","z":"405b0e15.987b5","name":"ZAPSPLAT","topic":"https://www.zapsplat.com/wp-content/uploads/2015/sound-effects-the-sound-pack-tree/tspt_pull_bell_02_065.mp3?_=1","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":3823,"wires":[["af708f2c.eb039"]]},{"id":"a75b8773.803058","type":"inject","z":"405b0e15.987b5","name":"soundbible dog","topic":"http://soundbible.com/mp3/labrador-barking-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121,"y":3855,"wires":[["af708f2c.eb039"]]},{"id":"748eb572.94a7dc","type":"inject","z":"405b0e15.987b5","name":"Bell","topic":"http://soundbible.com/mp3/bells-tibetan-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":93,"y":3887,"wires":[["af708f2c.eb039"]]},{"id":"f6442e4b.2ca74","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":103,"y":3951,"wires":[["af708f2c.eb039"]]},{"id":"1676e92a.61efa7","type":"inject","z":"405b0e15.987b5","name":"alarm","topic":"http://soundbible.com/mp3/Fire%20Truck%20Siren-SoundBible.com-642727443.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":93,"y":3919,"wires":[["af708f2c.eb039"]]},{"id":"64ecb30a.571c2c","type":"comment","z":"405b0e15.987b5","name":"play.notification","info":"","x":121,"y":3788,"wires":[]},{"id":"fe7e5f19.c9fa7","type":"comment","z":"405b0e15.987b5","name":"Volume/sameVolume/playerName","info":"","x":180,"y":3450,"wires":[]},{"id":"af708f2c.eb039","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"","x":340,"y":3890,"wires":[[]]},{"id":"de50ea04.b9f108","type":"inject","z":"405b0e15.987b5","name":"ZAPSPLAT","topic":"https://www.zapsplat.com/wp-content/uploads/2015/sound-effects-the-sound-pack-tree/tspt_pull_bell_02_065.mp3?_=1","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":591,"y":3825,"wires":[["3fbf466d.b527ea"]]},{"id":"9ec0b72f.038888","type":"inject","z":"405b0e15.987b5","name":"soundbible dog","topic":"http://soundbible.com/mp3/labrador-barking-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":601,"y":3857,"wires":[["3fbf466d.b527ea"]]},{"id":"9f33e93.bc94618","type":"inject","z":"405b0e15.987b5","name":"Bell","topic":"http://soundbible.com/mp3/bells-tibetan-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":572,"y":3889,"wires":[["3fbf466d.b527ea"]]},{"id":"2b5acb79.a6b7e4","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":582,"y":3953,"wires":[["3fbf466d.b527ea"]]},{"id":"d1fda60.5f5df58","type":"inject","z":"405b0e15.987b5","name":"alarm","topic":"http://soundbible.com/mp3/Fire%20Truck%20Siren-SoundBible.com-642727443.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":572,"y":3921,"wires":[["3fbf466d.b527ea"]]},{"id":"95a74f68.2ef37","type":"comment","z":"405b0e15.987b5","name":"joiner.play.notification","info":"","x":600,"y":3790,"wires":[]},{"id":"3fbf466d.b527ea","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"","x":820,"y":3885,"wires":[[]]},{"id":"aa0091ea.485d1","type":"inject","z":"405b0e15.987b5","name":"joiner ","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":1280,"wires":[["2cc2954d.16586a"]]},{"id":"2cc2954d.16586a","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"coordinator","x":710,"y":1280,"wires":[["939badd3.96142"]]},{"id":"295d9daf.b86d92","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":581,"y":3985,"wires":[["565335ac.1ab00c"]]},{"id":"565335ac.1ab00c","type":"change","z":"405b0e15.987b5","name":"volume string 70","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":741,"y":3985,"wires":[["3fbf466d.b527ea"]]},{"id":"c4a5756d.d6c5b8","type":"inject","z":"405b0e15.987b5","name":"fog horn","topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":3983,"wires":[["8113d12b.637c7"]]},{"id":"8113d12b.637c7","type":"change","z":"405b0e15.987b5","name":"volume string 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":3983,"wires":[["af708f2c.eb039"]]},{"id":"6839dba2.9ce034","type":"comment","z":"405b0e15.987b5","name":"Test case: player an / aus und notification spielen","info":"","x":480,"y":4017,"wires":[]},{"id":"aa2e6460.b540a8","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":398,"y":71,"wires":[["e4646c63.7ee1f"]]},{"id":"2a470d1d.b5bc02","type":"comment","z":"4318847d.0693cc","name":"Example 2: Play a (MusicLibrary, Amazon) playlist using My Sonos ","info":"","x":245,"y":160,"wires":[]},{"id":"6bda4392.15afbc","type":"inject","z":"4318847d.0693cc","name":"","topic":"ML10CC","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":200,"wires":[["a12c4300.4a2fa"]]},{"id":"a12c4300.4a2fa","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":371,"y":214,"wires":[["cc0d78f0.3cebb8"]]},{"id":"20f34bd4.e96c84","type":"inject","z":"4318847d.0693cc","name":"","topic":"Best of Prime","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":235,"wires":[["a12c4300.4a2fa"]]},{"id":"17d0af16.8a31a1","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":676,"y":214,"wires":[]},{"id":"cc0d78f0.3cebb8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"32a98882.56e1c8","name":"","x":542,"y":214,"wires":[["17d0af16.8a31a1"]]},{"id":"5fe3a2ed.eb907c","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":390,"y":371,"wires":[["744d729c.ee78dc"]]},{"id":"435d406c.05c4e","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":290,"y":988,"wires":[["8af22d58.53aff"]]},{"id":"48bb69e.93b5998","type":"polly","z":"4318847d.0693cc","name":"","voice":"0","ssml":false,"dir":"overwritten","config":"8945d5a5.31aef8","x":352,"y":1595,"wires":[["751fc24c.5f892c"],[]]},{"id":"47273022.7b687","type":"inject","z":"4318847d.0693cc","name":"weather","topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1550,"wires":[["60d50c04.dc4f34"]]},{"id":"384278f8.a57c98","type":"change","z":"4318847d.0693cc","name":"prepare play notification","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.notification","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"$globalContext('system_baseUrl') & '/notifications/' & topic","tot":"jsonata"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":652,"y":1633,"wires":[["a94b74c4.c18738"]]},{"id":"6dc684d2.01c19c","type":"fs-ops-copy","z":"4318847d.0693cc","name":"","sourcePath":"","sourcePathType":"str","sourceFilename":"file","sourceFilenameType":"msg","destPath":"notification_cache","destPathType":"global","destFilename":"topic","destFilenameType":"msg","link":false,"overwrite":true,"x":596,"y":1591,"wires":[["384278f8.a57c98"]]},{"id":"751fc24c.5f892c","type":"switch","z":"4318847d.0693cc","name":"","property":"_polly.cached","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":468,"y":1597,"wires":[["6dc684d2.01c19c"],["384278f8.a57c98"]]},{"id":"17d3d81e.fd5208","type":"inject","z":"4318847d.0693cc","name":"Caution","topic":"notification_caution.mp3","payload":"Caution Caution Caution","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1582,"wires":[["60d50c04.dc4f34"]]},{"id":"f951db37.428e28","type":"inject","z":"4318847d.0693cc","name":"inform","topic":"notification_inform.mp3","payload":"Please mind your steps","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1615,"wires":[["60d50c04.dc4f34"]]},{"id":"c4e97855.112e88","type":"comment","z":"4318847d.0693cc","name":"Trigger Examples","info":"","x":119,"y":1511,"wires":[]},{"id":"af5b8d26.1705c","type":"comment","z":"4318847d.0693cc","name":"Create/Update mp3 file, create uri and parameter","info":"","x":481,"y":1511,"wires":[]},{"id":"d80a6d67.99515","type":"comment","z":"4318847d.0693cc","name":"Serialize msgs and play notification","info":"","x":1030,"y":1510,"wires":[]},{"id":"63cf7c29.d98064","type":"inject","z":"4318847d.0693cc","name":"Clear storage / cache","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":747,"y":1366,"wires":[["c4a71b8c.25a638","15147b67.cd39d5"]]},{"id":"a8b10427.3fe018","type":"link in","z":"4318847d.0693cc","name":"execute play_notification","links":["a94b74c4.c18738"],"x":904,"y":1550,"wires":[["c6772716.60af68"]]},{"id":"a94b74c4.c18738","type":"link out","z":"4318847d.0693cc","name":"Trigger play_notification","links":["a8b10427.3fe018"],"x":752,"y":1550,"wires":[]},{"id":"c6e721c.1b95de","type":"inject","z":"4318847d.0693cc","name":"set","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1400,"wires":[["6f073a90.08bd84","1e24ff39.4630d1","78ebe214.17527c"]]},{"id":"c5ad62c1.4abfb","type":"comment","z":"4318847d.0693cc","name":"TTS, notification","info":"","x":85,"y":1331,"wires":[]},{"id":"ed11ae49.b8a2d","type":"comment","z":"4318847d.0693cc","name":"Set Up","info":"","x":91,"y":1366,"wires":[]},{"id":"6f073a90.08bd84","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"system_baseUrl","pt":"global","to":"http://192.168.178.49:1880","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1367,"wires":[[]]},{"id":"1e24ff39.4630d1","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"notification_directory","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":306,"y":1399,"wires":[[]]},{"id":"78ebe214.17527c","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"notification_cache","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1431,"wires":[[]]},{"id":"cb99335a.e0a0e","type":"change","z":"4318847d.0693cc","name":"add cache","rules":[{"t":"set","p":"options.dir","pt":"msg","to":"notification_cache","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":605,"y":1549,"wires":[["48bb69e.93b5998"]]},{"id":"a9529c34.96d74","type":"link in","z":"4318847d.0693cc","name":"TTS Execute","links":["18152db0.dc8512","60d50c04.dc4f34","26ac2b2.49d16d4"],"x":315,"y":1549,"wires":[["e9d1d7a9.402848"]]},{"id":"60d50c04.dc4f34","type":"link out","z":"4318847d.0693cc","name":"TTS Trigger","links":["a9529c34.96d74"],"x":207,"y":1549,"wires":[]},{"id":"63902954.cc2b48","type":"comment","z":"4318847d.0693cc","name":"Maintain","info":"","x":554,"y":1367,"wires":[]},{"id":"62c214c3.ab9e3c","type":"fs-ops-delete","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1405,"wires":[[]]},{"id":"c4a71b8c.25a638","type":"fs-ops-dir","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filter":"notification_*.*","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1405,"wires":[["62c214c3.ab9e3c"]]},{"id":"15147b67.cd39d5","type":"fs-ops-dir","z":"4318847d.0693cc","name":"","path":"notification_cache","pathType":"global","filter":"*_*.mp3","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1438,"wires":[["866b0ab0.299a28"]]},{"id":"866b0ab0.299a28","type":"fs-ops-delete","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1438,"wires":[[]]},{"id":"21466965.515bf6","type":"status","z":"4318847d.0693cc","name":"","scope":["7435b64e.0a2fb8"],"x":949,"y":1599,"wires":[["6c22fb96.b37484"]]},{"id":"6c22fb96.b37484","type":"change","z":"4318847d.0693cc","name":"initiate next","rules":[{"t":"set","p":"releaseNext","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1101,"y":1599,"wires":[["c6772716.60af68"]]},{"id":"c6772716.60af68","type":"function","z":"4318847d.0693cc","name":"queue","func":"// modified version - originally from https://gist.github.com/dceejay/cea8afa28b7a93ebdc0f \n\n// restartQueue = create new\nif (msg.hasOwnProperty(\"restartQueue\")) {\n    context.queue = []\n    \n// if queue doesn't exist, create it    \n} else {\n    context.queue = context.queue || []\n    context.busy = context.busy || false\n\n    // if the msg is a trigger one release next message\n    if (msg.hasOwnProperty(\"releaseNext\")) {\n        if (context.queue.length > 0) {\n            var m = context.queue.shift()\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return m \n        }\n        else {\n            context.busy = false;\n        }\n    }\n    else {\n        if (context.busy) {\n            // if busy add to queue\n            context.queue.push(msg);\n        }\n        else {\n        // otherwise we are empty so just pass through and set busy flag\n            context.busy = true;\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return msg;\n        }\n    }\n}\nnode.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n\nreturn null;","outputs":1,"noerr":0,"x":1012,"y":1550,"wires":[["7435b64e.0a2fb8"]]},{"id":"b9e60025.3c367","type":"http in","z":"4318847d.0693cc","name":"","url":"/notifications/:mp3file","method":"get","upload":false,"swaggerDoc":"","x":150,"y":1746,"wires":[["86792da2.4cb06"]]},{"id":"ef769238.e5b02","type":"comment","z":"4318847d.0693cc","name":"serve mp3 file for SONOS player","info":"","x":170,"y":1709,"wires":[]},{"id":"86792da2.4cb06","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('notification_directory') & '/' & msg.req.params.mp3file","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":374,"y":1746,"wires":[["c2fa6cb.342c39"]]},{"id":"c2fa6cb.342c39","type":"file in","z":"4318847d.0693cc","name":"","filename":"","format":"","chunk":false,"sendError":false,"encoding":"base64","x":534,"y":1746,"wires":[["a7138852.445228"]]},{"id":"605e5893.1b9518","type":"catch","z":"4318847d.0693cc","name":"","scope":["86792da2.4cb06","c2fa6cb.342c39","a7138852.445228"],"uncaught":false,"x":549,"y":1794,"wires":[["beb5575e.889f28","11576894.2c6de7"]]},{"id":"5f4a3564.9a4dbc","type":"http response","z":"4318847d.0693cc","name":"","statusCode":"","headers":{},"x":829,"y":1745,"wires":[]},{"id":"fa8b69a4.f26918","type":"comment","z":"4318847d.0693cc","name":"Test","info":"http://192.168.178.49:1880/notifications/notification_weather.mp3","x":386,"y":1710,"wires":[]},{"id":"392665f5.7dc97a","type":"inject","z":"4318847d.0693cc","name":"Flush command queue","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1095,"y":1366,"wires":[["eb9430a5.b1ba6"]]},{"id":"eb9430a5.b1ba6","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"restartQueue","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1107,"y":1403,"wires":[["c6772716.60af68"]]},{"id":"e9d1d7a9.402848","type":"function","z":"4318847d.0693cc","name":"check globals","func":"// checks existens of requried global variables\n//\nlet value = global.get('system_baseUrl')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - system_baseUrl not defined')\n    return null\n}\nvalue = global.get('notification_cache')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_cache not defined')\n    return null\n}\nvalue = global.get('notification_directory')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_directory not defined')\n    return null\n}\nreturn msg\n\nfunction isTruthyAndNotEmptyString (input) {\n    return !(typeof input === 'undefined' || input === null ||\n      (typeof input === 'number' && !Number.isFinite(input)) || input === '')\n}","outputs":1,"noerr":0,"x":432,"y":1549,"wires":[["cb99335a.e0a0e"]]},{"id":"d3477aba.549be8","type":"comment","z":"4318847d.0693cc","name":"Recommendation: Define globals as permanent","info":"This is done in the settings.js file. \nUncomment the contextStorage paragraph.\nThis will store all context variable on disk.","x":440,"y":1331,"wires":[]},{"id":"993b5c0.98e92a8","type":"inject","z":"4318847d.0693cc","name":"weather","topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":450,"y":1655,"wires":[["384278f8.a57c98"]]},{"id":"a7138852.445228","type":"change","z":"4318847d.0693cc","name":"set 200","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"200","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":1746,"wires":[["5f4a3564.9a4dbc"]]},{"id":"beb5575e.889f28","type":"change","z":"4318847d.0693cc","name":"set 404","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"404","tot":"num"},{"t":"set","p":"payload","pt":"msg","to":"error","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":675,"y":1794,"wires":[["5f4a3564.9a4dbc"]]},{"id":"11576894.2c6de7","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"true","targetType":"full","x":670,"y":1829,"wires":[]},{"id":"7435b64e.0a2fb8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":1141,"y":1550,"wires":[["54925fa5.2dc5e"]]},{"id":"54925fa5.2dc5e","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1270,"y":1595,"wires":[]},{"id":"d4793d8e.eecd5","type":"inject","z":"4318847d.0693cc","name":"habit","topic":"notification_habit.mp3","payload":"Don't do unto others what you would not have done unto you. Don't do unto others what you would not have done unto you.","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1648,"wires":[["60d50c04.dc4f34"]]},{"id":"215e529.18f4cae","type":"comment","z":"405b0e15.987b5","name":"Mute and Volume","info":"","x":85,"y":4055,"wires":[]},{"id":"9bf4462f.bb86c8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":4332,"wires":[["91de4831.650de8"]]},{"id":"91de4831.650de8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"joiner","x":830,"y":4375,"wires":[["ecc420a.bdc5fe"]]},{"id":"ecc420a.bdc5fe","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":850,"y":4335,"wires":[]},{"id":"8bc548eb.b758a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":4401,"wires":[["91de4831.650de8"]]},{"id":"1a93ec5f.3affd4","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":4433,"wires":[["91de4831.650de8"]]},{"id":"16e8b5bc.4d364a","type":"inject","z":"405b0e15.987b5","name":"","topic":"On","payload":"set.mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":4248,"wires":[["91de4831.650de8"]]},{"id":"670f799f.402c78","type":"inject","z":"405b0e15.987b5","name":"","topic":"On","payload":"player.set.mute","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":4281,"wires":[["91de4831.650de8"]]},{"id":"c09ace25.3eb3c","type":"inject","z":"405b0e15.987b5","name":"","topic":"20","payload":"adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":4115,"wires":[["91de4831.650de8"]]},{"id":"11d7336d.333d5d","type":"inject","z":"405b0e15.987b5","name":"","topic":"10","payload":"player.adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":4182,"wires":[["91de4831.650de8"]]},{"id":"4391f31.13cc80c","type":"inject","z":"405b0e15.987b5","name":"","topic":"-20","payload":"adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":4148,"wires":[["91de4831.650de8"]]},{"id":"7272876b.e5f638","type":"inject","z":"405b0e15.987b5","name":"","topic":"-10","payload":"player.adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":4215,"wires":[["91de4831.650de8"]]},{"id":"20542b72.a61be4","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":117,"y":4367,"wires":[["91de4831.650de8"]]},{"id":"65f29149.8538a","type":"comment","z":"405b0e15.987b5","name":"get queue","info":"","x":65,"y":4515,"wires":[]},{"id":"5a355136.2bacb","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":4587,"wires":[["6a464d05.31f294"]]},{"id":"fdd05f91.4bf99","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"joiner","x":428,"y":4546,"wires":[["4922e20b.21448c"]]},{"id":"bcf34126.fd0e","type":"sonos-universal","z":"405b0e15.987b5","confignode":"2113e9bb.c52236","name":"independent","x":448,"y":4646,"wires":[["4922e20b.21448c"]]},{"id":"6a464d05.31f294","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"coordinator","x":448,"y":4595,"wires":[["4922e20b.21448c"]]},{"id":"9fa47f84.5e029","type":"change","z":"405b0e15.987b5","name":"KÃ¼che","rules":[{"t":"set","p":"playerName","pt":"msg","to":"KÃ¼che","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":4666,"wires":[["6a464d05.31f294"]]},{"id":"32d4987b.115d28","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":4666,"wires":[["9fa47f84.5e029"]]},{"id":"f0ef755f.a916b8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":4706,"wires":[["892104c9.73e2a8"]]},{"id":"892104c9.73e2a8","type":"change","z":"405b0e15.987b5","name":"Bad","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":4706,"wires":[["6a464d05.31f294"]]},{"id":"4922e20b.21448c","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":625,"y":4595,"wires":[]},{"id":"fdb520de.f832b","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":4555,"wires":[["fdd05f91.4bf99"]]},{"id":"48fa30d4.5b4ca","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":4619,"wires":[["bcf34126.fd0e"]]},{"id":"416bc75e.ac5b68","type":"comment","z":"405b0e15.987b5","name":"get queue","info":"","x":66,"y":4764,"wires":[]},{"id":"c09d0a51.7f05a8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"joiner","x":314,"y":4804,"wires":[["4e84d515.827f7c"]]},{"id":"4bca0245.30df3c","type":"sonos-universal","z":"405b0e15.987b5","confignode":"2113e9bb.c52236","name":"independent","x":449,"y":4877,"wires":[["4e84d515.827f7c"]]},{"id":"7a5e31a.ddb77d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"coordinator","x":449,"y":4837,"wires":[["4e84d515.827f7c"]]},{"id":"b3b79bff.fd0188","type":"change","z":"405b0e15.987b5","name":"KÃ¼che","rules":[{"t":"set","p":"playerName","pt":"msg","to":"KÃ¼che","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":278,"y":4915,"wires":[["7a5e31a.ddb77d"]]},{"id":"ff91378.c66a4c8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121,"y":4915,"wires":[["b3b79bff.fd0188"]]},{"id":"d31d32de.d4abb","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121,"y":4955,"wires":[["17f10797.129fe8"]]},{"id":"17f10797.129fe8","type":"change","z":"405b0e15.987b5","name":"Bad","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":278,"y":4955,"wires":[["7a5e31a.ddb77d"]]},{"id":"4e84d515.827f7c","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":610,"y":4804,"wires":[]},{"id":"4244a437.206f8c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121,"y":4804,"wires":[["c09d0a51.7f05a8"]]},{"id":"bcaaaf61.1905b","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":121,"y":4868,"wires":[["4bca0245.30df3c"]]},{"id":"7bcf3095.0f916","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":4836,"wires":[["7a5e31a.ddb77d"]]},{"id":"1a55af66.08dd31","type":"inject","z":"405b0e15.987b5","name":"","topic":"http://soundbible.com/grab.php?id=1466&type=mp3","payload":"play.notification","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":960,"y":1133,"wires":[["fac63c2e.2a50d"]]},{"id":"66bf987d.759ea8","type":"comment","z":"405b0e15.987b5","name":"play vli Sauna initiated by Spotify","info":"","x":150,"y":5035,"wires":[]},{"id":"9de88740.8eb6e8","type":"inject","z":"405b0e15.987b5","name":"","topic":"Bgm","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":5095,"wires":[["ce88fa6a.6cc128"]]},{"id":"ce88fa6a.6cc128","type":"sonos-manage-mysonos","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":370,"y":5095,"wires":[["c4914b30.1dadb8"]]},{"id":"c4914b30.1dadb8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"any","x":550,"y":5095,"wires":[["fe13eac8.8440b8"]]},{"id":"fe13eac8.8440b8","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":5095,"wires":[]},{"id":"8777e788.b611b8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"xxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":730,"y":273,"wires":[["ebbdc148.1495c"]]},{"id":"ebbdc148.1495c","type":"change","z":"405b0e15.987b5","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":273,"wires":[["40a60a57.8c31e4"]]},{"id":"f0d2d5b3.f9c188","type":"comment","z":"405b0e15.987b5","name":"testing command, msg.payload","info":"","x":810,"y":98,"wires":[]},{"id":"467d1308.f277ac","type":"comment","z":"99e6906e.c69df","name":"Http Radio stream","info":"","x":571,"y":1039,"wires":[],"icon":"node-red/alert.svg"},{"id":"a7851739.e68d28","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.trackplus","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":319,"wires":[["4ed9c170.a95e9"]]},{"id":"722f176.7dd63e8","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":407,"wires":[["16182df1.06e562"]]},{"id":"89bc8068.9d35","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":439,"wires":[["16182df1.06e562"]]},{"id":"84fd7e15.41934","type":"inject","z":"99e6906e.c69df","name":"","topic":"-3","payload":"adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":375,"wires":[["16182df1.06e562"]]},{"id":"9df26d0d.3f513","type":"inject","z":"99e6906e.c69df","name":"","topic":"3","payload":"adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":343,"wires":[["16182df1.06e562"]]},{"id":"7c2300b1.4a3f4","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"player.set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":152,"wires":[["16182df1.06e562"]]},{"id":"b40c1169.e88b5","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"player.set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":184,"wires":[["16182df1.06e562"]]},{"id":"1b3b540d.ff4ddc","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":963,"y":351,"wires":[["4ed9c170.a95e9"]]},{"id":"3f2e24b6.375c2c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":963,"y":191,"wires":[["4ed9c170.a95e9"]]},{"id":"cededcf4.b20a3","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":993,"y":423,"wires":[["4ed9c170.a95e9"]]},{"id":"2a9b7b71.c0ed44","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":983,"y":679,"wires":[["4ed9c170.a95e9"]]},{"id":"8f12e8b.9749d18","type":"inject","z":"99e6906e.c69df","name":"","topic":"-3","payload":"player.adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":88,"wires":[["16182df1.06e562"]]},{"id":"6a301fdb.d4e3b","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"clear.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1051,"wires":[["ec1960b5.00b3f"]]},{"id":"a4d89d41.11067","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"pause","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":215,"wires":[["16182df1.06e562"]]},{"id":"9edf5ab4.56aad8","type":"comment","z":"405b0e15.987b5","name":"Sonos Playlist","info":"","x":75,"y":5155,"wires":[]},{"id":"8ce1a3c2.3bd94","type":"inject","z":"405b0e15.987b5","name":"","topic":"SonosMix","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":5191,"wires":[["dfdbe6f5.e2d8a8"]]},{"id":"dfdbe6f5.e2d8a8","type":"sonos-manage-mysonos","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":370,"y":5191,"wires":[["c4914b30.1dadb8"]]},{"id":"63f9f7cf.816ea8","type":"inject","z":"405b0e15.987b5","name":"","topic":"SonosDido","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":5226,"wires":[["dfdbe6f5.e2d8a8"]]},{"id":"a5a906a0.042c68","type":"inject","z":"405b0e15.987b5","name":"","topic":"Tolle","payload":"export.item","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":5261,"wires":[["dfdbe6f5.e2d8a8"]]},{"id":"854acfe9.a0bb8","type":"inject","z":"405b0e15.987b5","name":"","topic":"SonosMix","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":5304,"wires":[["e0ea97d2.491948"]]},{"id":"384c0123.9ce4fe","type":"inject","z":"405b0e15.987b5","name":"","topic":"SonosDido","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":5339,"wires":[["e0ea97d2.491948"]]},{"id":"8e131a66.9d0128","type":"inject","z":"405b0e15.987b5","name":"","topic":"Tolle","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":5374,"wires":[["e0ea97d2.491948"]]},{"id":"e0ea97d2.491948","type":"sonos-manage-mysonos","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":370,"y":5327,"wires":[["fe13eac8.8440b8"]]},{"id":"47971f2d.36db9","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.state","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":964,"y":159,"wires":[["4ed9c170.a95e9"]]},{"id":"12df8aee.d738b5","type":"inject","z":"99e6906e.c69df","name":"","topic":"queuebackup","payload":"save.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":1017,"wires":[["ec1960b5.00b3f"]]},{"id":"6d7fd15b.259e1","type":"comment","z":"99e6906e.c69df","name":"Group related - omit prefix group.","info":"","x":170,"y":55,"wires":[],"icon":"node-red/alert.svg"},{"id":"1f6ad9a8.93ca66","type":"comment","z":"99e6906e.c69df","name":"Get / Test","info":"","x":963,"y":55,"wires":[],"icon":"node-red/alert.svg"},{"id":"491bd16d.1212e","type":"comment","z":"4318847d.0693cc","name":"Example 8: Group snapshot","info":"","x":125,"y":1060,"wires":[]},{"id":"52d1f7c1.e35848","type":"inject","z":"4318847d.0693cc","name":"","topic":"queueBackup","payload":"remove.sonosplaylist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":1095,"wires":[["d9311d99.f498c"]]},{"id":"95cb2b68.7214d8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":700,"y":1139,"wires":[["ba48ff29.15c59"]]},{"id":"43d03f0a.512fd","type":"change","z":"4318847d.0693cc","name":"create snapshot","rules":[{"t":"set","p":"payload","pt":"msg","to":"create.snap","tot":"str"},{"t":"set","p":"snapVolumes","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"snapMutestates","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":1099,"wires":[["95cb2b68.7214d8"]]},{"id":"e095c253.fc1b1","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":581,"y":1235,"wires":[["572964f2.c187cc"]]},{"id":"572964f2.c187cc","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":713,"y":1235,"wires":[]},{"id":"ba48ff29.15c59","type":"change","z":"4318847d.0693cc","name":"store in flow, stop","rules":[{"t":"set","p":"recentsnapshot","pt":"flow","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":1099,"wires":[["da231a54.c69008"]]},{"id":"7163589.a72b2a8","type":"change","z":"4318847d.0693cc","name":"play snapshot","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.snap","tot":"str"},{"t":"set","p":"snap","pt":"msg","to":"recentsnapshot","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":561,"y":1195,"wires":[["e095c253.fc1b1"]]},{"id":"41c7ac74.a2c854","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":480,"y":1139,"wires":[["43d03f0a.512fd"]]},{"id":"4c5efb45.196ff4","type":"inject","z":"4318847d.0693cc","name":"","topic":"","payload":"clear.queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":1195,"wires":[["5cfc7f18.6f27"]]},{"id":"7f910b16.96cf24","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":343,"y":1235,"wires":[["7163589.a72b2a8"]]},{"id":"5cfc7f18.6f27","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":120,"y":1235,"wires":[["1eb0b341.f8addd"]]},{"id":"1eb0b341.f8addd","type":"change","z":"4318847d.0693cc","name":"restore queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"queue","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"queueBackup","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":1195,"wires":[["7f910b16.96cf24"]]},{"id":"da231a54.c69008","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":920,"y":1139,"wires":[["6324aa0b.dc1234"]]},{"id":"fb8d1e4b.9362e","type":"inject","z":"99e6906e.c69df","name":"","topic":"queueBackup","payload":"household.remove.sonosplaylist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1192,"wires":[["ec1960b5.00b3f"]]},{"id":"83a4278f.691b58","type":"inject","z":"405b0e15.987b5","name":"","topic":"queueBackup","payload":"remove.sonosplaylist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":560,"y":4115,"wires":[["91de4831.650de8"]]},{"id":"48b48fde.73904","type":"inject","z":"405b0e15.987b5","name":"","topic":"queueBackup","payload":"remove.sonosplaylist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":560,"y":4155,"wires":[["c4f533d2.9aac4"]]},{"id":"c4f533d2.9aac4","type":"change","z":"405b0e15.987b5","name":"volume string 30","rules":[{"t":"set","p":"ignoreNotExists","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":4155,"wires":[["91de4831.650de8"]]},{"id":"330983f0.916e6c","type":"change","z":"4318847d.0693cc","name":"backup queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"save.queue","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"queueBackup","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":1100,"wires":[["41c7ac74.a2c854"]]},{"id":"d9311d99.f498c","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":300,"y":1135,"wires":[["330983f0.916e6c"]]},{"id":"6324aa0b.dc1234","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1110,"y":1139,"wires":[]},{"id":"c7d9a77a.a42e18","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"household.get.groups","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1003,"y":88,"wires":[["4ed9c170.a95e9"]]},{"id":"fc8ec1ee.dada8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":140,"y":369,"wires":[["6280f87a.0562c8"]]},{"id":"fa5800f0.d6f4c","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":866,"y":71,"wires":[["6bbf67aa.5b6638"]]},{"id":"fad22422.5dcc88","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":264,"y":591,"wires":[["625148f2.018378"]]},{"id":"ab1e13ab.c7d74","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":932,"y":591,"wires":[[]]},{"id":"9cfa79ba.d93968","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":570,"y":794,"wires":[["98119167.abb2e"]]},{"id":"24a0a7e6.ae3b08","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","name":"","x":856,"y":768,"wires":[[]]},{"id":"d36c728b.5c65a","type":"sonos-universal","z":"4318847d.0693cc","confignode":"32a98882.56e1c8","name":"","x":523,"y":990,"wires":[[]]},{"id":"d5a53bc1.1a1b78","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":590,"y":400,"wires":[["d343fb27.a0c378"]]},{"id":"d343fb27.a0c378","type":"change","z":"775d7a2a.44f234","name":"NightMode","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":399,"wires":[["f9c89d00.dd568"]]},{"id":"9176772f.8ff298","type":"inject","z":"775d7a2a.44f234","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":590,"y":434,"wires":[["e8d55955.d91368"]]},{"id":"e8d55955.d91368","type":"change","z":"775d7a2a.44f234","name":"Speech Enhancement","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"DialogLevel","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760.9913177490234,"y":433.9982604980469,"wires":[["f9c89d00.dd568"]]},{"id":"facf9dd7.a9d2c","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":941,"y":362,"wires":[]},{"id":"f9c89d00.dd568","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"8d44022c.adb65","name":"Control Player wz","x":921,"y":400,"wires":[["facf9dd7.a9d2c"]]},{"id":"a2d8563b.db4848","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1170,"y":3485,"wires":[["e8ae930e.8f"]]},{"id":"e8ae930e.8f","type":"change","z":"405b0e15.987b5","name":"50 seconds","rules":[{"t":"set","p":"payload","pt":"msg","to":"set.sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:00:50","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1311,"y":3485,"wires":[["8db596e.4f47e68"]]},{"id":"67ca785c.116658","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1170,"y":3518,"wires":[["32dad37c.4a242c"]]},{"id":"32dad37c.4a242c","type":"change","z":"405b0e15.987b5","name":"5 min","rules":[{"t":"set","p":"payload","pt":"msg","to":"set.sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:05:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1291,"y":3518,"wires":[["8db596e.4f47e68"]]},{"id":"dbd5551d.afd418","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1170,"y":3551,"wires":[["b21086b6.8cd838"]]},{"id":"b21086b6.8cd838","type":"change","z":"405b0e15.987b5","name":"55 min","rules":[{"t":"set","p":"payload","pt":"msg","to":"set.sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"00:55:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1291,"y":3551,"wires":[["8db596e.4f47e68"]]},{"id":"91c9fddd.f0154","type":"inject","z":"405b0e15.987b5","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1170,"y":3584,"wires":[["c35c680.84fe298"]]},{"id":"c35c680.84fe298","type":"change","z":"405b0e15.987b5","name":"1 hour","rules":[{"t":"set","p":"payload","pt":"msg","to":"set.sleeptimer","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"01:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1291,"y":3584,"wires":[["8db596e.4f47e68"]]},{"id":"9d2d6c02.05054","type":"comment","z":"405b0e15.987b5","name":"set sleeptimer","info":"","x":1190,"y":3452,"wires":[]},{"id":"8db596e.4f47e68","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":1500,"y":3525,"wires":[[]]},{"id":"c4d29d47.879a2","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":590,"y":500,"wires":[["a26518d.55c0ce8"]]},{"id":"a26518d.55c0ce8","type":"change","z":"9ea06256.355a2","name":"NightMode","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NightMode","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":499,"wires":[["983a450e.e9b228"]]},{"id":"8e8f0881.68b758","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":590,"y":534,"wires":[["91f5b42b.2768e8"]]},{"id":"91f5b42b.2768e8","type":"change","z":"9ea06256.355a2","name":"Speech Enhancement","rules":[{"t":"set","p":"payload","pt":"msg","to":"set_eq","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"DialogLevel","tot":"str"},{"t":"set","p":"eqvalue","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760.9913177490234,"y":533.9982604980469,"wires":[["983a450e.e9b228"]]},{"id":"983a450e.e9b228","type":"sonos-control-player","z":"9ea06256.355a2","confignode":"8d44022c.adb65","name":"Control Player wz","x":921,"y":500,"wires":[["a431dd5c.581f9"]]},{"id":"a431dd5c.581f9","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":941,"y":462,"wires":[]},{"id":"44b84922.a06b28","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":304,"y":1945,"wires":[["9a21fd50.7c9d7"]]},{"id":"fc3f0b59.260d48","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1068,"y":1968,"wires":[]},{"id":"4ea2c9ec.fd0d08","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":546,"y":1816,"wires":[["396d4918.a838a6"]]},{"id":"396d4918.a838a6","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"0:01","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":737,"y":1816,"wires":[["9a21fd50.7c9d7"]]},{"id":"94d43619.53ed78","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"00:70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":736,"y":1849,"wires":[["9a21fd50.7c9d7"]]},{"id":"daecba14.c5b888","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"70:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":736,"y":1882,"wires":[["9a21fd50.7c9d7"]]},{"id":"3871abd1.0fbbd4","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"70:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":736,"y":1915,"wires":[["9a21fd50.7c9d7"]]},{"id":"34b3e06a.f447","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"1:00:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":736,"y":1948,"wires":[["9a21fd50.7c9d7"]]},{"id":"1a050c0.8c8a0f4","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"25:00:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":736,"y":1981,"wires":[["9a21fd50.7c9d7"]]},{"id":"8b0069b.6829498","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"20:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":736,"y":2014,"wires":[["9a21fd50.7c9d7"]]},{"id":"a27481de.36fe2","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":304,"y":2011,"wires":[["9a21fd50.7c9d7"]]},{"id":"5a61fbd0.1aba94","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"55","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":303,"y":1978,"wires":[["9a21fd50.7c9d7"]]},{"id":"11698c95.cdbbb3","type":"comment","z":"405b0e15.987b5","name":"set sleep timer","info":"","x":85,"y":1775,"wires":[]},{"id":"e2fc4954.053ac8","type":"change","z":"405b0e15.987b5","name":"missing topic ","rules":[],"action":"","property":"","from":"","to":"","reg":false,"x":284,"y":1812,"wires":[["9a21fd50.7c9d7"]]},{"id":"242f5f0a.81bf4","type":"change","z":"405b0e15.987b5","name":"empty topic","rules":[{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":284,"y":1845,"wires":[["9a21fd50.7c9d7"]]},{"id":"838db42e.29d258","type":"change","z":"405b0e15.987b5","name":"wrong topic type","rules":[{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":294,"y":1878,"wires":[["9a21fd50.7c9d7"]]},{"id":"64505e4d.a79f4","type":"change","z":"405b0e15.987b5","name":"wrong topic type","rules":[{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":294,"y":1912,"wires":[["9a21fd50.7c9d7"]]},{"id":"9a21fd50.7c9d7","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"coordinator","x":1068,"y":2008,"wires":[["fc3f0b59.260d48"]]},{"id":"9706b6f0.8c4368","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":546,"y":1849,"wires":[["94d43619.53ed78"]]},{"id":"c6120efc.e3d24","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":546,"y":1882,"wires":[["daecba14.c5b888"]]},{"id":"919feb81.855678","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":547,"y":1915.6666259765625,"wires":[["3871abd1.0fbbd4"]]},{"id":"c9d65d3c.ed50e","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":546,"y":1948,"wires":[["34b3e06a.f447"]]},{"id":"f7c0135f.1b53d","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":546,"y":1981,"wires":[["1a050c0.8c8a0f4"]]},{"id":"250b1c37.158fa4","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":546,"y":2014,"wires":[["8b0069b.6829498"]]},{"id":"54c61a18.ea7a64","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":1813,"wires":[["e2fc4954.053ac8"]]},{"id":"6644a159.629f5","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":1846,"wires":[["242f5f0a.81bf4"]]},{"id":"f1846186.1c02d","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":1879,"wires":[["838db42e.29d258"]]},{"id":"61da35ec.d3a39c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":112,"y":1912.6666259765625,"wires":[["64505e4d.a79f4"]]},{"id":"f04130c0.4e18","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":1945,"wires":[["44b84922.a06b28"]]},{"id":"fd23ced9.73e23","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":1978,"wires":[["5a61fbd0.1aba94"]]},{"id":"88ed8b0b.95f9a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.sleeptimer","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":2011,"wires":[["a27481de.36fe2"]]},{"id":"dbffce64.f49ff","type":"comment","z":"405b0e15.987b5","name":"set crossfade","info":"","x":1068,"y":1768,"wires":[]},{"id":"4b34beae.bdd38","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1068,"y":1801,"wires":[["9a21fd50.7c9d7"]]},{"id":"7474cbca.0b7214","type":"inject","z":"405b0e15.987b5","name":"","topic":"xxxxx","payload":"set.crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1088,"y":1834,"wires":[["9a21fd50.7c9d7"]]},{"id":"3fecc58d.ab250a","type":"change","z":"405b0e15.987b5","name":"wrong topic type","rules":[{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1243,"y":1868,"wires":[["9a21fd50.7c9d7"]]},{"id":"9ed3b7fe.0d8bb8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1068,"y":1868,"wires":[["3fecc58d.ab250a"]]},{"id":"71b8767f.e528b8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.crossfade","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1068,"y":1901,"wires":[["86d3896e.671168"]]},{"id":"86d3896e.671168","type":"change","z":"405b0e15.987b5","name":"wrong topic type","rules":[{"t":"set","p":"topic","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1245,"y":1901,"wires":[["9a21fd50.7c9d7"]]},{"id":"dc3e581b.230698","type":"comment","z":"405b0e15.987b5","name":"remove track with new track overriding topic and new functions string2validInteger","info":"","x":285,"y":2348,"wires":[]},{"id":"aac3b484.bd1cc8","type":"inject","z":"405b0e15.987b5","name":"","topic":"0","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1500,"y":2546,"wires":[["21384eee.89a2e2"]]},{"id":"9cac81d5.05ffb","type":"inject","z":"405b0e15.987b5","name":"","topic":"-1","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1500,"y":2579,"wires":[["21384eee.89a2e2"]]},{"id":"2bc6883c.278668","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1490,"y":2413,"wires":[["21384eee.89a2e2"]]},{"id":"2b432739.27a7a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"hallo","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1510,"y":2447,"wires":[["21384eee.89a2e2"]]},{"id":"3ff24a7f.afd816","type":"inject","z":"405b0e15.987b5","name":"","topic":".,c","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1500,"y":2480,"wires":[["21384eee.89a2e2"]]},{"id":"2b28ba80.089216","type":"inject","z":"405b0e15.987b5","name":"","topic":"..10.2","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1510,"y":2513,"wires":[["21384eee.89a2e2"]]},{"id":"60e58ce9.1e0784","type":"comment","z":"405b0e15.987b5","name":"remove several songs: only check limits","info":"","x":1110,"y":2380,"wires":[]},{"id":"fe6e136b.4791f","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1028,"y":2415,"wires":[["bbaf9a4a.8ce5c8"]]},{"id":"bbaf9a4a.8ce5c8","type":"change","z":"405b0e15.987b5","name":"number of tracks 0","rules":[{"t":"set","p":"track","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfTracks","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1222,"y":2415,"wires":[["21384eee.89a2e2"]]},{"id":"64af12ee.fe221c","type":"change","z":"405b0e15.987b5","name":"number of tracks 999","rules":[{"t":"set","p":"track","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfTracks","pt":"msg","to":"999","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1232,"y":2447,"wires":[["21384eee.89a2e2"]]},{"id":"21384eee.89a2e2","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"coordinator","x":1210,"y":2582,"wires":[[]]},{"id":"9b7c0d16.c9dc2","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1028,"y":2447,"wires":[["64af12ee.fe221c"]]},{"id":"d9469fb8.d3008","type":"inject","z":"405b0e15.987b5","name":"","topic":"xxxxxx","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":700,"y":2693,"wires":[["46293123.3744d"]]},{"id":"3bded037.ef28","type":"comment","z":"405b0e15.987b5","name":"set.queuemode","info":"","x":646.990234375,"y":2658.37109375,"wires":[]},{"id":"46293123.3744d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"coordinator","x":913.990234375,"y":2723.37109375,"wires":[[]]},{"id":"47bbee11.ca9d4","type":"inject","z":"405b0e15.987b5","name":"","topic":"normal","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":900,"y":4553,"wires":[["58b8d3d5.2611ac"]]},{"id":"1532e017.e3e09","type":"inject","z":"405b0e15.987b5","name":"","topic":"shuffle","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":900,"y":4586,"wires":[["58b8d3d5.2611ac"]]},{"id":"a7b50fea.d09c4","type":"comment","z":"405b0e15.987b5","name":"set.queuemode","info":"","x":846.990234375,"y":4518.37109375,"wires":[]},{"id":"58b8d3d5.2611ac","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"coordinator","x":1211.990234375,"y":4618.37109375,"wires":[[]]},{"id":"3d5b1f85.701d3","type":"inject","z":"405b0e15.987b5","name":"","topic":"repeat_one","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":921.990234375,"y":4618.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"b19eafa9.49035","type":"inject","z":"405b0e15.987b5","name":"","topic":"repeat_all","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":911.990234375,"y":4650.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"882d960a.489338","type":"inject","z":"405b0e15.987b5","name":"","topic":"shuffle_norepeat","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":931.990234375,"y":4682.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"14cf305b.e35ad","type":"inject","z":"405b0e15.987b5","name":"","topic":"shuffle_repeat_one","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":941.990234375,"y":4714.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"e9670ef5.d9777","type":"change","z":"405b0e15.987b5","name":"boolean","rules":[{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":701.990234375,"y":2764.37109375,"wires":[["46293123.3744d"]]},{"id":"8c0e9c18.a41c5","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.queuemode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":679.990234375,"y":2726.37109375,"wires":[["e9670ef5.d9777"]]},{"id":"580bd79e.92f128","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":2232,"wires":[["ae03050b.ff9b28"]]},{"id":"4fb83955.dcb518","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":2298,"wires":[["ae03050b.ff9b28"]]},{"id":"4c1ceab8.120274","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"55","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":259,"y":2265,"wires":[["ae03050b.ff9b28"]]},{"id":"56a5beaa.ac335","type":"change","z":"405b0e15.987b5","name":"missing topic ","rules":[],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":2099,"wires":[["ae03050b.ff9b28"]]},{"id":"4f58d8ac.73ab18","type":"change","z":"405b0e15.987b5","name":"empty topic","rules":[{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":2132,"wires":[["ae03050b.ff9b28"]]},{"id":"ca0127a8.2e9968","type":"change","z":"405b0e15.987b5","name":"wrong topic type","rules":[{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":2165,"wires":[["ae03050b.ff9b28"]]},{"id":"20d7b14b.fb41fe","type":"change","z":"405b0e15.987b5","name":"wrong topic type","rules":[{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":2199,"wires":[["ae03050b.ff9b28"]]},{"id":"4b3f7dd.c574a84","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":97,"y":2100,"wires":[["56a5beaa.ac335"]]},{"id":"d4da9be1.a8c3e8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":97,"y":2133,"wires":[["4f58d8ac.73ab18"]]},{"id":"7b7d4356.ad118c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":97,"y":2166,"wires":[["ca0127a8.2e9968"]]},{"id":"799f31ac.f7de7","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":98,"y":2199.6666259765625,"wires":[["20d7b14b.fb41fe"]]},{"id":"ac53895d.b7a208","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":97,"y":2232,"wires":[["580bd79e.92f128"]]},{"id":"dcefa812.6a04a8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":97,"y":2265,"wires":[["4c1ceab8.120274"]]},{"id":"d3f8a546.b58018","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":97,"y":2298,"wires":[["4fb83955.dcb518"]]},{"id":"7f66a2e1.63e96c","type":"comment","z":"405b0e15.987b5","name":"seek","info":"","x":55,"y":2060,"wires":[]},{"id":"ae03050b.ff9b28","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"coordinator","x":926,"y":2200,"wires":[[]]},{"id":"5a6a9b50.adc104","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"0:01","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":665,"y":2100,"wires":[["ae03050b.ff9b28"]]},{"id":"e354d10.2938f3","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"00:70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":2133,"wires":[["ae03050b.ff9b28"]]},{"id":"af86abf8.032858","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"70:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":2166,"wires":[["ae03050b.ff9b28"]]},{"id":"1ecac17f.d4241f","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"70:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":2199,"wires":[["ae03050b.ff9b28"]]},{"id":"d7f3c0cd.a7f2","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"1:00:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":2232,"wires":[["ae03050b.ff9b28"]]},{"id":"d80d1e22.90e95","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"25:00:10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":2265,"wires":[["ae03050b.ff9b28"]]},{"id":"5f633aa1.dc63c4","type":"change","z":"405b0e15.987b5","name":"invalid time format","rules":[{"t":"set","p":"topic","pt":"msg","to":"20:00:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":2298,"wires":[["ae03050b.ff9b28"]]},{"id":"94585026.d815b","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":485,"y":2100,"wires":[["5a6a9b50.adc104"]]},{"id":"ef311e48.24f1c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":485,"y":2133,"wires":[["e354d10.2938f3"]]},{"id":"77d28e1a.00296","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":485,"y":2166,"wires":[["af86abf8.032858"]]},{"id":"8f30ae30.17b37","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":486,"y":2199.6666259765625,"wires":[["1ecac17f.d4241f"]]},{"id":"5b339f48.4852a","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":485,"y":2232,"wires":[["d7f3c0cd.a7f2"]]},{"id":"ebeb867f.e5ce78","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":485,"y":2265,"wires":[["d80d1e22.90e95"]]},{"id":"a4eeb428.c8fbc8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"seek","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":485,"y":2298,"wires":[["5f633aa1.dc63c4"]]},{"id":"8f8f8422.4099c8","type":"comment","z":"405b0e15.987b5","name":"play track","info":"","x":1080,"y":2060,"wires":[]},{"id":"cdf57cf1.e2334","type":"inject","z":"405b0e15.987b5","name":"","topic":"0","payload":"play.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1125,"y":2230,"wires":[["4d653bdd.18f494"]]},{"id":"cac9c111.9b67d","type":"inject","z":"405b0e15.987b5","name":"","topic":"-1","payload":"play.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1125,"y":2263,"wires":[["4d653bdd.18f494"]]},{"id":"e1d719cd.f577e8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"play.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1115,"y":2097,"wires":[["4d653bdd.18f494"]]},{"id":"d12ecbf4.8ede68","type":"inject","z":"405b0e15.987b5","name":"","topic":"hallo","payload":"play.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1135,"y":2131,"wires":[["4d653bdd.18f494"]]},{"id":"1b1d2e58.aeab12","type":"inject","z":"405b0e15.987b5","name":"","topic":".,c","payload":"play.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1125,"y":2164,"wires":[["4d653bdd.18f494"]]},{"id":"b84b68e5.398548","type":"inject","z":"405b0e15.987b5","name":"","topic":"..10.2","payload":"play.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1135,"y":2197,"wires":[["4d653bdd.18f494"]]},{"id":"4d653bdd.18f494","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"coordinator","x":1365,"y":2200,"wires":[[]]},{"id":"6ea15226.ec5d6c","type":"inject","z":"405b0e15.987b5","name":"","topic":"5","payload":"play.track","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1125,"y":2296,"wires":[["4d653bdd.18f494"]]},{"id":"4554b39e.eb0dcc","type":"comment","z":"405b0e15.987b5","name":"player.join/leave group","info":"","x":105,"y":2660,"wires":[]},{"id":"9692be41.a2e6","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.leave.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":2700,"wires":[["7f602fb7.b8c64"]]},{"id":"d109f6d1.343218","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"coordinator","x":390,"y":2780,"wires":[[]]},{"id":"7f602fb7.b8c64","type":"change","z":"405b0e15.987b5","name":"invalid name","rules":[{"t":"set","p":"playerName","pt":"msg","to":"xxxxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":312,"y":2700,"wires":[["d109f6d1.343218"]]},{"id":"e0575bc9.5ad608","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.leave.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":2734,"wires":[["704a153b.410bbc"]]},{"id":"704a153b.410bbc","type":"change","z":"405b0e15.987b5","name":"invalid player name - boolean","rules":[{"t":"set","p":"playerName","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":362,"y":2734,"wires":[["d109f6d1.343218"]]},{"id":"b58bbcf4.3fc7a","type":"inject","z":"405b0e15.987b5","name":"","topic":"xxxxx","payload":"player.join.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":2780,"wires":[["d109f6d1.343218"]]},{"id":"4de90373.3b552c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.join.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":2820,"wires":[["152d3af0.925b95"]]},{"id":"152d3af0.925b95","type":"change","z":"405b0e15.987b5","name":"invalid player name - boolean","rules":[{"t":"set","p":"playerName","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2820,"wires":[["d109f6d1.343218"]]},{"id":"2b3f55fd.da46aa","type":"comment","z":"55805384.a4695c","name":"Event Listener","info":"","x":75,"y":300,"wires":[]},{"id":"7a9dc1bc.44452","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":450,"y":299,"wires":[]},{"id":"1cdd149b.e2730b","type":"inject","z":"55805384.a4695c","name":"trigger","topic":"","payload":"lab_subscribe","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":910,"y":339,"wires":[["5e09dc71.346b04"]]},{"id":"5e09dc71.346b04","type":"sonos-control-player","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":1060,"y":339,"wires":[["8ff6659a.b521a8"]]},{"id":"8ff6659a.b521a8","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1210,"y":339,"wires":[]},{"id":"f6d3e64e.619b08","type":"http in","z":"55805384.a4695c","d":true,"name":"","url":"/notify","method":"post","upload":false,"swaggerDoc":"","x":110,"y":334,"wires":[["7a9dc1bc.44452","741f261b.011398"]]},{"id":"741f261b.011398","type":"http response","z":"55805384.a4695c","name":"","statusCode":"200","headers":{"content-type":"text/html"},"x":664,"y":334,"wires":[]},{"id":"5eb22380.a0396c","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"get.trackplus","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":109,"y":460,"wires":[["8f3e030e.36f45"]]},{"id":"2ab1dbc3.788904","type":"change","z":"55805384.a4695c","name":"payload.uri","rules":[{"t":"delete","p":"payload","pt":"msg"},{"t":"set","p":"payload.title","pt":"msg","to":"trackData.title","tot":"msg"},{"t":"set","p":"payload.uri","pt":"msg","to":"trackData.uri","tot":"msg"},{"t":"set","p":"payload.currentUri","pt":"msg","to":"mediaData.CurrentURI","tot":"msg"},{"t":"set","p":"payload.trackUri","pt":"msg","to":"positionData.TrackURI","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":461,"wires":[["a7230706.58c2a8"]]},{"id":"a7230706.58c2a8","type":"file","z":"55805384.a4695c","name":"","filename":"\\Users\\hekla\\AppData\\Local\\Temp\\MySonosList.txt","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"utf8","x":450,"y":500,"wires":[[]]},{"id":"8f3e030e.36f45","type":"sonos-universal","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","name":"","x":140,"y":500,"wires":[["2ab1dbc3.788904"]]},{"id":"6527e441.c4808c","type":"inject","z":"9ea06256.355a2","name":"","topic":"xxxx","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":1140,"wires":[["87c64cdb.664f5"]]},{"id":"36b20325.00c20c","type":"comment","z":"9ea06256.355a2","name":"insert_uri ","info":"","x":800,"y":1103,"wires":[]},{"id":"6390c860.a67cb8","type":"inject","z":"9ea06256.355a2","name":"","topic":"xx","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1700,"wires":[["d9c31495.d14c98"]]},{"id":"e7ec7765.b540d8","type":"comment","z":"9ea06256.355a2","name":"insert Music Library Playlist from My Sonos","info":"","x":199,"y":1590,"wires":[]},{"id":"44e2301.616ddd","type":"comment","z":"9ea06256.355a2","name":"insert Sonos Playlist","info":"","x":130,"y":1940,"wires":[]},{"id":"e3410401.e30258","type":"comment","z":"9ea06256.355a2","name":"get Music Library Playlist ","info":"","x":830,"y":1590,"wires":[]},{"id":"f867a43e.d97958","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":768,"y":1669,"wires":[["40ec6cb8.5495d4"]]},{"id":"40ec6cb8.5495d4","type":"change","z":"9ea06256.355a2","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":967,"y":1669,"wires":[["faa1fc6a.1426a"]]},{"id":"59e81fc3.6d2e1","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":768,"y":1702,"wires":[["2a904e67.fdd2b2"]]},{"id":"2a904e67.fdd2b2","type":"change","z":"9ea06256.355a2","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":967,"y":1702,"wires":[["faa1fc6a.1426a"]]},{"id":"bf7e1f98.4d70f","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":768,"y":1736,"wires":[["7e0d725.15b728c"]]},{"id":"7e0d725.15b728c","type":"change","z":"9ea06256.355a2","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":967,"y":1736,"wires":[["faa1fc6a.1426a"]]},{"id":"23a5c937.5315b6","type":"change","z":"9ea06256.355a2","name":"get ML playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_musiclibrary_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"1.3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":967,"y":1772,"wires":[["faa1fc6a.1426a"]]},{"id":"4836aad9.9f1714","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":768,"y":1772,"wires":[["23a5c937.5315b6"]]},{"id":"e8753507.e45128","type":"inject","z":"9ea06256.355a2","name":"get musiclibrary playlist","topic":"","payload":"get_musiclibrary_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":1624,"wires":[["54d19054.176b4"]]},{"id":"617f5d83.17a524","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1284,"y":1777,"wires":[]},{"id":"a8061552.98ecc8","type":"comment","z":"9ea06256.355a2","name":"get Sonos Playlists","info":"","x":811,"y":1943,"wires":[]},{"id":"a9e43a16.48cb88","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":800,"y":1184,"wires":[["b7887634.3911c8"]]},{"id":"bd10e17a.288ce","type":"inject","z":"9ea06256.355a2","name":"","topic":"xxxx","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":1217,"wires":[["b7887634.3911c8"]]},{"id":"3b1c1a60.967aa6","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1170,"y":1177,"wires":[]},{"id":"20acf54e.1fedca","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":1780,"wires":[["75e98add.3ce6a4"]]},{"id":"75e98add.3ce6a4","type":"change","z":"9ea06256.355a2","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":338,"y":1780,"wires":[["d9c31495.d14c98"]]},{"id":"1503ca81.783b85","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":1814,"wires":[["8e4b75dd.b3c068"]]},{"id":"8e4b75dd.b3c068","type":"change","z":"9ea06256.355a2","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":338,"y":1814,"wires":[["d9c31495.d14c98"]]},{"id":"c0cb70b7.46396","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":1848,"wires":[["ca0b8d09.4d529"]]},{"id":"ca0b8d09.4d529","type":"change","z":"9ea06256.355a2","name":"insert ML10CC from musiclibrary using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_musiclibrary_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":338,"y":1848,"wires":[["d9c31495.d14c98"]]},{"id":"8ed61f08.9ef9a","type":"inject","z":"9ea06256.355a2","name":"","topic":"ML10CC","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":1627,"wires":[["e2b97203.df125"]]},{"id":"634ba84f.c8e458","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":583,"y":1734,"wires":[]},{"id":"74516f34.250bd","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":1665,"wires":[["d9c31495.d14c98"]]},{"id":"5a402c9b.5b80b4","type":"inject","z":"9ea06256.355a2","name":"","topic":"1234","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":169,"y":1734,"wires":[["d9c31495.d14c98"]]},{"id":"3484f235.f6c80e","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":771,"y":2027,"wires":[["cebe4141.2692c"]]},{"id":"cebe4141.2692c","type":"change","z":"9ea06256.355a2","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":2027,"wires":[["c6d4c6a4.894e58"]]},{"id":"a06b1eb5.0336b","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":771,"y":2060,"wires":[["362b5eb2.c640a2"]]},{"id":"362b5eb2.c640a2","type":"change","z":"9ea06256.355a2","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":2060,"wires":[["c6d4c6a4.894e58"]]},{"id":"877ecc22.f60f4","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":771,"y":2094,"wires":[["ee90a4bf.9c4c98"]]},{"id":"ee90a4bf.9c4c98","type":"change","z":"9ea06256.355a2","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":2094,"wires":[["c6d4c6a4.894e58"]]},{"id":"f3cc7534.508648","type":"change","z":"9ea06256.355a2","name":"get SONOS playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"get_sonos_playlists","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"1.3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":2130,"wires":[["c6d4c6a4.894e58"]]},{"id":"9f6102a.4ba85","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":771,"y":2130,"wires":[["f3cc7534.508648"]]},{"id":"9f093cca.c7405","type":"inject","z":"9ea06256.355a2","name":"get musiclibrary playlist","topic":"","payload":"get_sonos_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":823,"y":1982,"wires":[["e29631fb.2142b"]]},{"id":"13b0450b.8a951b","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1287,"y":2135,"wires":[]},{"id":"3dc21763.b88fd8","type":"inject","z":"9ea06256.355a2","name":"","topic":"xx","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":139,"y":2047,"wires":[["481fb625.e7ab58"]]},{"id":"15d71a78.34e736","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":2143,"wires":[["a3714b17.2532c8"]]},{"id":"a3714b17.2532c8","type":"change","z":"9ea06256.355a2","name":"insert from sonos playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_sonos_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":317,"y":2143,"wires":[["481fb625.e7ab58"]]},{"id":"d37168cb.db5438","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":2177,"wires":[["5024bc40.f92a94"]]},{"id":"5024bc40.f92a94","type":"change","z":"9ea06256.355a2","name":"insert from sonos playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_sonos_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":317,"y":2177,"wires":[["481fb625.e7ab58"]]},{"id":"c5414a8c.647e28","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"trigger","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":88,"y":2211,"wires":[["eff97ef5.498bf"]]},{"id":"eff97ef5.498bf","type":"change","z":"9ea06256.355a2","name":"insert from sonos playlists using msg.size","rules":[{"t":"set","p":"payload","pt":"msg","to":"insert_sonos_playlist","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"ML10CC","tot":"str"},{"t":"set","p":"size","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":317,"y":2211,"wires":[["481fb625.e7ab58"]]},{"id":"14a4d47d.2545ec","type":"inject","z":"9ea06256.355a2","name":"","topic":"ML","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":148,"y":1974,"wires":[["b81e4f39.0136a"]]},{"id":"99ae72c6.4d9d5","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":582,"y":2081,"wires":[]},{"id":"b6617877.20cf58","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":128,"y":2012,"wires":[["481fb625.e7ab58"]]},{"id":"f579d1b5.781fc","type":"inject","z":"9ea06256.355a2","name":"","topic":"1234","payload":"insert_sonos_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":148,"y":2081,"wires":[["481fb625.e7ab58"]]},{"id":"652e3a4d.083634","type":"inject","z":"9ea06256.355a2","name":"","topic":"12xdgt","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":1250,"wires":[["b7887634.3911c8"]]},{"id":"db4da896.58c908","type":"comment","z":"9ea06256.355a2","name":"insert_spotify_uri","info":"","x":820,"y":1320,"wires":[]},{"id":"c599b6f8.2f5c98","type":"inject","z":"9ea06256.355a2","name":"spotify wrong syntax","topic":"spotify:xxxxxx","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":829,"y":1423,"wires":[["6867bee.096f44"]]},{"id":"82a51939.5f6ae8","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":819.9913330078125,"y":1356.9982604980469,"wires":[["6867bee.096f44"]]},{"id":"47174001.1081a","type":"inject","z":"9ea06256.355a2","name":"","topic":"xxxxxx","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":849,"y":1390,"wires":[["6867bee.096f44"]]},{"id":"9c4ab99.e35c248","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1289.9913330078125,"y":1422.9982604980469,"wires":[]},{"id":"e7e1f952.7c8948","type":"inject","z":"9ea06256.355a2","name":"spotify wrong syntax","topic":"spotify:album:1TSZ","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":829.9913330078125,"y":1455.9982604980469,"wires":[["6867bee.096f44"]]},{"id":"536e877b.43d6a8","type":"inject","z":"9ea06256.355a2","name":"spotify wrong syntax","topic":"spotify:user:spotify:playlist:","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":829.9913330078125,"y":1489.9982604980469,"wires":[["6867bee.096f44"]]},{"id":"14b3fd41.64fe73","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"xxxxx","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":93,"y":1458,"wires":[["e0d51399.e76a2"]]},{"id":"86ea6982.e77638","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":102,"y":1295,"wires":[["9d566b65.9f5c08"]]},{"id":"b1caca47.746448","type":"comment","z":"9ea06256.355a2","name":"No Ip && invalid serial","info":"","x":142,"y":1261,"wires":[]},{"id":"6e8b18b3.e8b678","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":1134,"wires":[["ab1d9bcb.5dc4f8"]]},{"id":"b379bad8.bc9568","type":"comment","z":"9ea06256.355a2","name":"Invalid ip: from fritzbox","info":"","x":143,"y":1100,"wires":[]},{"id":"5273f31f.b00b4c","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":101,"y":1214,"wires":[["84d5be53.173b6"]]},{"id":"beb7eabf.bcefe8","type":"comment","z":"9ea06256.355a2","name":"Invalid ip address - wrong syntax","info":"","x":172,"y":1179,"wires":[]},{"id":"29b2c58b.c3a1fa","type":"inject","z":"9ea06256.355a2","name":"","topic":"","payload":"get_queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":104,"y":1377,"wires":[["b1677152.17e99"]]},{"id":"ff4faad0.964d28","type":"comment","z":"9ea06256.355a2","name":"No ip && valid serial - WILL WORK!","info":"","x":184,"y":1342,"wires":[]},{"id":"162c9382.8d029c","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":93,"y":1492,"wires":[["7b33bf25.26b1c"]]},{"id":"7b33bf25.26b1c","type":"function","z":"9ea06256.355a2","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":215,"y":1492,"wires":[["e0d51399.e76a2"]]},{"id":"a08b059b.87b448","type":"inject","z":"9ea06256.355a2","name":"trigger","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":92,"y":1528,"wires":[["e8950866.732948"]]},{"id":"e8950866.732948","type":"function","z":"9ea06256.355a2","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":214,"y":1528,"wires":[["e0d51399.e76a2"]]},{"id":"63667a57.8d40b4","type":"inject","z":"9ea06256.355a2","name":"empty command","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":123,"y":1423,"wires":[["e0d51399.e76a2"]]},{"id":"a2d18052.a29d8","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":533,"y":1278,"wires":[]},{"id":"4860b314.65f30c","type":"debug","z":"9ea06256.355a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":570,"y":1480,"wires":[]},{"id":"87c64cdb.664f5","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"invalid player","x":992,"y":1140,"wires":[["3b1c1a60.967aa6"]]},{"id":"faa1fc6a.1426a","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":1274,"y":1720,"wires":[["617f5d83.17a524"]]},{"id":"54d19054.176b4","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"invalid player","x":1034,"y":1624,"wires":[[]]},{"id":"b7887634.3911c8","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":1000,"y":1217,"wires":[["3b1c1a60.967aa6"]]},{"id":"e2b97203.df125","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"invalid player","x":253,"y":1627,"wires":[[]]},{"id":"d9c31495.d14c98","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":559,"y":1675,"wires":[["634ba84f.c8e458"]]},{"id":"c6d4c6a4.894e58","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":1277,"y":2078,"wires":[["13b0450b.8a951b"]]},{"id":"e29631fb.2142b","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"invalid player","x":1037,"y":1982,"wires":[[]]},{"id":"b81e4f39.0136a","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"invalid player","x":365,"y":1974,"wires":[[]]},{"id":"481fb625.e7ab58","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":526,"y":2026,"wires":[["99ae72c6.4d9d5"]]},{"id":"6867bee.096f44","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":1119.9913330078125,"y":1422.9982604980469,"wires":[["9c4ab99.e35c248"]]},{"id":"ab1d9bcb.5dc4f8","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"9037fbab.1d8408","name":"","x":282,"y":1134,"wires":[["a2d18052.a29d8"]]},{"id":"84d5be53.173b6","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"64704482.34d37c","name":"","x":282,"y":1214,"wires":[["a2d18052.a29d8"]]},{"id":"9d566b65.9f5c08","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"ff297616.de3c88","name":"","x":281,"y":1295,"wires":[["a2d18052.a29d8"]]},{"id":"b1677152.17e99","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"c747354a.95e5e8","name":"","x":281,"y":1376,"wires":[["a2d18052.a29d8"]]},{"id":"e0d51399.e76a2","type":"sonos-manage-queue","z":"9ea06256.355a2","confignode":"88e9fa70.4a53e8","name":"","x":400,"y":1480,"wires":[["4860b314.65f30c"]]},{"id":"6e2062ee.936d2c","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.led","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":973,"y":487,"wires":[["4ed9c170.a95e9"]]},{"id":"20eda006.f2d6d","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.loudness","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":993,"y":519,"wires":[["4ed9c170.a95e9"]]},{"id":"689609d7.f76198","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":993,"y":615,"wires":[["4ed9c170.a95e9"]]},{"id":"6508f56b.c81bbc","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.dialoglevel","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1003,"y":583,"wires":[["4ed9c170.a95e9"]]},{"id":"3115d56b.28377a","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.get.nightmode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":993,"y":551,"wires":[["4ed9c170.a95e9"]]},{"id":"5ebedebf.cd245","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":830,"y":2940,"wires":[["ce31adf2.9a607"]]},{"id":"e7dce3a7.661fa","type":"inject","z":"405b0e15.987b5","name":"","topic":"xxxxx","payload":"set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":850,"y":2973,"wires":[["ce31adf2.9a607"]]},{"id":"b052d612.b11c28","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":830,"y":3007,"wires":[["35e7df73.84c3e"]]},{"id":"3ce81ad7.8f20f6","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"set.mutestate","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":830,"y":3040,"wires":[["2e22018.d8e04fe"]]},{"id":"35e7df73.84c3e","type":"change","z":"405b0e15.987b5","name":"wrong topic type","rules":[{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1005,"y":3007,"wires":[["ce31adf2.9a607"]]},{"id":"2e22018.d8e04fe","type":"change","z":"405b0e15.987b5","name":"wrong topic type","rules":[{"t":"set","p":"topic","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1007,"y":3040,"wires":[["ce31adf2.9a607"]]},{"id":"ce31adf2.9a607","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"coordinator","x":1150,"y":2960,"wires":[["237719e0.266da6"]]},{"id":"237719e0.266da6","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1150,"y":2920,"wires":[]},{"id":"5aa2fb70.6dd0d4","type":"comment","z":"405b0e15.987b5","name":"set.mutestate","info":"","x":810,"y":2900,"wires":[]},{"id":"3d07eb80.6afcd4","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"player.set.loudness","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":248,"wires":[["16182df1.06e562"]]},{"id":"665478a5.b66178","type":"change","z":"405b0e15.987b5","name":"eqvalue character","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"X","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":337,"y":2961,"wires":[["972d052d.563518"]]},{"id":"7064534d.f8128c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":2961,"wires":[["665478a5.b66178"]]},{"id":"1d81b018.45a04","type":"change","z":"405b0e15.987b5","name":"eqvalue emtpy string","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":346,"y":2995,"wires":[["972d052d.563518"]]},{"id":"cbcab2b6.b087c","type":"change","z":"405b0e15.987b5","name":"eqvalue boolean","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":326,"y":3028,"wires":[["972d052d.563518"]]},{"id":"144141e.569cbbe","type":"change","z":"405b0e15.987b5","name":"eqvalue object","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":326,"y":3060,"wires":[["972d052d.563518"]]},{"id":"ccef1d7c.a2475","type":"change","z":"405b0e15.987b5","name":"eqvalue xxx","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":316,"y":3092,"wires":[["972d052d.563518"]]},{"id":"6c517e37.66489","type":"change","z":"405b0e15.987b5","name":"eqvalue 1000","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"1000","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":326,"y":3124,"wires":[["972d052d.563518"]]},{"id":"15440657.ca072a","type":"change","z":"405b0e15.987b5","name":"eqvalue string 16","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"16","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":336,"y":3156,"wires":[["972d052d.563518"]]},{"id":"8b94f543.c3ae98","type":"change","z":"405b0e15.987b5","name":"eqvalue string -16","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"-16","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":336,"y":3188,"wires":[["972d052d.563518"]]},{"id":"da8ab6e4.5ae6d8","type":"change","z":"405b0e15.987b5","name":"eqvalue test","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"test","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":316,"y":3320,"wires":[["972d052d.563518"]]},{"id":"972d052d.563518","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"living with tv","x":570,"y":3100,"wires":[[]]},{"id":"c568b55a.120c78","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":2995,"wires":[["1d81b018.45a04"]]},{"id":"8640b89d.ca4bc8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":3028,"wires":[["cbcab2b6.b087c"]]},{"id":"bdd71bfe.4097f8","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":2929,"wires":[["972d052d.563518"]]},{"id":"a153cd35.e7939","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":3060,"wires":[["144141e.569cbbe"]]},{"id":"c9878daa.3d228","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":3092,"wires":[["ccef1d7c.a2475"]]},{"id":"77c5523e.aa889c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":3124,"wires":[["6c517e37.66489"]]},{"id":"2389333c.73ddec","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":3156,"wires":[["15440657.ca072a"]]},{"id":"2968b2fb.208aee","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":3188,"wires":[["8b94f543.c3ae98"]]},{"id":"31263678.5e3f5a","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":3320,"wires":[["da8ab6e4.5ae6d8"]]},{"id":"5fc994b.1f8e76c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":132,"y":3369,"wires":[["a978afb.424f35"]]},{"id":"a978afb.424f35","type":"change","z":"405b0e15.987b5","name":"eqvalue test","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"test","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":316,"y":3369,"wires":[["3c1a9267.a6f22e"]]},{"id":"3c1a9267.a6f22e","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","name":"bath without tv","x":500,"y":3369,"wires":[[]]},{"id":"65cc5ac4.07b834","type":"comment","z":"405b0e15.987b5","name":"player.set.subgain TEST of string2ValidInteger requried","info":"","x":205,"y":2896,"wires":[]},{"id":"46d32491.301dcc","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":3221,"wires":[["57a259a6.ed7048"]]},{"id":"57a259a6.ed7048","type":"change","z":"405b0e15.987b5","name":"eqvalue number 16","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"16","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":334,"y":3221,"wires":[["972d052d.563518"]]},{"id":"6b205928.9c9248","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":3254,"wires":[["81663af1.169608"]]},{"id":"81663af1.169608","type":"change","z":"405b0e15.987b5","name":"eqvalue number -16","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"-16","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":344,"y":3254,"wires":[["972d052d.563518"]]},{"id":"8fccc4f7.b8b038","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":129,"y":3287,"wires":[["ff4481bb.c2512"]]},{"id":"ff4481bb.c2512","type":"change","z":"405b0e15.987b5","name":"eqvalue number -10.1","rules":[{"t":"set","p":"eqvalue","pt":"msg","to":"-10.1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":343,"y":3287,"wires":[["972d052d.563518"]]},{"id":"8f6bb0c7.e3d24","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":2382,"wires":[["65be2eb7.308aa"]]},{"id":"a07221a8.dda85","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":2446,"wires":[["bd1646e2.fd1948"]]},{"id":"cbd8a3c9.b6716","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":2478,"wires":[["8aaec51c.1d7218"]]},{"id":"43a1aa50.d299f4","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":2510,"wires":[["fb3c69a0.03b978"]]},{"id":"26c6ed5e.587ae2","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":2542,"wires":[["f3a4ceb2.25f3a"]]},{"id":"1833f8fb.90e697","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":2574,"wires":[["80865b10.bd6a38"]]},{"id":"65be2eb7.308aa","type":"change","z":"405b0e15.987b5","name":"no track no topic","rules":[{"t":"delete","p":"topic","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":281,"y":2382,"wires":[["21384eee.89a2e2"]]},{"id":"bd1646e2.fd1948","type":"change","z":"405b0e15.987b5","name":"track string hallo","rules":[{"t":"set","p":"track","pt":"msg","to":"hallo","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":281,"y":2446,"wires":[["21384eee.89a2e2"]]},{"id":"8aaec51c.1d7218","type":"change","z":"405b0e15.987b5","name":"track string punctation","rules":[{"t":"set","p":"track","pt":"msg","to":".,c","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":301,"y":2478,"wires":[["21384eee.89a2e2"]]},{"id":"fb3c69a0.03b978","type":"change","z":"405b0e15.987b5","name":"track string 10.2","rules":[{"t":"set","p":"track","pt":"msg","to":"10.2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":281,"y":2510,"wires":[["21384eee.89a2e2"]]},{"id":"f3a4ceb2.25f3a","type":"change","z":"405b0e15.987b5","name":"track string 0","rules":[{"t":"set","p":"track","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":271,"y":2542,"wires":[["21384eee.89a2e2"]]},{"id":"80865b10.bd6a38","type":"change","z":"405b0e15.987b5","name":"track string -1","rules":[{"t":"set","p":"track","pt":"msg","to":"-1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":281,"y":2574,"wires":[["21384eee.89a2e2"]]},{"id":"4cd4631d.290d9c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":555,"y":2607,"wires":[["d564a39e.5e2ac"]]},{"id":"d564a39e.5e2ac","type":"change","z":"405b0e15.987b5","name":"track string 1000","rules":[{"t":"set","p":"track","pt":"msg","to":"1000","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":735,"y":2607,"wires":[["21384eee.89a2e2"]]},{"id":"5b1af713.dd0468","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":2414,"wires":[["3684f747.247ad8"]]},{"id":"3684f747.247ad8","type":"change","z":"405b0e15.987b5","name":"track boolean","rules":[{"t":"set","p":"track","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":281,"y":2414,"wires":[["21384eee.89a2e2"]]},{"id":"5c592a1d.f53b54","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":555,"y":2479,"wires":[["12cd737e.557a6d"]]},{"id":"78c5ba0.bb9c348","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":555,"y":2511,"wires":[["ad176a37.061da8"]]},{"id":"e9da5364.3443c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":555,"y":2543,"wires":[["5012b1e0.41dbf"]]},{"id":"12cd737e.557a6d","type":"change","z":"405b0e15.987b5","name":"track nb 10.2","rules":[{"t":"set","p":"track","pt":"msg","to":"10.2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":715,"y":2479,"wires":[["21384eee.89a2e2"]]},{"id":"ad176a37.061da8","type":"change","z":"405b0e15.987b5","name":"track nb 0","rules":[{"t":"set","p":"track","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":705,"y":2511,"wires":[["21384eee.89a2e2"]]},{"id":"5012b1e0.41dbf","type":"change","z":"405b0e15.987b5","name":"track nb -1","rules":[{"t":"set","p":"track","pt":"msg","to":"-1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":715,"y":2543,"wires":[["21384eee.89a2e2"]]},{"id":"4c608163.7de7b","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":555,"y":2575,"wires":[["de01824.166d48"]]},{"id":"de01824.166d48","type":"change","z":"405b0e15.987b5","name":"track nb 1000","rules":[{"t":"set","p":"track","pt":"msg","to":"1000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":725,"y":2575,"wires":[["21384eee.89a2e2"]]},{"id":"e4f0c050.0784f","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":555,"y":2383,"wires":[["da284abb.c06da8"]]},{"id":"dfaf89b8.03e078","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":555,"y":2415,"wires":[["53555556.fc4efc"]]},{"id":"da284abb.c06da8","type":"function","z":"405b0e15.987b5","name":"track topic null","func":"msg.track = null\nmsg.topic = null\nreturn msg","outputs":1,"noerr":0,"x":724,"y":2383,"wires":[["21384eee.89a2e2"]]},{"id":"53555556.fc4efc","type":"function","z":"405b0e15.987b5","name":"track topic undefined","func":"msg.track = undefined\nmsg.topic = undefined\nreturn msg","outputs":1,"noerr":0,"x":745,"y":2415,"wires":[["21384eee.89a2e2"]]},{"id":"b786be90.48f1d","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":555,"y":2447,"wires":[["f4bbba23.f9f778"]]},{"id":"f4bbba23.f9f778","type":"function","z":"405b0e15.987b5","name":"track topic NaN","func":"msg.track = NaN\nmsg.topic = -NaN\nreturn msg","outputs":1,"noerr":0,"x":725,"y":2447,"wires":[["21384eee.89a2e2"]]},{"id":"6651f8a5.024438","type":"change","z":"405b0e15.987b5","name":"invalid track & valid topic","rules":[{"t":"set","p":"track","pt":"msg","to":"10.2","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":313,"y":2606,"wires":[["21384eee.89a2e2"]]},{"id":"5272b3c7.5d9f5c","type":"inject","z":"405b0e15.987b5","name":"","topic":"","payload":"remove.tracks","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":111,"y":2606,"wires":[["6651f8a5.024438"]]},{"id":"9b9aa42f.4ec978","type":"comment","z":"405b0e15.987b5","name":"depreciated topic","info":"","x":1500,"y":2380,"wires":[]},{"id":"ec1960b5.00b3f","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":1159,"y":1192,"wires":[["7a79e2be.027cbc"]]},{"id":"4fbab087.44023","type":"comment","z":"99e6906e.c69df","name":"Spotify","info":"","x":86,"y":1310,"wires":[]},{"id":"c173fc9d.38f2f","type":"inject","z":"99e6906e.c69df","name":"","topic":"Best of Prime Music","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":418,"y":1657,"wires":[["2b89b7f7.c62a08"]]},{"id":"b0ad8a7d.1854d8","type":"inject","z":"99e6906e.c69df","name":"","topic":"Arabella","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":116,"y":1628,"wires":[["2b89b7f7.c62a08"]]},{"id":"86ca85ee.a2cd08","type":"inject","z":"99e6906e.c69df","name":"","topic":"Bayern 3","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":116,"y":1660,"wires":[["4c50aef5.23243"]]},{"id":"4c50aef5.23243","type":"change","z":"99e6906e.c69df","name":"volume 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":133,"y":1696,"wires":[["2b89b7f7.c62a08"]]},{"id":"558bfb3e.cddef4","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":361,"y":1882,"wires":[]},{"id":"e447a5fb.55b1e8","type":"comment","z":"99e6906e.c69df","name":"TuneIn","info":"","x":86,"y":1594,"wires":[]},{"id":"7b83fd95.247314","type":"inject","z":"99e6906e.c69df","name":"","topic":"20 Jahre Napster","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":136,"y":1515,"wires":[["2b89b7f7.c62a08"]]},{"id":"451a4bb6.779df4","type":"comment","z":"99e6906e.c69df","name":"Napster","info":"","x":86,"y":1417,"wires":[]},{"id":"7985988e.bede48","type":"comment","z":"99e6906e.c69df","name":"Amazon","info":"","x":367,"y":1592,"wires":[]},{"id":"ab20892f.d367f8","type":"comment","z":"99e6906e.c69df","name":"Radioplayer","info":"","x":107,"y":1737,"wires":[]},{"id":"d1652a07.af4088","type":"inject","z":"99e6906e.c69df","name":"","topic":"1A Fitness Hits","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":137,"y":1769,"wires":[["2b89b7f7.c62a08"]]},{"id":"45e16280.04171c","type":"inject","z":"99e6906e.c69df","name":"","topic":"Daily Mix","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":116,"y":1343,"wires":[["2b89b7f7.c62a08"]]},{"id":"9f634a18.2f2d28","type":"inject","z":"99e6906e.c69df","name":"","topic":"Best Of Love","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":398,"y":1689,"wires":[["2b89b7f7.c62a08"]]},{"id":"dc81baf.86f5248","type":"inject","z":"99e6906e.c69df","name":"","topic":"GloomySunday","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":136,"y":1375,"wires":[["2b89b7f7.c62a08"]]},{"id":"e55076f0.118b88","type":"inject","z":"99e6906e.c69df","name":"","topic":"The Best Songs of the ","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":156,"y":1547,"wires":[["2b89b7f7.c62a08"]]},{"id":"cb7b6a47.fb6b78","type":"inject","z":"99e6906e.c69df","name":"","topic":"Dust in the Wind","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":136,"y":1451,"wires":[["2b89b7f7.c62a08"]]},{"id":"1951586f.db5668","type":"inject","z":"99e6906e.c69df","name":"","topic":"The Best Of Sade","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":146,"y":1483,"wires":[["2b89b7f7.c62a08"]]},{"id":"c9a05e37.4a69b","type":"inject","z":"99e6906e.c69df","name":"","topic":"Blowin' in the Wind","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":418,"y":1625,"wires":[["2b89b7f7.c62a08"]]},{"id":"2b89b7f7.c62a08","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":443,"y":1501,"wires":[["7f9cc53b.eb1efc"]]},{"id":"7f9cc53b.eb1efc","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","name":"any","x":603,"y":1501,"wires":[["48a90d41.bdb824"]]},{"id":"7176f24b.55de2c","type":"comment","z":"99e6906e.c69df","name":"MY SONOS ","info":"","x":75,"y":1272,"wires":[],"icon":"node-red/alert.svg"},{"id":"80629f1d.90fb6","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"get.items","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":391,"y":1344,"wires":[["7ed6e4a7.8bb5ec"]]},{"id":"8d5a7cf9.0f778","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":346,"y":1922,"wires":[["558bfb3e.cddef4"]]},{"id":"3a82fa70.39bb66","type":"inject","z":"99e6906e.c69df","name":"","topic":"Angi","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":383,"y":1792,"wires":[["2b89b7f7.c62a08"]]},{"id":"17236942.e044f7","type":"comment","z":"99e6906e.c69df","name":"Music Library","info":"","x":383,"y":1759,"wires":[],"icon":"node-red/alert.svg"},{"id":"b5d27d31.321f1","type":"inject","z":"99e6906e.c69df","name":"","topic":"ML10CC","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":393,"y":1824,"wires":[["2b89b7f7.c62a08"]]},{"id":"4914f4d.bb8380c","type":"comment","z":"99e6906e.c69df","name":"Sonos Playlists","info":"","x":605,"y":1762,"wires":[],"icon":"node-red/alert.svg"},{"id":"ecbb06bc.041db8","type":"inject","z":"99e6906e.c69df","name":"","topic":"SonosMix","payload":"export","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":605,"y":1795,"wires":[["2b89b7f7.c62a08"]]},{"id":"48a90d41.bdb824","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":603,"y":1463,"wires":[]},{"id":"c15b1cca.d12f3","type":"comment","z":"99e6906e.c69df","name":"Simple","info":"","x":87,"y":1826,"wires":[],"icon":"node-red/alert.svg"},{"id":"608c93d3.9d008c","type":"inject","z":"99e6906e.c69df","name":"","topic":"Daily Mix","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":117,"y":1859,"wires":[["8d5a7cf9.0f778"]]},{"id":"c0e8f4c2.bd6d58","type":"inject","z":"99e6906e.c69df","name":"","topic":"Best Of Love","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":127,"y":1891,"wires":[["8d5a7cf9.0f778"]]},{"id":"edbb409b.d133d","type":"inject","z":"99e6906e.c69df","name":"","topic":"Arabella","payload":"stream","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":117,"y":1923,"wires":[["8d5a7cf9.0f778"]]},{"id":"7ed6e4a7.8bb5ec","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":491,"y":1386,"wires":[["5fb0659a.5b5fac"]]},{"id":"5fb0659a.5b5fac","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":566,"y":1345,"wires":[]},{"id":"c74275cc.828628","type":"inject","z":"99e6906e.c69df","name":"","topic":"SonosMix","payload":"queue","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":117,"y":1955,"wires":[["8d5a7cf9.0f778"]]},{"id":"4631f9be.411948","type":"comment","z":"99e6906e.c69df","name":"Get","info":"","x":382,"y":1311,"wires":[],"icon":"node-red/alert.svg"},{"id":"4ed9c170.a95e9","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":1262,"y":389,"wires":[["1f223625.3cf2ca"]]},{"id":"e09a244e.1c4898","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"player.set.nightmode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":344,"wires":[["16182df1.06e562"]]},{"id":"c67f8360.ec79a","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"player.set.nightmode","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":376,"wires":[["16182df1.06e562"]]},{"id":"5eb4a9c8.e1ff18","type":"inject","z":"99e6906e.c69df","name":"","topic":"on","payload":"player.set.dialoglevel","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":408,"wires":[["16182df1.06e562"]]},{"id":"9f73c7d9.ea8038","type":"inject","z":"99e6906e.c69df","name":"","topic":"off","payload":"player.set.dialoglevel","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":440,"wires":[["16182df1.06e562"]]},{"id":"a42849b0.2475e8","type":"inject","z":"99e6906e.c69df","name":"","topic":"11","payload":"player.set.subgain","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":472,"wires":[["16182df1.06e562"]]},{"id":"5b4b228a.bb5cec","type":"comment","z":"99e6906e.c69df","name":"Player related","info":"","x":510,"y":56,"wires":[],"icon":"node-red/alert.svg"},{"id":"1f223625.3cf2ca","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1230,"y":351,"wires":[]},{"id":"ecbe75d2.356928","type":"inject","z":"99e6906e.c69df","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":571,"y":888,"wires":[["ec1960b5.00b3f"]]},{"id":"e574d58c.c284e8","type":"comment","z":"99e6906e.c69df","name":"sonos playlist","info":"","x":90,"y":1159,"wires":[],"icon":"node-red/alert.svg"},{"id":"794d0a4e.319be4","type":"inject","z":"99e6906e.c69df","name":"","topic":"Bad","payload":"household.create.stereopair","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":169,"y":652,"wires":[["165c6f3d.293fc1"]]},{"id":"165c6f3d.293fc1","type":"change","z":"99e6906e.c69df","name":"right player","rules":[{"t":"set","p":"playerNameRight","pt":"msg","to":"variable","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":229,"y":688,"wires":[["16182df1.06e562"]]},{"id":"d85b8e7b.5413","type":"inject","z":"99e6906e.c69df","name":"","topic":"Bad","payload":"household.separate.stereopair","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":620,"wires":[["16182df1.06e562"]]},{"id":"f630f667.6532e8","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":710,"y":100,"wires":[["ce2611ba.28b8f"]]},{"id":"e1c58249.3080a","type":"change","z":"775d7a2a.44f234","name":"create stereopair","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"create_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":100,"wires":[["9d95ef1c.0ced9"]]},{"id":"273aa662.78786a","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1250,"y":92,"wires":[]},{"id":"9f083eb4.4feb9","type":"inject","z":"775d7a2a.44f234","name":"","topic":"","payload":"get_properties","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":710,"y":133,"wires":[["cbdfa931.0d1d48"]]},{"id":"8f48986f.657068","type":"change","z":"775d7a2a.44f234","name":"separate stereopair","rules":[{"t":"set","p":"topic","pt":"msg","to":"uuid","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"separate_stereopair","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":133,"wires":[["9d95ef1c.0ced9"]]},{"id":"9d95ef1c.0ced9","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"2113e9bb.c52236","name":"player left","x":1240,"y":129,"wires":[["273aa662.78786a"]]},{"id":"ce2611ba.28b8f","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"32a98882.56e1c8","name":"player right","x":870,"y":100,"wires":[["e1c58249.3080a","273aa662.78786a"]]},{"id":"cbdfa931.0d1d48","type":"sonos-get-status","z":"775d7a2a.44f234","confignode":"32a98882.56e1c8","name":"player right","x":870,"y":133,"wires":[["8f48986f.657068"]]},{"id":"79584957.72fe58","type":"inject","z":"99e6906e.c69df","name":"","topic":"x-sonos-htastream:RINCON_949F3EC13B9901400:spdif","payload":"player.play.avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1160,"y":886,"wires":[["5d9fc2ce.ef06ec"]]},{"id":"5d9fc2ce.ef06ec","type":"change","z":"99e6906e.c69df","name":"volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1160,"y":924,"wires":[["ec1960b5.00b3f"]]},{"id":"7a79e2be.027cbc","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1184,"y":1152,"wires":[]},{"id":"8e108c8.d8de27","type":"inject","z":"775d7a2a.44f234","name":"","topic":"x-rincon-stream:RINCON_5CAAFD00223601400","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":864,"y":228,"wires":[["dd016646.2e0418"]]},{"id":"1f6cd20e.ac3fee","type":"inject","z":"775d7a2a.44f234","name":"activate_avtransport","topic":"x-rincon-stream:RINCON_5CAAFD00223601400","payload":"activate_avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":864,"y":194,"wires":[["2cb78077.47eb7"]]},{"id":"2cb78077.47eb7","type":"change","z":"775d7a2a.44f234","name":"volume 30","rules":[{"t":"set","p":"topic","pt":"msg","to":"x-rincon-stream:RINCON_5CAAFD00223601400","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1042,"y":194,"wires":[["dd016646.2e0418"]]},{"id":"d2b31bc2.fded98","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1225,"y":194,"wires":[]},{"id":"dd016646.2e0418","type":"sonos-control-player","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","name":"","x":1155,"y":234,"wires":[["d2b31bc2.fded98"]]},{"id":"ce56c8a.5ed8838","type":"inject","z":"99e6906e.c69df","name":"","topic":"x-sonos-htastream:RINCON_949F3EC13B9901400:spdif","payload":"player.play.avtransport","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1160,"y":961,"wires":[["ec1960b5.00b3f"]]},{"id":"49fd8f03.349c6","type":"comment","z":"99e6906e.c69df","name":"Line In","info":"","x":1092,"y":853,"wires":[],"icon":"node-red/alert.svg"},{"id":"243370d4.f112d","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":720,"y":520,"wires":[]},{"id":"4e76c8e5.ec14e8","type":"inject","z":"99e6906e.c69df","name":"insert_uri http","topic":"https://archive.org/download/testmp3testfile/mpthreetest.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":2280,"wires":[["860fa87.396a458"]]},{"id":"9ef2cc39.4e4b9","type":"comment","z":"99e6906e.c69df","name":"MANAGE QUEUE","info":"","x":95,"y":2048,"wires":[],"icon":"node-red/alert.svg"},{"id":"320981c5.e9d16e","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":720,"y":2280,"wires":[]},{"id":"ce2c7ac5.e09618","type":"comment","z":"99e6906e.c69df","name":"Insert Spotify URI","info":"","x":594,"y":2090,"wires":[],"icon":"font-awesome/fa-arrow-circle-right"},{"id":"e51b4e32.987ad","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Track","topic":"spotify:track:5AdoS3gS47x40nBNlNmPQ8","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":615,"y":2123,"wires":[["860fa87.396a458"]]},{"id":"ef5cb788.e7d0f8","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Album","topic":"spotify:album:1TSZDcvlPtAnekTaItI3qO","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":615,"y":2187,"wires":[["860fa87.396a458"]]},{"id":"94da1f3d.a6ed1","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri TopTrack","topic":"spotify:artistTopTracks:1dfeR4HaWDbWqFHLkxsg1d","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":625,"y":2155,"wires":[["860fa87.396a458"]]},{"id":"f2b0f712.7a1388","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Playlist","topic":"spotify:user:spotify:playlist:37i9dQZEVXbMDoHDwVN2tF","payload":"insert_spotify_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":625,"y":2219,"wires":[["860fa87.396a458"]]},{"id":"b9f0cdbf.7a3c6","type":"inject","z":"99e6906e.c69df","name":"insert_uri Music Library - song","topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"insert_uri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":159,"y":2193,"wires":[["860fa87.396a458"]]},{"id":"860fa87.396a458","type":"sonos-manage-queue","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","name":"","x":569,"y":2280,"wires":[["320981c5.e9d16e"]]},{"id":"15797f4a.bca7f1","type":"inject","z":"99e6906e.c69df","name":"get_musiclibrary_playlists","topic":"","payload":"get_musiclibrary_playlists","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":2161,"wires":[["860fa87.396a458"]]},{"id":"4730033.d0a3dfc","type":"comment","z":"99e6906e.c69df","name":"Music Library","info":"","x":111,"y":2090,"wires":[]},{"id":"ee9cb3ff.3eeb5","type":"inject","z":"99e6906e.c69df","name":"insert_musiclibrary ...","topic":"ML10CC","payload":"insert_musiclibrary_playlist","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":2129,"wires":[["18357fe6.9d3d4"]]},{"id":"18357fe6.9d3d4","type":"change","z":"99e6906e.c69df","name":"msg.size","rules":[{"t":"set","p":"size","pt":"msg","to":"500","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2129,"wires":[["860fa87.396a458"]]},{"id":"1717f7c4.656918","type":"comment","z":"99e6906e.c69df","name":"http","info":"","x":90,"y":2245,"wires":[]},{"id":"45a4776c.23ee98","type":"inject","z":"55805384.a4695c","name":"","topic":"get.state","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":230,"y":640,"wires":[["2e7394bf.dd8a3c"]]},{"id":"2c5cbe22.9a0052","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":670,"y":640,"wires":[]},{"id":"12d24d54.c5ec33","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":360,"y":720,"wires":[["92523eb7.51efb"]]},{"id":"2e7394bf.dd8a3c","type":"sonos-universal","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"","x":500,"y":600,"wires":[["2c5cbe22.9a0052"]]},{"id":"92523eb7.51efb","type":"sonos-universal","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"","x":540,"y":720,"wires":[["2c5cbe22.9a0052"]]},{"id":"cc58a510.5acfa8","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"group.play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":500,"wires":[["108e168.12e56ea"]]},{"id":"108e168.12e56ea","type":"sonos-universal","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"","x":1040,"y":520,"wires":[[]]},{"id":"af4ba7c9.02d468","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":560,"wires":[["108e168.12e56ea"]]},{"id":"1b9f83c6.014d7c","type":"sonos-universal","z":"55805384.a4695c","confignode":"32a98882.56e1c8","name":"","x":970,"y":720,"wires":[[]]},{"id":"68660d79.a82ca4","type":"inject","z":"55805384.a4695c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":760,"y":720,"wires":[["1b9f83c6.014d7c"]]},{"id":"ad8f881e.c391b8","type":"inject","z":"258668aa.420c18","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":120,"wires":[["c8233faa.d603f"]]},{"id":"b0e3aab0.e59308","type":"inject","z":"258668aa.420c18","name":"","topic":"s24896","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":149,"y":160,"wires":[["c8233faa.d603f"]]},{"id":"c8233faa.d603f","type":"sonos-universal","z":"258668aa.420c18","confignode":"8d44022c.adb65","name":"living using msg","x":480,"y":140,"wires":[["4d4e346b.cfec0c"]]},{"id":"4d4e346b.cfec0c","type":"debug","z":"258668aa.420c18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":509,"y":102,"wires":[]},{"id":"2d85b671.6c6f8a","type":"comment","z":"258668aa.420c18","name":"Compatibility Mode","info":"","x":95,"y":21,"wires":[]},{"id":"fc6bcd7e.c65fd","type":"comment","z":"258668aa.420c18","name":"success","info":"","x":100,"y":80,"wires":[]},{"id":"1b3f3dc6.afb3d2","type":"comment","z":"258668aa.420c18","name":"failure","info":"","x":90,"y":300,"wires":[]},{"id":"7a265e29.bb285","type":"inject","z":"258668aa.420c18","name":"","topic":"","payload":"play","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":340,"wires":[["c8233faa.d603f"]]},{"id":"4bc1d1aa.c597c","type":"inject","z":"258668aa.420c18","name":"","topic":"xxxxx","payload":"play.tunein","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":139,"y":373,"wires":[["c8233faa.d603f"]]},{"id":"ee0d7486.45d0f8","type":"sonos-universal","z":"258668aa.420c18","confignode":"8d44022c.adb65","name":"living using msg","x":500,"y":660,"wires":[["1b5927e1.ec20f8"]]},{"id":"1b5927e1.ec20f8","type":"debug","z":"258668aa.420c18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":529,"y":622,"wires":[]},{"id":"62b2de7.f7dd22","type":"comment","z":"258668aa.420c18","name":"Default Mode","info":"","x":75,"y":582,"wires":[]},{"id":"b7e2cca8.fdadc","type":"inject","z":"258668aa.420c18","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":620,"wires":[["31ebedb1.2608a2"]]},{"id":"afa46fd0.627f6","type":"inject","z":"258668aa.420c18","name":"","topic":"","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":89,"y":660,"wires":[["f4c96133.0b01e"]]},{"id":"31ebedb1.2608a2","type":"change","z":"258668aa.420c18","name":"","rules":[{"t":"set","p":"cmd","pt":"msg","to":"play","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":620,"wires":[["ee0d7486.45d0f8"]]},{"id":"f4c96133.0b01e","type":"change","z":"258668aa.420c18","name":"","rules":[{"t":"set","p":"cmd","pt":"msg","to":"play.track","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":660,"wires":[["ee0d7486.45d0f8"]]},{"id":"11d1f07f.81826","type":"sonos-universal","z":"258668aa.420c18","confignode":"8d44022c.adb65","name":"","x":234,"y":806,"wires":[["c8cf3340.fc8fc"]]},{"id":"c8cf3340.fc8fc","type":"debug","z":"258668aa.420c18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":430,"y":827,"wires":[]},{"id":"e11eac70.1ee93","type":"inject","z":"258668aa.420c18","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":806,"wires":[["11d1f07f.81826"]]},{"id":"dbcc42b1.a5f53","type":"sonos-universal","z":"258668aa.420c18","confignode":"8d44022c.adb65","name":"","x":244,"y":846,"wires":[["c8cf3340.fc8fc"]]},{"id":"e55d9124.089bc","type":"inject","z":"258668aa.420c18","name":"","topic":"","payload":"2","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":846,"wires":[["dbcc42b1.a5f53"]]},{"id":"57285d66.b19194","type":"inject","z":"258668aa.420c18","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":700,"wires":[["9be3f040.765ba"]]},{"id":"9be3f040.765ba","type":"change","z":"258668aa.420c18","name":"","rules":[{"t":"set","p":"cmd","pt":"msg","to":"play.tunein","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":231,"y":700,"wires":[["ee0d7486.45d0f8"]]},{"id":"18b283e1.f8e67c","type":"inject","z":"258668aa.420c18","name":"","topic":"","payload":"s24896","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":884,"wires":[["586f24ae.d1c6fc"]]},{"id":"586f24ae.d1c6fc","type":"sonos-universal","z":"258668aa.420c18","confignode":"8d44022c.adb65","name":"","x":250,"y":884,"wires":[["c8cf3340.fc8fc"]]},{"id":"9d792e54.a9fe7","type":"sonos-universal","z":"258668aa.420c18","confignode":"8d44022c.adb65","name":"","x":260,"y":920,"wires":[["c8cf3340.fc8fc"]]},{"id":"6b5e369c.bd54b8","type":"inject","z":"258668aa.420c18","name":"","topic":"","payload":"+10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":920,"wires":[["9d792e54.a9fe7"]]},{"id":"93c21313.cb782","type":"inject","z":"258668aa.420c18","name":"","topic":"","payload":"-10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":740,"wires":[["92261eb0.fb45"]]},{"id":"92261eb0.fb45","type":"change","z":"258668aa.420c18","name":"","rules":[{"t":"set","p":"cmd","pt":"msg","to":"adjust.volume","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":740,"wires":[["ee0d7486.45d0f8"]]},{"id":"9ed86a04.84c688","type":"inject","z":"258668aa.420c18","name":"","topic":"+10","payload":"adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":200,"wires":[["c8233faa.d603f"]]},{"id":"2bfa3fdb.3d401","type":"inject","z":"258668aa.420c18","name":"","topic":"xxx","payload":"adjust.volume","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":148,"y":411,"wires":[["c8233faa.d603f"]]},{"id":"ac4e20fd.d6b94","type":"inject","z":"258668aa.420c18","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":1000,"wires":[["322babb1.7a0534"]]},{"id":"322babb1.7a0534","type":"sonos-universal","z":"258668aa.420c18","confignode":"8d44022c.adb65","name":"","x":260,"y":1000,"wires":[["c8cf3340.fc8fc"]]},{"id":"964e3610.c19688","type":"comment","z":"258668aa.420c18","name":"failure","info":"","x":70,"y":960,"wires":[]},{"id":"5fe301e6.660e3","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"create.snap","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":580,"wires":[["16182df1.06e562"]]},{"id":"bea132ef.9aba7","type":"inject","z":"99e6906e.c69df","name":"","topic":"variable","payload":"player.test.online","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1010,"y":720,"wires":[["4ed9c170.a95e9"]]},{"id":"d20f2e16.594f1","type":"inject","z":"99e6906e.c69df","name":"","topic":"KÃ¼che","payload":"player.join.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":686,"wires":[["7213ff0a.27d93"]]},{"id":"8857c0ce.976d","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"player.leave.group","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":530,"y":718,"wires":[["7213ff0a.27d93"]]},{"id":"7213ff0a.27d93","type":"sonos-universal","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","command":"message","compatibilityMode":true,"name":"Bad not in group","x":740,"y":706,"wires":[[]]},{"id":"bf114e8e.106ed","type":"inject","z":"99e6906e.c69df","name":"","topic":"","payload":"create.snap","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":780,"wires":[["5bf5f03.1b58c1"]]},{"id":"5bf5f03.1b58c1","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":300,"y":780,"wires":[["35acdde5.1e14f2"]]},{"id":"35acdde5.1e14f2","type":"change","z":"99e6906e.c69df","name":"swap","rules":[{"t":"set","p":"snap","pt":"msg","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"play.tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":780,"wires":[["2a6942e0.07517e"]]},{"id":"2a6942e0.07517e","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":644,"y":780,"wires":[["56b986e2.a746b8"]]},{"id":"56b986e2.a746b8","type":"delay","z":"99e6906e.c69df","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":824,"y":780,"wires":[["907efe0.432f5"]]},{"id":"907efe0.432f5","type":"change","z":"99e6906e.c69df","name":"swap ","rules":[{"t":"set","p":"topic","pt":"msg","to":"snap","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"play.snap","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":954,"y":780,"wires":[["f4366a6.082f098"]]},{"id":"f4366a6.082f098","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","command":"message","compatibilityMode":true,"name":"living - not coordinator","x":1125,"y":780,"wires":[[]]}]