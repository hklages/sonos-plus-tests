[{"id":"55805384.a4695c","type":"tab","label":"Sandbox","disabled":false,"info":""},{"id":"1838a12.05f7f5f","type":"tab","label":"Stereopair","disabled":false,"info":""},{"id":"775d7a2a.44f234","type":"tab","label":"My Sonos","disabled":false,"info":""},{"id":"405b0e15.987b5","type":"tab","label":"Universal","disabled":false,"info":""},{"id":"fcb24b59.997048","type":"tab","label":"Commands","disabled":false,"info":""},{"id":"25081f9e.f5f34","type":"tab","label":"Complex","disabled":false,"info":""},{"id":"99e6906e.c69df","type":"tab","label":"Old Commands","disabled":false,"info":""},{"id":"4318847d.0693cc","type":"tab","label":"Old Complex","disabled":false,"info":""},{"id":"a0a649cc.ca04e8","type":"tab","label":"Validate messages","disabled":true,"info":""},{"id":"91448cef.2efc9","type":"tab","label":"Miele","disabled":true,"info":""},{"id":"d65eded3.250b9","type":"subflow","name":"HandleErrors","info":"","category":"","in":[{"x":61,"y":79,"wires":[{"id":"6b0e515b.e62cd"}]}],"out":[],"env":[{"name":"Tabname","type":"str","value":"unknown","ui":{"type":"input","opts":{"types":["str"]},"label":{}}},{"name":"DebugToMobile","type":"bool","value":"false","ui":{"type":"input","opts":{"types":["bool"]},"label":{}}},{"name":"KeyVariable","type":"str","value":"system_keyTasker","ui":{"type":"input","opts":{"types":["str"]},"label":{}}}],"color":"#E9967A","icon":"node-red/alert.svg"},{"id":"24092027.ab82","type":"subflow","name":"get bearer","info":"Get a new bearer and refresh token and stores it in global variables. \n\nThe global variables system_bearerMiele and system_refreshMiele are being used.","category":"Miele","in":[{"x":30,"y":63,"wires":[{"id":"85119bed.21b168"}]}],"out":[{"x":1221,"y":43,"wires":[{"id":"430fd0da.a6602","port":0}]}],"env":[{"name":"vg","type":"str","value":"de-DE","ui":{"label":{"en-US":"Country"},"type":"select","opts":{"opts":[{"l":{"en-US":"Germany"},"v":"de-DE"}]}}},{"name":"doRefresh","type":"bool","value":"false","ui":{"label":{"en-US":"Use refresh token"},"type":"checkbox","opts":{}}}],"color":"#A70625","inputLabels":["client and user credentials"],"outputLabels":["Miele reponse object"],"icon":"font-awesome/fa-key","status":{"x":1221,"y":254,"wires":[{"id":"ccdd1aa3.d7afe8","port":0},{"id":"afceb2f2.d18f3","port":0},{"id":"4400b51a.44eacc","port":0}]}},{"id":"ea970db4.5106b","type":"subflow","name":"get all appliances","info":"Get a list of all appliances with indentification and state.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":80,"wires":[{"id":"eaf22f71.d9969"}]}],"out":[{"x":1119,"y":74,"wires":[{"id":"a35f8dee.9f18f","port":0}]}],"env":[{"name":"language","type":"str","value":"en","ui":{"label":{"en-US":"Language"},"type":"select","opts":{"opts":[{"l":{"en-US":"English"},"v":"en"},{"l":{"en-US":"Deutsch"},"v":"de"}]}}}],"color":"#A70625","inputLabels":["just trigger"],"outputLabels":["appliance list in household"],"icon":"font-awesome/fa-list-ul","status":{"x":1120,"y":220,"wires":[{"id":"fe83c7a3.1ef478","port":0},{"id":"84b66c9d.f62ef","port":0},{"id":"681dd18d.1baa4","port":0}]}},{"id":"aeba9414.6f40a8","type":"subflow","name":"get appliance","info":"Get an object with identification and state data for the given appliance id.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":97,"wires":[{"id":"a260e272.ea783"}]}],"out":[{"x":1143,"y":33,"wires":[{"id":"3da93881.b6e868","port":0}]}],"env":[{"name":"language","type":"str","value":"en","ui":{"label":{"en-US":"Language"},"type":"select","opts":{"opts":[{"l":{"en-US":"English"},"v":"en"},{"l":{"en-US":"Deutsch"},"v":"de"}]}}}],"color":"#A70625","inputLabels":["appliance id as payload"],"outputLabels":["appliance identification and state"],"icon":"font-awesome/fa-info","status":{"x":1140,"y":164,"wires":[{"id":"dd906f4c.1361a","port":0},{"id":"fd32a717.878c28","port":0},{"id":"96a3026.b505b","port":0}]}},{"id":"4ae29caa.8056e4","type":"subflow","name":"get actions","info":"Get an object with all valid actions for the given appliance id at the current appliance state.\n\nPrereq: bearer in global variable system_bearerMiele","category":"Miele","in":[{"x":40,"y":88,"wires":[{"id":"d3015191.5633d"}]}],"out":[{"x":1099,"y":38,"wires":[{"id":"c8655abf.93b328","port":0}]}],"env":[],"color":"#A70625","inputLabels":["appliance id"],"outputLabels":["all actions"],"icon":"node-red/debug.svg","status":{"x":1099,"y":158,"wires":[{"id":"2c02bcd4.dc63d4","port":0},{"id":"1455fb1d.b32055","port":0},{"id":"d9bc2537.715df8","port":0}]}},{"id":"ad607e01.511ea","type":"subflow","name":"set action","info":"Set (execute) an action for the given appliance. Valid action depend on kind of appliance and state!","category":"Miele","in":[{"x":40,"y":75,"wires":[{"id":"2542e5f6.b0fd8a"}]}],"out":[{"x":1011,"y":74,"wires":[{"id":"21b0eeb.798de12","port":0}]}],"env":[],"color":"#A70625","inputLabels":["appliance id in payload and an action "],"outputLabels":["result"],"icon":"font-awesome/fa-angle-double-right","status":{"x":1010,"y":240,"wires":[{"id":"e4fefa21.402038","port":0},{"id":"9ebcdded.4fad9","port":0},{"id":"ebacb8a0.327d58","port":0}]}},{"id":"69e44f53.5d62f","type":"subflow","name":"Subflow 1","info":"","category":"","in":[{"x":60,"y":80,"wires":[{"id":"4cc2813d.75068"}]}],"out":[{"x":580,"y":80,"wires":[{"id":"ccdfdd96.2d83e","port":0}]}],"env":[{"name":"subflowProperty","type":"str","value":"Hi Sub"}],"color":"#DDAA99"},{"id":"88e9fa70.4a53e8","type":"sonos-config","z":"","name":"coordinator","serialnum":"5C-AA-FD-00-22-36:1","ipaddress":"192.168.178.37"},{"id":"c747354a.95e5e8","type":"sonos-config","z":"","name":"no ip but correct serial number","serialnum":"94-9F-3E-C1-3B-99:8","ipaddress":""},{"id":"9037fbab.1d8408","type":"sonos-config","z":0,"name":"fritzbox ip address","serialnum":"","ipaddress":"192.168.178.1"},{"id":"64704482.34d37c","type":"sonos-config","z":0,"name":"ip address with wrong syntax","serialnum":"","ipaddress":"191168.178.41"},{"id":"ff297616.de3c88","type":"sonos-config","z":0,"name":"no ip address & invalid serial","serialnum":"5C-AA-FD22-36:1","ipaddress":""},{"id":"8d44022c.adb65","type":"sonos-config","z":"","name":"living","serialnum":"94-9F-3E-C1-3B-99:8","ipaddress":"192.168.178.36"},{"id":"32a98882.56e1c8","type":"sonos-config","z":"","name":"bath","serialnum":"00-0E-58-FE-3A-EA:5","ipaddress":"192.168.178.35"},{"id":"2113e9bb.c52236","type":"sonos-config","z":"","name":"variable","serialnum":"B8-E9-37-58-31-C0:A","ipaddress":"192.168.178.38"},{"id":"8945d5a5.31aef8","type":"polly-config","z":"","name":"pollyaws"},{"id":"efdd332a.0b675","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"2","payload":"play.track","payloadType":"str","x":110,"y":880,"wires":[["ec1960b5.00b3f"]]},{"id":"d3c4b5a7.528288","type":"inject","z":"4318847d.0693cc","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"clear.queue","payloadType":"str","x":110,"y":329,"wires":[["fc8ec1ee.dada8"]]},{"id":"6280f87a.0562c8","type":"change","z":"4318847d.0693cc","name":"queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"queue","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Best of Prime","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":301,"y":331,"wires":[["5fe3a2ed.eb907c"]]},{"id":"744d729c.ee78dc","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":628,"y":371,"wires":[]},{"id":"8dd4792.76eb088","type":"comment","z":"4318847d.0693cc","name":"Example 3: Replace SONOS queue without playing","info":"","x":195,"y":296,"wires":[]},{"id":"e2d2580b.4557e8","type":"inject","z":"4318847d.0693cc","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Arabella","payload":"","payloadType":"str","x":100,"y":56,"wires":[["aa2e6460.b540a8"]]},{"id":"5d8ef2c9.43ff1c","type":"change","z":"4318847d.0693cc","name":"get.trackplus","rules":[{"t":"set","p":"payload","pt":"msg","to":"get.trackplus","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":707,"y":71,"wires":[["fa5800f0.d6f4c"]]},{"id":"6bbf67aa.5b6638","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1012,"y":71,"wires":[]},{"id":"faf9af99.954a4","type":"inject","z":"4318847d.0693cc","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Best Of Lovesongs","payload":"","payloadType":"str","x":130,"y":95,"wires":[["aa2e6460.b540a8"]]},{"id":"e4646c63.7ee1f","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":556,"y":71,"wires":[["5d8ef2c9.43ff1c"]]},{"id":"f7c7fcf2.8c6ed","type":"comment","z":"4318847d.0693cc","name":"Example 1:  Play (TuneIn, Amazon) radio station using My Sonos and retrieve title, ...","info":"","x":295,"y":20,"wires":[]},{"id":"33494d25.d17ca2","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"get.mutestate","payloadType":"str","x":973,"y":252,"wires":[["4ed9c170.a95e9"]]},{"id":"6a1d28c8.fea828","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.get.properties","payloadType":"str","x":993,"y":484,"wires":[["4ed9c170.a95e9"]]},{"id":"2a44a257.0f6ffe","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"2","payload":"remove.tracks","payloadType":"str","x":120,"y":1045,"wires":[["ec1960b5.00b3f"]]},{"id":"1fc5c102.abee9f","type":"comment","z":"4318847d.0693cc","name":"Example 4: Line in Play:5 / TV Beam or Playbar","info":"","x":185,"y":437,"wires":[]},{"id":"8978d019.4e76e","type":"switch","z":"4318847d.0693cc","name":"","property":"payload.modelName","propertyType":"msg","rules":[{"t":"eq","v":"Sonos Play:5","vt":"str"},{"t":"eq","v":"Sonos Beam","vt":"str"},{"t":"eq","v":"Sonos Playbar","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":455,"y":471,"wires":[["de574d05.b6a53"],["e7542013.832ae"],["e7542013.832ae"]]},{"id":"de574d05.b6a53","type":"change","z":"4318847d.0693cc","name":"line in","rules":[{"t":"set","p":"topic","pt":"msg","to":"'x-rincon-stream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":589,"y":442,"wires":[["41f8648f.bd838c"]]},{"id":"77db7f57.751e9","type":"comment","z":"4318847d.0693cc","name":"Example 5: Play Playlist from Music Library","info":"","x":165,"y":556,"wires":[]},{"id":"2172120a.6207ae","type":"inject","z":"4318847d.0693cc","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"clear.queue","payloadType":"str","x":110,"y":590,"wires":[["fad22422.5dcc88"]]},{"id":"b1f4e729.e2d8f8","type":"change","z":"4318847d.0693cc","name":"activate queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":849,"y":590,"wires":[["ab1e13ab.c7d74"]]},{"id":"d890d3f3.68cd6","type":"inject","z":"4318847d.0693cc","name":"mute","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"On","payload":"set.mutestate","payloadType":"str","x":90,"y":705,"wires":[["f9e99c11.a8edc","24a0a7e6.ae3b08"]]},{"id":"f9e99c11.a8edc","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":223,"y":727,"wires":[["a65048e1.879f98"]]},{"id":"98119167.abb2e","type":"change","z":"4318847d.0693cc","name":"stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":733,"y":727,"wires":[["24a0a7e6.ae3b08"]]},{"id":"418f0e18.4cf29","type":"delay","z":"4318847d.0693cc","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":569,"y":777,"wires":[["61b7db70.f099d4"]]},{"id":"61b7db70.f099d4","type":"change","z":"4318847d.0693cc","name":"unmute","rules":[{"t":"set","p":"payload","pt":"msg","to":"set.mutestate","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":743,"y":777,"wires":[["24a0a7e6.ae3b08"]]},{"id":"a65048e1.879f98","type":"change","z":"4318847d.0693cc","name":"play tuneIn station","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":392,"y":727,"wires":[["418f0e18.4cf29","9cfa79ba.d93968"]]},{"id":"e7542013.832ae","type":"change","z":"4318847d.0693cc","name":"tv (line in)","rules":[{"t":"set","p":"topic","pt":"msg","to":"'x-sonos-htastream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400:spdif'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":599,"y":502,"wires":[["41f8648f.bd838c","243370d4.f112d"]]},{"id":"41f8648f.bd838c","type":"change","z":"4318847d.0693cc","name":"activate line","rules":[{"t":"set","p":"payload","pt":"msg","to":"player.play.avtransport","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":751,"y":471,"wires":[["a6111a85.251f68"]]},{"id":"610c7f81.c561","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"normal","payload":"set.queuemode","payloadType":"str","x":140,"y":945,"wires":[["ec1960b5.00b3f"]]},{"id":"8638cd91.2bd02","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"shuffle","payload":"set.queuemode","payloadType":"str","x":140,"y":913,"wires":[["ec1960b5.00b3f"]]},{"id":"497dc083.e5d35","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":100,"wires":[["9124b25e.5e7bb"]]},{"id":"9124b25e.5e7bb","type":"function","z":"a0a649cc.ca04e8","name":"xyz does not exist","func":"msg.payload = 'hallo';\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":100,"wires":[["bcf459fe.1b0ad8"]]},{"id":"e180e70c.33b628","type":"function","z":"a0a649cc.ca04e8","name":"xyz is null","func":"msg.payload.xyz = null;\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":196,"wires":[["bcf459fe.1b0ad8"]]},{"id":"351eb48c.4094ac","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":196,"wires":[["e180e70c.33b628"]]},{"id":"c54adc23.e480e","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":468,"wires":[["305adb80.ed3b84","63a7db00.cc8604"]]},{"id":"305adb80.ed3b84","type":"function","z":"a0a649cc.ca04e8","name":"xyz string is OK ","func":"msg.payload = { 'xyz':'richtiger String'};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":468,"wires":[["bcf459fe.1b0ad8"]]},{"id":"47d40166.41248","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":356,"wires":[["22871aaa.f17016"]]},{"id":"22871aaa.f17016","type":"function","z":"a0a649cc.ca04e8","name":"xyz empty string","func":"msg.payload = {\"xyz\":''};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":356,"wires":[["bcf459fe.1b0ad8"]]},{"id":"a4f89f5b.58eb4","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":98,"wires":[["c7fabc9b.407e1"]]},{"id":"c7fabc9b.407e1","type":"change","z":"a0a649cc.ca04e8","name":"payload does not exist","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":98,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"7cd29440.2439fc","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":194,"wires":[["892f9664.8696f8"]]},{"id":"892f9664.8696f8","type":"function","z":"a0a649cc.ca04e8","name":"payload null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":194,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"b9b94e98.ceb2e","type":"comment","z":"a0a649cc.ca04e8","name":"Objective of this tab - Documentation","info":"# Introduction\nOften errors occures because objects or part of objects are not initialized or hold invalid values. This causes errors in following flows. \n\n# Solution\nThe path of every property is being intensively checked: **undefined, null, empty string** and not value \"**NaN**\".\n\nNaN is a strange one. It can be exclued by testing \"msg.payload !== msg.payload\" or by testing \"(typeof msg.payload === 'number' && isNaN(msg.payload))\"\n\nThe second one is longer but more obsious. \n\nIn case of msg.propLevel1.propLevel2 I do test all elements except msg. Msg is given and can not be null or undefined. ","x":145,"y":20,"wires":[]},{"id":"ed0da7d.7d64e58","type":"function","z":"a0a649cc.ca04e8","name":"payload empty string","func":"msg.payload = '';\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":354,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"ae986c34.34ae5","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":354,"wires":[["ed0da7d.7d64e58"]]},{"id":"96ba426e.4e8e1","type":"function","z":"a0a649cc.ca04e8","name":"payload string","func":"msg.payload = 'payload text there';\nreturn msg;","outputs":1,"noerr":0,"x":281,"y":477,"wires":[["e3f119eb.d44758"]]},{"id":"db6427c6.b0c728","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":477,"wires":[["96ba426e.4e8e1"]]},{"id":"83ec348e.2b3848","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":500,"wires":[["7a9b4e0.b2f0ab4"]]},{"id":"7a9b4e0.b2f0ab4","type":"function","z":"a0a649cc.ca04e8","name":"xyz number is ok","func":"msg.payload = {\"xyz\": 5};\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":500,"wires":[["bcf459fe.1b0ad8"]]},{"id":"2a76f526.64ae8a","type":"comment","z":"a0a649cc.ca04e8","name":"validation of msg.payload","info":"","x":115,"y":63,"wires":[]},{"id":"3a375663.e13d9a","type":"function","z":"a0a649cc.ca04e8","name":"payload does not exist","func":"msg  = {'o': 'oooo'};\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":130,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"63d72607.f34638","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":130,"wires":[["3a375663.e13d9a"]]},{"id":"117da209.5252de","type":"function","z":"a0a649cc.ca04e8","name":"payload undefined","func":"msg.payload = undefined;\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":162,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"2dbcdfea.bf264","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":162,"wires":[["117da209.5252de"]]},{"id":"2ec859a5.f8eb66","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":226,"wires":[["de752d4c.21001"]]},{"id":"de752d4c.21001","type":"function","z":"a0a649cc.ca04e8","name":"payload NaN","func":"msg.payload = parseInt('Hallo');  // provides NaN\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":226,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"b3403a6f.c88838","type":"function","z":"a0a649cc.ca04e8","name":"payload number ","func":"msg.payload = 10;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":509,"wires":[["e3f119eb.d44758"]]},{"id":"1150c24c.b1ae2e","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":509,"wires":[["b3403a6f.c88838"]]},{"id":"957f1041.a180b","type":"function","z":"a0a649cc.ca04e8","name":"payload array","func":"msg.payload = [];\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":541,"wires":[["e3f119eb.d44758"]]},{"id":"d8d75b12.f06148","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":541,"wires":[["957f1041.a180b"]]},{"id":"d7b0c62c.795398","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":573,"wires":[["d0fed59c.990ac8"]]},{"id":"d0fed59c.990ac8","type":"function","z":"a0a649cc.ca04e8","name":"payload object ","func":"msg.payload = {'something':'Hallo'};\nreturn msg;","outputs":1,"noerr":0,"x":281,"y":573,"wires":[["e3f119eb.d44758"]]},{"id":"ec88ae1e.ff4b6","type":"function","z":"a0a649cc.ca04e8","name":"payload object ","func":"msg.payload = {'something': undefined};\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":605,"wires":[["e3f119eb.d44758"]]},{"id":"d80d6e9c.59f3e","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":605,"wires":[["ec88ae1e.ff4b6"]]},{"id":"e3d3b952.dd6838","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":637,"wires":[["6e895944.0c26f8"]]},{"id":"6e895944.0c26f8","type":"function","z":"a0a649cc.ca04e8","name":"payload parseInt('5') ","func":"msg.payload = parseInt('5');\nreturn msg;","outputs":1,"noerr":0,"x":301,"y":637,"wires":[["e3f119eb.d44758"]]},{"id":"f507b549.24e008","type":"function","z":"a0a649cc.ca04e8","name":"payload parseInt(5) ","func":"msg.payload = parseInt(5);\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":670,"wires":[["e3f119eb.d44758"]]},{"id":"a201018b.af083","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":670,"wires":[["f507b549.24e008"]]},{"id":"1d4a5f09.801521","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":164,"wires":[["65a613f5.8794dc"]]},{"id":"65a613f5.8794dc","type":"function","z":"a0a649cc.ca04e8","name":"xyz undefined","func":"msg.payload.xyz = undefined;\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":164,"wires":[["bcf459fe.1b0ad8"]]},{"id":"fe262f00.41ee9","type":"function","z":"a0a649cc.ca04e8","name":"xyz does not exist","func":"msg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":132,"wires":[["bcf459fe.1b0ad8"]]},{"id":"3c32d77.e212a28","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":132,"wires":[["fe262f00.41ee9"]]},{"id":"2e25b173.d1dd2e","type":"function","z":"a0a649cc.ca04e8","name":"xyz NaN","func":"msg.payload.xyz = parseInt('Hallo'); // NaN\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":228,"wires":[["bcf459fe.1b0ad8"]]},{"id":"e6f0a81b.1a9dc8","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":228,"wires":[["2e25b173.d1dd2e"]]},{"id":"74bc604d.fd188","type":"comment","z":"a0a649cc.ca04e8","name":"validation of msg.payload.xyz","info":"","x":665,"y":67,"wires":[]},{"id":"6c500479.64f93c","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":532,"wires":[["7a8f82dd.bf758c"]]},{"id":"7a8f82dd.bf758c","type":"function","z":"a0a649cc.ca04e8","name":"xyz object  is ok","func":"msg.payload = {'xyz': {}};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":532,"wires":[["bcf459fe.1b0ad8"]]},{"id":"c2fe0b5f.2c5c38","type":"function","z":"a0a649cc.ca04e8","name":"xyz array  is ok","func":"msg.payload = { 'xyz': []};\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":564,"wires":[["bcf459fe.1b0ad8"]]},{"id":"75ca332f.81145c","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":564,"wires":[["c2fe0b5f.2c5c38"]]},{"id":"e3f119eb.d44758","type":"function","z":"a0a649cc.ca04e8","d":true,"name":"validate msg.payload","func":"/** Validate msg.payload\n * \n*/\n\n// old version: \n// if (typeof msg.payload === 'undefined' || msg.payload === null || (typeof msg.payload === 'number' && isNaN(msg.payload)) || msg.payload === '') {\n\nif (typeof msg.payload === 'undefined' || msg.payload === null || (typeof msg.payload === 'number' && !Number.isFinite(msg.payload)) || msg.payload ==='') {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok', msg);\n}\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":700,"wires":[[]]},{"id":"71e12096.9b21c","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":258,"wires":[["892e2d7e.c143"]]},{"id":"892e2d7e.c143","type":"function","z":"a0a649cc.ca04e8","name":"payload NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":271,"y":258,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"bcf459fe.1b0ad8","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload","func":"/** Validate msg.payload.xyz\n * \n*/\nif (!isValidProperty(msg, ['payload', 'xyz'])) {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok', msg);\n}\nreturn msg;\n\nfunction isValidProperty(nestedObj, pathArray){\n    const property = pathArray.reduce(\n      (obj, key) => (obj && obj[key] !== 'undefined' ? obj[key] : undefined),\n      nestedObj\n    )\n    return typeof property !== 'undefined'\n  }","outputs":1,"noerr":0,"x":1040,"y":670,"wires":[[]]},{"id":"21af558b.13c2ba","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":260,"wires":[["65d7d2d2.d82a5c"]]},{"id":"65d7d2d2.d82a5c","type":"function","z":"a0a649cc.ca04e8","name":"xyz NaN","func":"msg.payload.xyz = NaN; // NaN\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":260,"wires":[["bcf459fe.1b0ad8"]]},{"id":"b12a4877.40ad38","type":"comment","z":"a0a649cc.ca04e8","name":"Following are all OK","info":"","x":110,"y":443,"wires":[]},{"id":"cf30cfb3.f7a6","type":"comment","z":"a0a649cc.ca04e8","name":"Following are all OK","info":"","x":635,"y":436,"wires":[]},{"id":"dd1ad5ab.e8b008","type":"http request","z":"d65eded3.250b9","name":"","method":"POST","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","authType":"basic","x":720,"y":60,"wires":[[]]},{"id":"1bbc7a30.e4cbe6","type":"template","z":"d65eded3.250b9","name":"define url","field":"url","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"https://autoremotejoaomgcd.appspot.com/sendnotification?key={{key}}&title=\"HomeService Error Message\"&text={{payload}};\n","output":"str","x":570,"y":60,"wires":[["dd1ad5ab.e8b008"]]},{"id":"6b0e515b.e62cd","type":"function","z":"d65eded3.250b9","name":"define/send error message","func":"/** Send error message to TASKER if debugToMobile is true\n* GITHUB subflow handle errors\n* @since 2019-10-13T1931\n* PREREQ: uses TASKER autoremote and needs key, stored in global variable\n*/\n\n  const unknown = 'unbekannt';\n\n  let errorTab = env.get('Tabname');\n  if (typeof errorTab === 'undefined' || errorTab === null || errorTab === '') {\n    errorTab = unknown;\n    node.warn('Tabname not defined');\n  }\n\n  let errorNodeName = unknown;\n  let errorNodeType = unknown;\n  let errorNodeId = unknown;\n  let errorMessage = unknown;\n  if (typeof msg.error === 'undefined' || msg.error === null || msg.error === '') {\n    // no infos - use default text above\n  } else {\n    if (typeof msg.error.source === 'undefined' || msg.error.source === null || msg.error.source === '') {\n      // no source infos - use default text above\n    } else {\n      if (typeof msg.error.source.name === 'undefined' || msg.error.source.name === null || msg.error.source.name === '') {\n        // use default text above\n      } else {\n        errorNodeName = msg.error.source.name;\n      }\n      if (typeof msg.error.source.type === 'undefined' || msg.error.source.type === null || msg.error.source.type === '') {\n        // use default text above\n      } else {\n        errorNodeType = msg.error.source.type;\n      }\n      if (typeof msg.error.source.id === 'undefined' || msg.error.source.id === null || msg.error.source.id === '') {\n        // use default text\n      } else {\n        errorNodeId = msg.error.source.id;\n      }\n    }\n    if (typeof msg.error.message === 'undefined' || msg.error.message === null || msg.error.message === '') {\n      // no infos - use default text\n    } else {\n      errorMessage = msg.error.message;\n    }\n  }\n  const fullMessage = `Fehler in TAB: ${errorTab} NODENAME: ${errorNodeName} NODETYPE: ${errorNodeType} NODEID: ${errorNodeId} DETAIL: ${errorMessage}`;\n\n  let msgUIandLog = { payload: fullMessage };\n\n  let msgMobile;\n  if (env.get('DebugToMobile')) {\n    const keyVariableName = env.get('KeyVariable'); // first get name of global variable\n    if (typeof keyVariableName === 'undefined' || keyVariableName === null || keyVariableName === '') {\n      node.error('Error in subflow: handle error: Invalid key variable name');\n      msgMobile = null; // no message\n      msgUIandLog = null; // no message\n    } else {\n      const key = global.get(keyVariableName);\n      if (typeof key === 'undefined' || key === null || key === '') {\n        node.error('Error in subflow: handle error: Key variable not defined or key invalid');\n        msgMobile = null; // no message\n        msgUIandLog = null; // no message\n      } else {\n        msgMobile = { payload: fullMessage, key: key };\n      }\n    }\n  } else {\n    msgMobile = null; // not message\n  }\n  return [msgMobile, msgUIandLog];\n\n","outputs":2,"noerr":0,"x":280,"y":80,"wires":[["1bbc7a30.e4cbe6"],["337e0a88.64b546"]],"outputLabels":["email data",""]},{"id":"337e0a88.64b546","type":"debug","z":"d65eded3.250b9","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"payload","targetType":"msg","x":590,"y":120,"wires":[]},{"id":"1cbfc88a.82bef7","type":"subflow:d65eded3.250b9","z":"55805384.a4695c","name":"","env":[{"name":"Tabname","value":"Sandbox","type":"str"},{"name":"DebugToMobile","value":"true","type":"bool"}],"x":610,"y":20,"wires":[]},{"id":"ca8b047.c6229f8","type":"catch","z":"55805384.a4695c","d":true,"name":"","scope":null,"uncaught":false,"x":440,"y":20,"wires":[["1cbfc88a.82bef7"]]},{"id":"ed16ee64.4d4eb","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"on","payload":"player.set.led","payloadType":"str","x":518,"y":591,"wires":[["7213ff0a.27d93"]]},{"id":"62c8c05b.eba5e","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"off","payload":"player.set.led","payloadType":"str","x":518,"y":623,"wires":[["7213ff0a.27d93"]]},{"id":"e5c4eab4.b04df8","type":"comment","z":"4318847d.0693cc","name":"Example 7: Group players","info":"","x":115,"y":835,"wires":[]},{"id":"ad8671c9.08f85","type":"inject","z":"4318847d.0693cc","name":"trigger","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":90,"y":869,"wires":[["435d406c.05c4e"]]},{"id":"8af22d58.53aff","type":"change","z":"4318847d.0693cc","name":"join group","rules":[{"t":"set","p":"topic","pt":"msg","to":"Küche","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"player.join.group","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":871,"wires":[["d36c728b.5c65a"]]},{"id":"35be5578.80893a","type":"comment","z":"4318847d.0693cc","name":"Example 6: Set a morning station but dont play right now","info":"","x":215,"y":670,"wires":[]},{"id":"d82ccb20.029108","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"2","payload":"remove.tracks","payloadType":"str","x":120,"y":1077,"wires":[["a113a1ca.0a6d9"]]},{"id":"a113a1ca.0a6d9","type":"change","z":"99e6906e.c69df","name":"5 tracks","rules":[{"t":"set","p":"numberOfTracks","pt":"msg","to":"5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":1077,"wires":[["ec1960b5.00b3f"]]},{"id":"852d4b9d.122f98","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"on","payload":"set.crossfade","payloadType":"str","x":120,"y":471,"wires":[["16182df1.06e562"]]},{"id":"5e8b717a.0e50f","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"on","payload":"player.set.loudness","payloadType":"str","x":540,"y":216,"wires":[["16182df1.06e562"]]},{"id":"cfcde6d.e832118","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"get.crossfade","payloadType":"str","x":973,"y":284,"wires":[["4ed9c170.a95e9"]]},{"id":"c17ca575.002578","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"00:05:00","payload":"set.sleeptimer","payloadType":"str","x":140,"y":535,"wires":[["16182df1.06e562"]]},{"id":"bf94a6dc.ab87b8","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"get.sleeptimer","payloadType":"str","x":973,"y":316,"wires":[["4ed9c170.a95e9"]]},{"id":"7a547ae8.434b74","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"00:01:00","payload":"seek","payloadType":"str","x":110,"y":151,"wires":[["16182df1.06e562"]]},{"id":"f9b5e2f1.62f17","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payload":"play.streamhttp","payloadType":"str","x":561,"y":935,"wires":[["ec1960b5.00b3f"]]},{"id":"b5c6d343.f8399","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"http://www.fritz.de/live.m3u","payload":"play.streamhttp","payloadType":"str","x":561,"y":968,"wires":[["ec1960b5.00b3f"]]},{"id":"7b8c8849.3858f8","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"off","payload":"set.crossfade","payloadType":"str","x":120,"y":503,"wires":[["16182df1.06e562"]]},{"id":"3fdfbd94.502552","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":290,"wires":[["6d877017.25006"]]},{"id":"6d877017.25006","type":"function","z":"a0a649cc.ca04e8","name":"payload + infinite","func":"msg.payload = 1.0 / 0;\nnode.log(JSON.stringify(msg))\nreturn msg;","outputs":1,"noerr":0,"x":291,"y":290,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"2a300999.190196","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":322,"wires":[["acca6930.c13528"]]},{"id":"acca6930.c13528","type":"function","z":"a0a649cc.ca04e8","name":"payload - infinite","func":"msg.payload = -1.0/0;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":322,"wires":[["e3f119eb.d44758","bcf459fe.1b0ad8"]]},{"id":"d14c2c12.1b404","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":292,"wires":[["ac808215.11ba7"]]},{"id":"d52b5af5.c6c438","type":"inject","z":"a0a649cc.ca04e8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":324,"wires":[["73f496ef.b3cf78"]]},{"id":"73f496ef.b3cf78","type":"function","z":"a0a649cc.ca04e8","name":"xyz - infinite","func":"msg.payload.xyz = -1.0/0;\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":324,"wires":[["bcf459fe.1b0ad8"]]},{"id":"ac808215.11ba7","type":"function","z":"a0a649cc.ca04e8","name":"xyz + infinite","func":"//msg.payload.xyz = 1.0 / 0;\nmsg.payload.xyz = Number.POSITIVE_INFINITY;\nnode.log('>>>' + JSON.stringify(msg))\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":292,"wires":[["bcf459fe.1b0ad8"]]},{"id":"1bfcaa65.a2c6f6","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload - old","func":"/** Validate msg.payload.xyz\n * \n*/\n\nif (typeof msg.payload === 'undefined' || msg.payload === null || \n    (typeof msg.payload === 'number' && isNaN(msg.payload))) {\n    node.error('invalid payload', msg);\n    return;\n} else {\n    node.warn('payload ok');\n    if (typeof msg.payload.xyz === 'undefined' || msg.payload.xyz === null || \n        (typeof msg.payload.xyz === 'number' && isNaN(msg.payload.xyz))|| msg.payload.xyz ==='' ) {\n        node.error('invalid msg.payload.xyz', msg);\n        return;\n    } else {\n        node.warn('found ' + JSON.stringify(msg.payload.xyz)  + '... we can start processing');\n    }\n}\nreturn msg;","outputs":1,"noerr":0,"x":1030,"y":780,"wires":[[]]},{"id":"6e9d66f0.bc30b8","type":"function","z":"a0a649cc.ca04e8","name":"validate msg.payload.xyz -- throws error in case of undefined msg.payload","func":"/** Validate msg.payload.xyz\n * \n*/\n\nif (msg.payload.hasOwnProperty('xyz')) {\n    node.warn('found ' + JSON.stringify(msg.payload.xyz)  + '... we can start processing');\n} else {\n    node.error('invalid msg.payload.xyz', msg);\n}\n\nreturn msg;\n","outputs":1,"noerr":0,"x":880,"y":740,"wires":[[]]},{"id":"63a7db00.cc8604","type":"function","z":"a0a649cc.ca04e8","name":"validate msg payload","func":"/** Validate msg.payload.xyz\n * \n*/\nkey = ['payload', 'xzy']\nnode.debug(msg[key])\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":820,"wires":[[]]},{"id":"1cb172b5.14d9cd","type":"http request","z":"ea970db4.5106b","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":480,"y":160,"wires":[["a35f8dee.9f18f"]]},{"id":"93008453.2d0988","type":"change","z":"ea970db4.5106b","name":"define url delete payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/?language=\" & $env('language')","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":120,"wires":[["1cb172b5.14d9cd"]]},{"id":"d7fd649a.9ff818","type":"template","z":"ea970db4.5106b","name":"header with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":429,"y":80,"wires":[["93008453.2d0988"]]},{"id":"dea3f134.ddc37","type":"inject","z":"91448cef.2efc9","name":"trigger","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":91,"y":150,"wires":[["6ac23f94.dc3d"]]},{"id":"feb96bef.d13c48","type":"comment","z":"91448cef.2efc9","name":"B. get information about all devices","info":"","x":147,"y":117,"wires":[]},{"id":"df69bc9f.4c2d5","type":"debug","z":"91448cef.2efc9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":748,"y":400,"wires":[]},{"id":"754625fb.8865fc","type":"inject","z":"91448cef.2efc9","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"000149287451","payloadType":"str","x":124,"y":323,"wires":[["33b22f76.f4038"]]},{"id":"2ecedcf0.da0db4","type":"comment","z":"91448cef.2efc9","name":"C. get all information about one specifc device","info":"","x":175,"y":289,"wires":[]},{"id":"7a654d71.f942e4","type":"comment","z":"91448cef.2efc9","name":"D. get all actions of one specific device - depend on the current state of the device","info":"","x":285,"y":615,"wires":[]},{"id":"45bd620f.4b086c","type":"comment","z":"91448cef.2efc9","name":"A. get new bearer  - also do refresh token","info":"","x":165,"y":20,"wires":[]},{"id":"fed8fd9e.68c2d","type":"inject","z":"91448cef.2efc9","name":"trigger","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":87,"y":53,"wires":[["f5ecdf57.03ab1"]]},{"id":"a048c655.ec1f78","type":"subflow:24092027.ab82","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"},{"name":"clientId","value":"xx","type":"str"},{"name":"clientSecret","value":"xxx","type":"str"},{"name":"username","value":"xxxxx","type":"str"},{"name":"password","value":"xxxxxx","type":"str"}],"x":391,"y":53,"wires":[["df69bc9f.4c2d5"]]},{"id":"f5ecdf57.03ab1","type":"credentials","z":"91448cef.2efc9","name":"","props":[{"value":"username","type":"msg"},{"value":"password","type":"msg"},{"value":"clientId","type":"msg"},{"value":"clientSecret","type":"msg"}],"x":230,"y":53,"wires":[["a048c655.ec1f78"]]},{"id":"7742f9f5.4a43e8","type":"change","z":"24092027.ab82","name":"get env","rules":[{"t":"set","p":"vg","pt":"msg","to":"vg","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":63,"wires":[["cbba5ff0.57a32"]]},{"id":"6ac23f94.dc3d","type":"subflow:ea970db4.5106b","z":"91448cef.2efc9","name":"","env":[],"x":254,"y":150,"wires":[["df69bc9f.4c2d5"]]},{"id":"eaf22f71.d9969","type":"function","z":"ea970db4.5106b","name":"verify input","func":"// verify token\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":218,"y":80,"wires":[["d7fd649a.9ff818"],["681dd18d.1baa4"]]},{"id":"33b22f76.f4038","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":323,"wires":[["df69bc9f.4c2d5"]]},{"id":"88aafd6a.c0982","type":"http request","z":"aeba9414.6f40a8","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":460,"y":120,"wires":[["3da93881.b6e868"]]},{"id":"3f0996d.8ed756a","type":"change","z":"aeba9414.6f40a8","name":"msg.url, no payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/?language=\" & $env('language')","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":80,"wires":[["88aafd6a.c0982"]]},{"id":"98d65a27.8020b8","type":"template","z":"aeba9414.6f40a8","name":"msg.headers with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":410,"y":40,"wires":[["3f0996d.8ed756a"]]},{"id":"a260e272.ea783","type":"function","z":"aeba9414.6f40a8","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":192,"y":97,"wires":[["98d65a27.8020b8"],["fd32a717.878c28"]]},{"id":"bc574599.2b5938","type":"comment","z":"91448cef.2efc9","name":"C. get current status of a specifc device","info":"","x":155,"y":443,"wires":[]},{"id":"8912f7bb.095be8","type":"inject","z":"91448cef.2efc9","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"000149287451","payloadType":"str","x":124,"y":476,"wires":[["9100eaf.d08d818"]]},{"id":"9100eaf.d08d818","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":476,"wires":[["ffb4b516.d45be8"]]},{"id":"d4f62349.a5a59","type":"comment","z":"91448cef.2efc9","name":"C. get current device type of a specifc device","info":"","x":175,"y":367,"wires":[]},{"id":"3eee5c2a.855a04","type":"inject","z":"91448cef.2efc9","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"000149287451","payloadType":"str","x":124,"y":400,"wires":[["2640e37d.d5b69c"]]},{"id":"2640e37d.d5b69c","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":400,"wires":[["35daca5.d3adb36"]]},{"id":"1e76a8e5.b32bc7","type":"comment","z":"91448cef.2efc9","name":"B. get device id of first device","info":"","x":125,"y":191,"wires":[]},{"id":"4590828c.8b3f2c","type":"inject","z":"91448cef.2efc9","name":"trigger","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":90,"y":224,"wires":[["472d288e.030668"]]},{"id":"472d288e.030668","type":"subflow:ea970db4.5106b","z":"91448cef.2efc9","name":"","env":[],"x":251,"y":224,"wires":[["d960c503.4130c8"]]},{"id":"d960c503.4130c8","type":"function","z":"91448cef.2efc9","name":"id first object","func":"msg.payload = msg.payload[Object.keys(msg.payload)[0]].ident.deviceIdentLabel.fabNumber\nreturn msg;","outputs":1,"noerr":0,"x":433,"y":224,"wires":[["df69bc9f.4c2d5"]]},{"id":"80c862b8.062ff","type":"comment","z":"91448cef.2efc9","name":"C. get remaining time of specific device","info":"","x":155,"y":520,"wires":[]},{"id":"c47bb64d.541918","type":"inject","z":"91448cef.2efc9","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"000149287451","payloadType":"str","x":124,"y":553,"wires":[["77c1288.984c0d8"]]},{"id":"77c1288.984c0d8","type":"subflow:aeba9414.6f40a8","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":305,"y":553,"wires":[["5dfa60dc.87fc8"]]},{"id":"5dfa60dc.87fc8","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.state.remainingTime[0]*60 + payload.state.remainingTime[1] &  \" min\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":553,"wires":[["df69bc9f.4c2d5"]]},{"id":"35daca5.d3adb36","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.ident.type.value_localized","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":400,"wires":[["df69bc9f.4c2d5"]]},{"id":"ffb4b516.d45be8","type":"change","z":"91448cef.2efc9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.state.status.value_localized","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":491,"y":476,"wires":[["df69bc9f.4c2d5"]]},{"id":"f278936b.e797","type":"subflow:4ae29caa.8056e4","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":295,"y":648,"wires":[["df69bc9f.4c2d5"]]},{"id":"a2806ac3.d3a2d8","type":"http request","z":"4ae29caa.8056e4","name":"GET from Miele","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":460,"y":118,"wires":[["c8655abf.93b328"]]},{"id":"e9e5b981.24d568","type":"change","z":"4ae29caa.8056e4","name":"msg.url, no payload","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/actions/\"","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":78,"wires":[["a2806ac3.d3a2d8"]]},{"id":"f2707f72.38a2f","type":"template","z":"4ae29caa.8056e4","name":"msg.headers with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":429,"y":38,"wires":[["e9e5b981.24d568"]]},{"id":"d3015191.5633d","type":"function","z":"4ae29caa.8056e4","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":198,"y":88,"wires":[["f2707f72.38a2f"],["d9bc2537.715df8"]]},{"id":"9c8e0be2.1c8a58","type":"inject","z":"91448cef.2efc9","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"000149287451","payloadType":"str","x":124,"y":648,"wires":[["f278936b.e797"]]},{"id":"c0e959c7.d684f8","type":"comment","z":"91448cef.2efc9","name":"E. execute command set name {\"deviceName\":\"My_Devicename\"}","info":"","x":245,"y":708,"wires":[]},{"id":"b7906361.bd13b","type":"inject","z":"91448cef.2efc9","name":"trigger","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":94,"y":740,"wires":[["21e8e59.be3271a"]]},{"id":"dafbb889.fb7f58","type":"http request","z":"ad607e01.511ea","name":"PUT to Miele","method":"PUT","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":499,"y":188,"wires":[["21b0eeb.798de12"]]},{"id":"8bbd1614.6e5288","type":"change","z":"ad607e01.511ea","name":"url, body","rules":[{"t":"set","p":"url","pt":"msg","to":"\"https://api.mcs3.miele.com/v1/devices/\" & payload & \"/actions/\"","tot":"jsonata"},{"t":"move","p":"action","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":389,"y":68,"wires":[["47b32910.93a498"]]},{"id":"2542e5f6.b0fd8a","type":"function","z":"ad607e01.511ea","name":"verify input","func":"// verify bearer & msg properties\nif (!global.get('system_bearerMiele')) {\n    node.error('global variable system_bearerMiele not defined', msg)\n    return [null, {payload:'invalid global variable'}]\n}\nif (!msg.payload){\n    node.error('invalid msg.payload - device id', msg)\n    return [null, {payload:\"invalid msg.payload - device id\"}]\n}\nif (!msg.action){\n    node.error('invalid msg.action - action', msg)\n    return [null, {payload:\"invalid msg.action - action\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":193,"y":75,"wires":[["8bbd1614.6e5288"],["ebacb8a0.327d58"]]},{"id":"bba95584.0ba288","type":"subflow:ad607e01.511ea","z":"91448cef.2efc9","name":"","env":[{"name":"language","value":"de","type":"str"}],"x":423,"y":740,"wires":[["df69bc9f.4c2d5"]]},{"id":"f7de50c4.54625","type":"template","z":"ad607e01.511ea","name":"header with authorization","field":"headers","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"Authorization\":\"bearer {{global.system_bearerMiele}}\", \"Accept\": \"application/json\", \"Accept-Charset\": \"utf-8\"}","output":"json","x":459,"y":146,"wires":[["dafbb889.fb7f58"]]},{"id":"6f3d8c02.c4ff64","type":"subflow:ad607e01.511ea","z":"91448cef.2efc9","name":"","env":[],"x":423,"y":821,"wires":[["df69bc9f.4c2d5"]]},{"id":"488026b0.68fa38","type":"comment","z":"91448cef.2efc9","name":"E. execute command stop {\"processAction\":2}","info":"","x":175,"y":788,"wires":[]},{"id":"3da93881.b6e868","type":"switch","z":"aeba9414.6f40a8","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":670,"y":40,"wires":[["96a3026.b505b"],["6a599077.f8081"]]},{"id":"6a599077.f8081","type":"function","z":"aeba9414.6f40a8","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":830,"y":120,"wires":[["dd906f4c.1361a"]]},{"id":"dd906f4c.1361a","type":"template","z":"aeba9414.6f40a8","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":980,"y":120,"wires":[[]]},{"id":"fd32a717.878c28","type":"template","z":"aeba9414.6f40a8","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":350,"y":164,"wires":[[]]},{"id":"a35f8dee.9f18f","type":"switch","z":"ea970db4.5106b","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":650,"y":80,"wires":[["84b66c9d.f62ef"],["8c52e1d0.35a7c"]]},{"id":"8c52e1d0.35a7c","type":"function","z":"ea970db4.5106b","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":810,"y":160,"wires":[["fe83c7a3.1ef478"]]},{"id":"fe83c7a3.1ef478","type":"template","z":"ea970db4.5106b","name":"error http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":963,"y":160,"wires":[[]]},{"id":"84b66c9d.f62ef","type":"template","z":"ea970db4.5106b","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":954,"y":120,"wires":[[]]},{"id":"96a3026.b505b","type":"template","z":"aeba9414.6f40a8","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":990,"y":80,"wires":[[]]},{"id":"681dd18d.1baa4","type":"template","z":"ea970db4.5106b","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":390,"y":218,"wires":[[]]},{"id":"ccdfdd96.2d83e","type":"template","z":"69e44f53.5d62f","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"env >>{{${subflowProperty}}}\npayload >>{{envSubflowProperty}}\n","output":"str","x":460,"y":80,"wires":[[]]},{"id":"4cc2813d.75068","type":"change","z":"69e44f53.5d62f","name":"","rules":[{"t":"set","p":"envSubflowProperty","pt":"msg","to":"subflowProperty","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":80,"wires":[["ccdfdd96.2d83e"]]},{"id":"c8655abf.93b328","type":"switch","z":"4ae29caa.8056e4","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":703,"y":38,"wires":[["2c02bcd4.dc63d4"],["52535782.315028"]]},{"id":"52535782.315028","type":"function","z":"4ae29caa.8056e4","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":815,"y":118,"wires":[["1455fb1d.b32055"]]},{"id":"1455fb1d.b32055","type":"template","z":"4ae29caa.8056e4","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":962,"y":118,"wires":[[]]},{"id":"2c02bcd4.dc63d4","type":"template","z":"4ae29caa.8056e4","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":972,"y":78,"wires":[[]]},{"id":"d9bc2537.715df8","type":"template","z":"4ae29caa.8056e4","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":310,"y":158,"wires":[[]]},{"id":"21b0eeb.798de12","type":"switch","z":"ad607e01.511ea","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":693,"y":80,"wires":[["e4fefa21.402038"],["6ad0d242.05cb5c"]]},{"id":"6ad0d242.05cb5c","type":"function","z":"ad607e01.511ea","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":716,"y":160,"wires":[["9ebcdded.4fad9"]]},{"id":"9ebcdded.4fad9","type":"template","z":"ad607e01.511ea","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":863,"y":160,"wires":[[]]},{"id":"e4fefa21.402038","type":"template","z":"ad607e01.511ea","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":873,"y":120,"wires":[[]]},{"id":"ebacb8a0.327d58","type":"template","z":"ad607e01.511ea","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":330,"y":240,"wires":[[]]},{"id":"21e8e59.be3271a","type":"change","z":"91448cef.2efc9","name":"machine id, action","rules":[{"t":"set","p":"payload","pt":"msg","to":"000149287451","tot":"str"},{"t":"set","p":"action","pt":"msg","to":"{\"deviceName\":\"hkMiele\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":249,"y":740,"wires":[["bba95584.0ba288"]]},{"id":"47b32910.93a498","type":"json","z":"ad607e01.511ea","name":"","property":"payload","action":"obj","pretty":false,"x":399,"y":108,"wires":[["f7de50c4.54625"]]},{"id":"7ab1b56e.a9c78c","type":"inject","z":"91448cef.2efc9","name":"trigger","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":94,"y":821,"wires":[["c54123db.3130e"]]},{"id":"c54123db.3130e","type":"change","z":"91448cef.2efc9","name":"machine id, action","rules":[{"t":"set","p":"payload","pt":"msg","to":"000149287451","tot":"str"},{"t":"set","p":"action","pt":"msg","to":"{\"processAction\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":249,"y":821,"wires":[["6f3d8c02.c4ff64"]]},{"id":"7f9fee0b.c9bac","type":"comment","z":"91448cef.2efc9","name":"both commands throw error 204 without error message although action was performed succesfully","info":"","x":910,"y":706,"wires":[]},{"id":"e44fd735.4b89a8","type":"switch","z":"24092027.ab82","name":"ok?","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":774,"y":143,"wires":[["ccdd1aa3.d7afe8","430fd0da.a6602"],["32c1a07f.b3aaa"]]},{"id":"32c1a07f.b3aaa","type":"function","z":"24092027.ab82","name":"throw error","func":"node.error('http error: ' + msg.payload.message, msg)\nreturn msg\n","outputs":1,"noerr":0,"x":934,"y":223,"wires":[["afceb2f2.d18f3"]]},{"id":"afceb2f2.d18f3","type":"template","z":"24092027.ab82","name":"error  http","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload.message}}\"}","output":"json","x":1081,"y":223,"wires":[[]]},{"id":"ccdd1aa3.d7afe8","type":"template","z":"24092027.ab82","name":"ok!","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"ok!\"}","output":"json","x":1091,"y":183,"wires":[[]]},{"id":"4400b51a.44eacc","type":"template","z":"24092027.ab82","name":"error input","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error: {{payload}}\"}","output":"json","x":360,"y":258,"wires":[[]]},{"id":"85119bed.21b168","type":"function","z":"24092027.ab82","name":"verify input","func":"// verify bearer & msg properties\nif (!msg.username) {\n    node.error('msg.username not defined', msg)\n    return [null, {payload:'msg.username not defined'}]\n}\nif (!msg.password){\n    node.error('msg.password not defined', msg)\n    return [null, {payload:\"msg.password not definedd\"}]\n}\nif (!msg.clientId){\n    node.error('msg.clientId not defined', msg)\n    return [null, {payload:\"msg.clientId not defined\"}]\n}\nif (!msg.clientSecret){\n    node.error('msg.clientSecret not defined', msg)\n    return [null, {payload:\"msg.clientSecret not defined\"}]\n}\nreturn [msg, null]","outputs":2,"noerr":0,"x":160,"y":63,"wires":[["7742f9f5.4a43e8"],["4400b51a.44eacc"]]},{"id":"994c115f.0117b","type":"template","z":"24092027.ab82","name":"create body new","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"grant_type=password&username={{username}}&password={{password}}&client_id={{clientId}}&client_secret={{clientSecret}}&vg={{vg}}","output":"str","x":527,"y":103,"wires":[["a1d20301.4f124"]]},{"id":"a1d20301.4f124","type":"change","z":"24092027.ab82","name":"define url, headers","rules":[{"t":"set","p":"url","pt":"msg","to":"https://api.mcs3.miele.com/thirdparty/token/","tot":"str"},{"t":"set","p":"headers","pt":"msg","to":"{\"Content-Type\":\"application/x-www-form-urlencoded\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":754,"y":63,"wires":[["d782c3de.6219"]]},{"id":"d782c3de.6219","type":"http request","z":"24092027.ab82","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":774,"y":103,"wires":[["e44fd735.4b89a8"]]},{"id":"98c0b90e.acfad8","type":"comment","z":"24092027.ab82","name":"Miele only supports form encoded","info":"","x":530,"y":23,"wires":[]},{"id":"430fd0da.a6602","type":"change","z":"24092027.ab82","name":"","rules":[{"t":"set","p":"system_bearerMiele","pt":"global","to":"payload.access_token","tot":"msg"},{"t":"set","p":"system_refreshMiele","pt":"global","to":"payload.refresh_token","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1001,"y":136,"wires":[[]]},{"id":"6fe89867.753478","type":"template","z":"24092027.ab82","name":"create body refresh","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"grant_type=refresh_token&refresh_token={{global.system_refreshMiele}}&client_id={{clientId}}&client_secret={{clientSecret}}&vg={{vg}}","output":"str","x":537,"y":63,"wires":[["a1d20301.4f124"]]},{"id":"cbba5ff0.57a32","type":"switch","z":"24092027.ab82","name":"","property":"doRefresh","propertyType":"env","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":360,"y":103,"wires":[["6fe89867.753478"],["994c115f.0117b"]]},{"id":"8722cd32.1fa46","type":"comment","z":"405b0e15.987b5","name":"Funciton validatedGroupProperty: playerName, volume, sameVolume, clearQueue - all optional","info":"","x":325,"y":744,"wires":[]},{"id":"5913b0e7.4e005","type":"change","z":"405b0e15.987b5","name":"string -  negative","rules":[{"t":"set","p":"volume","pt":"msg","to":"-20","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":1152,"wires":[["ec89cc15.4290d"]]},{"id":"ec89cc15.4290d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.play.tunein","state":"s24896","stateType":"str","name":"","x":1050,"y":901,"wires":[["d82bbbf0.10b338"]]},{"id":"d82bbbf0.10b338","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1020,"y":864,"wires":[]},{"id":"1ffd9830.ec71b8","type":"change","z":"405b0e15.987b5","name":"string -  0","rules":[{"t":"set","p":"volume","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":1184,"wires":[["ec89cc15.4290d"]]},{"id":"35faf3a3.de329c","type":"change","z":"405b0e15.987b5","name":"string - 101","rules":[{"t":"set","p":"volume","pt":"msg","to":"101","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":1216,"wires":[["ec89cc15.4290d"]]},{"id":"a833b530.6713b8","type":"change","z":"405b0e15.987b5","name":"string - empty","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":1248,"wires":[["ec89cc15.4290d"]]},{"id":"55ef2881.06c478","type":"change","z":"405b0e15.987b5","name":"string - digital and letter","rules":[{"t":"set","p":"volume","pt":"msg","to":"3x","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":1280,"wires":[["ec89cc15.4290d"]]},{"id":"8954dadd.55f548","type":"change","z":"405b0e15.987b5","name":"string - text","rules":[{"t":"set","p":"volume","pt":"msg","to":"hello","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":1312,"wires":[["ec89cc15.4290d"]]},{"id":"c72353ac.cc08d","type":"change","z":"405b0e15.987b5","name":"string - .","rules":[{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":".","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":1344,"wires":[["ec89cc15.4290d"]]},{"id":"5240bf47.043fc","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":813,"wires":[["525370cd.abe1"]]},{"id":"525370cd.abe1","type":"change","z":"405b0e15.987b5","name":"boolean","rules":[{"t":"set","p":"volume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":813,"wires":[["ec89cc15.4290d"]]},{"id":"bcccdf9.be39c2","type":"change","z":"405b0e15.987b5","name":"JSON","rules":[{"t":"set","p":"volume","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":845,"wires":[["ec89cc15.4290d"]]},{"id":"b4b269f0.1aa7f8","type":"change","z":"405b0e15.987b5","name":"timestamp","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":877,"wires":[["ec89cc15.4290d"]]},{"id":"9fadd5a8.3857c8","type":"change","z":"405b0e15.987b5","name":"number -1","rules":[{"t":"set","p":"volume","pt":"msg","to":"-1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":916,"wires":[["ec89cc15.4290d"]]},{"id":"fc66c449.e0eb78","type":"change","z":"405b0e15.987b5","name":"number -5","rules":[{"t":"set","p":"volume","pt":"msg","to":"-5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":948,"wires":[["ec89cc15.4290d"]]},{"id":"da13c3fc.1c5bc","type":"change","z":"405b0e15.987b5","name":"number - 101","rules":[{"t":"set","p":"volume","pt":"msg","to":"101","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":249,"y":980,"wires":[["ec89cc15.4290d"]]},{"id":"cbdbaf6.23a935","type":"change","z":"405b0e15.987b5","name":"number - 1.1","rules":[{"t":"set","p":"volume","pt":"msg","to":"1.1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":1012,"wires":[["ec89cc15.4290d"]]},{"id":"2df6203e.1bff4","type":"change","z":"405b0e15.987b5","name":"number - 10.20","rules":[{"t":"set","p":"volume","pt":"msg","to":"10.20","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":1044,"wires":[["ec89cc15.4290d"]]},{"id":"83eeb43b.415378","type":"change","z":"405b0e15.987b5","name":"number - missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":271,"y":1076,"wires":[["ec89cc15.4290d"]]},{"id":"ff664a1e.3e6338","type":"change","z":"405b0e15.987b5","name":" string - missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":1120,"wires":[["ec89cc15.4290d"]]},{"id":"1af40005.9bd39","type":"comment","z":"405b0e15.987b5","name":"volume","info":"","x":90,"y":779,"wires":[]},{"id":"1b8c8042.f4546","type":"change","z":"405b0e15.987b5","name":"boolean","rules":[{"t":"set","p":"playerName","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":663,"y":946,"wires":[["ec89cc15.4290d"]]},{"id":"79b0c290.63eaec","type":"change","z":"405b0e15.987b5","name":"JSON","rules":[{"t":"set","p":"playerName","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":653,"y":978,"wires":[["ec89cc15.4290d"]]},{"id":"9872b6f8.387178","type":"change","z":"405b0e15.987b5","name":"timestamp","rules":[{"t":"set","p":"playerName","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":673,"y":1010,"wires":[["ec89cc15.4290d"]]},{"id":"ef0d807.b9ff58","type":"change","z":"405b0e15.987b5","name":"number","rules":[{"t":"set","p":"playerName","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":662,"y":1042,"wires":[["ec89cc15.4290d"]]},{"id":"834cab61.d72528","type":"change","z":"405b0e15.987b5","name":"string empty","rules":[{"t":"set","p":"playerName","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":673,"y":1074,"wires":[["ec89cc15.4290d"]]},{"id":"6a81463f.ae85b8","type":"change","z":"405b0e15.987b5","name":"string xxx","rules":[{"t":"set","p":"playerName","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":663,"y":1106,"wires":[["ec89cc15.4290d"]]},{"id":"cf992380.a74fa","type":"comment","z":"405b0e15.987b5","name":"playerName","info":"","x":532,"y":914,"wires":[]},{"id":"fe42c076.54c0f","type":"change","z":"405b0e15.987b5","name":"string","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":651,"y":1186,"wires":[["ec89cc15.4290d"]]},{"id":"93c379c8.a09d78","type":"change","z":"405b0e15.987b5","name":"JSON","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":651,"y":1218,"wires":[["ec89cc15.4290d"]]},{"id":"c812b0e7.50966","type":"change","z":"405b0e15.987b5","name":"timestamp","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":671,"y":1250,"wires":[["ec89cc15.4290d"]]},{"id":"a43b74d.bb1d988","type":"change","z":"405b0e15.987b5","name":"number","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":661,"y":1282,"wires":[["ec89cc15.4290d"]]},{"id":"e1a43d1.a122bc","type":"change","z":"405b0e15.987b5","name":"string empty","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":671,"y":1314,"wires":[["ec89cc15.4290d"]]},{"id":"d5a3125b.e29c3","type":"change","z":"405b0e15.987b5","name":"string xxx","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":661,"y":1346,"wires":[["ec89cc15.4290d"]]},{"id":"5bcffcf0.b7caa4","type":"comment","z":"405b0e15.987b5","name":"sameVolume","info":"","x":532,"y":1153,"wires":[]},{"id":"94e0a41f.c38288","type":"comment","z":"405b0e15.987b5","name":"SUCCESS SUCCESS SUCCESS","info":"","x":145,"y":4066,"wires":[]},{"id":"1c957790.d44598","type":"change","z":"405b0e15.987b5","name":"volume string 30, sameVolume missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":311,"y":4141,"wires":[["405d1b34.ef7614"]]},{"id":"b0c9da96.fec0b8","type":"change","z":"405b0e15.987b5","name":"volume number 12, sameVolume missing","rules":[{"t":"set","p":"volume","pt":"msg","to":"12","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":322,"y":4173,"wires":[["405d1b34.ef7614"]]},{"id":"e394c644.9a6a78","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"num"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":312,"y":4205,"wires":[["405d1b34.ef7614"]]},{"id":"77ac95f8.95f24c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume false","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":312,"y":4237,"wires":[["405d1b34.ef7614"]]},{"id":"62df47f3.957b58","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Bad","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":352,"y":4275,"wires":[["405d1b34.ef7614"]]},{"id":"335dc449.e3916c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Wohnzimmer","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":382,"y":4307,"wires":[["405d1b34.ef7614"]]},{"id":"d806c9f8.804ab8","type":"comment","z":"99e6906e.c69df","name":"UNIVERSAL: Group based & SONOS player name ","info":"","x":195,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"92452937.a71ce8","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"play","payloadType":"str","x":90,"y":119,"wires":[["16182df1.06e562"]]},{"id":"88f1aa5a.e99258","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"toggle.playback","payloadType":"str","x":120,"y":183,"wires":[["16182df1.06e562"]]},{"id":"975d8d1c.3aa88","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"stop","payloadType":"str","x":90,"y":247,"wires":[["16182df1.06e562"]]},{"id":"5e28b483.ab0fac","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"next.track","payloadType":"str","x":100,"y":279,"wires":[["16182df1.06e562"]]},{"id":"3b8f19e6.b8fa86","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"previous.track","payloadType":"str","x":110,"y":311,"wires":[["16182df1.06e562"]]},{"id":"95eac179.184b6","type":"inject","z":"99e6906e.c69df","name":"play.notification","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"play.notification","payloadType":"str","x":120,"y":1160,"wires":[["f39fd4c6.c693d8"]]},{"id":"f39fd4c6.c693d8","type":"change","z":"99e6906e.c69df","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":294,"y":1160,"wires":[["ec1960b5.00b3f"]]},{"id":"1d89f0f8.dc229f","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"10","payload":"player.set.volume","payloadType":"str","x":530,"y":120,"wires":[["16182df1.06e562"]]},{"id":"16182df1.06e562","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","compatibilityMode":true,"command":"message","name":"living - not coordinator","x":720,"y":540,"wires":[["253e6e0f.936ce2"]]},{"id":"b5ad35e.9695fc8","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"get.playbackstate","payloadType":"str","x":983,"y":156,"wires":[["4ed9c170.a95e9"]]},{"id":"9b60bae5.777068","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.get.volume","payloadType":"str","x":983,"y":420,"wires":[["4ed9c170.a95e9"]]},{"id":"7c1ccbb4.1d5e84","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.get.role","payloadType":"str","x":973,"y":676,"wires":[["4ed9c170.a95e9"]]},{"id":"9bbcc937.1cb818","type":"comment","z":"99e6906e.c69df","name":"TuneIn","info":"","x":531,"y":817,"wires":[],"icon":"node-red/alert.svg"},{"id":"fdb85b79.0837d8","type":"inject","z":"99e6906e.c69df","name":"joiner.play.notification","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payload":"joiner.play.notification","payloadType":"str","x":140,"y":1192,"wires":[["936341a0.c643"]]},{"id":"936341a0.c643","type":"change","z":"99e6906e.c69df","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":331,"y":1192,"wires":[["173eec81.585413"]]},{"id":"2fcf04cb.93592c","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"play","payloadType":"str","x":90,"y":87,"wires":[["ffeb7ac3.578f98"]]},{"id":"ffeb7ac3.578f98","type":"change","z":"99e6906e.c69df","name":"volume","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":221,"y":87,"wires":[["16182df1.06e562"]]},{"id":"41fde303.97545c","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"play.queue","payloadType":"str","x":100,"y":848,"wires":[["d39a9106.99993"]]},{"id":"d39a9106.99993","type":"change","z":"99e6906e.c69df","name":"vol. 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":848,"wires":[["ec1960b5.00b3f"]]},{"id":"7789ab79.2f0354","type":"comment","z":"99e6906e.c69df","name":"queue","info":"","x":90,"y":815,"wires":[],"icon":"node-red/alert.svg"},{"id":"15624fbc.1cdbe","type":"comment","z":"405b0e15.987b5","name":"No Ip && invalid serial","info":"","x":291,"y":248,"wires":[]},{"id":"6ea8dfec.5079e","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":250,"wires":[["2c2cd61e.343cba","2d69512a.43bb6e","47b4da16.908d54","23162a8.e7dc6d6"]]},{"id":"a3eb53b0.a010e","type":"comment","z":"405b0e15.987b5","name":"Invalid ip: from fritzbox","info":"","x":291,"y":90,"wires":[]},{"id":"6dbddecf.92143","type":"comment","z":"405b0e15.987b5","name":"Invalid ip address - wrong syntax","info":"","x":321,"y":168,"wires":[]},{"id":"8699983a.eb0458","type":"comment","z":"405b0e15.987b5","name":"No ip && valid serial - WILL WORK!","info":"","x":331,"y":329,"wires":[]},{"id":"d8a671fa.965e9","type":"function","z":"405b0e15.987b5","name":"NaN","func":"msg.payload = 'ok'\nmsg.topic = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":711,"y":185,"wires":[["40a60a57.8c31e4"]]},{"id":"a4087202.20aec","type":"function","z":"405b0e15.987b5","name":"null","func":"msg.payload = 'ok'\nmsg.topic = null;\nreturn msg;","outputs":1,"noerr":0,"x":711,"y":217,"wires":[["40a60a57.8c31e4"]]},{"id":"4d33ff2b.a2a25","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":546,"y":89,"wires":[["cf75f94c.642528","4d248c22.4d5e84","d8a671fa.965e9","a4087202.20aec","40a60a57.8c31e4","615e7200.87409","1f0321b0.34444e"]]},{"id":"22f69f98.77d5c","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":869,"y":198,"wires":[]},{"id":"d7adcafd.de0038","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":510,"y":271,"wires":[]},{"id":"b091e82.57ec718","type":"comment","z":"405b0e15.987b5","name":"Network","info":"","x":65,"y":57,"wires":[]},{"id":"2c2cd61e.343cba","type":"sonos-universal","z":"405b0e15.987b5","confignode":"9037fbab.1d8408","compatibilityMode":false,"command":"group.play","name":"fritzbox","x":251,"y":122,"wires":[["d7adcafd.de0038"]]},{"id":"2d69512a.43bb6e","type":"sonos-universal","z":"405b0e15.987b5","confignode":"64704482.34d37c","compatibilityMode":false,"command":"group.play","name":"ip with wrong syntax","x":291,"y":201,"wires":[["d7adcafd.de0038"]]},{"id":"40a60a57.8c31e4","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"message","state":"","stateType":"str","name":"","x":859,"y":250,"wires":[["22f69f98.77d5c"]]},{"id":"47b4da16.908d54","type":"sonos-universal","z":"405b0e15.987b5","confignode":"ff297616.de3c88","compatibilityMode":false,"command":"group.play","name":"no ip && wrong serial","x":291,"y":281,"wires":[["d7adcafd.de0038"]]},{"id":"23162a8.e7dc6d6","type":"sonos-universal","z":"405b0e15.987b5","confignode":"c747354a.95e5e8","compatibilityMode":false,"command":"group.play","state":"","stateType":"str","name":"no ip but correct serial number","x":321,"y":361,"wires":[["d7adcafd.de0038"]]},{"id":"fbbe37f9.ec80e8","type":"comment","z":"405b0e15.987b5","name":"FAILURE FAILURE FAILURE FAILURE","info":"","x":155,"y":20,"wires":[]},{"id":"405d1b34.ef7614","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.tunein","name":"","x":965,"y":4373,"wires":[["3aaebcd9.9ca424"]]},{"id":"3aaebcd9.9ca424","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":949,"y":4335,"wires":[]},{"id":"714d9e9e.10685","type":"comment","z":"99e6906e.c69df","name":"Notification","info":"","x":100,"y":1128,"wires":[],"icon":"node-red/alert.svg"},{"id":"173eec81.585413","type":"sonos-universal","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","compatibilityMode":true,"command":"message","name":"joiner","x":470,"y":1192,"wires":[["17d641b5.8acd1e"]]},{"id":"253e6e0f.936ce2","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":750,"y":500,"wires":[]},{"id":"17d641b5.8acd1e","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":590,"y":1192,"wires":[]},{"id":"d9bd2fe.3f22dd","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":2099,"wires":[["e31ec83a.558e58"]]},{"id":"8d7daf16.7137c","type":"comment","z":"405b0e15.987b5","name":"play.queue with empty queue","info":"","x":160,"y":2065,"wires":[]},{"id":"bd69f167.291ad","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.play.queue","name":"","x":471,"y":2099,"wires":[["939badd3.96142"]]},{"id":"939badd3.96142","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":632,"y":2099,"wires":[]},{"id":"9d03522b.25c0d","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":450,"y":2381,"wires":[]},{"id":"cf6e211f.ed38","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://192.168.178.25/xxxxx.mp3","payloadType":"str","x":850,"y":2243,"wires":[["fac63c2e.2a50d"]]},{"id":"fac63c2e.2a50d","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"group.play.notification","name":"","x":1220,"y":2228,"wires":[["f84c053b.92d1d8"]]},{"id":"8008d1e7.5e594","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"xxxxx","payloadType":"str","x":850,"y":2211,"wires":[["fac63c2e.2a50d"]]},{"id":"51b3182a.7150a8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://192.168.178.25/xxxxx.mp","payloadType":"str","x":850,"y":2179,"wires":[["fac63c2e.2a50d"]]},{"id":"6b4b84a6.2ae86c","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://192.168.178.25/xxxxx.mp4","payloadType":"str","x":850,"y":2275,"wires":[["fac63c2e.2a50d"]]},{"id":"af8776db.d19ad8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://192.168.178.25/xxxxx.aac","payloadType":"str","x":1030,"y":2141,"wires":[["fac63c2e.2a50d"]]},{"id":"11214f83.e8d74","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://192.168.178.25/xxxxx.flac","payloadType":"str","x":1030,"y":2173,"wires":[["fac63c2e.2a50d"]]},{"id":"33ace11a.e1613e","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://192.168.178.25/xxxxx.m4a","payloadType":"str","x":1030,"y":2205,"wires":[["fac63c2e.2a50d"]]},{"id":"2dff2c1f.b72864","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://192.168.178.25/xxxxx.ogg","payloadType":"str","x":1030,"y":2237,"wires":[["fac63c2e.2a50d"]]},{"id":"6d413ae6.b8b044","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://192.168.178.25/xxxxx.asf","payloadType":"str","x":1029,"y":2269,"wires":[["fac63c2e.2a50d"]]},{"id":"deee1f01.2999e","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://192.168.178.25/xxxxx.wma","payloadType":"str","x":1030,"y":2301,"wires":[["fac63c2e.2a50d"]]},{"id":"cc39110a.1e83b","type":"comment","z":"405b0e15.987b5","name":"will work but not play - accepted formats","info":"","x":951,"y":2111,"wires":[]},{"id":"db945235.1367a","type":"comment","z":"405b0e15.987b5","name":"next previous - switch to stream to test","info":"","x":190,"y":2328,"wires":[]},{"id":"e031e20c.374b8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":2360,"wires":[["9de8cf4.a2dcb3","3b5f40e0.59262"]]},{"id":"486fc26d.27d13c","type":"inject","z":"405b0e15.987b5","name":"empty","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":637,"y":2361,"wires":[["9e5e352e.fd5368"]]},{"id":"9e5e352e.fd5368","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"player.set.volume","name":"","x":1023,"y":2405,"wires":[["ca35c50f.6a6a58"]]},{"id":"c19121d3.96db1","type":"inject","z":"405b0e15.987b5","name":"-1","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"-1","payloadType":"str","x":637,"y":2394,"wires":[["9e5e352e.fd5368"]]},{"id":"3345d807.883348","type":"inject","z":"405b0e15.987b5","name":"0","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"str","x":637,"y":2427,"wires":[["9e5e352e.fd5368"]]},{"id":"2420e27.3add31e","type":"inject","z":"405b0e15.987b5","name":"100","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"100","payloadType":"str","x":817,"y":2461,"wires":[["9e5e352e.fd5368"]]},{"id":"4c3d7d99.589f14","type":"inject","z":"405b0e15.987b5","name":"3x","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"3x","payloadType":"str","x":817,"y":2361,"wires":[["9e5e352e.fd5368"]]},{"id":"b9a97285.6cebe","type":"inject","z":"405b0e15.987b5","name":"hallo","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"hallo","payloadType":"str","x":817,"y":2394,"wires":[["9e5e352e.fd5368"]]},{"id":"7f1e93ff.4c2fbc","type":"inject","z":"405b0e15.987b5","name":".","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":".","payloadType":"str","x":817,"y":2426,"wires":[["9e5e352e.fd5368"]]},{"id":"b86e7e34.d0e0f","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"s24896","payloadType":"str","x":90,"y":4141,"wires":[["1c957790.d44598"]]},{"id":"a3965646.35b118","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":523,"y":813,"wires":[["3f8f86d5.fca95a"]]},{"id":"3f8f86d5.fca95a","type":"change","z":"405b0e15.987b5","name":"volume missing but sameVolume true","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":752,"y":813,"wires":[["ec89cc15.4290d"]]},{"id":"181a89ad.6460c6","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player Bad","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":351,"y":4339,"wires":[["405d1b34.ef7614"]]},{"id":"67b2a46d.59410c","type":"change","z":"405b0e15.987b5","name":"volume number 30, sameVolume true, player wohnzimmer","rules":[{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"},{"t":"set","p":"playerName","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":371,"y":4372,"wires":[["405d1b34.ef7614"]]},{"id":"6ad1cfa4.f46fa","type":"inject","z":"405b0e15.987b5","name":"ZAPSPLAT","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"https://www.zapsplat.com/wp-content/uploads/2015/sound-effects-the-sound-pack-tree/tspt_pull_bell_02_065.mp3?_=1","payloadType":"str","x":111,"y":4476,"wires":[["af708f2c.eb039"]]},{"id":"a75b8773.803058","type":"inject","z":"405b0e15.987b5","name":"soundbible dog","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/labrador-barking-daniel_simon.mp3","payloadType":"str","x":121,"y":4508,"wires":[["af708f2c.eb039"]]},{"id":"748eb572.94a7dc","type":"inject","z":"405b0e15.987b5","name":"Bell","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/bells-tibetan-daniel_simon.mp3","payloadType":"str","x":91,"y":4540,"wires":[["af708f2c.eb039"]]},{"id":"f6442e4b.2ca74","type":"inject","z":"405b0e15.987b5","name":"fog horn","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","x":101,"y":4604,"wires":[["af708f2c.eb039"]]},{"id":"1676e92a.61efa7","type":"inject","z":"405b0e15.987b5","name":"alarm","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/Fire%20Truck%20Siren-SoundBible.com-642727443.mp3","payloadType":"str","x":91,"y":4572,"wires":[["af708f2c.eb039"]]},{"id":"64ecb30a.571c2c","type":"comment","z":"405b0e15.987b5","name":"play.notification","info":"","x":121,"y":4441,"wires":[]},{"id":"fe7e5f19.c9fa7","type":"comment","z":"405b0e15.987b5","name":"Volume/sameVolume/playerName","info":"","x":180,"y":4103,"wires":[]},{"id":"af708f2c.eb039","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.notification","name":"","x":341,"y":4543,"wires":[[]]},{"id":"95a74f68.2ef37","type":"comment","z":"405b0e15.987b5","name":"joiner.play.notification","info":"","x":600,"y":4443,"wires":[]},{"id":"3fbf466d.b527ea","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"joiner.play.notification","name":"","x":870,"y":4538,"wires":[[]]},{"id":"565335ac.1ab00c","type":"change","z":"405b0e15.987b5","name":"volume string 70","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":741,"y":4638,"wires":[["3fbf466d.b527ea"]]},{"id":"c4a5756d.d6c5b8","type":"inject","z":"405b0e15.987b5","name":"fog horn","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","x":102,"y":4636,"wires":[["8113d12b.637c7"]]},{"id":"8113d12b.637c7","type":"change","z":"405b0e15.987b5","name":"volume string 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"},{"t":"set","p":"sameVolume","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":4636,"wires":[["af708f2c.eb039"]]},{"id":"6839dba2.9ce034","type":"comment","z":"405b0e15.987b5","name":"Test case: player an / aus und notification spielen","info":"","x":480,"y":4670,"wires":[]},{"id":"aa2e6460.b540a8","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"mysonos.stream.item","name":"","x":366,"y":71,"wires":[["e4646c63.7ee1f"]]},{"id":"2a470d1d.b5bc02","type":"comment","z":"4318847d.0693cc","name":"Example 2: Play a (MusicLibrary, Amazon) playlist using My Sonos ","info":"","x":245,"y":160,"wires":[]},{"id":"6bda4392.15afbc","type":"inject","z":"4318847d.0693cc","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"ML10CC","payload":"","payloadType":"str","x":100,"y":200,"wires":[["a12c4300.4a2fa"]]},{"id":"a12c4300.4a2fa","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"mysonos.export.item","name":"","x":310,"y":214,"wires":[["cc0d78f0.3cebb8"]]},{"id":"20f34bd4.e96c84","type":"inject","z":"4318847d.0693cc","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Best of Prime","payload":"","payloadType":"str","x":110,"y":235,"wires":[["a12c4300.4a2fa"]]},{"id":"17d0af16.8a31a1","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":710,"y":214,"wires":[]},{"id":"cc0d78f0.3cebb8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"32a98882.56e1c8","compatibilityMode":true,"command":"group.play.export","state":"","stateType":"str","name":"","x":533,"y":214,"wires":[["17d0af16.8a31a1"]]},{"id":"5fe3a2ed.eb907c","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"mysonos.queue.item","name":"","x":410,"y":371,"wires":[["744d729c.ee78dc"]]},{"id":"435d406c.05c4e","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"mysonos.stream.item","state":"SWR3","stateType":"str","name":"","x":290,"y":869,"wires":[["8af22d58.53aff"]]},{"id":"48bb69e.93b5998","type":"polly","z":"4318847d.0693cc","name":"","voice":"0","ssml":false,"dir":"overwritten","config":"8945d5a5.31aef8","x":352,"y":1595,"wires":[["751fc24c.5f892c"],[]]},{"id":"47273022.7b687","type":"inject","z":"4318847d.0693cc","name":"weather","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","x":90,"y":1550,"wires":[["60d50c04.dc4f34"]]},{"id":"384278f8.a57c98","type":"change","z":"4318847d.0693cc","name":"prepare play notification","rules":[{"t":"set","p":"payload","pt":"msg","to":"play.notification","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"num"},{"t":"set","p":"topic","pt":"msg","to":"$globalContext('system_baseUrl') & '/notifications/' & topic","tot":"jsonata"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":652,"y":1633,"wires":[["a94b74c4.c18738"]]},{"id":"6dc684d2.01c19c","type":"fs-ops-copy","z":"4318847d.0693cc","name":"","sourcePath":"","sourcePathType":"str","sourceFilename":"file","sourceFilenameType":"msg","destPath":"notification_cache","destPathType":"global","destFilename":"topic","destFilenameType":"msg","link":false,"overwrite":true,"x":596,"y":1591,"wires":[["384278f8.a57c98"]]},{"id":"751fc24c.5f892c","type":"switch","z":"4318847d.0693cc","name":"","property":"_polly.cached","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":468,"y":1597,"wires":[["6dc684d2.01c19c"],["384278f8.a57c98"]]},{"id":"17d3d81e.fd5208","type":"inject","z":"4318847d.0693cc","name":"Caution","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"notification_caution.mp3","payload":"Caution Caution Caution","payloadType":"str","x":90,"y":1582,"wires":[["60d50c04.dc4f34"]]},{"id":"f951db37.428e28","type":"inject","z":"4318847d.0693cc","name":"inform","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"notification_inform.mp3","payload":"Please mind your steps","payloadType":"str","x":90,"y":1615,"wires":[["60d50c04.dc4f34"]]},{"id":"c4e97855.112e88","type":"comment","z":"4318847d.0693cc","name":"Trigger Examples","info":"","x":119,"y":1511,"wires":[]},{"id":"af5b8d26.1705c","type":"comment","z":"4318847d.0693cc","name":"Create/Update mp3 file, create uri and parameter","info":"","x":481,"y":1511,"wires":[]},{"id":"d80a6d67.99515","type":"comment","z":"4318847d.0693cc","name":"Serialize msgs and play notification","info":"","x":1030,"y":1510,"wires":[]},{"id":"63cf7c29.d98064","type":"inject","z":"4318847d.0693cc","name":"Clear storage / cache","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":747,"y":1366,"wires":[["c4a71b8c.25a638","15147b67.cd39d5"]]},{"id":"a8b10427.3fe018","type":"link in","z":"4318847d.0693cc","name":"execute play_notification","links":["a94b74c4.c18738"],"x":904,"y":1550,"wires":[["c6772716.60af68"]]},{"id":"a94b74c4.c18738","type":"link out","z":"4318847d.0693cc","name":"Trigger play_notification","links":["a8b10427.3fe018"],"x":752,"y":1550,"wires":[]},{"id":"c6e721c.1b95de","type":"inject","z":"4318847d.0693cc","name":"set","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":90,"y":1400,"wires":[["6f073a90.08bd84","1e24ff39.4630d1","78ebe214.17527c"]]},{"id":"c5ad62c1.4abfb","type":"comment","z":"4318847d.0693cc","name":"TTS, notification","info":"","x":85,"y":1331,"wires":[]},{"id":"ed11ae49.b8a2d","type":"comment","z":"4318847d.0693cc","name":"Set Up","info":"","x":91,"y":1366,"wires":[]},{"id":"6f073a90.08bd84","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"system_baseUrl","pt":"global","to":"http://192.168.178.49:1880","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1367,"wires":[[]]},{"id":"1e24ff39.4630d1","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"notification_directory","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":306,"y":1399,"wires":[[]]},{"id":"78ebe214.17527c","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"notification_cache","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1431,"wires":[[]]},{"id":"cb99335a.e0a0e","type":"change","z":"4318847d.0693cc","name":"add cache","rules":[{"t":"set","p":"options.dir","pt":"msg","to":"notification_cache","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":605,"y":1549,"wires":[["48bb69e.93b5998"]]},{"id":"a9529c34.96d74","type":"link in","z":"4318847d.0693cc","name":"TTS Execute","links":["18152db0.dc8512","60d50c04.dc4f34","26ac2b2.49d16d4"],"x":315,"y":1549,"wires":[["e9d1d7a9.402848"]]},{"id":"60d50c04.dc4f34","type":"link out","z":"4318847d.0693cc","name":"TTS Trigger","links":["a9529c34.96d74"],"x":207,"y":1549,"wires":[]},{"id":"63902954.cc2b48","type":"comment","z":"4318847d.0693cc","name":"Maintain","info":"","x":554,"y":1367,"wires":[]},{"id":"62c214c3.ab9e3c","type":"fs-ops-delete","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1405,"wires":[[]]},{"id":"c4a71b8c.25a638","type":"fs-ops-dir","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filter":"notification_*.*","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1405,"wires":[["62c214c3.ab9e3c"]]},{"id":"15147b67.cd39d5","type":"fs-ops-dir","z":"4318847d.0693cc","name":"","path":"notification_cache","pathType":"global","filter":"*_*.mp3","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1438,"wires":[["866b0ab0.299a28"]]},{"id":"866b0ab0.299a28","type":"fs-ops-delete","z":"4318847d.0693cc","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1438,"wires":[[]]},{"id":"21466965.515bf6","type":"status","z":"4318847d.0693cc","name":"","scope":["7435b64e.0a2fb8"],"x":949,"y":1599,"wires":[["6c22fb96.b37484"]]},{"id":"6c22fb96.b37484","type":"change","z":"4318847d.0693cc","name":"initiate next","rules":[{"t":"set","p":"releaseNext","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1101,"y":1599,"wires":[["c6772716.60af68"]]},{"id":"c6772716.60af68","type":"function","z":"4318847d.0693cc","name":"queue","func":"// modified version - originally from https://gist.github.com/dceejay/cea8afa28b7a93ebdc0f \n\n// restartQueue = create new\nif (msg.hasOwnProperty(\"restartQueue\")) {\n    context.queue = []\n    \n// if queue doesn't exist, create it    \n} else {\n    context.queue = context.queue || []\n    context.busy = context.busy || false\n\n    // if the msg is a trigger one release next message\n    if (msg.hasOwnProperty(\"releaseNext\")) {\n        if (context.queue.length > 0) {\n            var m = context.queue.shift()\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return m \n        }\n        else {\n            context.busy = false;\n        }\n    }\n    else {\n        if (context.busy) {\n            // if busy add to queue\n            context.queue.push(msg);\n        }\n        else {\n        // otherwise we are empty so just pass through and set busy flag\n            context.busy = true;\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return msg;\n        }\n    }\n}\nnode.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n\nreturn null;","outputs":1,"noerr":0,"x":1012,"y":1550,"wires":[["7435b64e.0a2fb8"]]},{"id":"b9e60025.3c367","type":"http in","z":"4318847d.0693cc","name":"","url":"/notifications/:mp3file","method":"get","upload":false,"swaggerDoc":"","x":150,"y":1746,"wires":[["86792da2.4cb06"]]},{"id":"ef769238.e5b02","type":"comment","z":"4318847d.0693cc","name":"serve mp3 file for SONOS player","info":"","x":170,"y":1709,"wires":[]},{"id":"86792da2.4cb06","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('notification_directory') & '/' & msg.req.params.mp3file","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":374,"y":1746,"wires":[["c2fa6cb.342c39"]]},{"id":"c2fa6cb.342c39","type":"file in","z":"4318847d.0693cc","name":"","filename":"","format":"","chunk":false,"sendError":false,"encoding":"base64","x":534,"y":1746,"wires":[["a7138852.445228"]]},{"id":"605e5893.1b9518","type":"catch","z":"4318847d.0693cc","name":"","scope":["86792da2.4cb06","c2fa6cb.342c39","a7138852.445228"],"uncaught":false,"x":549,"y":1794,"wires":[["beb5575e.889f28","11576894.2c6de7"]]},{"id":"5f4a3564.9a4dbc","type":"http response","z":"4318847d.0693cc","name":"","statusCode":"","headers":{},"x":829,"y":1745,"wires":[]},{"id":"fa8b69a4.f26918","type":"comment","z":"4318847d.0693cc","name":"Test","info":"http://192.168.178.49:1880/notifications/notification_weather.mp3","x":386,"y":1710,"wires":[]},{"id":"392665f5.7dc97a","type":"inject","z":"4318847d.0693cc","name":"Flush command queue","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1095,"y":1366,"wires":[["eb9430a5.b1ba6"]]},{"id":"eb9430a5.b1ba6","type":"change","z":"4318847d.0693cc","name":"","rules":[{"t":"set","p":"restartQueue","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1107,"y":1403,"wires":[["c6772716.60af68"]]},{"id":"e9d1d7a9.402848","type":"function","z":"4318847d.0693cc","name":"check globals","func":"// checks existens of requried global variables\n//\nlet value = global.get('system_baseUrl')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - system_baseUrl not defined')\n    return null\n}\nvalue = global.get('notification_cache')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_cache not defined')\n    return null\n}\nvalue = global.get('notification_directory')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_directory not defined')\n    return null\n}\nreturn msg\n\nfunction isTruthyAndNotEmptyString (input) {\n    return !(typeof input === 'undefined' || input === null ||\n      (typeof input === 'number' && !Number.isFinite(input)) || input === '')\n}","outputs":1,"noerr":0,"x":432,"y":1549,"wires":[["cb99335a.e0a0e"]]},{"id":"d3477aba.549be8","type":"comment","z":"4318847d.0693cc","name":"Recommendation: Define globals as permanent","info":"This is done in the settings.js file. \nUncomment the contextStorage paragraph.\nThis will store all context variable on disk.","x":440,"y":1331,"wires":[]},{"id":"993b5c0.98e92a8","type":"inject","z":"4318847d.0693cc","name":"weather","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","x":450,"y":1655,"wires":[["384278f8.a57c98"]]},{"id":"a7138852.445228","type":"change","z":"4318847d.0693cc","name":"set 200","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"200","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":1746,"wires":[["5f4a3564.9a4dbc"]]},{"id":"beb5575e.889f28","type":"change","z":"4318847d.0693cc","name":"set 404","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"404","tot":"num"},{"t":"set","p":"payload","pt":"msg","to":"error","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":675,"y":1794,"wires":[["5f4a3564.9a4dbc"]]},{"id":"11576894.2c6de7","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"true","targetType":"full","x":670,"y":1829,"wires":[]},{"id":"7435b64e.0a2fb8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":1161,"y":1550,"wires":[["54925fa5.2dc5e"]]},{"id":"54925fa5.2dc5e","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1270,"y":1595,"wires":[]},{"id":"d4793d8e.eecd5","type":"inject","z":"4318847d.0693cc","name":"habit","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"notification_habit.mp3","payload":"Don't do unto others what you would not have done unto you. Don't do unto others what you would not have done unto you.","payloadType":"str","x":90,"y":1648,"wires":[["60d50c04.dc4f34"]]},{"id":"65f29149.8538a","type":"comment","z":"405b0e15.987b5","name":"get queue","info":"","x":65,"y":4721,"wires":[]},{"id":"5a355136.2bacb","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":4753,"wires":[["6a464d05.31f294"]]},{"id":"fdd05f91.4bf99","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"group.get.queue","name":"joiner","x":233,"y":4785,"wires":[["4922e20b.21448c"]]},{"id":"bcf34126.fd0e","type":"sonos-universal","z":"405b0e15.987b5","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"group.get.queue","name":"independent","x":251,"y":4817,"wires":[["4922e20b.21448c"]]},{"id":"6a464d05.31f294","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.get.queue","name":"coordinator","x":436,"y":4754,"wires":[["4922e20b.21448c"]]},{"id":"9fa47f84.5e029","type":"change","z":"405b0e15.987b5","name":"Küche","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Küche","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":4872,"wires":[["6a464d05.31f294"]]},{"id":"32d4987b.115d28","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":4872,"wires":[["9fa47f84.5e029"]]},{"id":"f0ef755f.a916b8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":4912,"wires":[["892104c9.73e2a8"]]},{"id":"892104c9.73e2a8","type":"change","z":"405b0e15.987b5","name":"Bad","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":272,"y":4912,"wires":[["6a464d05.31f294"]]},{"id":"4922e20b.21448c","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":573,"y":4786,"wires":[]},{"id":"fdb520de.f832b","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":102,"y":4785,"wires":[["fdd05f91.4bf99"]]},{"id":"48fa30d4.5b4ca","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":101,"y":4817,"wires":[["bcf34126.fd0e"]]},{"id":"1a55af66.08dd31","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/grab.php?id=1466&type=mp3","payloadType":"str","x":850,"y":2145,"wires":[["fac63c2e.2a50d"]]},{"id":"66bf987d.759ea8","type":"comment","z":"405b0e15.987b5","name":"play vli Sauna initiated by Spotify","info":"","x":150,"y":5356,"wires":[]},{"id":"9de88740.8eb6e8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Bgm","payload":"export.item","payloadType":"str","x":120,"y":5416,"wires":[["ce88fa6a.6cc128"]]},{"id":"ce88fa6a.6cc128","type":"sonos-manage-mysonos","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":370,"y":5416,"wires":[["c4914b30.1dadb8"]]},{"id":"c4914b30.1dadb8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","name":"any","x":550,"y":5416,"wires":[["fe13eac8.8440b8"]]},{"id":"fe13eac8.8440b8","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":5416,"wires":[]},{"id":"f0d2d5b3.f9c188","type":"comment","z":"405b0e15.987b5","name":"Commands (msg.topic) = 7! messages","info":"","x":636,"y":57,"wires":[]},{"id":"467d1308.f277ac","type":"comment","z":"99e6906e.c69df","name":"Http Radio stream","info":"","x":571,"y":902,"wires":[],"icon":"node-red/alert.svg"},{"id":"a7851739.e68d28","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"get.trackplus","payloadType":"str","x":973,"y":348,"wires":[["4ed9c170.a95e9"]]},{"id":"722f176.7dd63e8","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"on","payload":"set.mutestate","payloadType":"str","x":120,"y":407,"wires":[["16182df1.06e562"]]},{"id":"89bc8068.9d35","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"off","payload":"set.mutestate","payloadType":"str","x":120,"y":439,"wires":[["16182df1.06e562"]]},{"id":"84fd7e15.41934","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"-3","payload":"adjust.volume","payloadType":"str","x":120,"y":375,"wires":[["16182df1.06e562"]]},{"id":"9df26d0d.3f513","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"3","payload":"adjust.volume","payloadType":"str","x":120,"y":343,"wires":[["16182df1.06e562"]]},{"id":"7c2300b1.4a3f4","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"on","payload":"player.set.mutestate","payloadType":"str","x":540,"y":152,"wires":[["16182df1.06e562"]]},{"id":"b40c1169.e88b5","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"off","payload":"player.set.mutestate","payloadType":"str","x":540,"y":184,"wires":[["16182df1.06e562"]]},{"id":"1b3b540d.ff4ddc","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"get.queue","payloadType":"str","x":963,"y":380,"wires":[["4ed9c170.a95e9"]]},{"id":"3f2e24b6.375c2c","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"get.volume","payloadType":"str","x":963,"y":220,"wires":[["4ed9c170.a95e9"]]},{"id":"cededcf4.b20a3","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.get.mutestate","payloadType":"str","x":993,"y":452,"wires":[["4ed9c170.a95e9"]]},{"id":"2a9b7b71.c0ed44","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.get.queue","payloadType":"str","x":983,"y":708,"wires":[["4ed9c170.a95e9"]]},{"id":"8f12e8b.9749d18","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"-3","payload":"player.adjust.volume","payloadType":"str","x":540,"y":88,"wires":[["16182df1.06e562"]]},{"id":"6a301fdb.d4e3b","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"clear.queue","payloadType":"str","x":110,"y":1013,"wires":[["ec1960b5.00b3f"]]},{"id":"a4d89d41.11067","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"pause","payloadType":"str","x":90,"y":215,"wires":[["16182df1.06e562"]]},{"id":"9edf5ab4.56aad8","type":"comment","z":"405b0e15.987b5","name":"Sonos Playlist","info":"","x":75,"y":5476,"wires":[]},{"id":"8ce1a3c2.3bd94","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"SonosMix","payload":"export.item","payloadType":"str","x":140,"y":5512,"wires":[["dfdbe6f5.e2d8a8"]]},{"id":"dfdbe6f5.e2d8a8","type":"sonos-manage-mysonos","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":370,"y":5512,"wires":[["c4914b30.1dadb8"]]},{"id":"63f9f7cf.816ea8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"SonosDido","payload":"export.item","payloadType":"str","x":140,"y":5547,"wires":[["dfdbe6f5.e2d8a8"]]},{"id":"a5a906a0.042c68","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Tolle","payload":"export.item","payloadType":"str","x":120,"y":5582,"wires":[["dfdbe6f5.e2d8a8"]]},{"id":"854acfe9.a0bb8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"SonosMix","payload":"queue","payloadType":"str","x":120,"y":5625,"wires":[["e0ea97d2.491948"]]},{"id":"384c0123.9ce4fe","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"SonosDido","payload":"queue","payloadType":"str","x":130,"y":5660,"wires":[["e0ea97d2.491948"]]},{"id":"8e131a66.9d0128","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Tolle","payload":"queue","payloadType":"str","x":110,"y":5695,"wires":[["e0ea97d2.491948"]]},{"id":"e0ea97d2.491948","type":"sonos-manage-mysonos","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","name":"","x":370,"y":5648,"wires":[["fe13eac8.8440b8"]]},{"id":"47971f2d.36db9","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"get.state","payloadType":"str","x":964,"y":188,"wires":[["4ed9c170.a95e9"]]},{"id":"12df8aee.d738b5","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"queuebackupSave","payload":"save.queue","payloadType":"str","x":170,"y":979,"wires":[["ec1960b5.00b3f"]]},{"id":"6d7fd15b.259e1","type":"comment","z":"99e6906e.c69df","name":"Group related - without prefix group.","info":"","x":180,"y":55,"wires":[],"icon":"node-red/alert.svg"},{"id":"1f6ad9a8.93ca66","type":"comment","z":"99e6906e.c69df","name":"Get / Test","info":"","x":963,"y":55,"wires":[],"icon":"node-red/alert.svg"},{"id":"491bd16d.1212e","type":"comment","z":"4318847d.0693cc","name":"Example 8: Group snapshot","info":"","x":125,"y":980,"wires":[]},{"id":"52d1f7c1.e35848","type":"inject","z":"4318847d.0693cc","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"queueBackup","payload":"household.remove.sonosplaylist","payloadType":"str","x":90,"y":1015,"wires":[["d9311d99.f498c"]]},{"id":"95cb2b68.7214d8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":670,"y":1054,"wires":[["ba48ff29.15c59"]]},{"id":"43d03f0a.512fd","type":"change","z":"4318847d.0693cc","name":"create snapshot","rules":[{"t":"set","p":"payload","pt":"msg","to":"create.snap","tot":"str"},{"t":"set","p":"snapVolumes","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"snapMutestates","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1014,"wires":[["95cb2b68.7214d8"]]},{"id":"e095c253.fc1b1","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":606,"y":1155,"wires":[["572964f2.c187cc"]]},{"id":"572964f2.c187cc","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":748,"y":1155,"wires":[]},{"id":"ba48ff29.15c59","type":"change","z":"4318847d.0693cc","name":"store in flow, stop","rules":[{"t":"set","p":"recentsnapshot","pt":"flow","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":1014,"wires":[["da231a54.c69008"]]},{"id":"7163589.a72b2a8","type":"change","z":"4318847d.0693cc","name":"play snapshot","rules":[{"t":"set","p":"payload","pt":"msg","to":"group.play.snap","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"recentsnapshot","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":596,"y":1115,"wires":[["e095c253.fc1b1"]]},{"id":"41c7ac74.a2c854","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":450,"y":1054,"wires":[["43d03f0a.512fd"]]},{"id":"4c5efb45.196ff4","type":"inject","z":"4318847d.0693cc","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"clear.queue","payloadType":"str","x":110,"y":1115,"wires":[["5cfc7f18.6f27"]]},{"id":"7f910b16.96cf24","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"mysonos.queue.item","name":"","x":373,"y":1155,"wires":[["7163589.a72b2a8"]]},{"id":"5cfc7f18.6f27","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":140,"y":1155,"wires":[["1eb0b341.f8addd"]]},{"id":"1eb0b341.f8addd","type":"change","z":"4318847d.0693cc","name":"restore queue","rules":[{"t":"set","p":"topic","pt":"msg","to":"queueBackup","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":1115,"wires":[["7f910b16.96cf24"]]},{"id":"da231a54.c69008","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":890,"y":1054,"wires":[["6324aa0b.dc1234"]]},{"id":"fb8d1e4b.9362e","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"queueBackup","payload":"household.remove.sonosplaylist","payloadType":"str","x":870,"y":1020,"wires":[["ec1960b5.00b3f"]]},{"id":"330983f0.916e6c","type":"change","z":"4318847d.0693cc","name":"backup queue","rules":[{"t":"set","p":"payload","pt":"msg","to":"save.queue","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"queueBackup","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":1015,"wires":[["41c7ac74.a2c854"]]},{"id":"d9311d99.f498c","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":232,"y":1015,"wires":[["330983f0.916e6c"]]},{"id":"6324aa0b.dc1234","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1060,"y":1054,"wires":[]},{"id":"c7d9a77a.a42e18","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"household.get.groups","payloadType":"str","x":1003,"y":88,"wires":[["4ed9c170.a95e9"]]},{"id":"fc8ec1ee.dada8","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":160,"y":369,"wires":[["6280f87a.0562c8"]]},{"id":"fa5800f0.d6f4c","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":875,"y":71,"wires":[["6bbf67aa.5b6638"]]},{"id":"fad22422.5dcc88","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":273,"y":590,"wires":[["625148f2.018378"]]},{"id":"ab1e13ab.c7d74","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":1030,"y":590,"wires":[[]]},{"id":"9cfa79ba.d93968","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":590,"y":727,"wires":[["98119167.abb2e"]]},{"id":"24a0a7e6.ae3b08","type":"sonos-universal","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":905,"y":702,"wires":[[]]},{"id":"d36c728b.5c65a","type":"sonos-universal","z":"4318847d.0693cc","confignode":"32a98882.56e1c8","compatibilityMode":true,"command":"message","name":"","x":652,"y":871,"wires":[[]]},{"id":"a2d8563b.db4848","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"00:00:50","payloadType":"str","x":800,"y":4133,"wires":[["8db596e.4f47e68"]]},{"id":"67ca785c.116658","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"00:05:00","payloadType":"str","x":800,"y":4166,"wires":[["8db596e.4f47e68"]]},{"id":"dbd5551d.afd418","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"00:55:00","payloadType":"str","x":800,"y":4199,"wires":[["8db596e.4f47e68"]]},{"id":"91c9fddd.f0154","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"00:55:00","payloadType":"str","x":800,"y":4232,"wires":[["8db596e.4f47e68"]]},{"id":"9d2d6c02.05054","type":"comment","z":"405b0e15.987b5","name":"set sleeptimer","info":"","x":810,"y":4100,"wires":[]},{"id":"8db596e.4f47e68","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.set.sleeptimer","name":"","x":1020,"y":4173,"wires":[[]]},{"id":"47bbee11.ca9d4","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"normal","payloadType":"str","x":850,"y":4759,"wires":[["58b8d3d5.2611ac"]]},{"id":"1532e017.e3e09","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"shuffle","payloadType":"str","x":850,"y":4792,"wires":[["58b8d3d5.2611ac"]]},{"id":"a7b50fea.d09c4","type":"comment","z":"405b0e15.987b5","name":"set.queuemode","info":"","x":879.990234375,"y":4724.37109375,"wires":[]},{"id":"58b8d3d5.2611ac","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.set.queuemode","name":"coordinator","x":1070,"y":4818,"wires":[[]]},{"id":"3d5b1f85.701d3","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"repeat_one","payloadType":"str","x":871.990234375,"y":4824.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"b19eafa9.49035","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"repeat_all","payloadType":"str","x":861.990234375,"y":4856.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"882d960a.489338","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"shuffle_norepeat","payloadType":"str","x":881.990234375,"y":4888.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"14cf305b.e35ad","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"shuffle_repeat_one","payloadType":"str","x":891.990234375,"y":4920.37109375,"wires":[["58b8d3d5.2611ac"]]},{"id":"4554b39e.eb0dcc","type":"comment","z":"405b0e15.987b5","name":"player.join/leave group","info":"","x":105,"y":2746.62890625,"wires":[]},{"id":"9692be41.a2e6","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.leave.group","payloadType":"str","x":130,"y":2777.62890625,"wires":[["7f602fb7.b8c64"]]},{"id":"d109f6d1.343218","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","compatibilityMode":false,"state":"","stateType":"str","name":"bath","x":370,"y":2857.62890625,"wires":[[]]},{"id":"7f602fb7.b8c64","type":"change","z":"405b0e15.987b5","name":"invalid name","rules":[{"t":"set","p":"playerName","pt":"msg","to":"xxxxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":312,"y":2777.62890625,"wires":[["d109f6d1.343218"]]},{"id":"e0575bc9.5ad608","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.leave.group","payloadType":"str","x":130,"y":2811.62890625,"wires":[["704a153b.410bbc"]]},{"id":"704a153b.410bbc","type":"change","z":"405b0e15.987b5","name":"invalid player name - boolean","rules":[{"t":"set","p":"playerName","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":362,"y":2811.62890625,"wires":[["d109f6d1.343218"]]},{"id":"b58bbcf4.3fc7a","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"xxxxx","payload":"player.join.group","payloadType":"str","x":140,"y":2857.62890625,"wires":[["d109f6d1.343218"]]},{"id":"4de90373.3b552c","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.join.group","payloadType":"str","x":120,"y":2897.62890625,"wires":[["152d3af0.925b95"]]},{"id":"152d3af0.925b95","type":"change","z":"405b0e15.987b5","name":"invalid player name - boolean","rules":[{"t":"set","p":"playerName","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2897.62890625,"wires":[["d109f6d1.343218"]]},{"id":"5eb22380.a0396c","type":"inject","z":"55805384.a4695c","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"get.trackplus","payloadType":"str","x":110,"y":160,"wires":[["8f3e030e.36f45"]]},{"id":"2ab1dbc3.788904","type":"change","z":"55805384.a4695c","name":"payload.uri","rules":[{"t":"delete","p":"payload","pt":"msg"},{"t":"set","p":"payload.title","pt":"msg","to":"trackData.title","tot":"msg"},{"t":"set","p":"payload.uri","pt":"msg","to":"trackData.uri","tot":"msg"},{"t":"set","p":"payload.currentUri","pt":"msg","to":"mediaData.CurrentURI","tot":"msg"},{"t":"set","p":"payload.trackUri","pt":"msg","to":"positionData.TrackURI","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":312,"y":161,"wires":[["a7230706.58c2a8"]]},{"id":"a7230706.58c2a8","type":"file","z":"55805384.a4695c","name":"","filename":"\\Users\\hekla\\AppData\\Local\\Temp\\MySonosList.txt","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"utf8","x":519,"y":199,"wires":[[]]},{"id":"8f3e030e.36f45","type":"sonos-universal","z":"55805384.a4695c","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.get.trackplus","name":"","x":181,"y":200,"wires":[["2ab1dbc3.788904"]]},{"id":"6e2062ee.936d2c","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.get.led","payloadType":"str","x":973,"y":516,"wires":[["8fe992bb.65ec4"]]},{"id":"20eda006.f2d6d","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.get.loudness","payloadType":"str","x":993,"y":548,"wires":[["4ed9c170.a95e9"]]},{"id":"689609d7.f76198","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.get.subgain","payloadType":"str","x":993,"y":644,"wires":[["4ed9c170.a95e9"]]},{"id":"6508f56b.c81bbc","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.get.dialoglevel","payloadType":"str","x":1003,"y":612,"wires":[["4ed9c170.a95e9"]]},{"id":"3115d56b.28377a","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.get.nightmode","payloadType":"str","x":993,"y":580,"wires":[["4ed9c170.a95e9"]]},{"id":"3d07eb80.6afcd4","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"off","payload":"player.set.loudness","payloadType":"str","x":540,"y":248,"wires":[["16182df1.06e562"]]},{"id":"972d052d.563518","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.set.subgain","name":"living with tv","x":350,"y":3039.62890625,"wires":[[]]},{"id":"2389333c.73ddec","type":"inject","z":"405b0e15.987b5","name":"string 16","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"16","payloadType":"str","x":102,"y":3035.62890625,"wires":[["972d052d.563518"]]},{"id":"2968b2fb.208aee","type":"inject","z":"405b0e15.987b5","name":"string -16","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"-16","payloadType":"str","x":102,"y":3067.62890625,"wires":[["972d052d.563518"]]},{"id":"5fc994b.1f8e76c","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"xxxxx","payloadType":"str","x":90,"y":3169.62890625,"wires":[["3c1a9267.a6f22e"]]},{"id":"3c1a9267.a6f22e","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"player.set.subgain","name":"bath without tv","x":248,"y":3169.62890625,"wires":[[]]},{"id":"65cc5ac4.07b834","type":"comment","z":"405b0e15.987b5","name":"player.set.subgain limits","info":"","x":105,"y":3000.62890625,"wires":[]},{"id":"ec1960b5.00b3f","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","compatibilityMode":true,"command":"message","name":"living - not coordinator","x":1112,"y":1161,"wires":[["7a79e2be.027cbc"]]},{"id":"4fbab087.44023","type":"comment","z":"99e6906e.c69df","name":"Spotify","info":"","x":86,"y":1310,"wires":[]},{"id":"c173fc9d.38f2f","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Best of Prime Music","payload":"mysonos.export.item","payloadType":"str","x":482,"y":1657,"wires":[["2b89b7f7.c62a08"]]},{"id":"b0ad8a7d.1854d8","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Arabella","payload":"mysonos.export.item","payloadType":"str","x":156,"y":1628,"wires":[["2b89b7f7.c62a08"]]},{"id":"86ca85ee.a2cd08","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Bayern 3","payload":"mysonos.export.item","payloadType":"str","x":156,"y":1660,"wires":[["4c50aef5.23243"]]},{"id":"4c50aef5.23243","type":"change","z":"99e6906e.c69df","name":"volume 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":133,"y":1696,"wires":[["2b89b7f7.c62a08"]]},{"id":"558bfb3e.cddef4","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":490,"y":1880,"wires":[]},{"id":"e447a5fb.55b1e8","type":"comment","z":"99e6906e.c69df","name":"TuneIn","info":"","x":86,"y":1594,"wires":[]},{"id":"7b83fd95.247314","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"20 Jahre Napster","payload":"mysonos.export.item","payloadType":"str","x":126,"y":1515,"wires":[["2b89b7f7.c62a08"]]},{"id":"451a4bb6.779df4","type":"comment","z":"99e6906e.c69df","name":"Napster","info":"","x":86,"y":1417,"wires":[]},{"id":"7985988e.bede48","type":"comment","z":"99e6906e.c69df","name":"Amazon","info":"","x":451,"y":1592,"wires":[]},{"id":"ab20892f.d367f8","type":"comment","z":"99e6906e.c69df","name":"Radioplayer","info":"","x":107,"y":1737,"wires":[]},{"id":"d1652a07.af4088","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"1A Fitness Hits","payload":"mysonos.export.item","payloadType":"str","x":127,"y":1769,"wires":[["2b89b7f7.c62a08"]]},{"id":"45e16280.04171c","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Daily Mix","payload":"mysonos.export.item","payloadType":"str","x":156,"y":1343,"wires":[["2b89b7f7.c62a08"]]},{"id":"9f634a18.2f2d28","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Best Of Love","payload":"mysonos.export.item","payloadType":"str","x":532,"y":1689,"wires":[["2b89b7f7.c62a08"]]},{"id":"dc81baf.86f5248","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"GloomySunday","payload":"mysonos.export.item","payloadType":"str","x":176,"y":1375,"wires":[["2b89b7f7.c62a08"]]},{"id":"e55076f0.118b88","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"The Best Songs of the ","payload":"mysonos.export.item","payloadType":"str","x":126,"y":1547,"wires":[["2b89b7f7.c62a08"]]},{"id":"cb7b6a47.fb6b78","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Dust in the Wind","payload":"mysonos.export.item","payloadType":"str","x":126,"y":1451,"wires":[["2b89b7f7.c62a08"]]},{"id":"1951586f.db5668","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"The Best Of Sade","payload":"mysonos.export.item","payloadType":"str","x":126,"y":1483,"wires":[["2b89b7f7.c62a08"]]},{"id":"c9a05e37.4a69b","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Blowin' in the Wind","payload":"mysonos.export.item","payloadType":"str","x":482,"y":1625,"wires":[["2b89b7f7.c62a08"]]},{"id":"2b89b7f7.c62a08","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":550,"y":1500,"wires":[["7f9cc53b.eb1efc","62160ac6.374614"]]},{"id":"7f9cc53b.eb1efc","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","compatibilityMode":true,"command":"group.play.export","name":"","x":762,"y":1500,"wires":[["48a90d41.bdb824"]]},{"id":"7176f24b.55de2c","type":"comment","z":"99e6906e.c69df","name":"MY SONOS ","info":"","x":75,"y":1272,"wires":[],"icon":"node-red/alert.svg"},{"id":"80629f1d.90fb6","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"mysonos.get.items","payloadType":"str","x":530,"y":1340,"wires":[["7ed6e4a7.8bb5ec"]]},{"id":"8d5a7cf9.0f778","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":495,"y":1920,"wires":[["558bfb3e.cddef4"]]},{"id":"3a82fa70.39bb66","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Angi","payload":"mysonos.export.item","payloadType":"str","x":910,"y":1640,"wires":[["2b89b7f7.c62a08"]]},{"id":"17236942.e044f7","type":"comment","z":"99e6906e.c69df","name":"Music Library","info":"","x":870,"y":1607,"wires":[],"icon":"node-red/alert.svg"},{"id":"b5d27d31.321f1","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"ML10CC","payload":"mysonos.export.item","payloadType":"str","x":920,"y":1672,"wires":[["2b89b7f7.c62a08"]]},{"id":"4914f4d.bb8380c","type":"comment","z":"99e6906e.c69df","name":"Sonos Playlists","info":"","x":460,"y":1760,"wires":[],"icon":"node-red/alert.svg"},{"id":"ecbb06bc.041db8","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"SonosMix","payload":"mysonos.export.item","payloadType":"str","x":510,"y":1793,"wires":[["2b89b7f7.c62a08"]]},{"id":"48a90d41.bdb824","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":804,"y":1460,"wires":[]},{"id":"c15b1cca.d12f3","type":"comment","z":"99e6906e.c69df","name":"queue/stream","info":"","x":107,"y":1826,"wires":[],"icon":"node-red/alert.svg"},{"id":"c0e8f4c2.bd6d58","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Best Of Love","payload":"mysonos.stream.item","payloadType":"str","x":177,"y":1864,"wires":[["8d5a7cf9.0f778"]]},{"id":"edbb409b.d133d","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Arabella","payload":"mysonos.stream.item","payloadType":"str","x":157,"y":1896,"wires":[["8d5a7cf9.0f778"]]},{"id":"7ed6e4a7.8bb5ec","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"message","name":"","x":620,"y":1382,"wires":[["5fb0659a.5b5fac"]]},{"id":"5fb0659a.5b5fac","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":750,"y":1340,"wires":[]},{"id":"c74275cc.828628","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"SonosMix","payload":"mysonos.queue.item","payloadType":"str","x":167,"y":1928,"wires":[["8d5a7cf9.0f778"]]},{"id":"4631f9be.411948","type":"comment","z":"99e6906e.c69df","name":"Get","info":"","x":491,"y":1307,"wires":[],"icon":"node-red/alert.svg"},{"id":"4ed9c170.a95e9","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","compatibilityMode":true,"command":"message","state":"variable","stateType":"str","name":"","x":1222,"y":389,"wires":[["1f223625.3cf2ca"]]},{"id":"e09a244e.1c4898","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"on","payload":"player.set.nightmode","payloadType":"str","x":540,"y":282,"wires":[["16182df1.06e562"]]},{"id":"c67f8360.ec79a","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"off","payload":"player.set.nightmode","payloadType":"str","x":540,"y":314,"wires":[["16182df1.06e562"]]},{"id":"5eb4a9c8.e1ff18","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"on","payload":"player.set.dialoglevel","payloadType":"str","x":540,"y":346,"wires":[["16182df1.06e562"]]},{"id":"9f73c7d9.ea8038","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"off","payload":"player.set.dialoglevel","payloadType":"str","x":540,"y":378,"wires":[["16182df1.06e562"]]},{"id":"a42849b0.2475e8","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"10","payload":"player.set.subgain","payloadType":"str","x":540,"y":410,"wires":[["16182df1.06e562"]]},{"id":"5b4b228a.bb5cec","type":"comment","z":"99e6906e.c69df","name":"Player related","info":"","x":510,"y":56,"wires":[],"icon":"node-red/alert.svg"},{"id":"1f223625.3cf2ca","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1270,"y":440,"wires":[]},{"id":"ecbe75d2.356928","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"s24896","payload":"play.tunein","payloadType":"str","x":571,"y":850,"wires":[["ec1960b5.00b3f"]]},{"id":"e574d58c.c284e8","type":"comment","z":"99e6906e.c69df","name":"sonos playlist","info":"","x":870,"y":987,"wires":[],"icon":"node-red/alert.svg"},{"id":"794d0a4e.319be4","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Bad","payload":"household.create.stereopair","payloadType":"str","x":169,"y":620,"wires":[["165c6f3d.293fc1"]]},{"id":"165c6f3d.293fc1","type":"change","z":"99e6906e.c69df","name":"right player","rules":[{"t":"set","p":"playerNameRight","pt":"msg","to":"variable","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":229,"y":656,"wires":[["16182df1.06e562"]]},{"id":"d85b8e7b.5413","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Bad","payload":"household.separate.stereopair","payloadType":"str","x":180,"y":588,"wires":[["16182df1.06e562"]]},{"id":"79584957.72fe58","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"x-sonos-htastream:RINCON_949F3EC13B9901400:spdif","payload":"player.play.avtransport","payloadType":"str","x":917,"y":848,"wires":[["5d9fc2ce.ef06ec"]]},{"id":"5d9fc2ce.ef06ec","type":"change","z":"99e6906e.c69df","name":"volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":917,"y":886,"wires":[["ec1960b5.00b3f"]]},{"id":"7a79e2be.027cbc","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1138,"y":1114,"wires":[]},{"id":"ce56c8a.5ed8838","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"x-sonos-htastream:RINCON_949F3EC13B9901400:spdif","payload":"player.play.avtransport","payloadType":"str","x":917,"y":923,"wires":[["ec1960b5.00b3f"]]},{"id":"49fd8f03.349c6","type":"comment","z":"99e6906e.c69df","name":"Line In","info":"","x":849,"y":815,"wires":[],"icon":"node-red/alert.svg"},{"id":"243370d4.f112d","type":"debug","z":"4318847d.0693cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":744,"y":521,"wires":[]},{"id":"4e76c8e5.ec14e8","type":"inject","z":"99e6906e.c69df","name":"insert_uri http","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"https://archive.org/download/testmp3testfile/mpthreetest.mp3","payload":"","payloadType":"str","x":710,"y":2200,"wires":[["9838f442.364738"]]},{"id":"9ef2cc39.4e4b9","type":"comment","z":"99e6906e.c69df","name":"MANAGE QUEUE - DEPRECIATED","info":"","x":145,"y":2048,"wires":[],"icon":"node-red/alert.svg"},{"id":"320981c5.e9d16e","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1050,"y":2120,"wires":[]},{"id":"ce2c7ac5.e09618","type":"comment","z":"99e6906e.c69df","name":"Insert Spotify URI","info":"","x":120,"y":2088,"wires":[],"icon":"font-awesome/fa-arrow-circle-right"},{"id":"e51b4e32.987ad","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Track","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"spotify:track:5AdoS3gS47x40nBNlNmPQ8","payload":"","payloadType":"str","x":141,"y":2121,"wires":[["6039fa1b.962394"]]},{"id":"ef5cb788.e7d0f8","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Album","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"spotify:album:1TSZDcvlPtAnekTaItI3qO","payload":"","payloadType":"str","x":141,"y":2185,"wires":[["6039fa1b.962394"]]},{"id":"94da1f3d.a6ed1","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri TopTrack","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"spotify:artistTopTracks:1dfeR4HaWDbWqFHLkxsg1d","payload":"","payloadType":"str","x":151,"y":2153,"wires":[["6039fa1b.962394"]]},{"id":"f2b0f712.7a1388","type":"inject","z":"99e6906e.c69df","name":"insert_spotify_uri Playlist","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"spotify:user:spotify:playlist:37i9dQZEVXbMDoHDwVN2tF","payload":"","payloadType":"str","x":151,"y":2217,"wires":[["6039fa1b.962394"]]},{"id":"b9f0cdbf.7a3c6","type":"inject","z":"99e6906e.c69df","name":"insert_uri Music Library - song","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payload":"","payloadType":"str","x":760,"y":2124,"wires":[["9838f442.364738"]]},{"id":"15797f4a.bca7f1","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":859,"y":1779,"wires":[["5da455a9.43684c"]]},{"id":"4730033.d0a3dfc","type":"comment","z":"99e6906e.c69df","name":"Music Library","info":"","x":711,"y":2090,"wires":[]},{"id":"ee9cb3ff.3eeb5","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"ML10CC","payload":"","payloadType":"date","x":890,"y":1832,"wires":[["1882ca66.1d4dc6"]]},{"id":"1717f7c4.656918","type":"comment","z":"99e6906e.c69df","name":"http","info":"","x":690,"y":2165,"wires":[]},{"id":"bea132ef.9aba7","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"variable","payload":"household.test.player","payloadType":"str","x":1023,"y":120,"wires":[["4ed9c170.a95e9"]]},{"id":"d20f2e16.594f1","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Küche","payload":"player.join.group","payloadType":"str","x":540,"y":665,"wires":[["7213ff0a.27d93"]]},{"id":"8857c0ce.976d","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.leave.group","payloadType":"str","x":530,"y":697,"wires":[["7213ff0a.27d93"]]},{"id":"7213ff0a.27d93","type":"sonos-universal","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","compatibilityMode":true,"command":"message","name":"Bad not in group","x":761,"y":630,"wires":[[]]},{"id":"bf114e8e.106ed","type":"inject","z":"99e6906e.c69df","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"create.snap","payloadType":"str","x":110,"y":757,"wires":[["5bf5f03.1b58c1"]]},{"id":"5bf5f03.1b58c1","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","compatibilityMode":true,"command":"message","name":"living - not coordinator","x":310,"y":757,"wires":[["35acdde5.1e14f2"]]},{"id":"35acdde5.1e14f2","type":"change","z":"99e6906e.c69df","name":"tuneIn","rules":[{"t":"set","p":"snap","pt":"msg","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"play.tunein","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"s24896","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":489,"y":757,"wires":[["2a6942e0.07517e"]]},{"id":"2a6942e0.07517e","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","compatibilityMode":true,"command":"message","name":"living - not coordinator","x":664,"y":757,"wires":[["56b986e2.a746b8"]]},{"id":"56b986e2.a746b8","type":"delay","z":"99e6906e.c69df","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":851,"y":757,"wires":[["907efe0.432f5"]]},{"id":"907efe0.432f5","type":"change","z":"99e6906e.c69df","name":"back","rules":[{"t":"set","p":"topic","pt":"msg","to":"snap","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"play.snap","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":982,"y":757,"wires":[["f4366a6.082f098"]]},{"id":"f4366a6.082f098","type":"sonos-universal","z":"99e6906e.c69df","confignode":"8d44022c.adb65","compatibilityMode":true,"command":"message","name":"living - not coordinator","x":1160,"y":757,"wires":[[]]},{"id":"8fbcb11a.9f452","type":"sonos-universal","z":"4318847d.0693cc","confignode":"8d44022c.adb65","compatibilityMode":true,"command":"message","name":"","x":313,"y":471,"wires":[["8978d019.4e76e"]]},{"id":"cd23534c.4dffd","type":"inject","z":"4318847d.0693cc","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"player.get.properties","payloadType":"str","x":130,"y":471,"wires":[["8fbcb11a.9f452"]]},{"id":"a6111a85.251f68","type":"sonos-universal","z":"4318847d.0693cc","confignode":"8d44022c.adb65","compatibilityMode":true,"command":"message","name":"","x":914,"y":471,"wires":[[]]},{"id":"5f89d0e1.e0f5a","type":"inject","z":"25081f9e.f5f34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":399,"wires":[["a3d58123.59236"]]},{"id":"446e86a7.1f0e68","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":674,"y":399,"wires":[]},{"id":"c249bd9e.21742","type":"comment","z":"25081f9e.f5f34","name":"Example 3: Replace SONOS queue without playing","info":"","x":195,"y":366,"wires":[]},{"id":"6a690d.99b7b6f4","type":"inject","z":"25081f9e.f5f34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Arabella","payloadType":"str","x":100,"y":56,"wires":[["d6823277.d1b88"]]},{"id":"def97151.686e9","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":854,"y":71,"wires":[]},{"id":"bed3502c.76f13","type":"inject","z":"25081f9e.f5f34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Best Of Lovesongs","payloadType":"str","x":130,"y":95,"wires":[["d6823277.d1b88"]]},{"id":"19467cf3.bf94e3","type":"delay","z":"25081f9e.f5f34","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":514,"y":71,"wires":[["e98515bc.1987a8"]]},{"id":"584abc00.673f14","type":"comment","z":"25081f9e.f5f34","name":"Example 1:  Play (TuneIn, Amazon) radio station using My Sonos and retrieve title, ...","info":"","x":295,"y":20,"wires":[]},{"id":"3ce73efc.9acb82","type":"comment","z":"25081f9e.f5f34","name":"Example 4: Line in Play:5 / TV Beam or Playbar","info":"","x":185,"y":465,"wires":[]},{"id":"51281a6b.ba3244","type":"switch","z":"25081f9e.f5f34","name":"","property":"payload.modelName","propertyType":"msg","rules":[{"t":"eq","v":"Sonos Play:5","vt":"str"},{"t":"eq","v":"Sonos Beam","vt":"str"},{"t":"eq","v":"Sonos Playbar","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":455,"y":499,"wires":[["b123fdba.28bbb"],["66623590.23783c"],["66623590.23783c"]]},{"id":"b123fdba.28bbb","type":"change","z":"25081f9e.f5f34","name":"line in","rules":[{"t":"set","p":"payload","pt":"msg","to":"'x-rincon-stream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":589,"y":470,"wires":[["c3c2037.bf1ca"]]},{"id":"da2d9474.71d978","type":"comment","z":"25081f9e.f5f34","name":"Example 5: Play Playlist from Music Library","info":"","x":165,"y":572,"wires":[]},{"id":"beaf5dab.83544","type":"inject","z":"25081f9e.f5f34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":606,"wires":[["45978a20.48df94"]]},{"id":"85b7f00d.8f89c","type":"inject","z":"25081f9e.f5f34","name":"mute on","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":711,"wires":[["afcd2661.3533b8","d85e139d.6ee3c"]]},{"id":"afcd2661.3533b8","type":"delay","z":"25081f9e.f5f34","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":223,"y":760,"wires":[["a6a04d77.01a48","6b92a219.98c95c"]]},{"id":"6b92a219.98c95c","type":"delay","z":"25081f9e.f5f34","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":434,"y":810,"wires":[["e3fb4a2f.088628"]]},{"id":"66623590.23783c","type":"change","z":"25081f9e.f5f34","name":"tv (line in)","rules":[{"t":"set","p":"payload","pt":"msg","to":"'x-sonos-htastream:RINCON_' & \t$replace(msg.payload.MACAddress, ':', '') & \t'01400:spdif'\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":599,"y":530,"wires":[["54c37fb8.f6b96","c3c2037.bf1ca"]]},{"id":"ab9c6af.76b6698","type":"comment","z":"25081f9e.f5f34","name":"Example 7: Group players","info":"","x":115,"y":863,"wires":[]},{"id":"ec8688f2.25e688","type":"inject","z":"25081f9e.f5f34","name":"trigger","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"SWR3","payloadType":"str","x":90,"y":897,"wires":[["1974bdba.a5de32"]]},{"id":"c7c57729.8e9638","type":"comment","z":"25081f9e.f5f34","name":"Example 6: Set a morning station but dont play right now","info":"","x":215,"y":676,"wires":[]},{"id":"d6823277.d1b88","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.stream.item","name":"","x":334,"y":71,"wires":[["19467cf3.bf94e3"]]},{"id":"e0d75c39.aba64","type":"comment","z":"25081f9e.f5f34","name":"Example 2: Play a (MusicLibrary, Amazon) playlist using My Sonos ","info":"","x":245,"y":190,"wires":[]},{"id":"8c3aa7e.24fa958","type":"inject","z":"25081f9e.f5f34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"ML10CC","payloadType":"str","x":100,"y":230,"wires":[["84885c1.afc68a"]]},{"id":"84885c1.afc68a","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.export.item","name":"","x":302,"y":244,"wires":[["6df55e35.988ef"]]},{"id":"b572596c.3d7ac8","type":"inject","z":"25081f9e.f5f34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Best of Prime","payloadType":"str","x":110,"y":265,"wires":[["84885c1.afc68a"]]},{"id":"c2047efe.bbf54","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":720,"y":244,"wires":[]},{"id":"6df55e35.988ef","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"group.play.export","name":"","x":532,"y":244,"wires":[["c2047efe.bbf54"]]},{"id":"a85e280f.b66018","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.queue.item","state":"Best of Prime","stateType":"str","name":"","x":504,"y":399,"wires":[["446e86a7.1f0e68"]]},{"id":"1974bdba.a5de32","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.stream.item","name":"","x":262,"y":897,"wires":[["94d5205c.f8562"]]},{"id":"6edae5c0.71764c","type":"polly","z":"25081f9e.f5f34","name":"","voice":"0","ssml":false,"dir":"overwritten","config":"8945d5a5.31aef8","x":352,"y":1595,"wires":[["eb21ac8e.1acb8"],[]]},{"id":"6117cc2e.1247f4","type":"inject","z":"25081f9e.f5f34","name":"weather","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","x":90,"y":1550,"wires":[["45df8523.17f7bc"]]},{"id":"cdcb0b84.3e80c8","type":"change","z":"25081f9e.f5f34","name":"prepare play notification","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('system_baseUrl') & '/notifications/' & topic","tot":"jsonata"},{"t":"set","p":"volume","pt":"msg","to":"70","tot":"num"},{"t":"set","p":"sameVolume","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":652,"y":1633,"wires":[["eea26486.5a84b8"]]},{"id":"61e8079b.0744c8","type":"fs-ops-copy","z":"25081f9e.f5f34","name":"","sourcePath":"","sourcePathType":"str","sourceFilename":"file","sourceFilenameType":"msg","destPath":"notification_cache","destPathType":"global","destFilename":"topic","destFilenameType":"msg","link":false,"overwrite":true,"x":596,"y":1591,"wires":[["cdcb0b84.3e80c8"]]},{"id":"eb21ac8e.1acb8","type":"switch","z":"25081f9e.f5f34","name":"","property":"_polly.cached","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":468,"y":1597,"wires":[["61e8079b.0744c8"],["cdcb0b84.3e80c8"]]},{"id":"56bc69b9.945378","type":"inject","z":"25081f9e.f5f34","name":"Caution","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"notification_caution.mp3","payload":"Caution Caution Caution","payloadType":"str","x":90,"y":1582,"wires":[["45df8523.17f7bc"]]},{"id":"d4d35cd2.c8bb1","type":"inject","z":"25081f9e.f5f34","name":"inform","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"notification_inform.mp3","payload":"Please mind your steps","payloadType":"str","x":90,"y":1615,"wires":[["45df8523.17f7bc"]]},{"id":"2e24502.17808b","type":"comment","z":"25081f9e.f5f34","name":"Trigger Examples","info":"","x":119,"y":1511,"wires":[]},{"id":"b8593edd.183ee","type":"comment","z":"25081f9e.f5f34","name":"Create/Update mp3 file, create uri and parameter","info":"","x":481,"y":1511,"wires":[]},{"id":"76f7d799.22ea88","type":"comment","z":"25081f9e.f5f34","name":"Serialize msgs and play notification","info":"","x":1030,"y":1510,"wires":[]},{"id":"f6cf8a70.cb3968","type":"inject","z":"25081f9e.f5f34","name":"Clear storage / cache","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":747,"y":1366,"wires":[["2822240b.ac4f1c","5b658e0c.99519"]]},{"id":"5b492bb7.8723c4","type":"link in","z":"25081f9e.f5f34","name":"execute play_notification","links":["eea26486.5a84b8"],"x":904,"y":1550,"wires":[["f6bd0928.fc79a8"]]},{"id":"eea26486.5a84b8","type":"link out","z":"25081f9e.f5f34","name":"Trigger play_notification","links":["5b492bb7.8723c4"],"x":752,"y":1550,"wires":[]},{"id":"268c8327.a8a12c","type":"inject","z":"25081f9e.f5f34","name":"set","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":90,"y":1400,"wires":[["27034749.03ae18","c9be9d0.3a5cc6","67e03099.89377"]]},{"id":"4f2df90e.b7c768","type":"comment","z":"25081f9e.f5f34","name":"TTS, notification","info":"","x":85,"y":1331,"wires":[]},{"id":"cc3ba74b.699798","type":"comment","z":"25081f9e.f5f34","name":"Set Up","info":"","x":91,"y":1366,"wires":[]},{"id":"27034749.03ae18","type":"change","z":"25081f9e.f5f34","name":"","rules":[{"t":"set","p":"system_baseUrl","pt":"global","to":"http://192.168.178.49:1880","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1367,"wires":[[]]},{"id":"c9be9d0.3a5cc6","type":"change","z":"25081f9e.f5f34","name":"","rules":[{"t":"set","p":"notification_directory","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":306,"y":1399,"wires":[[]]},{"id":"67e03099.89377","type":"change","z":"25081f9e.f5f34","name":"","rules":[{"t":"set","p":"notification_cache","pt":"global","to":"\\Users\\hekla\\AppData\\Local\\Temp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":296,"y":1431,"wires":[[]]},{"id":"a881a188.4c194","type":"change","z":"25081f9e.f5f34","name":"add cache","rules":[{"t":"set","p":"options.dir","pt":"msg","to":"notification_cache","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":605,"y":1549,"wires":[["6edae5c0.71764c"]]},{"id":"7c70a566.a6371c","type":"link in","z":"25081f9e.f5f34","name":"TTS Execute","links":["18152db0.dc8512","45df8523.17f7bc","26ac2b2.49d16d4"],"x":315,"y":1549,"wires":[["f8c778ee.a48958"]]},{"id":"45df8523.17f7bc","type":"link out","z":"25081f9e.f5f34","name":"TTS Trigger","links":["7c70a566.a6371c"],"x":207,"y":1549,"wires":[]},{"id":"5bf5d4c5.59daac","type":"comment","z":"25081f9e.f5f34","name":"Maintain","info":"","x":554,"y":1367,"wires":[]},{"id":"76bdded1.b8428","type":"fs-ops-delete","z":"25081f9e.f5f34","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1405,"wires":[[]]},{"id":"2822240b.ac4f1c","type":"fs-ops-dir","z":"25081f9e.f5f34","name":"","path":"notification_directory","pathType":"global","filter":"notification_*.*","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1405,"wires":[["76bdded1.b8428"]]},{"id":"5b658e0c.99519","type":"fs-ops-dir","z":"25081f9e.f5f34","name":"","path":"notification_cache","pathType":"global","filter":"*_*.mp3","filterType":"str","dir":"files","dirType":"msg","x":717,"y":1438,"wires":[["566e2c4a.fd11c4"]]},{"id":"566e2c4a.fd11c4","type":"fs-ops-delete","z":"25081f9e.f5f34","name":"","path":"notification_directory","pathType":"global","filename":"files","filenameType":"msg","x":867,"y":1438,"wires":[[]]},{"id":"a95bb148.f6cf8","type":"status","z":"25081f9e.f5f34","name":"","scope":["94a3f8d9.622f08"],"x":949,"y":1599,"wires":[["cb9f1269.8a42a"]]},{"id":"cb9f1269.8a42a","type":"change","z":"25081f9e.f5f34","name":"initiate next","rules":[{"t":"set","p":"releaseNext","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1101,"y":1599,"wires":[["f6bd0928.fc79a8"]]},{"id":"f6bd0928.fc79a8","type":"function","z":"25081f9e.f5f34","name":"queue","func":"// modified version - originally from https://gist.github.com/dceejay/cea8afa28b7a93ebdc0f \n\n// restartQueue = create new\nif (msg.hasOwnProperty(\"restartQueue\")) {\n    context.queue = []\n    \n// if queue doesn't exist, create it    \n} else {\n    context.queue = context.queue || []\n    context.busy = context.busy || false\n\n    // if the msg is a trigger one release next message\n    if (msg.hasOwnProperty(\"releaseNext\")) {\n        if (context.queue.length > 0) {\n            var m = context.queue.shift()\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return m \n        }\n        else {\n            context.busy = false;\n        }\n    }\n    else {\n        if (context.busy) {\n            // if busy add to queue\n            context.queue.push(msg);\n        }\n        else {\n        // otherwise we are empty so just pass through and set busy flag\n            context.busy = true;\n            node.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n            return msg;\n        }\n    }\n}\nnode.status({ fill: 'green', shape: 'dot', text: context.queue.length })\n\nreturn null;","outputs":1,"noerr":0,"x":1012,"y":1550,"wires":[["94a3f8d9.622f08"]]},{"id":"39107409.2bd34c","type":"http in","z":"25081f9e.f5f34","name":"","url":"/notifications/:mp3file","method":"get","upload":false,"swaggerDoc":"","x":150,"y":1746,"wires":[["8d123025.d983d"]]},{"id":"a6b140d2.92031","type":"comment","z":"25081f9e.f5f34","name":"serve mp3 file for SONOS player","info":"","x":170,"y":1709,"wires":[]},{"id":"8d123025.d983d","type":"change","z":"25081f9e.f5f34","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('notification_directory') & '/' & msg.req.params.mp3file","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":374,"y":1746,"wires":[["88023347.baaa5"]]},{"id":"88023347.baaa5","type":"file in","z":"25081f9e.f5f34","name":"","filename":"","format":"","chunk":false,"sendError":false,"encoding":"base64","x":534,"y":1746,"wires":[["90c7cb1e.f8b988"]]},{"id":"739ca8ed.a5b598","type":"catch","z":"25081f9e.f5f34","name":"","scope":["8d123025.d983d","88023347.baaa5","90c7cb1e.f8b988"],"uncaught":false,"x":549,"y":1794,"wires":[["a92f54ca.9b9918","e2120fb8.13076"]]},{"id":"c3be5270.7da9c","type":"http response","z":"25081f9e.f5f34","name":"","statusCode":"","headers":{},"x":829,"y":1745,"wires":[]},{"id":"c3d21ae8.1d9e98","type":"comment","z":"25081f9e.f5f34","name":"Test","info":"http://192.168.178.49:1880/notifications/notification_weather.mp3","x":386,"y":1710,"wires":[]},{"id":"e1f463c3.4e624","type":"inject","z":"25081f9e.f5f34","name":"Flush command queue","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1095,"y":1366,"wires":[["6e7df499.48bb2c"]]},{"id":"6e7df499.48bb2c","type":"change","z":"25081f9e.f5f34","name":"","rules":[{"t":"set","p":"restartQueue","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1107,"y":1403,"wires":[["f6bd0928.fc79a8"]]},{"id":"f8c778ee.a48958","type":"function","z":"25081f9e.f5f34","name":"check globals","func":"// checks existens of requried global variables\n//\nlet value = global.get('system_baseUrl')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - system_baseUrl not defined')\n    return null\n}\nvalue = global.get('notification_cache')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_cache not defined')\n    return null\n}\nvalue = global.get('notification_directory')\nif (!isTruthyAndNotEmptyString(value)) {\n    node.error('global - notification_directory not defined')\n    return null\n}\nreturn msg\n\nfunction isTruthyAndNotEmptyString (input) {\n    return !(typeof input === 'undefined' || input === null ||\n      (typeof input === 'number' && !Number.isFinite(input)) || input === '')\n}","outputs":1,"noerr":0,"x":432,"y":1549,"wires":[["a881a188.4c194"]]},{"id":"434999ac.a373d8","type":"comment","z":"25081f9e.f5f34","name":"Recommendation: Define globals as permanent","info":"This is done in the settings.js file. \nUncomment the contextStorage paragraph.\nThis will store all context variable on disk.","x":440,"y":1331,"wires":[]},{"id":"5cca9dcf.2b7814","type":"inject","z":"25081f9e.f5f34","name":"weather","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"notification_weather.mp3","payload":"We expect nice weather without any rain. Enjoy the day.","payloadType":"str","x":450,"y":1655,"wires":[["cdcb0b84.3e80c8"]]},{"id":"90c7cb1e.f8b988","type":"change","z":"25081f9e.f5f34","name":"set 200","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"200","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":664,"y":1746,"wires":[["c3be5270.7da9c"]]},{"id":"a92f54ca.9b9918","type":"change","z":"25081f9e.f5f34","name":"set 404","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"404","tot":"num"},{"t":"set","p":"payload","pt":"msg","to":"error","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":675,"y":1794,"wires":[["c3be5270.7da9c"]]},{"id":"e2120fb8.13076","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"true","targetType":"full","x":670,"y":1829,"wires":[]},{"id":"94a3f8d9.622f08","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.play.notification","name":"","x":1191,"y":1550,"wires":[["a29a63d7.3e64c"]]},{"id":"a29a63d7.3e64c","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1286,"y":1599,"wires":[]},{"id":"536e14cb.5bbbcc","type":"inject","z":"25081f9e.f5f34","name":"habit","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"notification_habit.mp3","payload":"Don't do unto others what you would not have done unto you. Don't do unto others what you would not have done unto you.","payloadType":"str","x":90,"y":1648,"wires":[["45df8523.17f7bc"]]},{"id":"a72c5aae.097e58","type":"comment","z":"25081f9e.f5f34","name":"Example 8: Snapshot with save queue","info":"","x":155,"y":976,"wires":[]},{"id":"47546566.e54dac","type":"inject","z":"25081f9e.f5f34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1011,"wires":[["a6faed33.59f02"]]},{"id":"a3913e88.2f518","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.create.snap","name":"","x":717,"y":1050,"wires":[["214d9ba2.b171d4"]]},{"id":"214d9ba2.b171d4","type":"change","z":"25081f9e.f5f34","name":"store in flow, stop","rules":[{"t":"set","p":"recentsnapshot","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":961,"y":1010,"wires":[["8793912b.c33de"]]},{"id":"864433c7.ce87b","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.save.queue","state":"queueBackup","stateType":"str","name":"","x":433,"y":1050,"wires":[["9c8b04f0.ffcfa8"]]},{"id":"7f4c7f7b.d858b","type":"inject","z":"25081f9e.f5f34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1111,"wires":[["2e987a06.948b86"]]},{"id":"2e987a06.948b86","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.clear.queue","name":"","x":160,"y":1151,"wires":[["53358155.282d6"]]},{"id":"8793912b.c33de","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.stop","name":"","x":951,"y":1050,"wires":[["94510914.f1a8f8"]]},{"id":"a6faed33.59f02","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"household.remove.sonosplaylist","state":"queueBackup","stateType":"str","name":"","x":190,"y":1050,"wires":[["864433c7.ce87b"]]},{"id":"94510914.f1a8f8","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1086,"y":1050,"wires":[]},{"id":"a3d58123.59236","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.clear.queue","name":"","x":290,"y":399,"wires":[["a85e280f.b66018"]]},{"id":"e98515bc.1987a8","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.get.trackplus","name":"","x":689,"y":71,"wires":[["def97151.686e9"]]},{"id":"45978a20.48df94","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.clear.queue","name":"","x":293,"y":606,"wires":[["6189d582.9e898c"]]},{"id":"5863ebe9.89e0b4","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.play.queue","name":"","x":715,"y":606,"wires":[["54c37fb8.f6b96"]]},{"id":"a6a04d77.01a48","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.play.tunein","state":"s24896","stateType":"str","name":"","x":433,"y":760,"wires":[["1c33a5c6.c4c47a"]]},{"id":"1c33a5c6.c4c47a","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.stop","name":"","x":617,"y":760,"wires":[[]]},{"id":"94d5205c.f8562","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"player.join.group","state":"Küche","stateType":"str","name":"","x":460,"y":897,"wires":[[]]},{"id":"54c37fb8.f6b96","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":744,"y":549,"wires":[]},{"id":"70f8c562.6cfc6c","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.properties","name":"","x":278,"y":499,"wires":[["51281a6b.ba3244"]]},{"id":"67a14287.ce336c","type":"inject","z":"25081f9e.f5f34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":499,"wires":[["70f8c562.6cfc6c"]]},{"id":"c3c2037.bf1ca","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.play.avtransport","name":"","x":783,"y":494,"wires":[[]]},{"id":"d85e139d.6ee3c","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.set.mutestate","state":"on","stateType":"str","name":"","x":320,"y":711,"wires":[[]]},{"id":"e3fb4a2f.088628","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.set.mutestate","state":"Off","stateType":"str","name":"","x":622,"y":810,"wires":[[]]},{"id":"9c8b04f0.ffcfa8","type":"change","z":"25081f9e.f5f34","name":"store volumes, mute sate","rules":[{"t":"set","p":"snapVolumes","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"snapMutestates","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1009,"wires":[["a3913e88.2f518"]]},{"id":"2c292e27.39eec2","type":"sonos-universal","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.play.snap","state":"","stateType":"str","name":"","x":680,"y":1150,"wires":[["dd8d92da.82331"]]},{"id":"dd8d92da.82331","type":"debug","z":"25081f9e.f5f34","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":830,"y":1150,"wires":[]},{"id":"8fe992bb.65ec4","type":"sonos-universal","z":"99e6906e.c69df","confignode":"32a98882.56e1c8","compatibilityMode":true,"command":"message","name":"Bad","x":1226,"y":516,"wires":[["1f223625.3cf2ca"]]},{"id":"70279836.3eb8e8","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"on","payloadType":"str","x":90,"y":615,"wires":[["666dfda6.c1f144"]]},{"id":"923a2bc5.e495c8","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":679,"wires":[["7e6b8e4d.c843"]]},{"id":"b80b26b4.75bda8","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":173,"wires":[["3ea508db.576908"]]},{"id":"50a16ef5.d04bf","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"off","payloadType":"str","x":90,"y":647,"wires":[["666dfda6.c1f144"]]},{"id":"6ebdc30c.c1404c","type":"comment","z":"fcb24b59.997048","name":"UNIVERSAL: Group based & SONOS player name ","info":"","x":195,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"18c1f89e.008f67","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":266,"wires":[["e7d53079.e19e"]]},{"id":"a335ebab.d262c8","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"on","payloadType":"str","x":90,"y":551,"wires":[["8baacb27.cdbed8"]]},{"id":"314e559a.0ce07a","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"off","payloadType":"str","x":90,"y":583,"wires":[["8baacb27.cdbed8"]]},{"id":"ad43267e.c45fc8","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"-3","payloadType":"str","x":90,"y":519,"wires":[["509b2f4b.63869"]]},{"id":"477c2db7.9aa4c4","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"3","payloadType":"str","x":90,"y":487,"wires":[["509b2f4b.63869"]]},{"id":"89672385.e2d9","type":"comment","z":"fcb24b59.997048","name":"Group related - without prefix group.","info":"","x":180,"y":55,"wires":[],"icon":"node-red/alert.svg"},{"id":"91e1b828.c5c388","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":777,"wires":[["1a42c12.153eb3f"]]},{"id":"6733e100.03ba8","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":721,"wires":[["7b6a2369.645f6c"]]},{"id":"1fd013d2.e490cc","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1238,"wires":[["f8f5397c.9fc5c8"]]},{"id":"d4a540c7.a1c3c","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2","payloadType":"str","x":89,"y":1469,"wires":[["1c01ab2d.2b9625"]]},{"id":"bdd441f4.2d4c4","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"normal","payloadType":"str","x":90,"y":1303,"wires":[["55f515e0.9b980c"]]},{"id":"a8467182.c641d","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"shuffle","payloadType":"str","x":90,"y":1271,"wires":[["55f515e0.9b980c"]]},{"id":"25318462.224c5c","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"on","payloadType":"str","x":515,"y":589,"wires":[["27eb4b72.fdc4a4"]]},{"id":"3d536d61.0c68f2","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"off","payloadType":"str","x":515,"y":621,"wires":[["27eb4b72.fdc4a4"]]},{"id":"d5ff679b.6505d8","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2","payloadType":"str","x":90,"y":1436,"wires":[["91b068f2.a67c68"]]},{"id":"91b068f2.a67c68","type":"change","z":"fcb24b59.997048","name":"5 tracks","rules":[{"t":"set","p":"numberOfTracks","pt":"msg","to":"5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":221,"y":1450,"wires":[["1c01ab2d.2b9625"]]},{"id":"462c6e05.805a6","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"on","payloadType":"str","x":515,"y":229,"wires":[["693a30c2.de8ec"]]},{"id":"e5b27df7.06fcb","type":"inject","z":"fcb24b59.997048","name":"b5","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payloadType":"str","x":951,"y":1404,"wires":[["3d9d9f6e.32d34"]]},{"id":"dc9b3a5d.e8acf8","type":"inject","z":"fcb24b59.997048","name":"fritz","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://www.fritz.de/live.m3u","payloadType":"str","x":951,"y":1437,"wires":[["3d9d9f6e.32d34"]]},{"id":"cda28de9.4a0b3","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","x":90,"y":1702,"wires":[["51d49a82.887694"]]},{"id":"51d49a82.887694","type":"change","z":"fcb24b59.997048","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":1702,"wires":[["efdd2e17.e1fbd"]]},{"id":"d8a8e889.e4baa8","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"10","payloadType":"str","x":515,"y":133,"wires":[["abda8f3.860287"]]},{"id":"614ddfd1.0284c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"household.create.stereopair","state":"Bad","stateType":"str","name":"","x":338,"y":777,"wires":[["ca7a828f.03a9a"]]},{"id":"9ed33604.0215c8","type":"comment","z":"fcb24b59.997048","name":"TuneIn","info":"","x":531,"y":1162,"wires":[],"icon":"node-red/alert.svg"},{"id":"ca286753.49c978","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","x":90,"y":1748,"wires":[["659dbc63.67f134"]]},{"id":"659dbc63.67f134","type":"change","z":"fcb24b59.997048","name":"with volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"70","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":1748,"wires":[["45bb3557.49866c"]]},{"id":"987af870.066e38","type":"change","z":"fcb24b59.997048","name":"volume / Bad","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":90,"wires":[["95c16934.817688"]]},{"id":"fd346001.a9815","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1193,"wires":[["603bf096.7b10b"]]},{"id":"7db7aaf1.98c324","type":"comment","z":"fcb24b59.997048","name":"queue","info":"","x":90,"y":1160,"wires":[],"icon":"node-red/alert.svg"},{"id":"934b482e.555ef8","type":"comment","z":"fcb24b59.997048","name":"Notification","info":"","x":100,"y":1670,"wires":[],"icon":"node-red/alert.svg"},{"id":"45bb3557.49866c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"joiner.play.notification","name":"","x":419,"y":1748,"wires":[["9c70dfd0.bab1f"]]},{"id":"31e041ce.eecf6e","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":232,"wires":[]},{"id":"9c70dfd0.bab1f","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":670,"y":1447,"wires":[]},{"id":"5368a9fe.9d5968","type":"comment","z":"fcb24b59.997048","name":"Http Radio stream","info":"","x":991,"y":1371,"wires":[],"icon":"node-red/alert.svg"},{"id":"d80b793a.c84c38","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"on","payloadType":"str","x":515,"y":165,"wires":[["5f863684.7d8368"]]},{"id":"3300a3fb.3dc80c","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"off","payloadType":"str","x":515,"y":197,"wires":[["5f863684.7d8368"]]},{"id":"823ded25.31aeb","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":525,"y":88,"wires":[["9c2f29d0.60a0d8"]]},{"id":"75e67db3.22e244","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1404,"wires":[["4ea01c39.6d2854"]]},{"id":"681fa2a0.83a75c","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1359,"wires":[["2f53d9b2.e67ad6"]]},{"id":"623ade64.f5611","type":"comment","z":"fcb24b59.997048","name":"Get / Test","info":"","x":1055,"y":27,"wires":[],"icon":"node-red/alert.svg"},{"id":"9b41bb49.d3ed28","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":960,"y":1324,"wires":[["9e401d19.db846"]]},{"id":"fee971ca.32135","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"off","payloadType":"str","x":515,"y":261,"wires":[["693a30c2.de8ec"]]},{"id":"6d12f6b4.b6d208","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"on","payloadType":"str","x":515,"y":295,"wires":[["266fc7a4.7e1978"]]},{"id":"8f40cb14.2d3598","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"off","payloadType":"str","x":515,"y":327,"wires":[["266fc7a4.7e1978"]]},{"id":"70a0b726.755658","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"on","payloadType":"str","x":515,"y":359,"wires":[["4b92105.09d26f"]]},{"id":"72f8a31a.be48dc","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"off","payloadType":"str","x":515,"y":391,"wires":[["4b92105.09d26f"]]},{"id":"fc2e99fc.f0eb48","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":525,"y":423,"wires":[["97862156.f61cc"]]},{"id":"8caeee05.64787","type":"comment","z":"fcb24b59.997048","name":"Player related","info":"","x":535,"y":56,"wires":[],"icon":"node-red/alert.svg"},{"id":"72b9bcc7.b4a994","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"s24896","payloadType":"str","x":531,"y":1195,"wires":[["f033e838.6a1a98"]]},{"id":"7b96e529.dbf47c","type":"comment","z":"fcb24b59.997048","name":"sonos playlist","info":"","x":970,"y":1291,"wires":[],"icon":"node-red/alert.svg"},{"id":"1a42c12.153eb3f","type":"change","z":"fcb24b59.997048","name":"right player","rules":[{"t":"set","p":"playerNameRight","pt":"msg","to":"variable","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":206,"y":824,"wires":[["614ddfd1.0284c"]]},{"id":"e1f18d37.a5009","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":964,"y":1241,"wires":[["19ce25f4.1e1b5a"]]},{"id":"19ce25f4.1e1b5a","type":"change","z":"fcb24b59.997048","name":"volume","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1105,"y":1241,"wires":[["11575ece.7d3eb1"]]},{"id":"4303e3be.2f40ac","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":961,"y":1196,"wires":[["11575ece.7d3eb1"]]},{"id":"6a56315a.d7e13","type":"comment","z":"fcb24b59.997048","name":"Line In","info":"","x":951,"y":1163,"wires":[],"icon":"node-red/alert.svg"},{"id":"3d6b30af.53794","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":573,"y":675,"wires":[["1f400216.b288ee"]]},{"id":"a392e371.bda3d","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":575,"y":721,"wires":[["c8ee133d.8ca85"]]},{"id":"27eb4b72.fdc4a4","type":"sonos-universal","z":"fcb24b59.997048","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"player.set.led","name":"","x":672,"y":609,"wires":[["2f85bc57.519a94"]]},{"id":"b286426e.4cca7","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":866,"wires":[["1b2f151d.697e1b"]]},{"id":"1b2f151d.697e1b","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.create.snap","name":"","x":160,"y":910,"wires":[["2eb1b70f.02b798"]]},{"id":"2eb1b70f.02b798","type":"change","z":"fcb24b59.997048","name":"save snap","rules":[{"t":"set","p":"snapbackup","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":950,"wires":[["fcc85992.b0fa28"]]},{"id":"fcc85992.b0fa28","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.tunein","state":"s24896","stateType":"str","name":"","x":230,"y":990,"wires":[["9dbffe9f.ef32"]]},{"id":"9dbffe9f.ef32","type":"delay","z":"fcb24b59.997048","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":360,"y":870,"wires":[["52e9d467.e99e0c"]]},{"id":"52e9d467.e99e0c","type":"change","z":"fcb24b59.997048","name":"restore snap","rules":[{"t":"set","p":"payload","pt":"msg","to":"snapbackup","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":910,"wires":[["b40b9cf7.0797c"]]},{"id":"b40b9cf7.0797c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.snap","state":"","stateType":"str","name":"","x":440,"y":950,"wires":[["ca7a828f.03a9a"]]},{"id":"4426373d.a44838","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"household.get.groups","name":"","x":1094,"y":103,"wires":[["3297fb94.ce7334"]]},{"id":"db603a5e.d99898","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"household.test.player","state":"Küche","stateType":"str","name":"","x":1094,"y":59,"wires":[["3297fb94.ce7334"]]},{"id":"d416816a.6f37","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":900,"y":300,"wires":[["4426373d.a44838","9b2d5e17.80ad3","ffca6c4c.bdfd2","10e906e9.0b24e9","a273d49a.ff1f78","3620fb0a.3ebf34","42b9bd7b.ced104","d8136e98.a802e","2b1ddc1.3c74a24","f1fcb1b6.c13be"]]},{"id":"9b2d5e17.80ad3","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.get.state","state":"","stateType":"str","name":"","x":1078,"y":188,"wires":[["3297fb94.ce7334"]]},{"id":"ffca6c4c.bdfd2","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.get.volume","name":"","x":1084,"y":236,"wires":[["3297fb94.ce7334"]]},{"id":"10e906e9.0b24e9","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.get.mutestate","name":"","x":1094,"y":320,"wires":[["3297fb94.ce7334"]]},{"id":"a273d49a.ff1f78","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.get.crossfade","name":"","x":1094,"y":364,"wires":[["3297fb94.ce7334"]]},{"id":"3620fb0a.3ebf34","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.get.sleeptimer","name":"","x":1094,"y":408,"wires":[["3297fb94.ce7334"]]},{"id":"d8136e98.a802e","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.get.trackplus","name":"","x":1084,"y":452,"wires":[["d0c8fe54.43fc6"]]},{"id":"3297fb94.ce7334","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1322,"y":267,"wires":[]},{"id":"c80e6ceb.8e10b","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":904,"y":59,"wires":[["db603a5e.d99898"]]},{"id":"42b9bd7b.ced104","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.get.playbackstate","name":"","x":1104,"y":147,"wires":[["3297fb94.ce7334"]]},{"id":"2b1ddc1.3c74a24","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.get.queue","name":"","x":1074,"y":496,"wires":[["3297fb94.ce7334"]]},{"id":"ba41c940.360cf8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.mutestate","name":"","x":1094,"y":583,"wires":[["d0c8fe54.43fc6"]]},{"id":"d0d46ea0.bbf6f","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.properties","state":"","stateType":"str","name":"","x":1094,"y":627,"wires":[["d0c8fe54.43fc6"]]},{"id":"a993e586.635ad8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"player.get.led","state":"","stateType":"str","name":"","x":1074,"y":671,"wires":[["d0c8fe54.43fc6"]]},{"id":"79203201.55eb1c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.loudness","name":"","x":1085,"y":715,"wires":[["d0c8fe54.43fc6"]]},{"id":"5eaa7b1c.d4df34","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.dialoglevel","name":"","x":1094,"y":759,"wires":[["d0c8fe54.43fc6"]]},{"id":"87506742.2d2aa8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.volume","name":"","x":1084,"y":540,"wires":[["d0c8fe54.43fc6"]]},{"id":"c94460d6.02c3b","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":880,"y":800,"wires":[["87506742.2d2aa8","ba41c940.360cf8","d0d46ea0.bbf6f","a993e586.635ad8","79203201.55eb1c","5eaa7b1c.d4df34","4cd20618.a65588","427c3521.73391c","9ef480af.e3003","60d2cb79.534e74"]]},{"id":"d0c8fe54.43fc6","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1322,"y":467,"wires":[]},{"id":"4cd20618.a65588","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.nightmode","name":"","x":1094,"y":803,"wires":[["d0c8fe54.43fc6"]]},{"id":"9ef480af.e3003","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.role","name":"","x":1074,"y":893,"wires":[["d0c8fe54.43fc6"]]},{"id":"427c3521.73391c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.subgain","name":"","x":1084,"y":848,"wires":[["d0c8fe54.43fc6"]]},{"id":"60d2cb79.534e74","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.queue","name":"","x":1084,"y":939,"wires":[["d0c8fe54.43fc6"]]},{"id":"693a30c2.de8ec","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.set.loudness","name":"","x":691,"y":245,"wires":[["31e041ce.eecf6e"]]},{"id":"266fc7a4.7e1978","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.set.nightmode","name":"","x":701,"y":309,"wires":[["31e041ce.eecf6e"]]},{"id":"4b92105.09d26f","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.set.dialoglevel","state":"","stateType":"str","name":"","x":701,"y":373,"wires":[["31e041ce.eecf6e"]]},{"id":"97862156.f61cc","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.set.subgain","state":"11","stateType":"str","name":"","x":691,"y":423,"wires":[["31e041ce.eecf6e"]]},{"id":"9c2f29d0.60a0d8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.adjust.volume","state":"-3","stateType":"str","name":"","x":702,"y":88,"wires":[["31e041ce.eecf6e"]]},{"id":"abda8f3.860287","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.set.volume","name":"","x":691,"y":133,"wires":[["31e041ce.eecf6e"]]},{"id":"8bdc8068.a5371","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.previous.track","name":"","x":278,"y":455,"wires":[["ca7a828f.03a9a"]]},{"id":"3ea508db.576908","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.seek","state":"00:01:00","stateType":"str","name":"","x":247,"y":173,"wires":[["ca7a828f.03a9a"]]},{"id":"666dfda6.c1f144","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.set.crossfade","name":"","x":268,"y":627,"wires":[["ca7a828f.03a9a"]]},{"id":"7e6b8e4d.c843","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.set.sleeptimer","state":"00:05:00","stateType":"str","name":"","x":278,"y":679,"wires":[["ca7a828f.03a9a"]]},{"id":"8baacb27.cdbed8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.set.mutestate","name":"","x":278,"y":561,"wires":[["ca7a828f.03a9a"]]},{"id":"509b2f4b.63869","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.adjust.volume","name":"","x":278,"y":501,"wires":[["ca7a828f.03a9a"]]},{"id":"e7d53079.e19e","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.toggle.playback","name":"","x":278,"y":266,"wires":[["ca7a828f.03a9a"]]},{"id":"ca7a828f.03a9a","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":570,"y":795,"wires":[]},{"id":"96cb4dcf.974e7","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.pause","name":"","x":248,"y":312,"wires":[["ca7a828f.03a9a"]]},{"id":"9cf34a60.a8b8d8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.stop","name":"","x":248,"y":360,"wires":[["ca7a828f.03a9a"]]},{"id":"8350bd8b.7746","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":312,"wires":[["96cb4dcf.974e7"]]},{"id":"ba8dad2f.b3a4d","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":360,"wires":[["9cf34a60.a8b8d8"]]},{"id":"599f2db5.ba5834","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":455,"wires":[["8bdc8068.a5371"]]},{"id":"1d22ec4d.13eeb4","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.next.track","name":"","x":258,"y":409,"wires":[["ca7a828f.03a9a"]]},{"id":"7c0bf831.2ca458","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":409,"wires":[["1d22ec4d.13eeb4"]]},{"id":"95c16934.817688","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play","name":"","x":248,"y":127,"wires":[["ca7a828f.03a9a"]]},{"id":"3b863ed1.345942","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":127,"wires":[["95c16934.817688"]]},{"id":"ca5fe2dd.6d6d","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":90,"wires":[["987af870.066e38"]]},{"id":"7b6a2369.645f6c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"household.separate.stereopair","state":"Bad","stateType":"str","name":"","x":308,"y":721,"wires":[["ca7a828f.03a9a"]]},{"id":"c8ee133d.8ca85","type":"sonos-universal","z":"fcb24b59.997048","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"player.leave.group","name":"","x":755,"y":721,"wires":[[]]},{"id":"1f400216.b288ee","type":"sonos-universal","z":"fcb24b59.997048","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"player.join.group","state":"Küche","stateType":"str","name":"","x":745,"y":675,"wires":[[]]},{"id":"11575ece.7d3eb1","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.play.avtransport","state":"x-sonos-htastream:RINCON_949F3EC13B9901400:spdif","stateType":"str","name":"","x":1158,"y":1196,"wires":[[]]},{"id":"f033e838.6a1a98","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.tunein","name":"","x":690,"y":1195,"wires":[["ac27fd2b.cb6cf"]]},{"id":"3d9d9f6e.32d34","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.streamhttp","name":"","x":1151,"y":1421,"wires":[[]]},{"id":"9e401d19.db846","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"household.remove.sonosplaylist","state":"queuebackupSave","stateType":"str","name":"","x":1170,"y":1324,"wires":[[]]},{"id":"1c01ab2d.2b9625","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.remove.tracks","name":"","x":393,"y":1470,"wires":[["9c70dfd0.bab1f"]]},{"id":"4ea01c39.6d2854","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.clear.queue","name":"","x":272,"y":1404,"wires":[["9c70dfd0.bab1f"]]},{"id":"2f53d9b2.e67ad6","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.save.queue","state":"queuebackupSave","stateType":"str","name":"","x":270,"y":1359,"wires":[["ac27fd2b.cb6cf"]]},{"id":"55f515e0.9b980c","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.set.queuemode","name":"","x":281,"y":1286,"wires":[["ac27fd2b.cb6cf"]]},{"id":"f8f5397c.9fc5c8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.track","state":"2","stateType":"num","name":"","x":260,"y":1238,"wires":[["ac27fd2b.cb6cf"]]},{"id":"603bf096.7b10b","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.queue","name":"","x":270,"y":1193,"wires":[["ac27fd2b.cb6cf"]]},{"id":"ac27fd2b.cb6cf","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":570,"y":1287,"wires":[]},{"id":"efdd2e17.e1fbd","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.notification","name":"","x":420,"y":1702,"wires":[["9c70dfd0.bab1f"]]},{"id":"cf75f94c.642528","type":"change","z":"405b0e15.987b5","name":"empty","rules":[{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":711,"y":89,"wires":[["40a60a57.8c31e4"]]},{"id":"4d248c22.4d5e84","type":"change","z":"405b0e15.987b5","name":"xxxxx","rules":[{"t":"set","p":"topic","pt":"msg","to":"string xxxxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":711,"y":249,"wires":[["40a60a57.8c31e4"]]},{"id":"f84c053b.92d1d8","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1230,"y":2188,"wires":[]},{"id":"e31ec83a.558e58","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.clear.queue","name":"","x":270,"y":2099,"wires":[["bd69f167.291ad"]]},{"id":"9de8cf4.a2dcb3","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.next.track","name":"","x":271,"y":2361,"wires":[["9d03522b.25c0d"]]},{"id":"3b5f40e0.59262","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.previous.track","name":"","x":280,"y":2394,"wires":[["9d03522b.25c0d"]]},{"id":"23d81fd7.cf067","type":"comment","z":"405b0e15.987b5","name":"player set volume - has to be tested as different","info":"","x":769,"y":2328,"wires":[]},{"id":"ca35c50f.6a6a58","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1030,"y":2368,"wires":[]},{"id":"aee750ac.a4f01","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"s24896","payloadType":"str","x":90,"y":4173,"wires":[["b0c9da96.fec0b8"]]},{"id":"b51f417e.a5935","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"s24896","payloadType":"str","x":90,"y":4205,"wires":[["e394c644.9a6a78"]]},{"id":"1a9dc603.b1163a","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"s24896","payloadType":"str","x":90,"y":4237,"wires":[["77ac95f8.95f24c"]]},{"id":"5fd485e1.4cd62c","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"s24896","payloadType":"str","x":90,"y":4276,"wires":[["62df47f3.957b58"]]},{"id":"3abceb00.b05a66","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"s24896","payloadType":"str","x":90,"y":4308,"wires":[["335dc449.e3916c"]]},{"id":"da22f77e.bb32b8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"s24896","payloadType":"str","x":90,"y":4340,"wires":[["181a89ad.6460c6"]]},{"id":"c9da2c52.bea92","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"s24896","payloadType":"str","x":89,"y":4372,"wires":[["67b2a46d.59410c"]]},{"id":"a3d04378.9d5b2","type":"inject","z":"405b0e15.987b5","name":"ZAPSPLAT","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"https://www.zapsplat.com/wp-content/uploads/2015/sound-effects-the-sound-pack-tree/tspt_pull_bell_02_065.mp3?_=1","payloadType":"str","x":570,"y":4478,"wires":[["3fbf466d.b527ea"]]},{"id":"89d0ae31.655fb","type":"inject","z":"405b0e15.987b5","name":"soundbible dog","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/labrador-barking-daniel_simon.mp3","payloadType":"str","x":580,"y":4510,"wires":[["3fbf466d.b527ea"]]},{"id":"690b7a86.adfa54","type":"inject","z":"405b0e15.987b5","name":"Bell","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/bells-tibetan-daniel_simon.mp3","payloadType":"str","x":550,"y":4542,"wires":[["3fbf466d.b527ea"]]},{"id":"6ac16114.caca4","type":"inject","z":"405b0e15.987b5","name":"alarm","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/Fire%20Truck%20Siren-SoundBible.com-642727443.mp3","payloadType":"str","x":550,"y":4574,"wires":[["3fbf466d.b527ea"]]},{"id":"b4caa12.021446","type":"inject","z":"405b0e15.987b5","name":"fog horn","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","x":560,"y":4606,"wires":[["3fbf466d.b527ea"]]},{"id":"d635eb6f.99eb68","type":"inject","z":"405b0e15.987b5","name":"fog horn","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://soundbible.com/mp3/foghorn-daniel_simon.mp3","payloadType":"str","x":561,"y":4638,"wires":[["565335ac.1ab00c"]]},{"id":"53358155.282d6","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.queue.item","state":"queueBackup","stateType":"str","name":"","x":378,"y":1151,"wires":[["ec6a899a.01f038"]]},{"id":"1882ca66.1d4dc6","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"library.queue.playlist","name":"","x":1110,"y":1832,"wires":[["2b4a5f14.a660b"]]},{"id":"5da455a9.43684c","type":"sonos-manage-mysonos","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"library.get.playlists","name":"","x":1042,"y":1779,"wires":[["2b4a5f14.a660b"]]},{"id":"2b4a5f14.a660b","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1273,"y":1779,"wires":[]},{"id":"8fc09ace.fd4778","type":"comment","z":"99e6906e.c69df","name":"Music Library - direct","info":"","x":890,"y":1740,"wires":[],"icon":"node-red/alert.svg"},{"id":"62a47ff.23b4d8","type":"sonos-manage-mysonos","z":"4318847d.0693cc","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"library.queue.playlist","name":"","x":637,"y":590,"wires":[["b1f4e729.e2d8f8"]]},{"id":"625148f2.018378","type":"change","z":"4318847d.0693cc","name":"insert playlist","rules":[{"t":"set","p":"topic","pt":"msg","to":"MLAdele","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":434,"y":590,"wires":[["62a47ff.23b4d8"]]},{"id":"6189d582.9e898c","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.queue.item","state":"MLAdele","stateType":"str","name":"","x":507,"y":606,"wires":[["5863ebe9.89e0b4"]]},{"id":"fd16f39a.87dd4","type":"change","z":"405b0e15.987b5","name":"using msg.size 2","rules":[{"t":"set","p":"size","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":275,"y":5355,"wires":[["c9da015.eb9d5"]]},{"id":"74d69932.8b1c08","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"ML10CC","payloadType":"str","x":101,"y":5355,"wires":[["fd16f39a.87dd4"]]},{"id":"5faaebad.75e104","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":690,"y":5446,"wires":[]},{"id":"c3c24bd1.b89778","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"ML10CC","payloadType":"str","x":100,"y":5388,"wires":[["2e7ccdbf.a8f972"]]},{"id":"2e7ccdbf.a8f972","type":"change","z":"405b0e15.987b5","name":"using msg.size 3","rules":[{"t":"set","p":"size","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":274,"y":5388,"wires":[["c9da015.eb9d5"]]},{"id":"63659b25.d977c4","type":"change","z":"405b0e15.987b5","name":"using msg.size 10","rules":[{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":275,"y":5421,"wires":[["c9da015.eb9d5"]]},{"id":"c22a151e.a4a008","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"ML10CC","payloadType":"str","x":101,"y":5421,"wires":[["63659b25.d977c4"]]},{"id":"f02d7ca2.d5169","type":"change","z":"405b0e15.987b5","name":"using msg.size 2","rules":[{"t":"set","p":"size","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":249,"y":5465,"wires":[["9133602e.3a9e6"]]},{"id":"543a38cd.265658","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"trigger","payloadType":"str","x":90,"y":5465,"wires":[["f02d7ca2.d5169"]]},{"id":"3749a727.8618f8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"trigger","payloadType":"str","x":89,"y":5498,"wires":[["6ad93413.ea5b5c"]]},{"id":"6ad93413.ea5b5c","type":"change","z":"405b0e15.987b5","name":"using msg.size 3","rules":[{"t":"set","p":"size","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":248,"y":5498,"wires":[["9133602e.3a9e6"]]},{"id":"82b0c9be.be37e8","type":"change","z":"405b0e15.987b5","name":"using msg.size 10","rules":[{"t":"set","p":"size","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":249,"y":5531,"wires":[["9133602e.3a9e6"]]},{"id":"8afe90c5.a3346","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"trigger","payloadType":"str","x":90,"y":5531,"wires":[["82b0c9be.be37e8"]]},{"id":"f612fdfc.c32e","type":"comment","z":"405b0e15.987b5","name":"Results","info":"There are 3 playlists. \nSo with size 2,3 there should be a Warning","x":630,"y":5355,"wires":[]},{"id":"9133602e.3a9e6","type":"sonos-manage-mysonos","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"library.get.playlists","name":"","x":500,"y":5495,"wires":[["5faaebad.75e104"]]},{"id":"c9da015.eb9d5","type":"sonos-manage-mysonos","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"library.get.playlists","name":"","x":500,"y":5395,"wires":[["5faaebad.75e104"]]},{"id":"646e0108.1b386","type":"comment","z":"55805384.a4695c","name":"creat a list of uris","info":"","x":81,"y":127,"wires":[]},{"id":"18309acc.d2ab55","type":"comment","z":"775d7a2a.44f234","name":"failure","info":"","x":55,"y":20,"wires":[],"icon":"node-red/alert.svg"},{"id":"898b2d36.3a33f","type":"inject","z":"775d7a2a.44f234","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"xxxxx","payloadType":"str","x":90,"y":130,"wires":[["434ea457.3f86cc"]]},{"id":"434ea457.3f86cc","type":"sonos-manage-mysonos","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.queue.item","name":"","x":400,"y":186,"wires":[["c853cf30.0358"]]},{"id":"c853cf30.0358","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":146,"wires":[]},{"id":"4dd90629.c3fab8","type":"inject","z":"775d7a2a.44f234","name":"null string","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":100,"y":162,"wires":[["434ea457.3f86cc"]]},{"id":"14ce85fa.40d85a","type":"inject","z":"775d7a2a.44f234","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":90,"y":194,"wires":[["434ea457.3f86cc"]]},{"id":"d2a04016.753cb","type":"inject","z":"775d7a2a.44f234","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"6666","payloadType":"num","x":90,"y":226,"wires":[["434ea457.3f86cc"]]},{"id":"94e62ce8.e26e3","type":"inject","z":"775d7a2a.44f234","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"x\":2}","payloadType":"json","x":90,"y":258,"wires":[["434ea457.3f86cc"]]},{"id":"838e540c.98ae28","type":"change","z":"775d7a2a.44f234","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":269,"y":97,"wires":[["434ea457.3f86cc"]]},{"id":"92f03051.928f4","type":"inject","z":"775d7a2a.44f234","name":"no payload","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"num","x":99,"y":97,"wires":[["838e540c.98ae28"]]},{"id":"f67425cb.13d608","type":"comment","z":"775d7a2a.44f234","name":"test payload - must be string","info":"","x":160,"y":65,"wires":[],"icon":"node-red/alert.svg"},{"id":"2cc6e13.f3aa81e","type":"sonos-manage-mysonos","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"library.get.playlists","name":"","x":495,"y":446,"wires":[["df39839d.7bd19"]]},{"id":"df39839d.7bd19","type":"debug","z":"775d7a2a.44f234","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":790,"y":446,"wires":[]},{"id":"75396536.8d7a7c","type":"comment","z":"775d7a2a.44f234","name":"test size - must be number","info":"","x":150,"y":321,"wires":[],"icon":"node-red/alert.svg"},{"id":"c5196a11.780a78","type":"inject","z":"775d7a2a.44f234","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":354,"wires":[["fc7cfe22.8305c"]]},{"id":"fc7cfe22.8305c","type":"change","z":"775d7a2a.44f234","name":"boolean","rules":[{"t":"set","p":"size","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":354,"wires":[["2cc6e13.f3aa81e"]]},{"id":"2577c93e.cdd2c6","type":"change","z":"775d7a2a.44f234","name":"string -2","rules":[{"t":"set","p":"size","pt":"msg","to":"-2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":386,"wires":[["2cc6e13.f3aa81e"]]},{"id":"72c8a049.8b005","type":"inject","z":"775d7a2a.44f234","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":386,"wires":[["2577c93e.cdd2c6"]]},{"id":"bee47222.5f31","type":"inject","z":"775d7a2a.44f234","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":418,"wires":[["6ff9875b.19e398"]]},{"id":"6ff9875b.19e398","type":"change","z":"775d7a2a.44f234","name":"string 0","rules":[{"t":"set","p":"size","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":418,"wires":[["2cc6e13.f3aa81e"]]},{"id":"76aed44b.3d9e8c","type":"inject","z":"775d7a2a.44f234","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":450,"wires":[["c1543595.996988"]]},{"id":"c1543595.996988","type":"change","z":"775d7a2a.44f234","name":"0","rules":[{"t":"set","p":"size","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":450,"wires":[["2cc6e13.f3aa81e"]]},{"id":"d51156ac.19e5b8","type":"inject","z":"775d7a2a.44f234","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":482,"wires":[["9b8e4cbd.90004"]]},{"id":"9b8e4cbd.90004","type":"change","z":"775d7a2a.44f234","name":"-2","rules":[{"t":"set","p":"size","pt":"msg","to":"-2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":482,"wires":[["2cc6e13.f3aa81e"]]},{"id":"c5936a6c.4fb398","type":"change","z":"775d7a2a.44f234","name":"5.3","rules":[{"t":"set","p":"size","pt":"msg","to":"5.3","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":514,"wires":[["2cc6e13.f3aa81e"]]},{"id":"611252e8.3d8c8c","type":"inject","z":"775d7a2a.44f234","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":514,"wires":[["c5936a6c.4fb398"]]},{"id":"13d8d02d.43ee7","type":"comment","z":"775d7a2a.44f234","name":"test no Music Library items","info":"","x":485,"y":332,"wires":[],"icon":"node-red/alert.svg"},{"id":"6d1cd96f.e71618","type":"inject","z":"775d7a2a.44f234","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"anything","payloadType":"str","x":435,"y":366,"wires":[["2cc6e13.f3aa81e","cbbf990d.8d9298"]]},{"id":"cbbf990d.8d9298","type":"sonos-manage-mysonos","z":"775d7a2a.44f234","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"library.queue.playlist","name":"","x":740,"y":366,"wires":[["df39839d.7bd19"]]},{"id":"615e7200.87409","type":"change","z":"405b0e15.987b5","name":"boolean","rules":[{"t":"set","p":"topic","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":721,"y":121,"wires":[["40a60a57.8c31e4"]]},{"id":"1f0321b0.34444e","type":"change","z":"405b0e15.987b5","name":"number 5","rules":[{"t":"set","p":"topic","pt":"msg","to":"5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":721,"y":153,"wires":[["40a60a57.8c31e4"]]},{"id":"9dae9513.6326e8","type":"change","z":"405b0e15.987b5","name":"string","rules":[{"t":"set","p":"clearQueue","pt":"msg","to":"xxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":1216,"wires":[["ec89cc15.4290d"]]},{"id":"d2520170.a9606","type":"change","z":"405b0e15.987b5","name":"JSON","rules":[{"t":"set","p":"clearQueue","pt":"msg","to":"{\"x\":2}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":1248,"wires":[["ec89cc15.4290d"]]},{"id":"42a9ea1b.680974","type":"change","z":"405b0e15.987b5","name":"timestamp","rules":[{"t":"set","p":"clearQueue","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":1070,"y":1280,"wires":[["ec89cc15.4290d"]]},{"id":"71c9f30.c75bb0c","type":"change","z":"405b0e15.987b5","name":"number","rules":[{"t":"set","p":"clearQueue","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1059,"y":1312,"wires":[["ec89cc15.4290d"]]},{"id":"4cf2da13.422914","type":"change","z":"405b0e15.987b5","name":"string empty","rules":[{"t":"set","p":"clearQueue","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1070,"y":1344,"wires":[["ec89cc15.4290d"]]},{"id":"a659095e.747ec8","type":"comment","z":"405b0e15.987b5","name":"clearQueue","info":"","x":932,"y":1184,"wires":[]},{"id":"125e183e.712788","type":"comment","z":"405b0e15.987b5","name":"sameVolume","info":"","x":533,"y":780,"wires":[]},{"id":"1d0cf1.7d7a431","type":"comment","z":"405b0e15.987b5","name":"Function isOnOff: set crossfade, set.mutestate, set.nightmode, set.dialoglevel","info":"","x":275,"y":1401,"wires":[]},{"id":"de572ef7.760e5","type":"comment","z":"405b0e15.987b5","name":"Function stringValidRegex","info":"","x":710,"y":1400,"wires":[]},{"id":"edc429e.84511d8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1435,"wires":[["c6711ce6.60eb3"]]},{"id":"279b575a.9ee288","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"xxxxx","payloadType":"str","x":89,"y":1595,"wires":[["1a292b71.4918f5"]]},{"id":"1a292b71.4918f5","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.set.mutestate","name":"","x":320,"y":1596,"wires":[[]]},{"id":"c6711ce6.60eb3","type":"change","z":"405b0e15.987b5","name":"missing payload","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":1435,"wires":[["1a292b71.4918f5"]]},{"id":"367617d5.262698","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1253,"y":1469,"wires":[]},{"id":"f217bacc.e5db98","type":"change","z":"405b0e15.987b5","name":"missing payload","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":822,"y":1434,"wires":[["99713993.3ffa58"]]},{"id":"99713993.3ffa58","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.set.sleeptimer","name":"","x":1211,"y":1509,"wires":[["367617d5.262698"]]},{"id":"c7cb2f59.9367f","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":660,"y":1434,"wires":[["f217bacc.e5db98"]]},{"id":"b81319cd.9a2db8","type":"inject","z":"405b0e15.987b5","name":"empty string","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":669,"y":1467,"wires":[["99713993.3ffa58"]]},{"id":"751c0616.130278","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":649,"y":1531,"wires":[["99713993.3ffa58"]]},{"id":"dda74621.72d778","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"5","payloadType":"str","x":1011,"y":1661,"wires":[["99713993.3ffa58"]]},{"id":"32b85b34.d3e674","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"55","payloadType":"str","x":1011,"y":1693,"wires":[["99713993.3ffa58"]]},{"id":"da68346b.1455b8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"70","payloadType":"str","x":1010,"y":1629,"wires":[["99713993.3ffa58"]]},{"id":"eafbcc04.6cb23","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0:01","payloadType":"str","x":1011,"y":1434,"wires":[["99713993.3ffa58"]]},{"id":"bc951718.5158e8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"00:70","payloadType":"str","x":1010,"y":1467,"wires":[["99713993.3ffa58"]]},{"id":"a5e473e7.6f235","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"70:00","payloadType":"str","x":1010,"y":1501,"wires":[["99713993.3ffa58"]]},{"id":"b9a68941.f61bc8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"70:10","payloadType":"str","x":1010,"y":1533,"wires":[["99713993.3ffa58"]]},{"id":"8f9eed28.28942","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1:00:10","payloadType":"str","x":1010,"y":1565,"wires":[["99713993.3ffa58"]]},{"id":"21ed4c30.887994","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"25:00:10","payloadType":"str","x":1020,"y":1597,"wires":[["99713993.3ffa58"]]},{"id":"e8ace5e2.b9f038","type":"comment","z":"405b0e15.987b5","name":"play track: only 4 in queue","info":"","x":150,"y":2481,"wires":[]},{"id":"249d4389.3ab61c","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.track","name":"","x":270,"y":2521,"wires":[[]]},{"id":"ceb5607.88cada","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"5","payloadType":"str","x":90,"y":2521,"wires":[["249d4389.3ab61c"]]},{"id":"f0b92a30.39c888","type":"comment","z":"405b0e15.987b5","name":"Function string2ValidInteger - remove track, play track, set subgain, set volume, adjust volume","info":"","x":325,"y":1706,"wires":[]},{"id":"61ca456c.8f0dcc","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"hallo","payloadType":"str","x":91,"y":1868,"wires":[["1db72fe2.0dc1c"]]},{"id":"8fd826cf.d13af8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"..,","payloadType":"str","x":91,"y":1900,"wires":[["1db72fe2.0dc1c"]]},{"id":"c4b4d655.88d0d8","type":"inject","z":"405b0e15.987b5","name":"string 10.2","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"10.2","payloadType":"str","x":101,"y":1932,"wires":[["1db72fe2.0dc1c"]]},{"id":"a8edc3c7.593ff","type":"inject","z":"405b0e15.987b5","name":"string 0","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"str","x":91,"y":1964,"wires":[["1db72fe2.0dc1c"]]},{"id":"65d6ad5.0235154","type":"inject","z":"405b0e15.987b5","name":"string -1","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"-1","payloadType":"str","x":462,"y":1967,"wires":[["1db72fe2.0dc1c"]]},{"id":"b79b5e32.9fa59","type":"inject","z":"405b0e15.987b5","name":"string 1000","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1000","payloadType":"str","x":462,"y":1999,"wires":[["1db72fe2.0dc1c"]]},{"id":"cb6aa4f5.8e2708","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":91,"y":1802,"wires":[["1db72fe2.0dc1c"]]},{"id":"81491bfb.f075c8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"num","x":452,"y":1871,"wires":[["1db72fe2.0dc1c"]]},{"id":"c9696106.cc8d1","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"-1","payloadType":"num","x":452,"y":1903,"wires":[["1db72fe2.0dc1c"]]},{"id":"e21ce154.97623","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1000","payloadType":"num","x":452,"y":1935,"wires":[["1db72fe2.0dc1c"]]},{"id":"9b2cf961.17ac68","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":462,"y":1741,"wires":[["59550970.81c598"]]},{"id":"75940a19.d2c914","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":462,"y":1773,"wires":[["d1a457fa.f8e198"]]},{"id":"59550970.81c598","type":"function","z":"405b0e15.987b5","name":"track null","func":"msg.payload = null\nreturn msg","outputs":1,"noerr":0,"x":602,"y":1741,"wires":[["1db72fe2.0dc1c"]]},{"id":"d1a457fa.f8e198","type":"function","z":"405b0e15.987b5","name":"track undefined","func":"msg.payload = undefined\nreturn msg","outputs":1,"noerr":0,"x":623,"y":1773,"wires":[["1db72fe2.0dc1c"]]},{"id":"73dbe9f6.e20a68","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":462,"y":1805,"wires":[["b3876824.3d86a8"]]},{"id":"b3876824.3d86a8","type":"function","z":"405b0e15.987b5","name":"track topic NaN","func":"msg.payload = NaN\nreturn msg","outputs":1,"noerr":0,"x":623,"y":1805,"wires":[["1db72fe2.0dc1c"]]},{"id":"1db72fe2.0dc1c","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.remove.tracks","name":"","x":680,"y":2001,"wires":[[]]},{"id":"3452281.abfe7d8","type":"change","z":"405b0e15.987b5","name":"missing payload","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":261,"y":1738,"wires":[["1db72fe2.0dc1c"]]},{"id":"e5947df6.e76b5","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1738,"wires":[["3452281.abfe7d8"]]},{"id":"c602b441.e12e08","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"10.2","payloadType":"num","x":452,"y":1838,"wires":[["1db72fe2.0dc1c"]]},{"id":"9c56d912.5ece68","type":"inject","z":"405b0e15.987b5","name":"empty string","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":110,"y":1467,"wires":[["1a292b71.4918f5"]]},{"id":"ceb42a96.940c78","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":90,"y":1532,"wires":[["1a292b71.4918f5"]]},{"id":"9217a400.8903f8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"x\":2}","payloadType":"json","x":90,"y":1564,"wires":[["1a292b71.4918f5"]]},{"id":"f269981e.2f4f68","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"100","payloadType":"num","x":90,"y":1499,"wires":[["1a292b71.4918f5"]]},{"id":"8e441c1f.6a5e2","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"100","payloadType":"num","x":649,"y":1499,"wires":[["99713993.3ffa58"]]},{"id":"f43e1c08.f0a27","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"x\":2}","payloadType":"json","x":650,"y":1563,"wires":[["99713993.3ffa58"]]},{"id":"ef434524.9bcc88","type":"comment","z":"405b0e15.987b5","name":"remove track: only 4 in queue","info":"","x":161,"y":2568,"wires":[]},{"id":"245ad3f.94fb22c","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.remove.tracks","name":"","x":300,"y":2681,"wires":[[]]},{"id":"baff3d4f.9cd08","type":"inject","z":"405b0e15.987b5","name":"empty string","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":110,"y":1770,"wires":[["1db72fe2.0dc1c"]]},{"id":"46680a83.ae78f4","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"x\":2}","payloadType":"json","x":90,"y":1834,"wires":[["1db72fe2.0dc1c"]]},{"id":"e03408aa.66a488","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":2601,"wires":[["6ae811a6.0d821"]]},{"id":"6ae811a6.0d821","type":"change","z":"405b0e15.987b5","name":"number of tracks 0","rules":[{"t":"set","p":"payload","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfTracks","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":2601,"wires":[["245ad3f.94fb22c"]]},{"id":"76db19f8.97afe8","type":"change","z":"405b0e15.987b5","name":"number of tracks1000","rules":[{"t":"set","p":"payload","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"numberOfTracks","pt":"msg","to":"1000","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":2633,"wires":[["245ad3f.94fb22c"]]},{"id":"cffa43a7.c291b","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":2633,"wires":[["76db19f8.97afe8"]]},{"id":"88ac2acb.ccbc78","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"5","payloadType":"str","x":89,"y":2665,"wires":[["245ad3f.94fb22c"]]},{"id":"46d32491.301dcc","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"16","payloadType":"num","x":90,"y":3099.62890625,"wires":[["972d052d.563518"]]},{"id":"6b205928.9c9248","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"-16","payloadType":"num","x":90,"y":3132.62890625,"wires":[["972d052d.563518"]]},{"id":"b5a11957.d3d958","type":"comment","z":"405b0e15.987b5","name":"REGEX_TIME: set.sleeptimer, seek, duration","info":"","x":1130,"y":1401,"wires":[]},{"id":"7f78f075.39649","type":"comment","z":"405b0e15.987b5","name":"REGEX_RADIO_ID: play.tunein","info":"","x":1091,"y":1746,"wires":[]},{"id":"9ebac40.af5754","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"x1324","payloadType":"str","x":1010,"y":1780,"wires":[["45c2fd0c.53ef44"]]},{"id":"1b5c558c.d983ca","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1234","payloadType":"str","x":1010,"y":1812,"wires":[["45c2fd0c.53ef44"]]},{"id":"db521193.f070e","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"s234b","payloadType":"str","x":1010,"y":1844,"wires":[["45c2fd0c.53ef44"]]},{"id":"45c2fd0c.53ef44","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.play.tunein","name":"","x":1187,"y":1844,"wires":[["344dfd7f.a5b222"]]},{"id":"344dfd7f.a5b222","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1230,"y":1809,"wires":[]},{"id":"5ce7cbdc.80aa54","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"xxxxxx","payloadType":"str","x":1010,"y":1941,"wires":[["778916ca.83b888"]]},{"id":"422b39e9.cf9608","type":"comment","z":"405b0e15.987b5","name":"REGEX_QUEUEMODES: set.queuemode","info":"","x":1120.990234375,"y":1906.37109375,"wires":[]},{"id":"69fa2eab.bd5d2","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Hello","payloadType":"str","x":1009.990234375,"y":1974.37109375,"wires":[["778916ca.83b888"]]},{"id":"778916ca.83b888","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.set.queuemode","name":"","x":1190,"y":1974,"wires":[["da6be5c3.3c7278"]]},{"id":"da6be5c3.3c7278","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1230,"y":1941,"wires":[]},{"id":"5f863684.7d8368","type":"sonos-universal","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"player.set.mutestate","state":"","stateType":"str","name":"","x":701,"y":180,"wires":[["31e041ce.eecf6e"]]},{"id":"bfd14e05.fc637","type":"inject","z":"25081f9e.f5f34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":131,"wires":[["21bbf8a2.91cf88"]]},{"id":"21bbf8a2.91cf88","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.stream.item","state":"Best Of Lovesongs","stateType":"str","name":"","x":336,"y":131,"wires":[["19467cf3.bf94e3"]]},{"id":"b00f076b.684228","type":"sonos-manage-mysonos","z":"25081f9e.f5f34","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.export.item","state":"ML10CC","stateType":"str","name":"","x":300,"y":298,"wires":[["6df55e35.988ef"]]},{"id":"1398f404.df1e1c","type":"inject","z":"25081f9e.f5f34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":298,"wires":[["b00f076b.684228"]]},{"id":"c56aab20.249108","type":"comment","z":"405b0e15.987b5","name":"dialog input state overrides msg (required string) - what is tested","info":"1. Command play http stream: string requried\n\n**SONOS payload string, blank**\n\n\"b5\" should play b5 as payload in node is empty string (ignored) but msg.payload provides valid stream\n\n\"payload blank\" should cause an error as payload in node is empty string (ignored) and inject does not provide a valid payload.\n\n**SONOS payload string, xxx**\nboth should throw error as xxxx is not a valid stream - error 714!\n\n\n**SONOS payload number empty**\n\n\"b5\" should play b5 as payload in node is empty number(ignored) but msg.payload provides valid stream\n\n\"payload blank\" should cause an error as payload in node is empty number (ignored) and inject does not provide a valid payload.\n\n\n**SONOS payload number 5**\nBoth should provide error as number is not allowed in this case\n","x":235,"y":417,"wires":[]},{"id":"3a0eeecf.c47412","type":"inject","z":"405b0e15.987b5","name":"b5 - will work","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payloadType":"str","x":110,"y":450,"wires":[["ea7bc807.d45528"]]},{"id":"ea7bc807.d45528","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.streamhttp","state":"","stateType":"str","name":"payload string, blank","x":160,"y":522,"wires":[[]]},{"id":"ad7b8090.188cb","type":"inject","z":"405b0e15.987b5","name":"payload blank","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":110,"y":482,"wires":[["ea7bc807.d45528"]]},{"id":"19c12f5a.011c11","type":"inject","z":"405b0e15.987b5","name":"payload blank","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":688,"y":481,"wires":[["2b8f9e91.fea832"]]},{"id":"2b8f9e91.fea832","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.streamhttp","state":"","stateType":"num","name":"payload number empty","x":720,"y":517,"wires":[[]]},{"id":"38beb025.82b2d","type":"inject","z":"405b0e15.987b5","name":"b5 - will work","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payloadType":"str","x":688,"y":449,"wires":[["2b8f9e91.fea832"]]},{"id":"bd8e495b.2002a8","type":"inject","z":"405b0e15.987b5","name":"payload blank","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":948,"y":482,"wires":[["9d0b07d.a5039f8"]]},{"id":"9d0b07d.a5039f8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.streamhttp","state":"5","stateType":"num","name":"payload number 5","x":988,"y":521,"wires":[[]]},{"id":"773c5587.4eb0bc","type":"inject","z":"405b0e15.987b5","name":"b5","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payloadType":"str","x":928,"y":450,"wires":[["9d0b07d.a5039f8"]]},{"id":"c6b5fe2f.85d31","type":"inject","z":"405b0e15.987b5","name":"b5","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://br-b5aktuell-live.cast.addradio.de/br/b5aktuell/live/mp3/128/stream.mp3","payloadType":"str","x":390,"y":450,"wires":[["58be376f.830db8"]]},{"id":"58be376f.830db8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.streamhttp","state":"xxx","stateType":"str","name":"payload string xxx","x":450,"y":522,"wires":[[]]},{"id":"37f43554.c771ca","type":"inject","z":"405b0e15.987b5","name":"payload blank","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":410,"y":482,"wires":[["58be376f.830db8"]]},{"id":"49757658.e870a8","type":"inject","z":"405b0e15.987b5","name":"2 - will work","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2","payloadType":"num","x":110,"y":600,"wires":[["9af9d13d.e8d84"]]},{"id":"9af9d13d.e8d84","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.track","state":"","stateType":"str","name":"payload string, blank","x":160,"y":672,"wires":[[]]},{"id":"2030cfe8.57d1f","type":"inject","z":"405b0e15.987b5","name":"payload blank","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"num","x":110,"y":632,"wires":[["9af9d13d.e8d84"]]},{"id":"61e31fb6.f2d4e","type":"inject","z":"405b0e15.987b5","name":"payload blank","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"num","x":688,"y":631,"wires":[["4e6de620.2dbf88"]]},{"id":"4e6de620.2dbf88","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.track","state":"","stateType":"num","name":"payload number empty","x":739,"y":670,"wires":[[]]},{"id":"97e84771.3569c8","type":"inject","z":"405b0e15.987b5","name":"2 - will work ","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2","payloadType":"num","x":688,"y":599,"wires":[["4e6de620.2dbf88"]]},{"id":"a60658ff.612488","type":"inject","z":"405b0e15.987b5","name":"payload blank - will work with 5","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"num","x":1008,"y":632,"wires":[["2e32467.17633ba"]]},{"id":"2e32467.17633ba","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.track","state":"5","stateType":"num","name":"payload number 5 - will work ","x":1018,"y":671,"wires":[[]]},{"id":"d13b86eb.ec1478","type":"inject","z":"405b0e15.987b5","name":"2 will work with 5","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2","payloadType":"num","x":958,"y":600,"wires":[["2e32467.17633ba"]]},{"id":"3dc065dc.f39caa","type":"inject","z":"405b0e15.987b5","name":"2","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2","payloadType":"num","x":390,"y":600,"wires":[["f1ec4e3a.3dcaa"]]},{"id":"f1ec4e3a.3dcaa","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.track","state":"xxx","stateType":"str","name":"payload string xxx","x":450,"y":672,"wires":[[]]},{"id":"ba9ec2ed.aa7f8","type":"inject","z":"405b0e15.987b5","name":"payload blank","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"num","x":410,"y":632,"wires":[["f1ec4e3a.3dcaa"]]},{"id":"5bec74e4.032c4c","type":"comment","z":"405b0e15.987b5","name":"State (msg.payload) = 7 messages","info":"","x":1026,"y":57,"wires":[]},{"id":"579bf6ce.f65ef8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":946,"y":89,"wires":[["3a8929c6.559576","46d5f934.48e588","a7be27f0.21bbc8","168f4a10.6c0b36","6d6fea22.18d794","4725df00.b7bc2","9f64945d.0bdd78"]]},{"id":"46d5f934.48e588","type":"change","z":"405b0e15.987b5","name":"xxxxx","rules":[{"t":"set","p":"payload","pt":"msg","to":"string xxxxx","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1103,"y":249,"wires":[["6d6fea22.18d794"]]},{"id":"168f4a10.6c0b36","type":"function","z":"405b0e15.987b5","name":"null","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":1103,"y":217,"wires":[["6d6fea22.18d794"]]},{"id":"a7be27f0.21bbc8","type":"function","z":"405b0e15.987b5","name":"NaN","func":"msg.payload = NaN;\nreturn msg;","outputs":1,"noerr":0,"x":1103,"y":185,"wires":[["6d6fea22.18d794"]]},{"id":"9f64945d.0bdd78","type":"change","z":"405b0e15.987b5","name":"number 5","rules":[{"t":"set","p":"payload","pt":"msg","to":"5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1113,"y":153,"wires":[["6d6fea22.18d794"]]},{"id":"4725df00.b7bc2","type":"change","z":"405b0e15.987b5","name":"boolean","rules":[{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1113,"y":121,"wires":[["6d6fea22.18d794"]]},{"id":"3a8929c6.559576","type":"change","z":"405b0e15.987b5","name":"empty","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1103,"y":89,"wires":[["6d6fea22.18d794"]]},{"id":"6d6fea22.18d794","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.play.export","state":"","stateType":"str","name":"","x":1278,"y":249,"wires":[["9f92c300.e72ae"]]},{"id":"9f92c300.e72ae","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1278,"y":209,"wires":[]},{"id":"acd707b3.93dc38","type":"comment","z":"405b0e15.987b5","name":"dialog input state overrides msg (required number/string) - what is tested","info":"1. Command play http stream: string requried\n\n**SONOS payload string, blank**\n\n\"b5\" should play b5 as payload in node is empty string (ignored) but msg.payload provides valid stream\n\n\"payload blank\" should cause an error as payload in node is empty string (ignored) and inject does not provide a valid payload.\n\n**SONOS payload string, xxx**\nboth should throw error as xxxx is not a valid stream - error 714!\n\n\n**SONOS payload number empty**\n\n\"b5\" should play b5 as payload in node is empty number(ignored) but msg.payload provides valid stream\n\n\"payload blank\" should cause an error as payload in node is empty number (ignored) and inject does not provide a valid payload.\n\n\n**SONOS payload number 5**\nBoth should provide error as number is not allowed in this case\n\n2. Command play track in queue: number required","x":255,"y":568,"wires":[]},{"id":"31319d9b.3cc682","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":845,"wires":[["bcccdf9.be39c2"]]},{"id":"420e1fee.2771c","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":877,"wires":[["b4b269f0.1aa7f8"]]},{"id":"8a9885f3.c3e388","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":916,"wires":[["9fadd5a8.3857c8"]]},{"id":"ae24f2cd.b5f48","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":948,"wires":[["fc66c449.e0eb78"]]},{"id":"875a1b48.45a1f8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":980,"wires":[["da13c3fc.1c5bc"]]},{"id":"cc7cc9ca.37ece8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1012,"wires":[["cbdbaf6.23a935"]]},{"id":"9dfa6fae.1b369","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1044,"wires":[["2df6203e.1bff4"]]},{"id":"b507cfc9.4d7ac","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1076,"wires":[["83eeb43b.415378"]]},{"id":"cebf59cc.b71c98","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1120,"wires":[["ff664a1e.3e6338"]]},{"id":"570d6fe.8b8949","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1152,"wires":[["5913b0e7.4e005"]]},{"id":"4e63150c.0b9c9c","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1184,"wires":[["1ffd9830.ec71b8"]]},{"id":"dc2ddd2e.a048a","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1216,"wires":[["35faf3a3.de329c"]]},{"id":"38cf7355.cb154c","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1248,"wires":[["a833b530.6713b8"]]},{"id":"c6b3fa44.db9888","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1280,"wires":[["55ef2881.06c478"]]},{"id":"8bb01aec.0e29c8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1312,"wires":[["8954dadd.55f548"]]},{"id":"39854ce9.d39074","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1344,"wires":[["c72353ac.cc08d"]]},{"id":"8167155.58e62e8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":946,"wires":[["1b8c8042.f4546"]]},{"id":"667a69fc.982248","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":978,"wires":[["79b0c290.63eaec"]]},{"id":"36fab2b1.f63fae","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":1010,"wires":[["9872b6f8.387178"]]},{"id":"ae3377fd.b8d678","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":1042,"wires":[["ef0d807.b9ff58"]]},{"id":"e377fef7.9977e","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":1074,"wires":[["834cab61.d72528"]]},{"id":"ff470764.080ad8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":1106,"wires":[["6a81463f.ae85b8"]]},{"id":"aa58e56d.25ccc8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":1186,"wires":[["fe42c076.54c0f"]]},{"id":"f7e88545.f6b348","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":1218,"wires":[["93c379c8.a09d78"]]},{"id":"6bc5726d.7eb3cc","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":1250,"wires":[["c812b0e7.50966"]]},{"id":"29732f6b.93b96","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":1282,"wires":[["a43b74d.bb1d988"]]},{"id":"eff2699.83b6698","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":1314,"wires":[["e1a43d1.a122bc"]]},{"id":"e67b7f84.084fe","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":522,"y":1346,"wires":[["d5a3125b.e29c3"]]},{"id":"3a8a5d7.5568ba2","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":922,"y":1216,"wires":[["9dae9513.6326e8"]]},{"id":"f6a83e27.0084f","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":922,"y":1248,"wires":[["d2520170.a9606"]]},{"id":"92eabf9.5366b4","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":922,"y":1280,"wires":[["42a9ea1b.680974"]]},{"id":"aac164aa.e45bf8","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":922,"y":1312,"wires":[["71c9f30.c75bb0c"]]},{"id":"5b1ad5f2.8f7c1c","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":922,"y":1344,"wires":[["4cf2da13.422914"]]},{"id":"aed8ab21.f03618","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1640,"wires":[["507848a3.410098"]]},{"id":"507848a3.410098","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.set.mutestate","state":"100","stateType":"str","name":"","x":320,"y":1640,"wires":[[]]},{"id":"a649ff45.4ce5a","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1200,"y":1560,"wires":[["23cc3ad5.7ec316"]]},{"id":"23cc3ad5.7ec316","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.set.sleeptimer","state":"xxx","stateType":"str","name":"","x":1260,"y":1600,"wires":[[]]},{"id":"935a31c7.0698c","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":660,"y":1600,"wires":[["4e28db69.bdc924"]]},{"id":"4e28db69.bdc924","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.set.sleeptimer","state":"100","stateType":"num","name":"","x":720,"y":1640,"wires":[[]]},{"id":"1a2e6c2e.c210d4","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.remove.tracks","state":"xxxx","stateType":"str","name":"","x":640,"y":2040,"wires":[[]]},{"id":"f98a13f3.5bb51","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":460,"y":2040,"wires":[["1a2e6c2e.c210d4"]]},{"id":"bcb9e92c.f48968","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1019,"y":2013,"wires":[["8628a3d4.8ddda"]]},{"id":"8628a3d4.8ddda","type":"sonos-universal","z":"405b0e15.987b5","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.set.queuemode","state":"xxxx","stateType":"str","name":"","x":1199,"y":2013,"wires":[[]]},{"id":"ec6a899a.01f038","type":"change","z":"25081f9e.f5f34","name":"restore from flow","rules":[{"t":"set","p":"payload","pt":"msg","to":"recentsnapshot","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":1114,"wires":[["2c292e27.39eec2"]]},{"id":"62160ac6.374614","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":590,"y":1440,"wires":[]},{"id":"f4dbfa86.5e9d98","type":"exec","z":"55805384.a4695c","command":"cd C:\\Users\\hekla\\.node-red && npm list --depth=0 --prod=true","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"node-red modules","x":410,"y":460,"wires":[["521daa34.222d64"],[],[]]},{"id":"7a6316ba.e7c498","type":"exec","z":"55805384.a4695c","command":"node -v","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"node version","x":390,"y":757,"wires":[["521daa34.222d64"],[],[]]},{"id":"feab903.943a37","type":"exec","z":"55805384.a4695c","command":"npm -v","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"npm version","x":390,"y":653,"wires":[["521daa34.222d64"],[],[]]},{"id":"75bf9c00.f65354","type":"exec","z":"55805384.a4695c","command":"npm list node-red -g","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"node-red","x":380,"y":555,"wires":[["521daa34.222d64"],[],[]]},{"id":"845e7dfc.926d1","type":"exec","z":"55805384.a4695c","command":"systeminfo | findstr /B /C:\"OS Name\" /C:\"OS Version\"","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"OS","x":370,"y":820,"wires":[["521daa34.222d64"],[],[]]},{"id":"5b05b7a6.0673f8","type":"inject","z":"55805384.a4695c","name":"Windows 10","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":130,"y":608,"wires":[["55ba76b9.ef24e8","4255088c.a35a78","fc0a59d7.ce4da8","af6b3a43.fea758","845e7dfc.926d1"]]},{"id":"521daa34.222d64","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":590,"y":620,"wires":[]},{"id":"55ba76b9.ef24e8","type":"delay","z":"55805384.a4695c","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":362,"y":608,"wires":[["feab903.943a37"]]},{"id":"4255088c.a35a78","type":"delay","z":"55805384.a4695c","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":360,"y":417,"wires":[["f4dbfa86.5e9d98"]]},{"id":"fc0a59d7.ce4da8","type":"delay","z":"55805384.a4695c","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":360,"y":512,"wires":[["75bf9c00.f65354"]]},{"id":"af6b3a43.fea758","type":"delay","z":"55805384.a4695c","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":358,"y":714,"wires":[["7a6316ba.e7c498"]]},{"id":"82b922ef.0e6be","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"5","payloadType":"num","x":516,"y":458,"wires":[["c72ce96a.fc3a88"]]},{"id":"c72ce96a.fc3a88","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.set.treble","state":"","stateType":"str","name":"","x":679,"y":477,"wires":[["2f85bc57.519a94"]]},{"id":"208ec037.4ba33","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"-5","payloadType":"num","x":516,"y":490,"wires":[["c72ce96a.fc3a88"]]},{"id":"724d2bfd.3355a4","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"5","payloadType":"num","x":516,"y":522,"wires":[["dff85d3a.5fb24"]]},{"id":"dff85d3a.5fb24","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.set.bass","state":"","stateType":"str","name":"","x":680,"y":537,"wires":[["2f85bc57.519a94"]]},{"id":"85b254c.d3af9a8","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"-5","payloadType":"num","x":516,"y":554,"wires":[["dff85d3a.5fb24"]]},{"id":"ef2edbd5.f068a8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.treble","state":"","stateType":"str","name":"","x":1080,"y":1030,"wires":[["d0c8fe54.43fc6"]]},{"id":"b9470db1.599dd","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"player.get.bass","state":"","stateType":"str","name":"","x":1080,"y":984,"wires":[["d0c8fe54.43fc6"]]},{"id":"92cbfb09.cf1898","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":900,"y":960,"wires":[["b9470db1.599dd","ef2edbd5.f068a8"]]},{"id":"dd2c3e8e.30945","type":"sonos-universal","z":"55805384.a4695c","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"group.get.state","state":"","stateType":"str","name":"","x":280,"y":280,"wires":[["8179e457.64c758"]]},{"id":"7726af61.64aa8","type":"inject","z":"55805384.a4695c","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":280,"wires":[["dd2c3e8e.30945","2d331b10.975e44"]]},{"id":"8179e457.64c758","type":"debug","z":"55805384.a4695c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":430,"y":280,"wires":[]},{"id":"2d331b10.975e44","type":"sonos-universal","z":"55805384.a4695c","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"household.get.groups","state":"","stateType":"str","name":"","x":300,"y":340,"wires":[["8179e457.64c758"]]},{"id":"2f85bc57.519a94","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":540,"wires":[]},{"id":"5052113f.0e8e5","type":"inject","z":"fcb24b59.997048","name":"insert_spotify_uri Track","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"spotify:track:5AdoS3gS47x40nBNlNmPQ8","payloadType":"str","x":1000,"y":1520,"wires":[["634d07c2.0a4e08"]]},{"id":"2c0f1d3a.1fce12","type":"inject","z":"fcb24b59.997048","name":"insert_spotify_uri TopTrack","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"spotify:artistTopTracks:1dfeR4HaWDbWqFHLkxsg1d","payloadType":"str","x":1010,"y":1552,"wires":[["634d07c2.0a4e08"]]},{"id":"bb67878e.ba03c8","type":"inject","z":"fcb24b59.997048","name":"insert_spotify_uri Album","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"spotify:album:1TSZDcvlPtAnekTaItI3qO","payloadType":"str","x":1000,"y":1584,"wires":[["634d07c2.0a4e08"]]},{"id":"533f7189.5c01d","type":"inject","z":"fcb24b59.997048","name":"insert_spotify_uri Playlist","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"spotify:user:spotify:playlist:37i9dQZEVXbMDoHDwVN2tF","payloadType":"str","x":1010,"y":1616,"wires":[["634d07c2.0a4e08"]]},{"id":"a1883693.ffe118","type":"comment","z":"fcb24b59.997048","name":"Queue Spotify","info":"","x":970,"y":1487,"wires":[],"icon":"node-red/alert.svg"},{"id":"634d07c2.0a4e08","type":"sonos-universal","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.queue.urispotify","state":"","stateType":"str","name":"","x":1245,"y":1584,"wires":[["4202ee3.f67c41"]]},{"id":"4202ee3.f67c41","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1265,"y":1544,"wires":[]},{"id":"fd4cdf12.5c66c","type":"comment","z":"fcb24b59.997048","name":"Queue uri","info":"","x":100,"y":1527,"wires":[],"icon":"node-red/alert.svg"},{"id":"7655fe08.7b50e","type":"inject","z":"fcb24b59.997048","name":"insert_uri Music Library - song","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payloadType":"str","x":160,"y":1560,"wires":[["cfad7644.d60bc8"]]},{"id":"2617f4e8.f78eac","type":"inject","z":"fcb24b59.997048","name":"insert_uri http","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"https://archive.org/download/testmp3testfile/mpthreetest.mp3","payloadType":"str","x":110,"y":1600,"wires":[["cfad7644.d60bc8"]]},{"id":"cfad7644.d60bc8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.queue.uri","state":"","stateType":"str","name":"","x":400,"y":1580,"wires":[["9c70dfd0.bab1f"]]},{"id":"6039fa1b.962394","type":"sonos-universal","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"group.queue.urispotify","state":"","stateType":"str","name":"","x":430,"y":2160,"wires":[["b275f390.cf034"]]},{"id":"9838f442.364738","type":"sonos-universal","z":"99e6906e.c69df","confignode":"88e9fa70.4a53e8","compatibilityMode":true,"command":"group.queue.uri","state":"","stateType":"str","name":"","x":1030,"y":2160,"wires":[["320981c5.e9d16e"]]},{"id":"b275f390.cf034","type":"debug","z":"99e6906e.c69df","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":450,"y":2120,"wires":[]},{"id":"475d6781.8bc118","type":"inject","z":"405b0e15.987b5","name":"insert_uri  song from ML","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"x-file-cifs://nas2019/Multimedia/Music/MyMusic/Rihanna/Diamonds/Rihanna%20-%20Diamonds.mp3","payloadType":"str","x":160,"y":3340,"wires":[["63e66953.404638"]]},{"id":"53f30fda.bee7f","type":"inject","z":"405b0e15.987b5","name":"insert_uri  album from ML","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"x-rincon-playlist:RINCON_000E58FE3AEA01400#A:ALBUM/Diamond%20Life","payloadType":"str","x":170,"y":3373,"wires":[["63e66953.404638"]]},{"id":"a5a06762.766a88","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":431,"y":3320,"wires":[]},{"id":"3dd81997.d83c36","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"xxxx","payloadType":"str","x":91,"y":3539,"wires":[["6a0d3d8e.df1a64"]]},{"id":"4e00f3a.2b9be0c","type":"comment","z":"405b0e15.987b5","name":"insert_uri ","info":"","x":100,"y":3502,"wires":[]},{"id":"581e30c2.f457b","type":"inject","z":"405b0e15.987b5","name":"emty","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":91,"y":3574,"wires":[["6a0d3d8e.df1a64"]]},{"id":"508b3419.99bfdc","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":351,"y":3566,"wires":[]},{"id":"3668d87e.c54918","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"12xdgt","payloadType":"str","x":91,"y":3607,"wires":[["6a0d3d8e.df1a64"]]},{"id":"f8b57f3c.b48ac","type":"comment","z":"405b0e15.987b5","name":"insert_spotify_uri","info":"","x":121,"y":3719,"wires":[]},{"id":"68b5134d.68f19c","type":"inject","z":"405b0e15.987b5","name":"spotify wrong syntax","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"spotify:xxxxxx","payloadType":"str","x":130,"y":3822,"wires":[["70993ef3.74444"]]},{"id":"65dfafec.59375","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":90.9913330078125,"y":3755.998260498047,"wires":[["70993ef3.74444"]]},{"id":"f0a3d5fb.a23c08","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"xxxxxx","payloadType":"str","x":90,"y":3789,"wires":[["70993ef3.74444"]]},{"id":"f8f00adb.1f8488","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":451,"y":3811,"wires":[]},{"id":"9c04204.1d721e","type":"inject","z":"405b0e15.987b5","name":"spotify wrong syntax","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"spotify:album:1TSZ","payloadType":"str","x":130.9913330078125,"y":3854.998260498047,"wires":[["70993ef3.74444"]]},{"id":"47b8beb.92fbc4","type":"inject","z":"405b0e15.987b5","name":"spotify wrong syntax","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"spotify:user:spotify:playlist:","payloadType":"str","x":130.9913330078125,"y":3888.998260498047,"wires":[["70993ef3.74444"]]},{"id":"cecf9187.19edd","type":"comment","z":"405b0e15.987b5","name":"FAILURE","info":"","x":66,"y":3439,"wires":[],"icon":"node-red/alert.svg"},{"id":"63e66953.404638","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.queue.uri","state":"","stateType":"str","name":"","x":401,"y":3360,"wires":[["a5a06762.766a88"]]},{"id":"6a0d3d8e.df1a64","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.queue.uri","state":"","stateType":"str","name":"","x":321,"y":3607,"wires":[["508b3419.99bfdc"]]},{"id":"70993ef3.74444","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.queue.urispotify","state":"","stateType":"str","name":"","x":421,"y":3854,"wires":[["f8f00adb.1f8488"]]},{"id":"3aecde41.b6b3f2","type":"comment","z":"405b0e15.987b5","name":"working","info":"","x":56,"y":3300,"wires":[],"icon":"node-red/alert.svg"},{"id":"e8f37cb1.2dc0b","type":"comment","z":"fcb24b59.997048","name":"Spotify","info":"","x":88,"y":1860,"wires":[]},{"id":"b1ed0d26.19576","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Best of Prime Music","payloadType":"str","x":400,"y":2207,"wires":[["6a9f4e84.9bc77"]]},{"id":"f253c956.a8d4f8","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Arabella","payloadType":"str","x":98,"y":2178,"wires":[["6a9f4e84.9bc77"]]},{"id":"24368ecf.eca022","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Bayern 3","payloadType":"str","x":98,"y":2210,"wires":[["b6c76ac1.8dc558"]]},{"id":"b6c76ac1.8dc558","type":"change","z":"fcb24b59.997048","name":"volume 30","rules":[{"t":"set","p":"volume","pt":"msg","to":"30","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":135,"y":2246,"wires":[["6a9f4e84.9bc77"]]},{"id":"6b60fbf3.b74c54","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":495,"y":2456,"wires":[]},{"id":"92abce9e.85b6f","type":"comment","z":"fcb24b59.997048","name":"TuneIn","info":"","x":88,"y":2144,"wires":[]},{"id":"a609fcbf.df602","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"20 Jahre Napster","payloadType":"str","x":118,"y":2065,"wires":[["6a9f4e84.9bc77"]]},{"id":"c9c085fa.fb9ab8","type":"comment","z":"fcb24b59.997048","name":"Napster","info":"","x":88,"y":1967,"wires":[]},{"id":"fb76baff.bb2398","type":"comment","z":"fcb24b59.997048","name":"Amazon","info":"","x":369,"y":2142,"wires":[]},{"id":"20e5cf37.08a8f","type":"comment","z":"fcb24b59.997048","name":"Radioplayer","info":"","x":109,"y":2287,"wires":[]},{"id":"f5d29aa.8d06168","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1A Fitness Hits","payloadType":"str","x":119,"y":2319,"wires":[["6a9f4e84.9bc77"]]},{"id":"777e72b2.15896c","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Daily Mix","payloadType":"str","x":98,"y":1893,"wires":[["6a9f4e84.9bc77"]]},{"id":"7ebbde0d.b2b65","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Best Of Love","payloadType":"str","x":380,"y":2239,"wires":[["6a9f4e84.9bc77"]]},{"id":"854c3919.8dd678","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"GloomySunday","payloadType":"str","x":118,"y":1925,"wires":[["6a9f4e84.9bc77"]]},{"id":"fa734603.0f4648","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"The Best Songs of the ","payloadType":"str","x":138,"y":2097,"wires":[["6a9f4e84.9bc77"]]},{"id":"ecee0b27.b5a928","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Dust in the Wind","payloadType":"str","x":118,"y":2001,"wires":[["6a9f4e84.9bc77"]]},{"id":"2968429.14ee6be","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"The Best Of Sade","payloadType":"str","x":128,"y":2033,"wires":[["6a9f4e84.9bc77"]]},{"id":"2a0aed89.ba2082","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Blowin' in the Wind","payloadType":"str","x":400,"y":2175,"wires":[["6a9f4e84.9bc77"]]},{"id":"6a9f4e84.9bc77","type":"sonos-manage-mysonos","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.export.item","state":"","stateType":"str","name":"","x":495,"y":2051,"wires":[["fbf15b76.cdbef8"]]},{"id":"fbf15b76.cdbef8","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.play.export","name":"any","x":677,"y":2051,"wires":[["7684a07.077616"]]},{"id":"5d29c399.3213fc","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":393,"y":1894,"wires":[["22bba9be.293d36"]]},{"id":"9c2d9076.4e8a3","type":"sonos-manage-mysonos","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.queue.item","state":"SonosMix","stateType":"str","name":"","x":301,"y":2478,"wires":[["6b60fbf3.b74c54"]]},{"id":"ed009658.1c4988","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Angi","payloadType":"str","x":712,"y":2161,"wires":[["6a9f4e84.9bc77"]]},{"id":"2b5e32b5.baba2e","type":"comment","z":"fcb24b59.997048","name":"Music Library","info":"","x":732,"y":2128,"wires":[],"icon":"node-red/alert.svg"},{"id":"b0881aed.fd3228","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"ML10CC","payloadType":"str","x":722,"y":2193,"wires":[["6a9f4e84.9bc77"]]},{"id":"b95a5045.5f116","type":"comment","z":"fcb24b59.997048","name":"Sonos Playlists","info":"","x":392,"y":2301,"wires":[],"icon":"node-red/alert.svg"},{"id":"bd35776a.113c88","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"SonosMix","payloadType":"str","x":372,"y":2334,"wires":[["6a9f4e84.9bc77"]]},{"id":"7684a07.077616","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":799,"y":2051,"wires":[]},{"id":"353daf1f.8c61","type":"comment","z":"fcb24b59.997048","name":"Simple","info":"","x":89,"y":2376,"wires":[],"icon":"node-red/alert.svg"},{"id":"5f66670.413e398","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Best Of Love","payloadType":"str","x":109,"y":2414,"wires":[["ba055dee.63632"]]},{"id":"f9e84d92.4d50b","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Arabella","payloadType":"str","x":99,"y":2446,"wires":[["ba055dee.63632"]]},{"id":"22bba9be.293d36","type":"sonos-manage-mysonos","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.get.items","name":"","x":566,"y":1894,"wires":[["304e3fd7.0b1e7"]]},{"id":"304e3fd7.0b1e7","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":731,"y":1894,"wires":[]},{"id":"c07195a5.47a3d8","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":2478,"wires":[["9c2d9076.4e8a3"]]},{"id":"6cb68b39.a5fc34","type":"comment","z":"fcb24b59.997048","name":"Get","info":"","x":384,"y":1861,"wires":[],"icon":"node-red/alert.svg"},{"id":"11c9337b.0b2dfd","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":721,"y":2328,"wires":[["7ce289e0.9bd918"]]},{"id":"5cc2fc44.1e3274","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":721,"y":2281,"wires":[["7be8e64.d1b2e18"]]},{"id":"ba055dee.63632","type":"sonos-manage-mysonos","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.stream.item","name":"","x":305,"y":2431,"wires":[["6b60fbf3.b74c54"]]},{"id":"36ebcfa1.214eb","type":"comment","z":"fcb24b59.997048","name":"Music Library Direct","info":"","x":752,"y":2241,"wires":[],"icon":"node-red/alert.svg"},{"id":"7ce289e0.9bd918","type":"sonos-manage-mysonos","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"library.get.playlists","name":"","x":902,"y":2328,"wires":[["4ab0a402.28de0c"]]},{"id":"4ab0a402.28de0c","type":"debug","z":"fcb24b59.997048","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1088,"y":2280,"wires":[]},{"id":"7be8e64.d1b2e18","type":"sonos-manage-mysonos","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"library.queue.playlist","state":"ML10CC","stateType":"str","name":"","x":902,"y":2281,"wires":[["4ab0a402.28de0c"]]},{"id":"a0a85bdb.ac0618","type":"sonos-manage-mysonos","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.export.item","state":"Angi","stateType":"str","name":"","x":622,"y":1957,"wires":[["fbf15b76.cdbef8"]]},{"id":"abc1e41a.030218","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":440,"y":1957,"wires":[["a0a85bdb.ac0618"]]},{"id":"63dda4d2.045f6c","type":"inject","z":"fcb24b59.997048","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":442,"y":2001,"wires":[["699e1b43.9ae114"]]},{"id":"699e1b43.9ae114","type":"sonos-manage-mysonos","z":"fcb24b59.997048","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"mysonos.export.item","state":"Best of Prime Music","stateType":"str","name":"","x":622,"y":2001,"wires":[["fbf15b76.cdbef8"]]},{"id":"a143043a.2cc1d8","type":"comment","z":"fcb24b59.997048","name":"My Sonos","info":"","x":65,"y":1820,"wires":[]},{"id":"406a8660.698d78","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":2200,"wires":[["e508b566.6c2f18"]]},{"id":"a3193f80.c3c76","type":"comment","z":"405b0e15.987b5","name":"save.queue with empty queue","info":"","x":160,"y":2166,"wires":[]},{"id":"c89e7058.12d1c","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.save.queue","state":"xxxxx","stateType":"str","name":"","x":471,"y":2200,"wires":[["9ebe75ea.d36118"]]},{"id":"9ebe75ea.d36118","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":632,"y":2200,"wires":[]},{"id":"e508b566.6c2f18","type":"sonos-universal","z":"405b0e15.987b5","confignode":"88e9fa70.4a53e8","compatibilityMode":false,"command":"group.clear.queue","name":"","x":270,"y":2200,"wires":[["c89e7058.12d1c"]]},{"id":"a23692a3.cd653","type":"comment","z":"405b0e15.987b5","name":"stereopair - bath is coordinator, variable hidden","info":"","x":840,"y":2752,"wires":[]},{"id":"c2af5623.df8ca8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"group.play.queue","state":"","stateType":"str","name":"","x":1150,"y":2793,"wires":[["5a759539.d7f8cc"]]},{"id":"db9eb237.f5b71","type":"change","z":"405b0e15.987b5","name":"variable (hidden) as name","rules":[{"t":"set","p":"playerName","pt":"msg","to":"variable","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":2793,"wires":[["c2af5623.df8ca8"]]},{"id":"85a33abc.67e618","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":740,"y":2793,"wires":[["db9eb237.f5b71"]]},{"id":"62c18b4.d42c274","type":"inject","z":"405b0e15.987b5","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":736,"y":2855,"wires":[["c7e47b54.8240c8"]]},{"id":"c7e47b54.8240c8","type":"sonos-universal","z":"405b0e15.987b5","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"group.play.queue","state":"","stateType":"str","name":"","x":911,"y":2855,"wires":[["5a759539.d7f8cc"]]},{"id":"5a759539.d7f8cc","type":"debug","z":"405b0e15.987b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1166,"y":2855,"wires":[]},{"id":"21b568cb.202238","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"group.get.state","state":"","stateType":"str","name":"","x":280,"y":219,"wires":[["89e00831.3f1cf8"]]},{"id":"d8cfbd48.7e93d","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"household.get.groups","name":"","x":300,"y":56,"wires":[["89e00831.3f1cf8"]]},{"id":"88f286e3.876d48","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":56,"wires":[["d8cfbd48.7e93d"]]},{"id":"1976b893.7ddf47","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":219,"wires":[["21b568cb.202238"]]},{"id":"89e00831.3f1cf8","type":"debug","z":"1838a12.05f7f5f","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1069,"y":409,"wires":[]},{"id":"a6e2d7d5.c34558","type":"comment","z":"1838a12.05f7f5f","name":"Bad + variable (hidden) as stereopair","info":"","x":145,"y":20,"wires":[]},{"id":"4891a22a.73642c","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":312,"wires":[["13e00f22.34c021"]]},{"id":"13e00f22.34c021","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"group.play.queue","state":"","stateType":"str","name":"","x":289,"y":312,"wires":[["89e00831.3f1cf8"]]},{"id":"8cb50ae4.e32908","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":265,"wires":[["4b94d8be.b7c728"]]},{"id":"4b94d8be.b7c728","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"group.get.queue","state":"","stateType":"str","name":"","x":279,"y":265,"wires":[["89e00831.3f1cf8"]]},{"id":"d854c278.5f01b","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":1035,"wires":[["99e78d18.78234"]]},{"id":"19efb8a4.abf1c7","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"group.play.queue","state":"","stateType":"str","name":"","x":494,"y":1035,"wires":[["89e00831.3f1cf8"]]},{"id":"b61db6ef.973c18","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":995,"wires":[["dcf6cee9.1ffb7"]]},{"id":"1e955563.af849b","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"group.get.queue","state":"","stateType":"str","name":"","x":489,"y":995,"wires":[["89e00831.3f1cf8"]]},{"id":"dcf6cee9.1ffb7","type":"change","z":"1838a12.05f7f5f","name":"Bad","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":233,"y":995,"wires":[["1e955563.af849b"]]},{"id":"99e78d18.78234","type":"change","z":"1838a12.05f7f5f","name":"Bad","rules":[{"t":"set","p":"playerName","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":229,"y":1035,"wires":[["19efb8a4.abf1c7"]]},{"id":"bd0fb405.2ead88","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":1163,"wires":[["7f08fb52.91f594"]]},{"id":"4a1912e3.c050bc","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"group.play.queue","state":"","stateType":"str","name":"","x":494,"y":1163,"wires":[["89e00831.3f1cf8"]]},{"id":"81378aec.c17798","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":1115,"wires":[["de712eae.8fd19"]]},{"id":"871c187.b606ae8","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"group.get.queue","state":"","stateType":"str","name":"","x":489,"y":1115,"wires":[["89e00831.3f1cf8"]]},{"id":"de712eae.8fd19","type":"change","z":"1838a12.05f7f5f","name":"variable","rules":[{"t":"set","p":"playerName","pt":"msg","to":"variable","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":243,"y":1115,"wires":[["871c187.b606ae8"]]},{"id":"7f08fb52.91f594","type":"change","z":"1838a12.05f7f5f","name":"variable","rules":[{"t":"set","p":"playerName","pt":"msg","to":"variable","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":239,"y":1163,"wires":[["4a1912e3.c050bc"]]},{"id":"743465a7.83508c","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":711,"wires":[["14d1541c.9f351c"]]},{"id":"14d1541c.9f351c","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"group.play.queue","state":"","stateType":"str","name":"","x":289,"y":711,"wires":[["89e00831.3f1cf8"]]},{"id":"386ed8b1.df4418","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":665,"wires":[["959c2572.b1e2e8"]]},{"id":"959c2572.b1e2e8","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"group.get.queue","state":"","stateType":"str","name":"","x":279,"y":665,"wires":[["89e00831.3f1cf8"]]},{"id":"d2385c45.13083","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":780,"y":100,"wires":[["91ad0d05.5796c"]]},{"id":"91ad0d05.5796c","type":"sonos-manage-mysonos","z":"1838a12.05f7f5f","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"library.queue.playlist","state":"ML10CC","stateType":"str","name":"","x":980,"y":100,"wires":[[]]},{"id":"4a325530.1531ec","type":"comment","z":"1838a12.05f7f5f","name":"Bath visible","info":"","x":109,"y":186,"wires":[]},{"id":"b92eb904.061e28","type":"comment","z":"1838a12.05f7f5f","name":"failure variable invisible  - should throw error","info":"","x":199,"y":585,"wires":[]},{"id":"97761ce.0a9d8e","type":"comment","z":"1838a12.05f7f5f","name":"playerName Bad visible","info":"","x":139,"y":959,"wires":[]},{"id":"978d7d49.c9a58","type":"comment","z":"1838a12.05f7f5f","name":"failure: playerName variable invisible","info":"","x":179,"y":1081,"wires":[]},{"id":"c122e424.5c3938","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":618,"wires":[["2a9e3c84.b11764"]]},{"id":"2a9e3c84.b11764","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"group.get.state","state":"","stateType":"str","name":"","x":280,"y":618,"wires":[["89e00831.3f1cf8"]]},{"id":"5b1b6db.8646194","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":360,"wires":[["61d1432e.f9daac"]]},{"id":"61d1432e.f9daac","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"player.get.led","state":"","stateType":"str","name":"","x":280,"y":360,"wires":[["89e00831.3f1cf8"]]},{"id":"f59333fe.1e1d1","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"player.set.led","state":"off","stateType":"str","name":"","x":270,"y":410,"wires":[["89e00831.3f1cf8"]]},{"id":"21f4fe3b.7b87a2","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":410,"wires":[["f59333fe.1e1d1"]]},{"id":"d31fd54e.a029c8","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":460,"wires":[["4f747f7b.eee61"]]},{"id":"4f747f7b.eee61","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"player.get.volume","state":"","stateType":"str","name":"","x":290,"y":460,"wires":[["89e00831.3f1cf8"]]},{"id":"c3eb66bf.3d19e8","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":508,"wires":[["a6fff255.1a5be"]]},{"id":"a6fff255.1a5be","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"player.set.volume","state":"15","stateType":"str","name":"","x":290,"y":508,"wires":[["89e00831.3f1cf8"]]},{"id":"26833b13.93d8d4","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":760,"wires":[["25feb4f6.d6903c"]]},{"id":"25feb4f6.d6903c","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"player.get.led","state":"","stateType":"str","name":"","x":280,"y":760,"wires":[["89e00831.3f1cf8"]]},{"id":"c334e580.cfa2b8","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"player.set.led","state":"off","stateType":"str","name":"","x":270,"y":810,"wires":[["89e00831.3f1cf8"]]},{"id":"eea6da10.eb4988","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":810,"wires":[["c334e580.cfa2b8"]]},{"id":"9323397d.cefcf8","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":860,"wires":[["4bd9b06d.6d021"]]},{"id":"4bd9b06d.6d021","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"player.get.volume","state":"","stateType":"str","name":"","x":290,"y":860,"wires":[["89e00831.3f1cf8"]]},{"id":"5683f11d.9ba4d","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":908,"wires":[["338a7a5e.6ce0a6"]]},{"id":"338a7a5e.6ce0a6","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"2113e9bb.c52236","compatibilityMode":false,"command":"player.set.volume","state":"15","stateType":"str","name":"","x":290,"y":908,"wires":[["89e00831.3f1cf8"]]},{"id":"332414bb.4776cc","type":"inject","z":"1838a12.05f7f5f","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":99,"y":543,"wires":[["d0919e9f.37087"]]},{"id":"d0919e9f.37087","type":"sonos-universal","z":"1838a12.05f7f5f","confignode":"32a98882.56e1c8","compatibilityMode":false,"command":"player.set.treble","state":"7","stateType":"str","name":"","x":279,"y":543,"wires":[["89e00831.3f1cf8"]]},{"id":"62bf777c.429c78","type":"inject","z":"fcb24b59.997048","name":"","props":[{"p":"payload","v":"","vt":"date"},{"p":"topic","v":"","vt":"string"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":98,"y":216,"wires":[["1fb29405.61b5bc"]]},{"id":"1fb29405.61b5bc","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.seek.delta","state":"-00:00:20","stateType":"str","name":"","x":265,"y":216,"wires":[["ca7a828f.03a9a"]]},{"id":"f1fcb1b6.c13be","type":"sonos-universal","z":"fcb24b59.997048","confignode":"8d44022c.adb65","compatibilityMode":false,"command":"group.get.actions","state":"","stateType":"str","name":"","x":1086,"y":277,"wires":[["3297fb94.ce7334"]]}]